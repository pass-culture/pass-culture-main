name: '[Deployment] Create a hotfix release'

on:
  workflow_dispatch:
    inputs:
      releaseNumber:
        description: "Numéro de la release à hotfix (ex: 200)"
        required: true
        type: string
      releaseVersion:
        description: "Nom du hotfix (ex: 200.0.2)"
        required: true
        type: string

env:
  MAINTENANCE_BRANCH: maint/v${{ github.event.inputs.releaseNumber }}

jobs:
  build-and-tag-version:
    name: Build and tag version
    uses: ./.github/workflows/reusable-build-and-tag.yml
    secrets: inherit
    with:
      base_ref: ${{ env.MAINTENANCE_BRANCH }}
      tag_number: ${{ github.event.inputs.releaseVersion }}
