name: "3 [on_workflow] Publish Github prerelease"

on:
  workflow_call:
    inputs:
      tag_name:
        required: true
        type: string
  workflow_dispatch:
    inputs:
      tag_name:
        description: "Tag name (ex: v378.0.2)"
        required: true
        type: string

permissions: write-all

jobs:
  publish-github-prerelease:
    runs-on: ubuntu-22.04
    env:
      RELEASE_TAG: ${{inputs.tag_name}}
    steps:
      - uses: actions/checkout@v6
      - name: Publish Github prerelease
        run: |
          gh release edit "$RELEASE_TAG" \
          --prerelease=false \
          --latest \
          --verify-tag
