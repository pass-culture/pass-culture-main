/*! For license information please see ui-kit-form-SelectAutocomplete-SelectAutocomplete-stories.0f9df164.iframe.bundle.js.LICENSE.txt */
(self.webpackChunkpass_culture_pro=self.webpackChunkpass_culture_pro||[]).push([[5247],{"./node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{Z:function(){return _objectWithoutProperties}});var _objectWithoutPropertiesLoose_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/objectWithoutPropertiesLoose.js");function _objectWithoutProperties(source,excluded){if(null==source)return{};var key,i,target=(0,_objectWithoutPropertiesLoose_js__WEBPACK_IMPORTED_MODULE_0__.Z)(source,excluded);if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++)key=sourceSymbolKeys[i],excluded.indexOf(key)>=0||Object.prototype.propertyIsEnumerable.call(source,key)&&(target[key]=source[key])}return target}},"./node_modules/@babel/runtime/helpers/esm/objectWithoutPropertiesLoose.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";function _objectWithoutPropertiesLoose(source,excluded){if(null==source)return{};var key,i,target={},sourceKeys=Object.keys(source);for(i=0;i<sourceKeys.length;i++)key=sourceKeys[i],excluded.indexOf(key)>=0||(target[key]=source[key]);return target}__webpack_require__.d(__webpack_exports__,{Z:function(){return _objectWithoutPropertiesLoose}})},"./node_modules/@babel/runtime/helpers/esm/toConsumableArray.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{Z:function(){return _toConsumableArray}});var arrayLikeToArray=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/arrayLikeToArray.js");var unsupportedIterableToArray=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/unsupportedIterableToArray.js");function _toConsumableArray(arr){return function _arrayWithoutHoles(arr){if(Array.isArray(arr))return(0,arrayLikeToArray.Z)(arr)}(arr)||function _iterableToArray(iter){if("undefined"!=typeof Symbol&&null!=iter[Symbol.iterator]||null!=iter["@@iterator"])return Array.from(iter)}(arr)||(0,unsupportedIterableToArray.Z)(arr)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},"./src/ui-kit/form/SelectAutocomplete/SelectAutocomplete.stories.tsx":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Default:function(){return Default},WithMaxDisplayOptions:function(){return WithMaxDisplayOptions},__namedExportsOrder:function(){return __namedExportsOrder}});var _w_pass_culture_main_pass_culture_main_pro_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/objectSpread2.js"),formik__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/formik/dist/formik.esm.js"),yup__WEBPACK_IMPORTED_MODULE_2__=(__webpack_require__("./node_modules/react/index.js"),__webpack_require__("./node_modules/yup/index.esm.js")),_SelectAutocomplete__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./src/ui-kit/form/SelectAutocomplete/SelectAutocomplete.tsx"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/react/jsx-runtime.js");__webpack_exports__.default={title:"ui-kit/forms/SelectAutocomplete",component:_SelectAutocomplete__WEBPACK_IMPORTED_MODULE_3__.Z};var validationSchema=yup__WEBPACK_IMPORTED_MODULE_2__.Ry().shape({departement:yup__WEBPACK_IMPORTED_MODULE_2__.Z_().required("Veuillez renseigner un département"),"search-departement":yup__WEBPACK_IMPORTED_MODULE_2__.Z_().when("departement",(function(departement,schema){return schema.test({name:"search-departement-invalid",message:"error",test:departement?function(){return!1}:function(){return!0}})}))}),Template=function Template(args){return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(formik__WEBPACK_IMPORTED_MODULE_0__.J9,{initialValues:args.initialValues,onSubmit:function onSubmit(){},validationSchema:validationSchema,children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(_SelectAutocomplete__WEBPACK_IMPORTED_MODULE_3__.Z,(0,_w_pass_culture_main_pass_culture_main_pro_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_5__.Z)({},args))})};Template.displayName="Template";var defaultProps={label:"Département",name:"departement",options:[{value:"01",label:"Ain"},{value:"02",label:"Aisne"},{value:"03",label:"Allier"},{value:"04",label:"Alpes-de-Haute-Provence test de libellé très long"},{value:"05",label:"Hautes-Alpes"},{value:"06",label:"Alpes-Maritimes"},{value:"07",label:"Ardèche"},{value:"08",label:"Ardennes"},{value:"09",label:"Ariège"},{value:"10",label:"Aube"},{value:"11",label:"Aude"},{value:"12",label:"Aveyron"},{value:"13",label:"Bouches-du-Rhône"},{value:"14",label:"Calvados"},{value:"15",label:"Cantal"}],initialValues:{departement:""},hideFooter:!1,isOptional:!1,smallLabel:!1,disabled:!1,filterLabel:void 0},Default=Template.bind({});Default.args=defaultProps;var WithMaxDisplayOptions=Template.bind({});WithMaxDisplayOptions.args=(0,_w_pass_culture_main_pass_culture_main_pro_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_5__.Z)((0,_w_pass_culture_main_pass_culture_main_pro_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_5__.Z)({},defaultProps),{},{maxDisplayOptions:2});var __namedExportsOrder=["Default","WithMaxDisplayOptions"]},"./src/ui-kit/form/SelectAutocomplete/SelectAutocomplete.tsx":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{Z:function(){return SelectAutocomplete_SelectAutocomplete}});var defineProperty=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/defineProperty.js"),toConsumableArray=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/toConsumableArray.js"),objectSpread2=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/objectSpread2.js"),slicedToArray=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/slicedToArray.js"),classnames=__webpack_require__("./node_modules/classnames/index.js"),classnames_default=__webpack_require__.n(classnames),formik_esm=__webpack_require__("./node_modules/formik/dist/formik.esm.js"),react=__webpack_require__("./node_modules/react/index.js"),shared=__webpack_require__("./src/ui-kit/form/shared/index.ts"),AutocompleteList=__webpack_require__("./src/ui-kit/form/shared/AutocompleteList/AutocompleteList.tsx"),injectStylesIntoStyleTag=__webpack_require__("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),injectStylesIntoStyleTag_default=__webpack_require__.n(injectStylesIntoStyleTag),styleDomAPI=__webpack_require__("./node_modules/style-loader/dist/runtime/styleDomAPI.js"),styleDomAPI_default=__webpack_require__.n(styleDomAPI),insertBySelector=__webpack_require__("./node_modules/style-loader/dist/runtime/insertBySelector.js"),insertBySelector_default=__webpack_require__.n(insertBySelector),setAttributesWithoutAttributes=__webpack_require__("./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js"),setAttributesWithoutAttributes_default=__webpack_require__.n(setAttributesWithoutAttributes),insertStyleElement=__webpack_require__("./node_modules/style-loader/dist/runtime/insertStyleElement.js"),insertStyleElement_default=__webpack_require__.n(insertStyleElement),styleTagTransform=__webpack_require__("./node_modules/style-loader/dist/runtime/styleTagTransform.js"),styleTagTransform_default=__webpack_require__.n(styleTagTransform),SelectAutocomplete_module=__webpack_require__("./node_modules/css-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js!./src/ui-kit/form/SelectAutocomplete/SelectAutocomplete.module.scss"),options={};options.styleTagTransform=styleTagTransform_default(),options.setAttributes=setAttributesWithoutAttributes_default(),options.insert=insertBySelector_default().bind(null,"head"),options.domAPI=styleDomAPI_default(),options.insertStyleElement=insertStyleElement_default();injectStylesIntoStyleTag_default()(SelectAutocomplete_module.Z,options);var SelectAutocomplete_SelectAutocomplete_module=SelectAutocomplete_module.Z&&SelectAutocomplete_module.Z.locals?SelectAutocomplete_module.Z.locals:void 0,toLowerCaseWithoutAccents=function toLowerCaseWithoutAccents(value){return value?value.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,""):""},jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js"),SelectAutocomplete=function SelectAutocomplete(_ref){var className=_ref.className,_ref$disabled=_ref.disabled,disabled=void 0!==_ref$disabled&&_ref$disabled,name=_ref.name,_ref$hideFooter=_ref.hideFooter,hideFooter=void 0!==_ref$hideFooter&&_ref$hideFooter,_ref$isOptional=_ref.isOptional,isOptional=void 0!==_ref$isOptional&&_ref$isOptional,label=_ref.label,maxDisplayOptions=_ref.maxDisplayOptions,maxHeight=_ref.maxHeight,onSearchChange=_ref.onSearchChange,options=_ref.options,_ref$smallLabel=_ref.smallLabel,smallLabel=void 0!==_ref$smallLabel&&_ref$smallLabel,placeholder=_ref.placeholder,_ref$hideArrow=_ref.hideArrow,hideArrow=void 0!==_ref$hideArrow&&_ref$hideArrow,_useFormikContext=(0,formik_esm.u6)(),setFieldValue=_useFormikContext.setFieldValue,setFieldTouched=_useFormikContext.setFieldTouched,_useField=(0,formik_esm.U$)(name),_useField2=(0,slicedToArray.Z)(_useField,3),field=_useField2[0],meta=_useField2[1],helpers=_useField2[2],_useField3=(0,formik_esm.U$)("search-".concat(name)),searchField=(0,slicedToArray.Z)(_useField3,1)[0],containerRef=(0,react.useRef)(null),_useState=(0,react.useState)(!1),_useState2=(0,slicedToArray.Z)(_useState,2),isOpen=_useState2[0],setIsOpen=_useState2[1],_useState3=(0,react.useState)(options),_useState4=(0,slicedToArray.Z)(_useState3,2),filteredOptions=_useState4[0],setFilteredOptions=_useState4[1];return(0,react.useEffect)((function(){setFilteredOptions(options)}),[options]),(0,react.useEffect)((function(){var handleClickOutside=function handleClickOutside(e){var _containerRef$current;null!==(_containerRef$current=containerRef.current)&&void 0!==_containerRef$current&&_containerRef$current.contains(e.target)||setIsOpen(!1)};return containerRef.current&&document.addEventListener("mousedown",handleClickOutside),function(){document.removeEventListener("mousedown",handleClickOutside)}}),[containerRef]),(0,react.useEffect)((function(){if(onSearchChange)onSearchChange();else{var formattedValues=toLowerCaseWithoutAccents(searchField.value).split(" ");setFilteredOptions(options.filter((function(option){var formattedLabel=toLowerCaseWithoutAccents(option.label);return 0===formattedValues.length||formattedValues.every((function(word){return formattedLabel.includes(word)}))})))}}),[searchField.value]),(0,jsx_runtime.jsx)(shared.Q4,{label:label,name:"search-".concat(name),error:meta.error,showError:meta.touched&&!!meta.error,smallLabel:smallLabel,isOptional:isOptional,hideFooter:hideFooter,className:className,children:(0,jsx_runtime.jsxs)("div",{className:classnames_default()(SelectAutocomplete_SelectAutocomplete_module["select-autocomplete-container"],className),ref:containerRef,children:[(0,jsx_runtime.jsx)(shared.Qc,(0,objectSpread2.Z)({onFocus:function onFocus(){isOpen||(setIsOpen(!0),setFieldValue("search-".concat(name),"",!1)),setFieldTouched(name,!0)},placeholder:null!=placeholder?placeholder:label,hasError:meta.touched&&!!meta.error,type:"text",disabled:disabled,className:SelectAutocomplete_SelectAutocomplete_module["select-autocomplete-input"],autoComplete:"off"},searchField)),(0,jsx_runtime.jsx)(AutocompleteList.Z,{className:SelectAutocomplete_SelectAutocomplete_module.menu,onButtonClick:function onButtonClick(){isOpen?setIsOpen(!1):(setFieldValue("search-".concat(name),"",!1),setIsOpen(!0)),setFieldTouched(name,!0)},maxHeight:maxHeight,isOpen:isOpen,filteredOptions:[].concat((0,toConsumableArray.Z)(filteredOptions.slice(0,null!=maxDisplayOptions?maxDisplayOptions:filteredOptions.length)),(0,toConsumableArray.Z)(maxDisplayOptions&&maxDisplayOptions<filteredOptions.length?[{value:"",label:"".concat(maxDisplayOptions," résultats maximum. Veuillez affiner votre recherche"),disabled:!0}]:[])),renderOption:function renderOption(_ref2){var value=_ref2.value,label=_ref2.label,disabled=_ref2.disabled;return(0,jsx_runtime.jsx)(shared.Cn,{label:label,className:classnames_default()(SelectAutocomplete_SelectAutocomplete_module.option,(0,defineProperty.Z)({},SelectAutocomplete_SelectAutocomplete_module["option-disabled"],disabled)),value:value,id:"".concat(name,"-").concat(value),name:name,role:"option","aria-selected":field.value===value,disabled:disabled,defaultChecked:field.value===value,onClick:function onClick(){helpers.setValue(value),setIsOpen(!1),setFieldValue("search-".concat(name),label,!1)}},"".concat(name,"-").concat(value))},hideArrow:hideArrow})]})})};SelectAutocomplete.displayName="SelectAutocomplete";var SelectAutocomplete_SelectAutocomplete=SelectAutocomplete},"./node_modules/classnames/index.js":function(module,exports){var __WEBPACK_AMD_DEFINE_RESULT__;!function(){"use strict";var hasOwn={}.hasOwnProperty;function classNames(){for(var classes=[],i=0;i<arguments.length;i++){var arg=arguments[i];if(arg){var argType=typeof arg;if("string"===argType||"number"===argType)classes.push(arg);else if(Array.isArray(arg)){if(arg.length){var inner=classNames.apply(null,arg);inner&&classes.push(inner)}}else if("object"===argType){if(arg.toString!==Object.prototype.toString&&!arg.toString.toString().includes("[native code]")){classes.push(arg.toString());continue}for(var key in arg)hasOwn.call(arg,key)&&arg[key]&&classes.push(key)}}}return classes.join(" ")}module.exports?(classNames.default=classNames,module.exports=classNames):void 0===(__WEBPACK_AMD_DEFINE_RESULT__=function(){return classNames}.apply(exports,[]))||(module.exports=__WEBPACK_AMD_DEFINE_RESULT__)}()},"./node_modules/css-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js!./src/ui-kit/form/SelectAutocomplete/SelectAutocomplete.module.scss":function(module,__webpack_exports__,__webpack_require__){"use strict";var _node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/css-loader/dist/runtime/sourceMaps.js"),_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0__),_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/css-loader/dist/runtime/api.js"),___CSS_LOADER_EXPORT___=__webpack_require__.n(_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__)()(_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0___default());___CSS_LOADER_EXPORT___.push([module.id,".yYORs26lNK8cICHgltGQ{box-sizing:border-box;position:relative;width:100%}.yYORs26lNK8cICHgltGQ .AbY06zM4j6ufVD4HdNgd input[type=checkbox]{position:absolute;width:0;height:0;padding:0;margin:-1px;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0}.yYORs26lNK8cICHgltGQ .nX53jLVwpaYe2AiMfTH4:hover{background-color:#fff}.vmLuvyrbfKoXsJWUzgTS{padding-left:1rem}","",{version:3,sources:["webpack://./src/ui-kit/form/SelectAutocomplete/SelectAutocomplete.module.scss","webpack://./src/styles/mixins/_a11y.scss"],names:[],mappings:"AAIA,sBACE,qBAAA,CACA,iBAAA,CACA,UAAA,CAGE,iECTF,iBAAA,CACA,OAAA,CACA,QAAA,CACA,SAAA,CACA,WAAA,CACA,eAAA,CACA,qBAAA,CACA,kBAAA,CACA,QAAA,CDKE,kDACE,qBAAA,CAKN,sBACE,iBAAA",sourcesContent:['@use "styles/mixins/_rem.scss" as rem;\n@use "styles/variables/_size.scss" as size;\n@use "styles/mixins/_a11y.scss" as a11y;\n\n.select-autocomplete-container {\n  box-sizing: border-box;\n  position: relative;\n  width: 100%;\n\n  .option {\n    input[type="checkbox"] {\n      @include a11y.visually-hidden;\n    }\n\n    &-disabled:hover {\n      background-color: white;\n    }\n  }\n}\n\n.select-autocomplete-input {\n  padding-left: rem.torem(16px);\n}\n',"@mixin visually-hidden() {\n  position: absolute;\n  width: 0;\n  height: 0;\n  padding: 0;\n  margin: -1px;\n  overflow: hidden;\n  clip: rect(0, 0, 0, 0);\n  white-space: nowrap;\n  border: 0;\n}\n"],sourceRoot:""}]),___CSS_LOADER_EXPORT___.locals={"select-autocomplete-container":"yYORs26lNK8cICHgltGQ",option:"AbY06zM4j6ufVD4HdNgd","option-disabled":"nX53jLVwpaYe2AiMfTH4","select-autocomplete-input":"vmLuvyrbfKoXsJWUzgTS"},__webpack_exports__.Z=___CSS_LOADER_EXPORT___}}]);