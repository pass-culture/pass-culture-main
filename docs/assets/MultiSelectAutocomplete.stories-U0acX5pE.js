import{j as a}from"./jsx-runtime-iXOPPpZ7.js";import{c as U,d as k,b as X}from"./formik.esm-y2tUiI7x.js";import{c as L}from"./index-XNbs-YUW.js";import{r as i}from"./index-7OBYoplD.js";import{B as Y}from"./BaseCheckbox-RovcbSrG.js";import{g as Z,S as ee}from"./SelectedValuesTags-00ElNfaE.js";import"./stroke-offer-IDmBYzSD.js";import{F as le}from"./Thumb-mTqhFtJ2.js";import"./FieldError-_oiQB8Lp.js";import"./FieldSuccess-KBPQwpG2.js";import{s as ae}from"./stroke-down-4xbrRvHV.js";import{S as te}from"./SvgIcon-UUSKXfrA.js";import{B as re}from"./BaseInput-pWPiF78D.js";import"./_commonjsHelpers-4gQjN7DL.js";import"./stroke-close-KQNU-49n.js";import"./full-next-6FYpialQ.js";import"./ButtonLink-5dBkUYf6.js";import"./index-gbqf4HAD.js";import"./index-NZh7eYUr.js";import"./Button.module-fn58QZwY.js";import"./Button-BDwHqrXn.js";import"./stroke-pass-84wyy11D.js";import"./Tooltip-eetddggC.js";import"./useTooltipProps-Xf9SOXrU.js";import"./BaseRadio-xu3uA8eL.js";import"./full-clear-0L2gsxg_.js";import"./Divider-f9FLuLUl.js";import"./SubmitButton-a3dOV3fO.js";import"./index-VFMbf6KQ.js";import"./SelectInput-jQXa9fZk.js";import"./typeof-Q9eVcF_1.js";import"./Banner-lPPtSnLj.js";import"./shadow-tips-help-vs0tLBP5.js";import"./shadow-tips-warning-og_aO0Ug.js";import"./LinkNodes-xoscl8qx.js";import"./full-link-GGegv9yK.js";import"./InfoBox-mVI965Un.js";import"./stroke-error-U5wg3Vd5.js";import"./stroke-valid-qcZpl8lN.js";const se="_pellet_i9m80_20",ne="_menu_i9m80_39",h={"field-overlay":"_field-overlay_i9m80_2","dropdown-indicator":"_dropdown-indicator_i9m80_6",pellet:se,menu:ne,"menu--no-results":"_menu--no-results_i9m80_53"},F=({isOpen:r,onButtonClick:e,filteredOptions:u,maxHeight:d,renderOption:b,displayNumberOfSelectedValues:y=!1,numberOfSelectedOptions:s,className:m,disabled:o,hideArrow:x=!1})=>a.jsxs("div",{className:h["field-overlay"],children:[!x&&a.jsx("button",{onClick:e,className:h["dropdown-indicator"],type:"button",disabled:o,children:a.jsx(te,{src:ae,alt:`${r?"Masquer":"Afficher"} les options`,width:"20"})}),y&&a.jsx("div",{onClick:e,className:h.pellet,children:s}),r&&a.jsxs("div",{className:L(h.menu,m),style:d?{maxHeight:d}:{},role:"listbox",children:[u.length===0&&a.jsx("span",{className:L({[h["menu--no-results"]]:u.length===0}),children:"Aucun résultat"}),u.map(g=>b(g))]})]});try{F.displayName="AutocompleteList",F.__docgenInfo={description:"",displayName:"AutocompleteList",props:{className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},displayNumberOfSelectedValues:{defaultValue:{value:"false"},description:"",name:"displayNumberOfSelectedValues",required:!1,type:{name:"boolean"}},filteredOptions:{defaultValue:null,description:"",name:"filteredOptions",required:!0,type:{name:"AutocompleteItemProps[]"}},isOpen:{defaultValue:null,description:"",name:"isOpen",required:!0,type:{name:"boolean"}},maxHeight:{defaultValue:null,description:"",name:"maxHeight",required:!1,type:{name:"number"}},numberOfSelectedOptions:{defaultValue:null,description:"",name:"numberOfSelectedOptions",required:!1,type:{name:"number"}},onButtonClick:{defaultValue:null,description:"",name:"onButtonClick",required:!0,type:{name:"() => void"}},renderOption:{defaultValue:null,description:"",name:"renderOption",required:!0,type:{name:"(option: AutocompleteItemProps) => ReactNode"}},disabled:{defaultValue:null,description:"",name:"disabled",required:!1,type:{name:"boolean"}},hideArrow:{defaultValue:{value:"false"},description:"",name:"hideArrow",required:!1,type:{name:"boolean"}}}}}catch{}const B={"multi-select-autocomplete-container":"_multi-select-autocomplete-container_sodts_2","multi-select-autocomplete-placeholder-input":"_multi-select-autocomplete-placeholder-input_sodts_8"},j=({className:r,name:e,hideFooter:u=!1,hideTags:d=!1,isOptional:b=!1,label:y,options:s,onChange:m,maxDisplayOptions:o,maxHeight:x,pluralLabel:g,smallLabel:R=!1,disabled:A=!1,placeholder:W,inline:z,filterMaxLength:G=255})=>{const{setFieldValue:O,handleChange:J,setFieldTouched:N}=U(),[t,S]=k(e),[p,w]=k(`search-${e}`),v=i.useRef(null),[c,V]=i.useState(!1),[E,M]=i.useState(s);i.useEffect(()=>{M(s)},[s]),i.useEffect(()=>{async function l(){!c&&p.value!==""&&await O(`search-${e}`,"",!1)}l()},[c]),i.useEffect(()=>{const l=n=>{var f;(f=v.current)!=null&&f.contains(n.target)||V(!1)};return v.current&&document.addEventListener("mousedown",l),()=>{document.removeEventListener("mousedown",l)}},[v]),i.useEffect(()=>{M(s.filter(l=>p.value===""||l.label.toLocaleLowerCase().includes(p.value.toLocaleLowerCase())))},[p.value]);const K=i.useMemo(()=>s.reduce((l,n)=>(l[n.value]=n.label,l),{}),[s]),Q=async()=>{c?(V(!1),await O(`search-${e}`,"",!1)):V(!0),await N(e,!0)};return a.jsxs(le,{className:r,error:S.error,hideFooter:!d&&t.value.length>0?!0:u,isOptional:b,label:y,name:`search-${e}`,showError:S.touched&&!!S.error,smallLabel:R,inline:z,children:[a.jsxs("div",{className:L(B["multi-select-autocomplete-container"],r),ref:v,children:[a.jsx(re,{onFocus:async()=>{c||V(!0),await N(e,!0)},placeholder:W??(t.value.length>1&&g?g:Z(y)),style:{paddingLeft:t.value.length>0?"2.2rem":"1rem"},className:L({[B["multi-select-autocomplete-placeholder-input"]]:t.value.length>0}),hasError:w.touched&&!!w.error,type:"text",disabled:A,"aria-required":!b,...p,maxLength:G}),a.jsx(F,{disabled:A,onButtonClick:Q,isOpen:c,filteredOptions:[...E.slice(0,o??E.length),...o&&o<E.length?[{value:"",label:`${o} résultats maximum. Veuillez affiner votre recherche`,disabled:!0}]:[]],maxHeight:x,displayNumberOfSelectedValues:t.value.length>0,numberOfSelectedOptions:t.value.length,renderOption:({value:l,label:n})=>a.jsx(Y,{label:n,value:l,name:e,onChange:f=>{N(`search-${e}`,!0),J(f),m==null||m(f)},checked:t.value.includes(l)},`${e}-${l}`)})]}),!d&&t.value.length>0&&a.jsx(ee,{disabled:A,fieldName:e,optionsLabelById:K,selectedOptions:t.value,removeOption:l=>O(e,t.value.filter(n=>n!==l))})]})};try{j.displayName="MultiSelectAutocomplete",j.__docgenInfo={description:"",displayName:"MultiSelectAutocomplete",props:{label:{defaultValue:null,description:"",name:"label",required:!0,type:{name:"string | Element"}},name:{defaultValue:null,description:"",name:"name",required:!0,type:{name:"string"}},description:{defaultValue:null,description:"",name:"description",required:!1,type:{name:"string"}},maxLength:{defaultValue:null,description:"",name:"maxLength",required:!1,type:{name:"number"}},isLabelHidden:{defaultValue:null,description:"",name:"isLabelHidden",required:!1,type:{name:"boolean"}},hasLabelLineBreak:{defaultValue:null,description:"",name:"hasLabelLineBreak",required:!1,type:{name:"boolean"}},isOptional:{defaultValue:{value:"false"},description:"",name:"isOptional",required:!1,type:{name:"boolean"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},classNameLabel:{defaultValue:null,description:"",name:"classNameLabel",required:!1,type:{name:"string"}},classNameFooter:{defaultValue:null,description:"",name:"classNameFooter",required:!1,type:{name:"string"}},filterVariant:{defaultValue:null,description:"",name:"filterVariant",required:!1,type:{name:"boolean"}},smallLabel:{defaultValue:{value:"false"},description:"",name:"smallLabel",required:!1,type:{name:"boolean"}},hideFooter:{defaultValue:{value:"false"},description:"",name:"hideFooter",required:!1,type:{name:"boolean"}},inline:{defaultValue:null,description:"",name:"inline",required:!1,type:{name:"boolean"}},clearButtonProps:{defaultValue:null,description:"",name:"clearButtonProps",required:!1,type:{name:"(ButtonHTMLAttributes<HTMLButtonElement> & { tooltip: string; })"}},ErrorDetails:{defaultValue:null,description:"",name:"ErrorDetails",required:!1,type:{name:"ReactNode"}},hideTags:{defaultValue:{value:"false"},description:"",name:"hideTags",required:!1,type:{name:"boolean"}},maxDisplayOptions:{defaultValue:null,description:"",name:"maxDisplayOptions",required:!1,type:{name:"number"}},maxDisplayOptionsLabel:{defaultValue:null,description:"",name:"maxDisplayOptionsLabel",required:!1,type:{name:"string"}},maxHeight:{defaultValue:null,description:"",name:"maxHeight",required:!1,type:{name:"number"}},options:{defaultValue:null,description:"",name:"options",required:!0,type:{name:"SelectOption[]"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!1,type:{name:"((e: ChangeEvent<HTMLInputElement>) => void)"}},pluralLabel:{defaultValue:null,description:"",name:"pluralLabel",required:!1,type:{name:"string"}},disabled:{defaultValue:{value:"false"},description:"",name:"disabled",required:!1,type:{name:"boolean"}},placeholder:{defaultValue:null,description:"",name:"placeholder",required:!1,type:{name:"string"}},filterMaxLength:{defaultValue:{value:"255"},description:"",name:"filterMaxLength",required:!1,type:{name:"number"}}}}}catch{}const Ge={title:"ui-kit/forms/MultiSelectAutocomplete",component:j,decorators:[r=>a.jsx(X,{initialValues:{departement:["01","02"],"search-departement":""},onSubmit:()=>{},children:a.jsx(r,{})})]},P={pluralLabel:"Départements",name:"departement",options:[{value:"01",label:"Ain"},{value:"02",label:"Aisne"},{value:"03",label:"Allier"},{value:"04",label:"Alpes-de-Haute-Provence test de libellé très long"},{value:"05",label:"Hautes-Alpes"},{value:"06",label:"Alpes-Maritimes"},{value:"07",label:"Ardèche"},{value:"08",label:"Ardennes"},{value:"09",label:"Ariège"},{value:"10",label:"Aube"},{value:"11",label:"Aude"},{value:"12",label:"Aveyron"},{value:"13",label:"Bouches-du-Rhône"},{value:"14",label:"Calvados"},{value:"15",label:"Cantal"}],label:"Département",hideFooter:!1,hideTags:!1,isOptional:!1,smallLabel:!1},_={args:{...P}},q={args:{...P,hideTags:!0}};var C,T,H;_.parameters={..._.parameters,docs:{...(C=_.parameters)==null?void 0:C.docs,source:{originalSource:`{
  args: {
    ...defaultProps
  }
}`,...(H=(T=_.parameters)==null?void 0:T.docs)==null?void 0:H.source}}};var $,I,D;q.parameters={...q.parameters,docs:{...($=q.parameters)==null?void 0:$.docs,source:{originalSource:`{
  args: {
    ...defaultProps,
    hideTags: true
  }
}`,...(D=(I=q.parameters)==null?void 0:I.docs)==null?void 0:D.source}}};const Je=["Default","WithoutTags"];export{_ as Default,q as WithoutTags,Je as __namedExportsOrder,Ge as default};
