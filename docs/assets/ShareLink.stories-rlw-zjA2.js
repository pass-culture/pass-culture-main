import{j as r}from"./jsx-runtime-B41c6FLR.js";import{V as d}from"./index-iNOKtN9j.js";import{r as u}from"./iframe-Ca6GHkCY.js";import{u as p,b as h}from"./useNotification--DFUNBrU.js";import{T as k}from"./TextInput-CpEiUzU4.js";import{f as _}from"./full-duplicate-BZV8LNX-.js";import{B as y}from"./Button-HEUFFomY.js";import{B as S}from"./types-yVZEaApa.js";import{c as g}from"./testUtils-BYhrJsOD.js";import{a as m,P as v}from"./reducer-BXBifxHb.js";import{N as x}from"./NotificationToaster-DT61Qc5z.js";import"./chunk-4WY6JWTD-DVYn0X71.js";import"./preload-helper-PPVm8Dsz.js";import"./index-B_BJbrgv.js";import"./SvgIcon-CNtvWYvs.js";import"./FieldFooter-BD7duPJc.js";import"./full-error-BFAmjN4t.js";import"./index.module-DKxWrA6p.js";import"./FieldHeader-Bbs5z_o4.js";import"./Tooltip-Bmyf0msD.js";import"./stroke-pass-CALgybTM.js";import"./Button.module-CY1ZDZvt.js";import"./store-ClEv25Jd.js";import"./full-info-D24AtBVt.js";import"./full-validate-CbMNulkZ.js";const l={"share-link":"_share-link_ss7zf_1","share-link-input":"_share-link-input_ss7zf_7","share-link-button":"_share-link-button_ss7zf_15"},a=({link:e,label:o,notifySuccessMessage:s})=>{const t=u.useRef(null),i=p(),c=async()=>{try{await navigator.clipboard.writeText(e),i.success(s)}catch{t.current&&(t.current.select(),document.execCommand("copy"),i.success(s))}};return r.jsxs("div",{className:l["share-link"],children:[r.jsx("div",{className:l["share-link-input"],children:r.jsx(k,{name:"share-link",label:o,value:e,ref:t})}),r.jsx(y,{onClick:c,variant:S.PRIMARY,className:l["share-link-button"],icon:_,children:"Copier"})]})};try{a.displayName="ShareLink",a.__docgenInfo={description:"",displayName:"ShareLink",props:{link:{defaultValue:null,description:"",name:"link",required:!0,type:{name:"string"}},label:{defaultValue:null,description:"",name:"label",required:!0,type:{name:"string"}},notifySuccessMessage:{defaultValue:null,description:"",name:"notifySuccessMessage",required:!0,type:{name:"string"}}}}}catch{}const N=e=>e.notification.notification,T=e=>e.notification.isStickyBarOpen,b=()=>{const[e,o]=u.useState(!1),s=m(T),t=m(N),i=p();return u.useEffect(()=>{if(!t?.text||t.duration===void 0)return()=>{};o(!0);const c=setTimeout(()=>{o(!1)},t.duration),f=setTimeout(()=>{i.close()},t.duration+h);return()=>{clearTimeout(c),clearTimeout(f)}},[t,i]),r.jsx(x,{notification:t,isVisible:e,isStickyBarOpen:s})},X={title:"@/ui-kit/ShareLink",decorators:[d],component:a},n={render:e=>r.jsxs(v,{store:g({}),children:[r.jsx("div",{style:{width:"100%"},children:r.jsx(a,{...e})}),r.jsx(b,{})]}),args:{link:"https://bv.ac-versailles.fr/adage/passculture/offres/offerid/8 ",label:"Lien de l’offre",notifySuccessMessage:"Le lien ADAGE a bien été copié"}};n.parameters={...n.parameters,docs:{...n.parameters?.docs,source:{originalSource:`{
  render: args => <Provider store={configureTestStore({})}>
      <div style={{
      width: '100%'
    }}>
        <ShareLink {...args} />
      </div>
      <Notification />
    </Provider>,
  args: {
    link: 'https://bv.ac-versailles.fr/adage/passculture/offres/offerid/8 ',
    label: 'Lien de l’offre',
    notifySuccessMessage: 'Le lien ADAGE a bien été copié'
  }
}`,...n.parameters?.docs?.source}}};const Z=["Default"];export{n as Default,Z as __namedExportsOrder,X as default};
