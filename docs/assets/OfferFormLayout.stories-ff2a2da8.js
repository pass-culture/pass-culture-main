import{j as E}from"./jsx-runtime-ffb262ed.js";import{D as ie}from"./index-ee67f707.js";import{B as se,a as Z}from"./Breadcrumb-19d3d1e5.js";import{r as b}from"./index-76fb7be0.js";import{a as j,i as le,S as ce}from"./Spinner-5fe3b341.js";import{u as ue}from"./useNotification-a266f850.js";import{u as de}from"./utils-70f14cd5.js";import{O as m,I as k}from"./constants-226fd8bb.js";import"./formik.esm-96bdd02b.js";import{c as fe}from"./_commonjsHelpers-de833af9.js";import{u as W,a as me,g as pe}from"./index-47dfd0dd.js";import{u as he,E as ve,O as ge}from"./useAnalytics-b22f020f.js";import{c as X}from"./index-a587463d.js";import"./Stepper-cd915b0b.js";import"./full-arrow-right-b1f27636.js";import"./SvgIcon-c0bf369c.js";import"./config-498612b7.js";import"./stroke-pass-cf331655.js";import"./notificationReducer-622781bf.js";import"./index-b0fbc9cc.js";import"./hoist-non-react-statics.cjs-3f8ebaa8.js";var L=(e=>(e.VISUAL="visual",e.MENTAL="mental",e.AUDIO="audio",e.MOTOR="motor",e.NONE="none",e))(L||{});const B="Nous avons rencontré un problème lors de la récupération des données.",ye={isOk:!1,message:B,payload:{categories:[],subCategories:[]}},Ie=e=>({id:e.id,proLabel:e.proLabel,isSelectable:e.isSelectable}),Ae=e=>({id:e.id,categoryId:e.categoryId,proLabel:e.proLabel,isEvent:e.isEvent,conditionalFields:e.conditionalFields,canBeDuo:e.canBeDuo,canBeEducational:e.canBeEducational,onlineOfflinePlatform:e.onlineOfflinePlatform,reimbursementRule:e.reimbursementRule,isSelectable:e.isSelectable,canBeWithdrawable:e.canBeWithdrawable}),Ce=async()=>{try{const e=await j.getCategories();return{isOk:!0,message:null,payload:{categories:e.categories.map(Ie),subCategories:e.subcategories.map(Ae)}}}catch{return ye}},Oe=e=>({id:e.venue.managingOfferer.id,name:e.venue.managingOfferer.name}),Ne=e=>{const a={[L.VISUAL]:e.venue.visualDisabilityCompliant||!1,[L.MENTAL]:e.venue.mentalDisabilityCompliant||!1,[L.AUDIO]:e.venue.audioDisabilityCompliant||!1,[L.MOTOR]:e.venue.motorDisabilityCompliant||!1};return{id:e.venue.id,name:e.venue.name,publicName:e.venue.publicName||"",isVirtual:e.venue.isVirtual,address:e.venue.address||"",postalCode:e.venue.postalCode||"",departmentCode:e.venue.departementCode||"",city:e.venue.city||"",offerer:Oe(e),accessibility:{...a,[L.NONE]:!Object.values(a).includes(!0)}}},Te=e=>{const a=e.remainingQuantity??"unlimited";return{beginningDatetime:e.beginningDatetime??null,bookingLimitDatetime:e.bookingLimitDatetime??null,bookingsQuantity:e.bookingsQuantity,dateCreated:new Date(e.dateCreated),hasActivationCode:e.hasActivationCode,id:e.id,isEventDeletable:e.isEventDeletable,isEventExpired:e.isEventExpired,isSoftDeleted:e.isSoftDeleted,price:e.price,priceCategoryId:e.priceCategoryId,quantity:e.quantity,remainingQuantity:a,activationCodesExpirationDatetime:e.activationCodesExpirationDatetime?new Date(e.activationCodesExpirationDatetime):null,activationCodes:[]}},Ee=e=>{var a,s,i,r,o,g,I,N,T,C;return{author:((a=e.extraData)==null?void 0:a.author)||"",musicType:((s=e.extraData)==null?void 0:s.musicType)||"",musicSubType:((i=e.extraData)==null?void 0:i.musicSubType)||"",performer:((r=e.extraData)==null?void 0:r.performer)||"",ean:((o=e.extraData)==null?void 0:o.ean)||"",showType:((g=e.extraData)==null?void 0:g.showType)||"",showSubType:((I=e.extraData)==null?void 0:I.showSubType)||"",speaker:((N=e.extraData)==null?void 0:N.speaker)||"",stageDirector:((T=e.extraData)==null?void 0:T.stageDirector)||"",visa:((C=e.extraData)==null?void 0:C.visa)||""}},De=e=>e===null?null:{name:e.name},xe=e=>{var a;if(e.activeMediation){if(e.activeMediation.thumbUrl)return{originalUrl:e.activeMediation.thumbUrl,url:e.activeMediation.thumbUrl,credit:((a=e.activeMediation)==null?void 0:a.credit)||""}}else if(e.thumbUrl)return{originalUrl:e.thumbUrl,url:e.thumbUrl,credit:""}},Re=e=>{var i;const a={[L.VISUAL]:e.visualDisabilityCompliant||!1,[L.MENTAL]:e.mentalDisabilityCompliant||!1,[L.AUDIO]:e.audioDisabilityCompliant||!1,[L.MOTOR]:e.motorDisabilityCompliant||!1};return{id:e.id,bookingEmail:e.bookingEmail||"",bookingContact:e.bookingContact||"",description:e.description||"",durationMinutes:e.durationMinutes||null,isActive:e.isActive,isDuo:e.isDuo,isEvent:e.isEvent,isDigital:e.isDigital,isNational:e.isNational,name:e.name,offererId:e.venue.managingOfferer.id,offererName:e.venue.managingOfferer.name,priceCategories:e.priceCategories,subcategoryId:e.subcategoryId,url:e.url||"",externalTicketOfficeUrl:e.externalTicketOfficeUrl||"",venueId:e.venue.id,venue:Ne(e),withdrawalDetails:e.withdrawalDetails||"",withdrawalDelay:e.withdrawalDelay===void 0?null:e.withdrawalDelay,withdrawalType:e.withdrawalType||null,image:xe(e),accessibility:{...a,[L.NONE]:!Object.values(a).includes(!0)},stocks:e.stocks.map(Te),lastProviderName:((i=e.lastProvider)==null?void 0:i.name)||null,lastProvider:De(e.lastProvider||null),status:e.status,...Ee(e)}},ee={isOk:!1,message:"Une erreur est survenue lors de la récupération de votre offre",payload:null},Fe=async e=>{if(e===void 0)return ee;try{const a=await j.getOffer(e);return{isOk:!0,message:"",payload:Re(a)}}catch{return ee}};var K="NOT_FOUND";function _e(e){var a;return{get:function(i){return a&&e(a.key,i)?a.value:K},put:function(i,r){a={key:i,value:r}},getEntries:function(){return a?[a]:[]},clear:function(){a=void 0}}}function Se(e,a){var s=[];function i(I){var N=s.findIndex(function(C){return a(I,C.key)});if(N>-1){var T=s[N];return N>0&&(s.splice(N,1),s.unshift(T)),T.value}return K}function r(I,N){i(I)===K&&(s.unshift({key:I,value:N}),s.length>e&&s.pop())}function o(){return s}function g(){s=[]}return{get:i,put:r,getEntries:o,clear:g}}var Le=function(a,s){return a===s};function we(e){return function(s,i){if(s===null||i===null||s.length!==i.length)return!1;for(var r=s.length,o=0;o<r;o++)if(!e(s[o],i[o]))return!1;return!0}}function be(e,a){var s=typeof a=="object"?a:{equalityCheck:a},i=s.equalityCheck,r=i===void 0?Le:i,o=s.maxSize,g=o===void 0?1:o,I=s.resultEqualityCheck,N=we(r),T=g===1?_e(N):Se(g,N);function C(){var x=T.get(arguments);if(x===K){if(x=e.apply(null,arguments),I){var _=T.getEntries(),D=_.find(function(R){return I(R.value,x)});D&&(x=D.value)}T.put(arguments,x)}return x}return C.clearCache=function(){return T.clear()},C}function ke(e){var a=Array.isArray(e[0])?e[0]:e;if(!a.every(function(i){return typeof i=="function"})){var s=a.map(function(i){return typeof i=="function"?"function "+(i.name||"unnamed")+"()":typeof i}).join(", ");throw new Error("createSelector expects all input-selectors to be functions, but received the following types: ["+s+"]")}return a}function Me(e){for(var a=arguments.length,s=new Array(a>1?a-1:0),i=1;i<a;i++)s[i-1]=arguments[i];var r=function(){for(var g=arguments.length,I=new Array(g),N=0;N<g;N++)I[N]=arguments[N];var T=0,C,x={memoizeOptions:void 0},_=I.pop();if(typeof _=="object"&&(x=_,_=I.pop()),typeof _!="function")throw new Error("createSelector expects an output function after the inputs, but received: ["+typeof _+"]");var D=x,R=D.memoizeOptions,F=R===void 0?s:R,t=Array.isArray(F)?F:[F],l=ke(I),n=e.apply(void 0,[function(){return T++,_.apply(null,arguments)}].concat(t)),u=e(function(){for(var v=[],d=l.length,O=0;O<d;O++)v.push(l[O].apply(null,arguments));return C=n.apply(null,v),C});return Object.assign(u,{resultFunc:_,memoizedResultFunc:n,dependencies:l,lastResult:function(){return C},recomputations:function(){return T},resetRecomputations:function(){return T=0}}),u};return r}var Pe=Me(be);function Ve(e){return typeof e=="string"||typeof e=="number"}var Ue=function(){function e(){this._cache={}}var a=e.prototype;return a.set=function(i,r){this._cache[i]=r},a.get=function(i){return this._cache[i]},a.remove=function(i){delete this._cache[i]},a.clear=function(){this._cache={}},a.isValidCacheKey=function(i){return Ve(i)},e}(),je=Ue,Be=function(){return!0};function ze(){for(var e=arguments.length,a=new Array(e),s=0;s<e;s++)a[s]=arguments[s];return function(i,r){if(r)throw new Error('[re-reselect] "options" as second argument is not supported anymore. Please provide an option object as single argument.');var o=typeof i=="function"?{keySelector:i}:Object.assign({},i),g=0,I=a.pop(),N=Array.isArray(a[0])?a[0]:[].concat(a),T=function(){return g++,I.apply(void 0,arguments)};a.push(T);var C=o.cacheObject||new je,x=o.selectorCreator||Pe,_=C.isValidCacheKey||Be;o.keySelectorCreator&&(o.keySelector=o.keySelectorCreator({keySelector:o.keySelector,inputSelectors:N,resultFunc:I}));var D=function(){var F=o.keySelector.apply(o,arguments);if(_(F)){var t=C.get(F);return t===void 0&&(t=x.apply(void 0,a),C.set(F,t)),t.apply(void 0,arguments)}console.warn('[re-reselect] Invalid cache key "'+F+'" has been returned by keySelector function.')};return D.getMatchingSelector=function(){var R=o.keySelector.apply(o,arguments);return C.get(R)},D.removeMatchingSelector=function(){var R=o.keySelector.apply(o,arguments);C.remove(R)},D.clearCache=function(){C.clear()},D.resultFunc=I,D.dependencies=N,D.cache=C,D.recomputations=function(){return g},D.resetRecomputations=function(){return g=0},D.keySelector=o.keySelector,D}}const Ke=e=>e.length!==9?"Le SIREN doit comporter 9 caractères.":"",qe=async e=>{const a=de(e||"");if(e==="")return{isOk:!0,message:"",payload:{values:{address:"",city:"",name:"",postalCode:"",siren:"",apeCode:""}}};const s=Ke(a);if(s)return{isOk:!1,message:s,payload:{}};try{const i=await j.getSirenInfo(a);return{isOk:!0,message:`Informations récupéré avec success pour le SIREN: ${e}`,payload:{values:{address:i.address.street,city:i.address.city,name:i.name,postalCode:i.address.postalCode,siren:i.siren,apeCode:i.ape_code}}}}catch(i){let r="Une erreur est survenue";return le(i)&&i.status==400&&i.body.global&&(r=i.body.global[0]),{isOk:!1,message:r,payload:{}}}},Ge=e=>e||"";ze(e=>e,qe)(Ge);const Ye={isOk:!1,message:B,payload:[]},He=async({offererId:e})=>{try{return{isOk:!0,message:null,payload:(await j.listOfferersNames(null,null,e)).offerersNames}}catch{return Ye}},$e=()=>{const e=W(),s=[{pathPart:"creation",mode:m.CREATION},{pathPart:"brouillon",mode:m.DRAFT}].find(i=>e.pathname.includes(i.pathPart));return s?s.mode:m.EDITION};var Je={exports:{}};/*
 * [hi-base32]{@link https://github.com/emn178/hi-base32}
 *
 * @version 0.5.0
 * @author Chen, Yi-Cyuan [emn178@gmail.com]
 * @copyright Chen, Yi-Cyuan 2015-2018
 * @license MIT
 */(function(e){(function(){var a=typeof window=="object"?window:{},s=!a.HI_BASE32_NO_NODE_JS&&typeof process=="object"&&process.versions&&process.versions.node;s&&(a=fe);var i=!a.HI_BASE32_NO_COMMON_JS&&!0&&e.exports,r="ABCDEFGHIJKLMNOPQRSTUVWXYZ234567".split(""),o={A:0,B:1,C:2,D:3,E:4,F:5,G:6,H:7,I:8,J:9,K:10,L:11,M:12,N:13,O:14,P:15,Q:16,R:17,S:18,T:19,U:20,V:21,W:22,X:23,Y:24,Z:25,2:26,3:27,4:28,5:29,6:30,7:31},g=[0,0,0,0,0,0,0,0],I=function(t,l){l.length>10&&(l="..."+l.substr(-10));var n=new Error("Decoded data is not valid UTF-8. Maybe try base32.decode.asBytes()? Partial data after reading "+t+" bytes: "+l+" <-");throw n.position=t,n},N=function(t){for(var l="",n=t.length,u=0,f=0,v,d;u<n;){if(v=t[u++],v<=127){l+=String.fromCharCode(v);continue}else v>191&&v<=223?(d=v&31,f=1):v<=239?(d=v&15,f=2):v<=247?(d=v&7,f=3):I(u,l);for(var O=0;O<f;++O)v=t[u++],(v<128||v>191)&&I(u,l),d<<=6,d+=v&63;d>=55296&&d<=57343&&I(u,l),d>1114111&&I(u,l),d<=65535?l+=String.fromCharCode(d):(d-=65536,l+=String.fromCharCode((d>>10)+55296),l+=String.fromCharCode((d&1023)+56320))}return l},T=function(t){if(t==="")return[];if(!/^[A-Z2-7=]+$/.test(t))throw new Error("Invalid base32 characters");t=t.replace(/=/g,"");for(var l,n,u,f,v,d,O,p,y=[],h=0,w=t.length,c=0,S=w>>3<<3;c<S;)l=o[t.charAt(c++)],n=o[t.charAt(c++)],u=o[t.charAt(c++)],f=o[t.charAt(c++)],v=o[t.charAt(c++)],d=o[t.charAt(c++)],O=o[t.charAt(c++)],p=o[t.charAt(c++)],y[h++]=(l<<3|n>>>2)&255,y[h++]=(n<<6|u<<1|f>>>4)&255,y[h++]=(f<<4|v>>>1)&255,y[h++]=(v<<7|d<<2|O>>>3)&255,y[h++]=(O<<5|p)&255;var M=w-S;return M===2?(l=o[t.charAt(c++)],n=o[t.charAt(c++)],y[h++]=(l<<3|n>>>2)&255):M===4?(l=o[t.charAt(c++)],n=o[t.charAt(c++)],u=o[t.charAt(c++)],f=o[t.charAt(c++)],y[h++]=(l<<3|n>>>2)&255,y[h++]=(n<<6|u<<1|f>>>4)&255):M===5?(l=o[t.charAt(c++)],n=o[t.charAt(c++)],u=o[t.charAt(c++)],f=o[t.charAt(c++)],v=o[t.charAt(c++)],y[h++]=(l<<3|n>>>2)&255,y[h++]=(n<<6|u<<1|f>>>4)&255,y[h++]=(f<<4|v>>>1)&255):M===7&&(l=o[t.charAt(c++)],n=o[t.charAt(c++)],u=o[t.charAt(c++)],f=o[t.charAt(c++)],v=o[t.charAt(c++)],d=o[t.charAt(c++)],O=o[t.charAt(c++)],y[h++]=(l<<3|n>>>2)&255,y[h++]=(n<<6|u<<1|f>>>4)&255,y[h++]=(f<<4|v>>>1)&255,y[h++]=(v<<7|d<<2|O>>>3)&255),y},C=function(t){for(var l,n,u,f,v,d="",O=t.length,p=0,y=parseInt(O/5)*5;p<y;)l=t.charCodeAt(p++),n=t.charCodeAt(p++),u=t.charCodeAt(p++),f=t.charCodeAt(p++),v=t.charCodeAt(p++),d+=r[l>>>3]+r[(l<<2|n>>>6)&31]+r[n>>>1&31]+r[(n<<4|u>>>4)&31]+r[(u<<1|f>>>7)&31]+r[f>>>2&31]+r[(f<<3|v>>>5)&31]+r[v&31];var h=O-y;return h===1?(l=t.charCodeAt(p),d+=r[l>>>3]+r[l<<2&31]+"======"):h===2?(l=t.charCodeAt(p++),n=t.charCodeAt(p),d+=r[l>>>3]+r[(l<<2|n>>>6)&31]+r[n>>>1&31]+r[n<<4&31]+"===="):h===3?(l=t.charCodeAt(p++),n=t.charCodeAt(p++),u=t.charCodeAt(p),d+=r[l>>>3]+r[(l<<2|n>>>6)&31]+r[n>>>1&31]+r[(n<<4|u>>>4)&31]+r[u<<1&31]+"==="):h===4&&(l=t.charCodeAt(p++),n=t.charCodeAt(p++),u=t.charCodeAt(p++),f=t.charCodeAt(p),d+=r[l>>>3]+r[(l<<2|n>>>6)&31]+r[n>>>1&31]+r[(n<<4|u>>>4)&31]+r[(u<<1|f>>>7)&31]+r[f>>>2&31]+r[f<<3&31]+"="),d},x=function(t){var l,n,u,f,v,d,O=!1,p="",y=0,h,w=0,c=t.length;if(t==="")return p;do{for(g[0]=g[5],g[1]=g[6],g[2]=g[7],h=w;y<c&&h<5;++y)d=t.charCodeAt(y),d<128?g[h++]=d:d<2048?(g[h++]=192|d>>6,g[h++]=128|d&63):d<55296||d>=57344?(g[h++]=224|d>>12,g[h++]=128|d>>6&63,g[h++]=128|d&63):(d=65536+((d&1023)<<10|t.charCodeAt(++y)&1023),g[h++]=240|d>>18,g[h++]=128|d>>12&63,g[h++]=128|d>>6&63,g[h++]=128|d&63);w=h-5,y===c&&++y,y>c&&h<6&&(O=!0),l=g[0],h>4?(n=g[1],u=g[2],f=g[3],v=g[4],p+=r[l>>>3]+r[(l<<2|n>>>6)&31]+r[n>>>1&31]+r[(n<<4|u>>>4)&31]+r[(u<<1|f>>>7)&31]+r[f>>>2&31]+r[(f<<3|v>>>5)&31]+r[v&31]):h===1?p+=r[l>>>3]+r[l<<2&31]+"======":h===2?(n=g[1],p+=r[l>>>3]+r[(l<<2|n>>>6)&31]+r[n>>>1&31]+r[n<<4&31]+"===="):h===3?(n=g[1],u=g[2],p+=r[l>>>3]+r[(l<<2|n>>>6)&31]+r[n>>>1&31]+r[(n<<4|u>>>4)&31]+r[u<<1&31]+"==="):(n=g[1],u=g[2],f=g[3],p+=r[l>>>3]+r[(l<<2|n>>>6)&31]+r[n>>>1&31]+r[(n<<4|u>>>4)&31]+r[(u<<1|f>>>7)&31]+r[f>>>2&31]+r[f<<3&31]+"=")}while(!O);return p},_=function(t){for(var l,n,u,f,v,d="",O=t.length,p=0,y=parseInt(O/5)*5;p<y;)l=t[p++],n=t[p++],u=t[p++],f=t[p++],v=t[p++],d+=r[l>>>3]+r[(l<<2|n>>>6)&31]+r[n>>>1&31]+r[(n<<4|u>>>4)&31]+r[(u<<1|f>>>7)&31]+r[f>>>2&31]+r[(f<<3|v>>>5)&31]+r[v&31];var h=O-y;return h===1?(l=t[p],d+=r[l>>>3]+r[l<<2&31]+"======"):h===2?(l=t[p++],n=t[p],d+=r[l>>>3]+r[(l<<2|n>>>6)&31]+r[n>>>1&31]+r[n<<4&31]+"===="):h===3?(l=t[p++],n=t[p++],u=t[p],d+=r[l>>>3]+r[(l<<2|n>>>6)&31]+r[n>>>1&31]+r[(n<<4|u>>>4)&31]+r[u<<1&31]+"==="):h===4&&(l=t[p++],n=t[p++],u=t[p++],f=t[p],d+=r[l>>>3]+r[(l<<2|n>>>6)&31]+r[n>>>1&31]+r[(n<<4|u>>>4)&31]+r[(u<<1|f>>>7)&31]+r[f>>>2&31]+r[f<<3&31]+"="),d},D=function(t,l){var n=typeof t!="string";return n&&t.constructor===ArrayBuffer&&(t=new Uint8Array(t)),n?_(t):l?C(t):x(t)},R=function(t,l){if(!l)return N(T(t));if(t==="")return"";if(!/^[A-Z2-7=]+$/.test(t))throw new Error("Invalid base32 characters");var n,u,f,v,d,O,p,y,h="",w=t.indexOf("=");w===-1&&(w=t.length);for(var c=0,S=w>>3<<3;c<S;)n=o[t.charAt(c++)],u=o[t.charAt(c++)],f=o[t.charAt(c++)],v=o[t.charAt(c++)],d=o[t.charAt(c++)],O=o[t.charAt(c++)],p=o[t.charAt(c++)],y=o[t.charAt(c++)],h+=String.fromCharCode((n<<3|u>>>2)&255)+String.fromCharCode((u<<6|f<<1|v>>>4)&255)+String.fromCharCode((v<<4|d>>>1)&255)+String.fromCharCode((d<<7|O<<2|p>>>3)&255)+String.fromCharCode((p<<5|y)&255);var M=w-S;return M===2?(n=o[t.charAt(c++)],u=o[t.charAt(c++)],h+=String.fromCharCode((n<<3|u>>>2)&255)):M===4?(n=o[t.charAt(c++)],u=o[t.charAt(c++)],f=o[t.charAt(c++)],v=o[t.charAt(c++)],h+=String.fromCharCode((n<<3|u>>>2)&255)+String.fromCharCode((u<<6|f<<1|v>>>4)&255)):M===5?(n=o[t.charAt(c++)],u=o[t.charAt(c++)],f=o[t.charAt(c++)],v=o[t.charAt(c++)],d=o[t.charAt(c++)],h+=String.fromCharCode((n<<3|u>>>2)&255)+String.fromCharCode((u<<6|f<<1|v>>>4)&255)+String.fromCharCode((v<<4|d>>>1)&255)):M===7&&(n=o[t.charAt(c++)],u=o[t.charAt(c++)],f=o[t.charAt(c++)],v=o[t.charAt(c++)],d=o[t.charAt(c++)],O=o[t.charAt(c++)],p=o[t.charAt(c++)],h+=String.fromCharCode((n<<3|u>>>2)&255)+String.fromCharCode((u<<6|f<<1|v>>>4)&255)+String.fromCharCode((v<<4|d>>>1)&255)+String.fromCharCode((d<<7|O<<2|p>>>3)&255)),h},F={encode:D,decode:R};R.asBytes=T,i?e.exports=F:a.base32=F})()})(Je);const Qe=e=>Object.fromEntries(new URLSearchParams(e)),We={isOk:!1,message:B,payload:[]},Xe=async({offererId:e})=>{try{const a=await j.getVenues(null,!0,e),s=i=>{const r={[L.VISUAL]:i.visualDisabilityCompliant||!1,[L.MENTAL]:i.mentalDisabilityCompliant||!1,[L.AUDIO]:i.audioDisabilityCompliant||!1,[L.MOTOR]:i.motorDisabilityCompliant||!1};return{id:i.id,managingOffererId:i.managingOffererId,name:i.publicName||i.name,isVirtual:i.isVirtual,withdrawalDetails:i.withdrawalDetails||null,accessibility:{...r,[L.NONE]:!Object.values(r).includes(!0)},bookingEmail:i.bookingEmail||null,hasMissingReimbursementPoint:i.hasMissingReimbursementPoint,hasCreatedOffer:i.hasCreatedOffer}};return{isOk:!0,message:null,payload:a.venues.map(s)}}catch{return We}},Y={isOk:!1,message:B,payload:null},Ze=async({offerer:e,queryOffererId:a,isAdmin:s})=>{const i=s&&e?e.id:a,r={offererNames:[],venueList:[],categoriesData:{categories:[],subCategories:[]}};if(s&&!e&&!a)return Promise.resolve({isOk:!0,message:null,payload:r});const o=await Ce();if(o.isOk)r.categoriesData=o.payload;else return Promise.resolve(Y);const g=await Xe({offererId:i?Number(i):void 0});if(g.isOk)r.venueList=g.payload;else return Promise.resolve(Y);if(s&&e)r.offererNames=[{id:1,name:e.name}];else{const I=await He({offererId:s?Number(i):void 0});if(I.isOk)r.offererNames=I.payload;else return Promise.resolve(Y)}return Promise.resolve({isOk:!0,message:null,payload:r})},oe=b.createContext({offerId:null,offer:null,setOffer:null,categories:[],subCategories:[],offererNames:[],venueList:[],shouldTrack:!0,setShouldTrack:()=>{},showVenuePopin:{}}),et=()=>b.useContext(oe);function te({children:e,isUserAdmin:a,offerId:s,queryOffererId:i}){const r="/accueil",o=ue(),g=me(),[I,N]=b.useState(!0),[T,C]=b.useState(!0),[x,_]=b.useState(null),[D,R]=b.useState(),[F,t]=b.useState(null),[l,n]=b.useState([]),[u,f]=b.useState([]),[v,d]=b.useState([]),[O,p]=b.useState([]),[y,h]=b.useState({}),w=c=>{t(c),_(c?{id:c.venue.offerer.id,name:c.venue.offerer.name}:null)};return b.useEffect(()=>{async function c(){const S=await Fe(Number(s));S.isOk?(w(S.payload),R(S.payload.venueId)):(g(r),o.error("Une erreur est survenue lors de la récupération de votre offre"))}s?c():w(null)},[s]),b.useEffect(()=>{async function c(){const S=await Ze({offerer:x||void 0,queryOffererId:i,isAdmin:a});if(S.isOk){n(S.payload.categoriesData.categories),f(S.payload.categoriesData.subCategories),d(S.payload.offererNames),p(S.payload.venueList);const M={};S.payload.venueList.forEach(G=>{M[G.id]=!G.hasCreatedOffer&&G.hasMissingReimbursementPoint}),h(M)}else n([]),f([]),d([]),p([]),g(r),o.error(B);N(!1)}(!s||F!==null)&&c()},[s,x]),I===!0?E.jsx(ce,{}):E.jsx(oe.Provider,{value:{offerId:(F==null?void 0:F.id)||null,offer:F,setOffer:w,categories:l,subCategories:u,offererNames:v,venueList:O,shouldTrack:T,setShouldTrack:C,venueId:D,offerOfferer:x,showVenuePopin:y},children:e})}try{te.displayName="OfferIndividualContextProvider",te.__docgenInfo={description:"",displayName:"OfferIndividualContextProvider",props:{isUserAdmin:{defaultValue:null,description:"",name:"isUserAdmin",required:!0,type:{name:"boolean"}},offerId:{defaultValue:null,description:"",name:"offerId",required:!1,type:{name:"string"}},queryOffererId:{defaultValue:null,description:"",name:"queryOffererId",required:!1,type:{name:"string"}}}}}catch{}const tt=({isCreation:e=!1,mode:a,step:s})=>e?"/offre/creation/individuel":{[A.INFORMATIONS]:{[m.CREATION]:"/offre/:offerId/individuel/creation",[m.DRAFT]:"/offre/:offerId/individuel/brouillon",[m.EDITION]:"/offre/:offerId/individuel/edition"},[A.STOCKS]:{[m.CREATION]:"/offre/:offerId/individuel/creation/stocks",[m.DRAFT]:"/offre/:offerId/individuel/brouillon/stocks",[m.EDITION]:"/offre/:offerId/individuel/stocks"},[A.TARIFS]:{[m.CREATION]:"/offre/:offerId/individuel/creation/tarifs",[m.DRAFT]:"/offre/:offerId/individuel/brouillon/tarifs",[m.EDITION]:"/offre/:offerId/individuel/tarifs"},[A.SUMMARY]:{[m.CREATION]:"/offre/:offerId/individuel/creation/recapitulatif",[m.DRAFT]:"/offre/:offerId/individuel/brouillon/recapitulatif",[m.EDITION]:"/offre/:offerId/individuel/recapitulatif"},[A.CONFIRMATION]:{[m.CREATION]:"/offre/:offerId/individuel/creation/confirmation",[m.DRAFT]:"/offre/:offerId/individuel/brouillon/confirmation",[m.EDITION]:""}}[s][a],P=({isCreation:e=!1,mode:a,step:s,isV2:i=!1})=>i?tt({isCreation:e,mode:a,step:s}):e?"/offre/individuelle/creation/informations":{[A.INFORMATIONS]:{[m.CREATION]:"/offre/individuelle/:offerId/creation/informations",[m.DRAFT]:"/offre/individuelle/:offerId/brouillon/informations",[m.EDITION]:"/offre/individuelle/:offerId/informations"},[A.STOCKS]:{[m.CREATION]:"/offre/individuelle/:offerId/creation/stocks",[m.DRAFT]:"/offre/individuelle/:offerId/brouillon/stocks",[m.EDITION]:"/offre/individuelle/:offerId/stocks"},[A.TARIFS]:{[m.CREATION]:"/offre/individuelle/:offerId/creation/tarifs",[m.DRAFT]:"/offre/individuelle/:offerId/brouillon/tarifs",[m.EDITION]:"/offre/individuelle/:offerId/tarifs"},[A.SUMMARY]:{[m.CREATION]:"/offre/individuelle/:offerId/creation/recapitulatif",[m.DRAFT]:"/offre/individuelle/:offerId/brouillon/recapitulatif",[m.EDITION]:"/offre/individuelle/:offerId/recapitulatif"},[A.CONFIRMATION]:{[m.CREATION]:"/offre/individuelle/:offerId/creation/confirmation",[m.DRAFT]:"/offre/individuelle/:offerId/brouillon/confirmation",[m.EDITION]:""}}[s][a],rt=(e,a)=>{switch(Qe(e)["offer-type"]){case k.PHYSICAL_GOOD:return k.PHYSICAL_GOOD;case k.VIRTUAL_GOOD:return k.VIRTUAL_GOOD;case k.PHYSICAL_EVENT:return k.PHYSICAL_EVENT;case k.VIRTUAL_EVENT:return k.VIRTUAL_EVENT}return a===null?null:a.isDigital?a.isEvent?k.VIRTUAL_EVENT:k.VIRTUAL_GOOD:a.isEvent?k.PHYSICAL_EVENT:k.PHYSICAL_GOOD},at=e=>e===null?null:e===k.PHYSICAL_EVENT||e===k.VIRTUAL_EVENT;var A=(e=>(e.INFORMATIONS="informations",e.TARIFS="tarifs",e.STOCKS="stocks",e.SUMMARY="recapitulatif",e.CONFIRMATION="confirmation",e))(A||{});const nt=()=>{const a=W().pathname.match(/[a-z]+$/);let s=a!==null?a[0]:"";return Object.values(A).includes(s)||(s=A.INFORMATIONS),s},ot={"stepper-creation":"_stepper-creation_1ckc5_1"},H=({shouldTrack:e=!0})=>{var D;const{offer:a}=et(),s=nt(),{logEvent:i}=he(),r=$e(),o=a!==null,g=!!(a!=null&&a.priceCategories&&((D=a==null?void 0:a.priceCategories)==null?void 0:D.length)>0),I=a!==null&&a.stocks.length>0,{search:N}=W(),T=rt(N,a),C=(a==null?void 0:a.isEvent)||at(T),x=[{id:A.INFORMATIONS,label:"Détails de l’offre",path:{[m.CREATION]:P({step:A.INFORMATIONS,mode:m.CREATION}),[m.DRAFT]:P({step:A.INFORMATIONS,mode:m.DRAFT}),[m.EDITION]:P({step:A.INFORMATIONS,mode:m.EDITION})}[r],isActive:!0},{id:A.STOCKS,label:C?"Dates & Capacités":"Stock & Prix",path:{[m.CREATION]:P({step:A.STOCKS,mode:m.CREATION}),[m.DRAFT]:P({step:A.STOCKS,mode:m.DRAFT}),[m.EDITION]:P({step:A.STOCKS,mode:m.EDITION})}[r],isActive:C&&g||!C&&o}];C&&x.splice(1,0,{id:A.TARIFS,label:"Tarifs",path:{[m.CREATION]:P({step:A.TARIFS,mode:m.CREATION}),[m.DRAFT]:P({step:A.TARIFS,mode:m.DRAFT}),[m.EDITION]:P({step:A.TARIFS,mode:m.EDITION})}[r],isActive:o}),r!==m.EDITION&&x.push({id:A.SUMMARY,label:"Récapitulatif",path:{[m.CREATION]:P({step:A.SUMMARY,mode:m.CREATION}),[m.DRAFT]:P({step:A.SUMMARY,mode:m.DRAFT})}[r],isActive:I},{id:A.CONFIRMATION,label:"Confirmation",isActive:!1});const _=x.map(R=>{const F={id:R.id,label:R.label,onClick:()=>{e&&(i==null||i(ve.CLICKED_OFFER_FORM_NAVIGATION,{from:s,to:F.id,used:ge.BREADCRUMB,isEdition:r!==m.CREATION,isDraft:r!==m.EDITION,offerId:a==null?void 0:a.id}))}};return R.isActive&&R.path&&a&&(F.url=pe(R.path,{offerId:a.id})),F});return E.jsx(se,{activeStep:s,steps:_,styleType:r!==m.EDITION?Z.STEPPER:Z.TAB,className:r!==m.EDITION?ot["stepper-creation"]:""})};try{H.displayName="OfferIndividualBreadcrumb",H.__docgenInfo={description:"",displayName:"OfferIndividualBreadcrumb",props:{shouldTrack:{defaultValue:{value:"true"},description:"",name:"shouldTrack",required:!1,type:{name:"boolean"}}}}}catch{}const it="_stepper_fjrud_2",st="_content_fjrud_6",lt="_title_fjrud_18",ct="_right_fjrud_21",q={stepper:it,content:st,title:lt,right:ct},$=({children:e,className:a})=>E.jsx("div",{className:X(q.content,a),children:e});try{$.displayName="OfferFormLayoutContent",$.__docgenInfo={description:"",displayName:"OfferFormLayoutContent",props:{className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}}}}}catch{}const J=({children:e,className:a})=>E.jsx("div",{className:X(q.stepper,a),children:e});try{J.displayName="OfferFormLayoutStepper",J.__docgenInfo={description:"",displayName:"OfferFormLayoutStepper",props:{className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}}}}}catch{}const Q=({actions:e,children:a,className:s})=>E.jsxs("div",{className:X(q.title,s),children:[E.jsx("div",{children:a}),e&&E.jsx("div",{className:q.right,children:e})]});try{Q.displayName="OfferFormLayoutTitleBlock",Q.__docgenInfo={description:"",displayName:"OfferFormLayoutTitleBlock",props:{actions:{defaultValue:null,description:"",name:"actions",required:!1,type:{name:"ReactNode"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}}}}}catch{}const V=({children:e,className:a})=>E.jsx("div",{className:a,children:e});V.TitleBlock=Q;V.Stepper=J;V.Content=$;const U=V;try{V.displayName="OfferFormLayout",V.__docgenInfo={description:"",displayName:"OfferFormLayout",props:{className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}}}}}catch{}const wt={title:"components/OfferFormLayout",component:U,decorators:[ie]},ut=()=>E.jsxs("div",{children:[E.jsx("button",{children:"Clique-moi"}),E.jsx("span",{children:"Statut"})]}),dt=()=>E.jsx("div",{style:{width:780},children:E.jsxs(U,{children:[E.jsxs(U.TitleBlock,{actions:ut(),children:[E.jsx("h1",{children:'"Mon super titre !'}),E.jsx("h4",{children:"Le nom de mon offre"})]}),E.jsx(U.Stepper,{children:E.jsx(H,{})}),E.jsx(U.Content,{children:E.jsxs("div",{children:[E.jsx("h5",{children:"Info"}),E.jsx("p",{children:"Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum."})]})})]})}),z=dt.bind({});var re,ae,ne;z.parameters={...z.parameters,docs:{...(re=z.parameters)==null?void 0:re.docs,source:{originalSource:`() => <div style={{
  width: 780
}}>
    <OfferFormLayout>
      <OfferFormLayout.TitleBlock actions={Actions()}>
        <h1>"Mon super titre !</h1>
        <h4>Le nom de mon offre</h4>
      </OfferFormLayout.TitleBlock>

      <OfferFormLayout.Stepper>
        <OfferIndividualBreadcrumb />
      </OfferFormLayout.Stepper>

      <OfferFormLayout.Content>
        <div>
          <h5>Info</h5>
          <p>
            Lorem Ipsum is simply dummy text of the printing and typesetting
            industry. Lorem Ipsum has been the industry's standard dummy text
            ever since the 1500s, when an unknown printer took a galley of type
            and scrambled it to make a type specimen book. It has survived not
            only five centuries, but also the leap into electronic typesetting,
            remaining essentially unchanged. It was popularised in the 1960s
            with the release of Letraset sheets containing Lorem Ipsum passages,
            and more recently with desktop publishing software like Aldus
            PageMaker including versions of Lorem Ipsum.
          </p>
        </div>
      </OfferFormLayout.Content>
    </OfferFormLayout>
  </div>`,...(ne=(ae=z.parameters)==null?void 0:ae.docs)==null?void 0:ne.source}}};const bt=["Default"];export{z as Default,bt as __namedExportsOrder,wt as default};
//# sourceMappingURL=OfferFormLayout.stories-ff2a2da8.js.map
