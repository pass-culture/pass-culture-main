import{j as s}from"./jsx-runtime-C_uOM0Gm.js";import{c as d}from"./index-TscbDd2H.js";import{s as f}from"./full-more-DLJb58kc.js";import{S as g}from"./SvgIcon-CJiY4LCz.js";import{r as n}from"./iframe-CTnXOULQ.js";const l={"image-placeholder":"_image-placeholder_3ixx5_1","image-placeholder-text":"_image-placeholder-text_3ixx5_12"};function c({className:e}){return s.jsxs("div",{className:d(l["image-placeholder"],e),children:[s.jsx(g,{alt:"",src:f,width:"48"}),s.jsx("p",{className:l["image-placeholder-text"],children:"Image corrompue, veuillez ajouter une nouvelle image"})]})}try{c.displayName="ImagePlaceholder",c.__docgenInfo={description:"",displayName:"ImagePlaceholder",props:{className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}}}}}catch{}const y=e=>{const a=n.useRef();return n.useEffect(()=>{a.current=e}),a.current};function m({src:e,alt:a,className:t,testId:r,placeholder:u}){const[p,o]=n.useState(!1),i=y(e);return n.useEffect(()=>{e!==i&&o(!1)},[e,i]),p?u:s.jsx("img",{className:t,src:e,alt:a,onError:()=>o(!0),"data-testid":r})}try{m.displayName="SafeImage",m.__docgenInfo={description:"",displayName:"SafeImage",props:{src:{defaultValue:null,description:"",name:"src",required:!0,type:{name:"string"}},alt:{defaultValue:null,description:"",name:"alt",required:!0,type:{name:"string"}},placeholder:{defaultValue:null,description:"",name:"placeholder",required:!0,type:{name:"ReactNode"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},testId:{defaultValue:null,description:"",name:"testId",required:!1,type:{name:"string"}}}}}catch{}const _=e=>typeof e=="object"&&e!==null&&"message"in e,h=e=>_(e)&&"name"in e&&e.name==="ApiError",b=(e,a="Une erreur s’est produite, veuillez réessayer")=>{if(!h(e))return a;const{body:t}=e;return Array.isArray(t)&&t.length>0?t.map(r=>Object.values(r).join(" ")).join(" "):t instanceof Object&&Object.keys(t).length>0?Object.values(t).map(r=>Array.isArray(r)?r.join(" "):r).join(" "):a},v=async(e,a="image.jpg")=>{const r=await(await fetch(e)).blob();return new File([r],a,{type:r.type})};export{c as I,m as S,b as a,v as g};
