import{j as D}from"./jsx-runtime-ffb262ed.js";import{W as ue}from"./index-44aefba6.js";import{B as de,a as ae}from"./Breadcrumb-6cd7ad69.js";import{r as w}from"./index-76fb7be0.js";import{a as z,i as fe,S as me}from"./Spinner-def88e3b.js";import{u as pe}from"./useNotification-5c4129b6.js";import{u as he}from"./utils-70f14cd5.js";import{O as f,I as P}from"./constants-6959e756.js";import{c as ve}from"./_commonjsHelpers-de833af9.js";import{u as ee,a as ge,g as ye}from"./index-70f1445f.js";import{u as Ie,E as Ae,O as Ce}from"./useAnalytics-ffed7ff8.js";import{c as te}from"./index-a587463d.js";import"./Stepper-69097eb0.js";import"./full-arrow-right-b1f27636.js";import"./SvgIcon-c0bf369c.js";import"./config-cb91ff0d.js";import"./VenuePhysicalLocation-313db5a9.js";import"./stroke-pass-cf331655.js";import"./notificationReducer-8713d724.js";import"./index-b0fbc9cc.js";import"./hoist-non-react-statics.cjs-3f8ebaa8.js";import"./react-is.production.min-a192e302.js";var _=(e=>(e.VISUAL="visual",e.MENTAL="mental",e.AUDIO="audio",e.MOTOR="motor",e.NONE="none",e))(_||{});const K="Nous avons rencontré un problème lors de la récupération des données.",Oe={isOk:!1,message:K,payload:{categories:[],subCategories:[]}},Ne=e=>({id:e.id,proLabel:e.proLabel,isSelectable:e.isSelectable}),Te=e=>({id:e.id,categoryId:e.categoryId,proLabel:e.proLabel,isEvent:e.isEvent,conditionalFields:e.conditionalFields,canBeDuo:e.canBeDuo,canBeEducational:e.canBeEducational,onlineOfflinePlatform:e.onlineOfflinePlatform,reimbursementRule:e.reimbursementRule,isSelectable:e.isSelectable,canBeWithdrawable:e.canBeWithdrawable}),Ee=async()=>{try{const e=await z.getCategories();return{isOk:!0,message:null,payload:{categories:e.categories.map(Ne),subCategories:e.subcategories.map(Te)}}}catch{return Oe}},De=e=>({id:e.venue.managingOfferer.id,name:e.venue.managingOfferer.name}),xe=e=>{const a={[_.VISUAL]:e.venue.visualDisabilityCompliant||!1,[_.MENTAL]:e.venue.mentalDisabilityCompliant||!1,[_.AUDIO]:e.venue.audioDisabilityCompliant||!1,[_.MOTOR]:e.venue.motorDisabilityCompliant||!1};return{id:e.venue.id,name:e.venue.name,publicName:e.venue.publicName||"",isVirtual:e.venue.isVirtual,address:e.venue.address||"",postalCode:e.venue.postalCode||"",departmentCode:e.venue.departementCode||"",city:e.venue.city||"",offerer:De(e),accessibility:{...a,[_.NONE]:!Object.values(a).includes(!0)}}},Fe=e=>{const a=e.remainingQuantity??"unlimited";return{beginningDatetime:e.beginningDatetime??null,bookingLimitDatetime:e.bookingLimitDatetime??null,bookingsQuantity:e.bookingsQuantity,dateCreated:new Date(e.dateCreated),hasActivationCode:e.hasActivationCode,id:e.id,isEventDeletable:e.isEventDeletable,isEventExpired:e.isEventExpired,isSoftDeleted:e.isSoftDeleted,price:e.price,priceCategoryId:e.priceCategoryId,quantity:e.quantity,remainingQuantity:a,activationCodesExpirationDatetime:e.activationCodesExpirationDatetime?new Date(e.activationCodesExpirationDatetime):null,activationCodes:[]}},Re=e=>{var a,l,i,r,n,g,I,O,E,N;return{author:((a=e.extraData)==null?void 0:a.author)||"",musicType:((l=e.extraData)==null?void 0:l.musicType)||"",musicSubType:((i=e.extraData)==null?void 0:i.musicSubType)||"",performer:((r=e.extraData)==null?void 0:r.performer)||"",ean:((n=e.extraData)==null?void 0:n.ean)||"",showType:((g=e.extraData)==null?void 0:g.showType)||"",showSubType:((I=e.extraData)==null?void 0:I.showSubType)||"",speaker:((O=e.extraData)==null?void 0:O.speaker)||"",stageDirector:((E=e.extraData)==null?void 0:E.stageDirector)||"",visa:((N=e.extraData)==null?void 0:N.visa)||""}},_e=e=>e===null?null:{name:e.name},Se=e=>{var a;if(e.activeMediation){if(e.activeMediation.thumbUrl)return{originalUrl:e.activeMediation.thumbUrl,url:e.activeMediation.thumbUrl,credit:((a=e.activeMediation)==null?void 0:a.credit)||""}}else if(e.thumbUrl)return{originalUrl:e.thumbUrl,url:e.thumbUrl,credit:""}},we=e=>{var i;const a={[_.VISUAL]:e.visualDisabilityCompliant||!1,[_.MENTAL]:e.mentalDisabilityCompliant||!1,[_.AUDIO]:e.audioDisabilityCompliant||!1,[_.MOTOR]:e.motorDisabilityCompliant||!1};return{id:e.id,bookingEmail:e.bookingEmail||"",bookingContact:e.bookingContact||"",description:e.description||"",durationMinutes:e.durationMinutes||null,isActive:e.isActive,isDuo:e.isDuo,isEvent:e.isEvent,isDigital:e.isDigital,isNational:e.isNational,name:e.name,offererId:e.venue.managingOfferer.id,offererName:e.venue.managingOfferer.name,priceCategories:e.priceCategories,subcategoryId:e.subcategoryId,url:e.url||"",externalTicketOfficeUrl:e.externalTicketOfficeUrl||"",venueId:e.venue.id,venue:xe(e),withdrawalDetails:e.withdrawalDetails||"",withdrawalDelay:e.withdrawalDelay===void 0?null:e.withdrawalDelay,withdrawalType:e.withdrawalType||null,image:Se(e),accessibility:{...a,[_.NONE]:!Object.values(a).includes(!0)},stocks:e.stocks.map(Fe),lastProviderName:((i=e.lastProvider)==null?void 0:i.name)||null,lastProvider:_e(e.lastProvider||null),status:e.status,...Re(e)}},ne={isOk:!1,message:"Une erreur est survenue lors de la récupération de votre offre",payload:null},Le=async e=>{if(e===void 0)return ne;try{const a=await z.getOffer(e);return{isOk:!0,message:"",payload:we(a)}}catch{return ne}};var Y="NOT_FOUND";function be(e){var a;return{get:function(i){return a&&e(a.key,i)?a.value:Y},put:function(i,r){a={key:i,value:r}},getEntries:function(){return a?[a]:[]},clear:function(){a=void 0}}}function ke(e,a){var l=[];function i(I){var O=l.findIndex(function(N){return a(I,N.key)});if(O>-1){var E=l[O];return O>0&&(l.splice(O,1),l.unshift(E)),E.value}return Y}function r(I,O){i(I)===Y&&(l.unshift({key:I,value:O}),l.length>e&&l.pop())}function n(){return l}function g(){l=[]}return{get:i,put:r,getEntries:n,clear:g}}var Me=function(a,l){return a===l};function Pe(e){return function(l,i){if(l===null||i===null||l.length!==i.length)return!1;for(var r=l.length,n=0;n<r;n++)if(!e(l[n],i[n]))return!1;return!0}}function Ve(e,a){var l=typeof a=="object"?a:{equalityCheck:a},i=l.equalityCheck,r=i===void 0?Me:i,n=l.maxSize,g=n===void 0?1:n,I=l.resultEqualityCheck,O=Pe(r),E=g===1?be(O):ke(g,O);function N(){var R=E.get(arguments);if(R===Y){if(R=e.apply(null,arguments),I){var x=E.getEntries(),T=x.find(function(F){return I(F.value,R)});T&&(R=T.value)}E.put(arguments,R)}return R}return N.clearCache=function(){return E.clear()},N}function Ue(e){var a=Array.isArray(e[0])?e[0]:e;if(!a.every(function(i){return typeof i=="function"})){var l=a.map(function(i){return typeof i=="function"?"function "+(i.name||"unnamed")+"()":typeof i}).join(", ");throw new Error("createSelector expects all input-selectors to be functions, but received the following types: ["+l+"]")}return a}function je(e){for(var a=arguments.length,l=new Array(a>1?a-1:0),i=1;i<a;i++)l[i-1]=arguments[i];var r=function(){for(var g=arguments.length,I=new Array(g),O=0;O<g;O++)I[O]=arguments[O];var E=0,N,R={memoizeOptions:void 0},x=I.pop();if(typeof x=="object"&&(R=x,x=I.pop()),typeof x!="function")throw new Error("createSelector expects an output function after the inputs, but received: ["+typeof x+"]");var T=R,F=T.memoizeOptions,S=F===void 0?l:F,t=Array.isArray(S)?S:[S],s=Ue(I),o=e.apply(void 0,[function(){return E++,x.apply(null,arguments)}].concat(t)),c=e(function(){for(var p=[],u=s.length,A=0;A<u;A++)p.push(s[A].apply(null,arguments));return N=o.apply(null,p),N});return Object.assign(c,{resultFunc:x,memoizedResultFunc:o,dependencies:s,lastResult:function(){return N},recomputations:function(){return E},resetRecomputations:function(){return E=0}}),c};return r}var Be=je(Ve);function qe(e){return typeof e=="string"||typeof e=="number"}var ze=function(){function e(){this._cache={}}var a=e.prototype;return a.set=function(i,r){this._cache[i]=r},a.get=function(i){return this._cache[i]},a.remove=function(i){delete this._cache[i]},a.clear=function(){this._cache={}},a.isValidCacheKey=function(i){return qe(i)},e}(),Ke=ze,Ge=function(){return!0};function Ye(){for(var e=arguments.length,a=new Array(e),l=0;l<e;l++)a[l]=arguments[l];return function(i,r){if(r)throw new Error('[re-reselect] "options" as second argument is not supported anymore. Please provide an option object as single argument.');var n=typeof i=="function"?{keySelector:i}:Object.assign({},i),g=0,I=a.pop(),O=Array.isArray(a[0])?a[0]:[].concat(a),E=function(){return g++,I.apply(void 0,arguments)};a.push(E);var N=n.cacheObject||new Ke,R=n.selectorCreator||Be,x=N.isValidCacheKey||Ge;n.keySelectorCreator&&(n.keySelector=n.keySelectorCreator({keySelector:n.keySelector,inputSelectors:O,resultFunc:I}));var T=function(){var S=n.keySelector.apply(n,arguments);if(x(S)){var t=N.get(S);return t===void 0&&(t=R.apply(void 0,a),N.set(S,t)),t.apply(void 0,arguments)}console.warn('[re-reselect] Invalid cache key "'+S+'" has been returned by keySelector function.')};return T.getMatchingSelector=function(){var F=n.keySelector.apply(n,arguments);return N.get(F)},T.removeMatchingSelector=function(){var F=n.keySelector.apply(n,arguments);N.remove(F)},T.clearCache=function(){N.clear()},T.resultFunc=I,T.dependencies=O,T.cache=N,T.recomputations=function(){return g},T.resetRecomputations=function(){return g=0},T.keySelector=n.keySelector,T}}const He=e=>e.length!==9?"Le SIREN doit comporter 9 caractères.":"",$e=async e=>{const a=he(e||"");if(e==="")return{isOk:!0,message:"",payload:{values:{address:"",city:"",name:"",postalCode:"",siren:"",apeCode:""}}};const l=He(a);if(l)return{isOk:!1,message:l,payload:{}};try{const i=await z.getSirenInfo(a);return{isOk:!0,message:`Informations récupéré avec success pour le SIREN: ${e}`,payload:{values:{address:i.address.street,city:i.address.city,name:i.name,postalCode:i.address.postalCode,siren:i.siren,apeCode:i.ape_code}}}}catch(i){let r="Une erreur est survenue";return fe(i)&&i.status==400&&i.body.global&&(r=i.body.global[0]),{isOk:!1,message:r,payload:{}}}},We=e=>e||"";Ye(e=>e,$e)(We);const Je={isOk:!1,message:K,payload:[]},Qe=async({offererId:e})=>{try{return{isOk:!0,message:null,payload:(await z.listOfferersNames(null,null,e)).offerersNames}}catch{return Je}},Xe=()=>{const e=ee(),l=[{pathPart:"creation",mode:f.CREATION},{pathPart:"brouillon",mode:f.DRAFT}].find(i=>e.pathname.includes(i.pathPart));return l?l.mode:f.EDITION};var Ze={exports:{}};/*
 * [hi-base32]{@link https://github.com/emn178/hi-base32}
 *
 * @version 0.5.0
 * @author Chen, Yi-Cyuan [emn178@gmail.com]
 * @copyright Chen, Yi-Cyuan 2015-2018
 * @license MIT
 */(function(e){(function(){var a=typeof window=="object"?window:{},l=!a.HI_BASE32_NO_NODE_JS&&typeof process=="object"&&process.versions&&process.versions.node;l&&(a=ve);var i=!a.HI_BASE32_NO_COMMON_JS&&!0&&e.exports,r="ABCDEFGHIJKLMNOPQRSTUVWXYZ234567".split(""),n={A:0,B:1,C:2,D:3,E:4,F:5,G:6,H:7,I:8,J:9,K:10,L:11,M:12,N:13,O:14,P:15,Q:16,R:17,S:18,T:19,U:20,V:21,W:22,X:23,Y:24,Z:25,2:26,3:27,4:28,5:29,6:30,7:31},g=[0,0,0,0,0,0,0,0],I=function(t,s){s.length>10&&(s="..."+s.substr(-10));var o=new Error("Decoded data is not valid UTF-8. Maybe try base32.decode.asBytes()? Partial data after reading "+t+" bytes: "+s+" <-");throw o.position=t,o},O=function(t){for(var s="",o=t.length,c=0,m=0,p,u;c<o;){if(p=t[c++],p<=127){s+=String.fromCharCode(p);continue}else p>191&&p<=223?(u=p&31,m=1):p<=239?(u=p&15,m=2):p<=247?(u=p&7,m=3):I(c,s);for(var A=0;A<m;++A)p=t[c++],(p<128||p>191)&&I(c,s),u<<=6,u+=p&63;u>=55296&&u<=57343&&I(c,s),u>1114111&&I(c,s),u<=65535?s+=String.fromCharCode(u):(u-=65536,s+=String.fromCharCode((u>>10)+55296),s+=String.fromCharCode((u&1023)+56320))}return s},E=function(t){if(t==="")return[];if(!/^[A-Z2-7=]+$/.test(t))throw new Error("Invalid base32 characters");t=t.replace(/=/g,"");for(var s,o,c,m,p,u,A,v,y=[],h=0,L=t.length,d=0,U=L>>3<<3;d<U;)s=n[t.charAt(d++)],o=n[t.charAt(d++)],c=n[t.charAt(d++)],m=n[t.charAt(d++)],p=n[t.charAt(d++)],u=n[t.charAt(d++)],A=n[t.charAt(d++)],v=n[t.charAt(d++)],y[h++]=(s<<3|o>>>2)&255,y[h++]=(o<<6|c<<1|m>>>4)&255,y[h++]=(m<<4|p>>>1)&255,y[h++]=(p<<7|u<<2|A>>>3)&255,y[h++]=(A<<5|v)&255;var b=L-U;return b===2?(s=n[t.charAt(d++)],o=n[t.charAt(d++)],y[h++]=(s<<3|o>>>2)&255):b===4?(s=n[t.charAt(d++)],o=n[t.charAt(d++)],c=n[t.charAt(d++)],m=n[t.charAt(d++)],y[h++]=(s<<3|o>>>2)&255,y[h++]=(o<<6|c<<1|m>>>4)&255):b===5?(s=n[t.charAt(d++)],o=n[t.charAt(d++)],c=n[t.charAt(d++)],m=n[t.charAt(d++)],p=n[t.charAt(d++)],y[h++]=(s<<3|o>>>2)&255,y[h++]=(o<<6|c<<1|m>>>4)&255,y[h++]=(m<<4|p>>>1)&255):b===7&&(s=n[t.charAt(d++)],o=n[t.charAt(d++)],c=n[t.charAt(d++)],m=n[t.charAt(d++)],p=n[t.charAt(d++)],u=n[t.charAt(d++)],A=n[t.charAt(d++)],y[h++]=(s<<3|o>>>2)&255,y[h++]=(o<<6|c<<1|m>>>4)&255,y[h++]=(m<<4|p>>>1)&255,y[h++]=(p<<7|u<<2|A>>>3)&255),y},N=function(t){for(var s,o,c,m,p,u="",A=t.length,v=0,y=parseInt(A/5)*5;v<y;)s=t.charCodeAt(v++),o=t.charCodeAt(v++),c=t.charCodeAt(v++),m=t.charCodeAt(v++),p=t.charCodeAt(v++),u+=r[s>>>3]+r[(s<<2|o>>>6)&31]+r[o>>>1&31]+r[(o<<4|c>>>4)&31]+r[(c<<1|m>>>7)&31]+r[m>>>2&31]+r[(m<<3|p>>>5)&31]+r[p&31];var h=A-y;return h===1?(s=t.charCodeAt(v),u+=r[s>>>3]+r[s<<2&31]+"======"):h===2?(s=t.charCodeAt(v++),o=t.charCodeAt(v),u+=r[s>>>3]+r[(s<<2|o>>>6)&31]+r[o>>>1&31]+r[o<<4&31]+"===="):h===3?(s=t.charCodeAt(v++),o=t.charCodeAt(v++),c=t.charCodeAt(v),u+=r[s>>>3]+r[(s<<2|o>>>6)&31]+r[o>>>1&31]+r[(o<<4|c>>>4)&31]+r[c<<1&31]+"==="):h===4&&(s=t.charCodeAt(v++),o=t.charCodeAt(v++),c=t.charCodeAt(v++),m=t.charCodeAt(v),u+=r[s>>>3]+r[(s<<2|o>>>6)&31]+r[o>>>1&31]+r[(o<<4|c>>>4)&31]+r[(c<<1|m>>>7)&31]+r[m>>>2&31]+r[m<<3&31]+"="),u},R=function(t){var s,o,c,m,p,u,A=!1,v="",y=0,h,L=0,d=t.length;if(t==="")return v;do{for(g[0]=g[5],g[1]=g[6],g[2]=g[7],h=L;y<d&&h<5;++y)u=t.charCodeAt(y),u<128?g[h++]=u:u<2048?(g[h++]=192|u>>6,g[h++]=128|u&63):u<55296||u>=57344?(g[h++]=224|u>>12,g[h++]=128|u>>6&63,g[h++]=128|u&63):(u=65536+((u&1023)<<10|t.charCodeAt(++y)&1023),g[h++]=240|u>>18,g[h++]=128|u>>12&63,g[h++]=128|u>>6&63,g[h++]=128|u&63);L=h-5,y===d&&++y,y>d&&h<6&&(A=!0),s=g[0],h>4?(o=g[1],c=g[2],m=g[3],p=g[4],v+=r[s>>>3]+r[(s<<2|o>>>6)&31]+r[o>>>1&31]+r[(o<<4|c>>>4)&31]+r[(c<<1|m>>>7)&31]+r[m>>>2&31]+r[(m<<3|p>>>5)&31]+r[p&31]):h===1?v+=r[s>>>3]+r[s<<2&31]+"======":h===2?(o=g[1],v+=r[s>>>3]+r[(s<<2|o>>>6)&31]+r[o>>>1&31]+r[o<<4&31]+"===="):h===3?(o=g[1],c=g[2],v+=r[s>>>3]+r[(s<<2|o>>>6)&31]+r[o>>>1&31]+r[(o<<4|c>>>4)&31]+r[c<<1&31]+"==="):(o=g[1],c=g[2],m=g[3],v+=r[s>>>3]+r[(s<<2|o>>>6)&31]+r[o>>>1&31]+r[(o<<4|c>>>4)&31]+r[(c<<1|m>>>7)&31]+r[m>>>2&31]+r[m<<3&31]+"=")}while(!A);return v},x=function(t){for(var s,o,c,m,p,u="",A=t.length,v=0,y=parseInt(A/5)*5;v<y;)s=t[v++],o=t[v++],c=t[v++],m=t[v++],p=t[v++],u+=r[s>>>3]+r[(s<<2|o>>>6)&31]+r[o>>>1&31]+r[(o<<4|c>>>4)&31]+r[(c<<1|m>>>7)&31]+r[m>>>2&31]+r[(m<<3|p>>>5)&31]+r[p&31];var h=A-y;return h===1?(s=t[v],u+=r[s>>>3]+r[s<<2&31]+"======"):h===2?(s=t[v++],o=t[v],u+=r[s>>>3]+r[(s<<2|o>>>6)&31]+r[o>>>1&31]+r[o<<4&31]+"===="):h===3?(s=t[v++],o=t[v++],c=t[v],u+=r[s>>>3]+r[(s<<2|o>>>6)&31]+r[o>>>1&31]+r[(o<<4|c>>>4)&31]+r[c<<1&31]+"==="):h===4&&(s=t[v++],o=t[v++],c=t[v++],m=t[v],u+=r[s>>>3]+r[(s<<2|o>>>6)&31]+r[o>>>1&31]+r[(o<<4|c>>>4)&31]+r[(c<<1|m>>>7)&31]+r[m>>>2&31]+r[m<<3&31]+"="),u},T=function(t,s){var o=typeof t!="string";return o&&t.constructor===ArrayBuffer&&(t=new Uint8Array(t)),o?x(t):s?N(t):R(t)},F=function(t,s){if(!s)return O(E(t));if(t==="")return"";if(!/^[A-Z2-7=]+$/.test(t))throw new Error("Invalid base32 characters");var o,c,m,p,u,A,v,y,h="",L=t.indexOf("=");L===-1&&(L=t.length);for(var d=0,U=L>>3<<3;d<U;)o=n[t.charAt(d++)],c=n[t.charAt(d++)],m=n[t.charAt(d++)],p=n[t.charAt(d++)],u=n[t.charAt(d++)],A=n[t.charAt(d++)],v=n[t.charAt(d++)],y=n[t.charAt(d++)],h+=String.fromCharCode((o<<3|c>>>2)&255)+String.fromCharCode((c<<6|m<<1|p>>>4)&255)+String.fromCharCode((p<<4|u>>>1)&255)+String.fromCharCode((u<<7|A<<2|v>>>3)&255)+String.fromCharCode((v<<5|y)&255);var b=L-U;return b===2?(o=n[t.charAt(d++)],c=n[t.charAt(d++)],h+=String.fromCharCode((o<<3|c>>>2)&255)):b===4?(o=n[t.charAt(d++)],c=n[t.charAt(d++)],m=n[t.charAt(d++)],p=n[t.charAt(d++)],h+=String.fromCharCode((o<<3|c>>>2)&255)+String.fromCharCode((c<<6|m<<1|p>>>4)&255)):b===5?(o=n[t.charAt(d++)],c=n[t.charAt(d++)],m=n[t.charAt(d++)],p=n[t.charAt(d++)],u=n[t.charAt(d++)],h+=String.fromCharCode((o<<3|c>>>2)&255)+String.fromCharCode((c<<6|m<<1|p>>>4)&255)+String.fromCharCode((p<<4|u>>>1)&255)):b===7&&(o=n[t.charAt(d++)],c=n[t.charAt(d++)],m=n[t.charAt(d++)],p=n[t.charAt(d++)],u=n[t.charAt(d++)],A=n[t.charAt(d++)],v=n[t.charAt(d++)],h+=String.fromCharCode((o<<3|c>>>2)&255)+String.fromCharCode((c<<6|m<<1|p>>>4)&255)+String.fromCharCode((p<<4|u>>>1)&255)+String.fromCharCode((u<<7|A<<2|v>>>3)&255)),h},S={encode:T,decode:F};F.asBytes=E,i?e.exports=S:a.base32=S})()})(Ze);const et={isOk:!1,message:K,payload:[]},tt=async({offererId:e})=>{try{const a=await z.getVenues(null,!0,e),l=i=>{const r={[_.VISUAL]:i.visualDisabilityCompliant||!1,[_.MENTAL]:i.mentalDisabilityCompliant||!1,[_.AUDIO]:i.audioDisabilityCompliant||!1,[_.MOTOR]:i.motorDisabilityCompliant||!1};return{id:i.id,managingOffererId:i.managingOffererId,name:i.publicName||i.name,isVirtual:i.isVirtual,withdrawalDetails:i.withdrawalDetails||null,accessibility:{...r,[_.NONE]:!Object.values(r).includes(!0)},bookingEmail:i.bookingEmail||null,hasMissingReimbursementPoint:i.hasMissingReimbursementPoint,hasCreatedOffer:i.hasCreatedOffer,venueType:i.venueTypeCode}};return{isOk:!0,message:null,payload:a.venues.map(l)}}catch{return et}},$={isOk:!1,message:K,payload:null},rt=async({offerer:e,queryOffererId:a,isAdmin:l})=>{const i={offererNames:[],venueList:[],categoriesData:{categories:[],subCategories:[]}};if(l&&!e&&!a)return Promise.resolve({isOk:!0,message:null,payload:i});const r=await Ee();if(r.isOk)i.categoriesData=r.payload;else return Promise.resolve($);const n=l&&e?e.id:a,g=await tt({offererId:l&&n?Number(n):void 0});if(g.isOk)i.venueList=g.payload;else return Promise.resolve($);if(l&&e)i.offererNames=[{id:e.id,name:e.name}];else{const I=await Qe({offererId:l?Number(n):void 0});if(I.isOk)i.offererNames=I.payload;else return Promise.resolve($)}return Promise.resolve({isOk:!0,message:null,payload:i})},ce=w.createContext({offerId:null,offer:null,setOffer:null,categories:[],subCategories:[],offererNames:[],venueList:[],shouldTrack:!0,setShouldTrack:()=>{},showVenuePopin:{},setSubcategory:()=>{}}),at=()=>w.useContext(ce);function oe({children:e,isUserAdmin:a,offerId:l,queryOffererId:i,querySubcategoryId:r}){const n="/accueil",g=pe(),I=ge(),[O,E]=w.useState(!0),[N,R]=w.useState(!0),[x,T]=w.useState(null),[F,S]=w.useState(),[t,s]=w.useState(null),[o,c]=w.useState([]),[m,p]=w.useState([]),[u,A]=w.useState(),[v,y]=w.useState([]),[h,L]=w.useState([]),[d,U]=w.useState({}),b=V=>{s(V),T(V?{id:V.venue.offerer.id,name:V.venue.offerer.name}:null)};return w.useEffect(()=>{async function V(){const k=await Le(Number(l));k.isOk?(b(k.payload),S(k.payload.venueId)):(I(n),g.error("Une erreur est survenue lors de la récupération de votre offre"))}l?V():b(null)},[l]),w.useEffect(()=>{async function V(){const k=await rt({offerer:x||void 0,queryOffererId:i,isAdmin:a});if(k.isOk){c(k.payload.categoriesData.categories),p(k.payload.categoriesData.subCategories),y(k.payload.offererNames),L(k.payload.venueList);const re={};k.payload.venueList.forEach(B=>{re[B.id]=!B.hasCreatedOffer&&B.hasMissingReimbursementPoint}),U(re),A(k.payload.categoriesData.subCategories.find(B=>B.id===r))}else c([]),p([]),y([]),L([]),I(n),g.error(K);E(!1)}(!l||t!==null)&&V()},[l,x]),O===!0?D.jsx(me,{}):D.jsx(ce.Provider,{value:{offerId:(t==null?void 0:t.id)||null,offer:t,setOffer:b,categories:o,subCategories:m,offererNames:v,venueList:h,shouldTrack:N,setShouldTrack:R,venueId:F,offerOfferer:x,showVenuePopin:d,subcategory:u,setSubcategory:A},children:e})}try{oe.displayName="IndividualOfferContextProvider",oe.__docgenInfo={description:"",displayName:"IndividualOfferContextProvider",props:{isUserAdmin:{defaultValue:null,description:"",name:"isUserAdmin",required:!0,type:{name:"boolean"}},offerId:{defaultValue:null,description:"",name:"offerId",required:!1,type:{name:"string"}},queryOffererId:{defaultValue:null,description:"",name:"queryOffererId",required:!1,type:{name:"string"}},querySubcategoryId:{defaultValue:null,description:"",name:"querySubcategoryId",required:!1,type:{name:"string"}}}}}catch{}const nt=({isCreation:e=!1,mode:a,step:l})=>e?"/offre/creation/individuel":{[C.INFORMATIONS]:{[f.CREATION]:"/offre/:offerId/individuel/creation",[f.DRAFT]:"/offre/:offerId/individuel/brouillon",[f.EDITION]:"/offre/:offerId/individuel/edition"},[C.STOCKS]:{[f.CREATION]:"/offre/:offerId/individuel/creation/stocks",[f.DRAFT]:"/offre/:offerId/individuel/brouillon/stocks",[f.EDITION]:"/offre/:offerId/individuel/stocks"},[C.TARIFS]:{[f.CREATION]:"/offre/:offerId/individuel/creation/tarifs",[f.DRAFT]:"/offre/:offerId/individuel/brouillon/tarifs",[f.EDITION]:"/offre/:offerId/individuel/tarifs"},[C.SUMMARY]:{[f.CREATION]:"/offre/:offerId/individuel/creation/recapitulatif",[f.DRAFT]:"/offre/:offerId/individuel/brouillon/recapitulatif",[f.EDITION]:"/offre/:offerId/individuel/recapitulatif"},[C.CONFIRMATION]:{[f.CREATION]:"/offre/:offerId/individuel/creation/confirmation",[f.DRAFT]:"/offre/:offerId/individuel/brouillon/confirmation",[f.EDITION]:""}}[l][a],M=({isCreation:e=!1,mode:a,step:l,isV2:i=!1})=>i?nt({isCreation:e,mode:a,step:l}):e?"/offre/individuelle/creation/informations":{[C.INFORMATIONS]:{[f.CREATION]:"/offre/individuelle/:offerId/creation/informations",[f.DRAFT]:"/offre/individuelle/:offerId/brouillon/informations",[f.EDITION]:"/offre/individuelle/:offerId/informations"},[C.STOCKS]:{[f.CREATION]:"/offre/individuelle/:offerId/creation/stocks",[f.DRAFT]:"/offre/individuelle/:offerId/brouillon/stocks",[f.EDITION]:"/offre/individuelle/:offerId/stocks"},[C.TARIFS]:{[f.CREATION]:"/offre/individuelle/:offerId/creation/tarifs",[f.DRAFT]:"/offre/individuelle/:offerId/brouillon/tarifs",[f.EDITION]:"/offre/individuelle/:offerId/tarifs"},[C.SUMMARY]:{[f.CREATION]:"/offre/individuelle/:offerId/creation/recapitulatif",[f.DRAFT]:"/offre/individuelle/:offerId/brouillon/recapitulatif",[f.EDITION]:"/offre/individuelle/:offerId/recapitulatif"},[C.CONFIRMATION]:{[f.CREATION]:"/offre/individuelle/:offerId/creation/confirmation",[f.DRAFT]:"/offre/individuelle/:offerId/brouillon/confirmation",[f.EDITION]:""}}[l][a],W=e=>{const i=ee().pathname.split("/");let n=i[i.length-1];return e&&(e.includes(n)||(n=e[0])),n};try{W.displayName="useActiveStep",W.__docgenInfo={description:"",displayName:"useActiveStep",props:{}}}catch{}const ot=e=>{switch(e){case P.PHYSICAL_GOOD:return P.PHYSICAL_GOOD;case P.VIRTUAL_GOOD:return P.VIRTUAL_GOOD;case P.PHYSICAL_EVENT:return P.PHYSICAL_EVENT;case P.VIRTUAL_EVENT:return P.VIRTUAL_EVENT}return null},it=e=>e===null?null:e===P.PHYSICAL_EVENT||e===P.VIRTUAL_EVENT;var C=(e=>(e.INFORMATIONS="informations",e.TARIFS="tarifs",e.STOCKS="stocks",e.SUMMARY="recapitulatif",e.CONFIRMATION="confirmation",e))(C||{});const st={"stepper-creation":"_stepper-creation_1ckc5_1"},J=({shouldTrack:e=!0})=>{var t;const{offer:a,subcategory:l}=at(),i=W(Object.values(C)),{logEvent:r}=Ie(),n=Xe(),g=a!==null,I=!!(a!=null&&a.priceCategories&&((t=a==null?void 0:a.priceCategories)==null?void 0:t.length)>0),O=a!==null&&a.stocks.length>0,{search:E}=ee(),R=new URLSearchParams(E).get("offer-type"),x=ot(R),T=(a==null?void 0:a.isEvent)||(l==null?void 0:l.isEvent)||it(x),F=[{id:C.INFORMATIONS,label:"Détails de l’offre",path:{[f.CREATION]:M({step:C.INFORMATIONS,mode:f.CREATION}),[f.DRAFT]:M({step:C.INFORMATIONS,mode:f.DRAFT}),[f.EDITION]:M({step:C.INFORMATIONS,mode:f.EDITION})}[n],isActive:!0},{id:C.STOCKS,label:T?"Dates & Capacités":"Stock & Prix",path:{[f.CREATION]:M({step:C.STOCKS,mode:f.CREATION}),[f.DRAFT]:M({step:C.STOCKS,mode:f.DRAFT}),[f.EDITION]:M({step:C.STOCKS,mode:f.EDITION})}[n],isActive:T&&I||!T&&g}];T&&F.splice(1,0,{id:C.TARIFS,label:"Tarifs",path:{[f.CREATION]:M({step:C.TARIFS,mode:f.CREATION}),[f.DRAFT]:M({step:C.TARIFS,mode:f.DRAFT}),[f.EDITION]:M({step:C.TARIFS,mode:f.EDITION})}[n],isActive:g}),n!==f.EDITION&&F.push({id:C.SUMMARY,label:"Récapitulatif",path:{[f.CREATION]:M({step:C.SUMMARY,mode:f.CREATION}),[f.DRAFT]:M({step:C.SUMMARY,mode:f.DRAFT})}[n],isActive:O},{id:C.CONFIRMATION,label:"Confirmation",isActive:!1});const S=F.map(s=>{const o={id:s.id,label:s.label,onClick:()=>{e&&(r==null||r(Ae.CLICKED_OFFER_FORM_NAVIGATION,{from:i,to:o.id,used:Ce.BREADCRUMB,isEdition:n!==f.CREATION,isDraft:n!==f.EDITION,offerId:a==null?void 0:a.id}))}};return s.isActive&&s.path&&a&&(o.url=ye(s.path,{offerId:a.id})),o});return D.jsx(de,{activeStep:i,steps:S,styleType:n!==f.EDITION?ae.STEPPER:ae.TAB,className:n!==f.EDITION?st["stepper-creation"]:""})};try{J.displayName="IndividualOfferBreadcrumb",J.__docgenInfo={description:"",displayName:"IndividualOfferBreadcrumb",props:{shouldTrack:{defaultValue:{value:"true"},description:"",name:"shouldTrack",required:!1,type:{name:"boolean"}}}}}catch{}const lt="_stepper_fjrud_2",ct="_content_fjrud_6",ut="_title_fjrud_18",dt="_right_fjrud_21",H={stepper:lt,content:ct,title:ut,right:dt},Q=({children:e,className:a})=>D.jsx("div",{className:te(H.content,a),children:e});try{Q.displayName="OfferFormLayoutContent",Q.__docgenInfo={description:"",displayName:"OfferFormLayoutContent",props:{className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}}}}}catch{}const X=({children:e,className:a})=>D.jsx("div",{className:te(H.stepper,a),children:e});try{X.displayName="OfferFormLayoutStepper",X.__docgenInfo={description:"",displayName:"OfferFormLayoutStepper",props:{className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}}}}}catch{}const Z=({actions:e,children:a,className:l})=>D.jsxs("div",{className:te(H.title,l),children:[D.jsx("div",{children:a}),e&&D.jsx("div",{className:H.right,children:e})]});try{Z.displayName="OfferFormLayoutTitleBlock",Z.__docgenInfo={description:"",displayName:"OfferFormLayoutTitleBlock",props:{actions:{defaultValue:null,description:"",name:"actions",required:!1,type:{name:"ReactNode"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}}}}}catch{}const j=({children:e,className:a})=>D.jsx("div",{className:a,children:e});j.TitleBlock=Z;j.Stepper=X;j.Content=Q;const q=j;try{j.displayName="OfferFormLayout",j.__docgenInfo={description:"",displayName:"OfferFormLayout",props:{className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}}}}}catch{}const Mt={title:"components/OfferFormLayout",component:q,decorators:[ue]},ft=()=>D.jsxs("div",{children:[D.jsx("button",{children:"Clique-moi"}),D.jsx("span",{children:"Statut"})]}),mt=()=>D.jsx("div",{style:{width:780},children:D.jsxs(q,{children:[D.jsxs(q.TitleBlock,{actions:ft(),children:[D.jsx("h1",{children:'"Mon super titre !'}),D.jsx("h4",{children:"Le nom de mon offre"})]}),D.jsx(q.Stepper,{children:D.jsx(J,{})}),D.jsx(q.Content,{children:D.jsxs("div",{children:[D.jsx("h5",{children:"Info"}),D.jsx("p",{children:"Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum."})]})})]})}),G=mt.bind({});var ie,se,le;G.parameters={...G.parameters,docs:{...(ie=G.parameters)==null?void 0:ie.docs,source:{originalSource:`() => <div style={{
  width: 780
}}>
    <OfferFormLayout>
      <OfferFormLayout.TitleBlock actions={Actions()}>
        <h1>"Mon super titre !</h1>
        <h4>Le nom de mon offre</h4>
      </OfferFormLayout.TitleBlock>

      <OfferFormLayout.Stepper>
        <IndividualOfferBreadcrumb />
      </OfferFormLayout.Stepper>

      <OfferFormLayout.Content>
        <div>
          <h5>Info</h5>
          <p>
            Lorem Ipsum is simply dummy text of the printing and typesetting
            industry. Lorem Ipsum has been the industry's standard dummy text
            ever since the 1500s, when an unknown printer took a galley of type
            and scrambled it to make a type specimen book. It has survived not
            only five centuries, but also the leap into electronic typesetting,
            remaining essentially unchanged. It was popularised in the 1960s
            with the release of Letraset sheets containing Lorem Ipsum passages,
            and more recently with desktop publishing software like Aldus
            PageMaker including versions of Lorem Ipsum.
          </p>
        </div>
      </OfferFormLayout.Content>
    </OfferFormLayout>
  </div>`,...(le=(se=G.parameters)==null?void 0:se.docs)==null?void 0:le.source}}};const Pt=["Default"];export{G as Default,Pt as __namedExportsOrder,Mt as default};
//# sourceMappingURL=OfferFormLayout.stories-e362b706.js.map
