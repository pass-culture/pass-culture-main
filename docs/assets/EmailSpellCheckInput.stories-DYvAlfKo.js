import{j as d}from"./jsx-runtime-DF2Pcvd1.js";import{u as H,a as Y,F as J}from"./index.esm-BBvhERNj.js";import{r as R}from"./index-B2-qRKKC.js";import{f as K}from"./full-next-B_76kGmE.js";import{B as Q}from"./Button-3Je6mDU7.js";import{I as X,B as Z}from"./types-yVZEaApa.js";import{c as u,g as ee}from"./_commonjsHelpers-Cpj98o6Y.js";import{T as te}from"./TextInput-0xNwOOSe.js";import"./index-DeARc5FM.js";import"./stroke-pass-CALgybTM.js";import"./SvgIcon-DfLnDDE5.js";import"./Tooltip-C-mHJC8R.js";import"./Button.module-Md2doL54.js";import"./BaseInput-JKfrEs2s.js";import"./stroke-search-dgesjRZH.js";import"./FieldError-B3RhE53I.js";import"./stroke-error-DSZD431a.js";import"./FieldLayoutCharacterCount-DKTgIOgC.js";import"./index.module-D7-Ko2QV.js";var z={},D={},A={},y={};Object.defineProperty(y,"__esModule",{value:!0});function ne(e,n){if(!e)throw new Error(n)}y.default=ne;var ae=u&&u.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(A,"__esModule",{value:!0});const g=ae(y);function re(e){g.default(Array.isArray(e.domains),"domains must be an array"),g.default(Array.isArray(e.topLevelDomains),"topLevelDomains must be an array"),g.default(Array.isArray(e.secondLevelDomains),"secondLevelDomains must be an array"),g.default(typeof e.distanceFunction=="function","distanceFunction must be a function")}A.default=re;var P={},T={};Object.defineProperty(T,"__esModule",{value:!0});function oe(e){return encodeURI(e).replace(/%20/g," ").replace(/%25/g,"%").replace(/%5E/g,"^").replace(/%60/g,"`").replace(/%7B/g,"{").replace(/%7C/g,"|").replace(/%7D/g,"}")}T.default=oe;var O={};Object.defineProperty(O,"__esModule",{value:!0});function le(e){const{domain:n,domains:t,distanceFunction:r,threshold:i}=e;let o,s=1/0,a=null;if(!(!n||!t)){for(let l=0;l<t.length;l++){if(n===t[l])return n;o=r(n,t[l]),o<s&&(s=o,a=t[l])}if(s<=i&&a!==null)return a}}O.default=le;var b={},E={};Object.defineProperty(E,"__esModule",{value:!0});const ie=/\s/;function se(e){return e.trim?e.trim():de(ue(e))}function ue(e){return e.trimLeft?e.trimLeft():e.replace(/^\s\s*/,"")}function de(e){if(e.trimRight)return e.trimRight();let n=e.length;for(;ie.test(e.charAt(--n)););return e.slice(0,n+1)}E.default=se;var ce=u&&u.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(b,"__esModule",{value:!0});const me=ce(E),fe=2;function pe(e){const t=me.default(e).split("@");if(t.length<fe)return!1;for(let a=0;a<t.length;a++)if(t[a]==="")return!1;let r="",i="";const o=t.pop(),s=o.split(".");if(s.length===0)return!1;if(s.length==1)i=s[0];else{r=s[0];for(let a=1;a<s.length;a++)i+=s[a]+".";i=i.substring(0,i.length-1)}return{topLevelDomain:i,secondLevelDomain:r,domain:o,address:t.join("@")}}b.default=pe;var F=u&&u.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(P,"__esModule",{value:!0});const _e=F(T),L=F(O),he=F(b);function ge(e){const n=_e.default(e.email.toLowerCase()),t=he.default(n);if(!t)return;const{domains:r,domainThreshold:i,distanceFunction:o,secondLevelDomains:s,topLevelDomains:a}=e;if(s&&a&&s.indexOf(t.secondLevelDomain)!==-1&&a.indexOf(t.topLevelDomain)!==-1)return;let l=L.default({domain:t.domain,domains:r,distanceFunction:o,threshold:i});if(l)return l==t.domain?void 0:{address:t.address,domain:l,full:t.address+"@"+l};const m=L.default({domain:t.secondLevelDomain,domains:s,distanceFunction:o,threshold:e.secondLevelThreshold}),_=L.default({domain:t.topLevelDomain,domains:a,distanceFunction:o,threshold:e.topLevelThreshold});if(t.domain){l=t.domain;let f=!1;if(m&&m!=t.secondLevelDomain&&(l=l.replace(t.secondLevelDomain,m),f=!0),_&&_!=t.topLevelDomain&&t.secondLevelDomain!==""&&(l=l.replace(new RegExp(t.topLevelDomain+"$"),_),f=!0),f)return{address:t.address,domain:l,full:t.address+"@"+l}}}P.default=ge;var I={},c={},M={};Object.defineProperty(M,"__esModule",{value:!0});function ve(e,n){if(e==null||e.length===0)return n==null||n.length===0?0:n.length;if(n==null||n.length===0)return e.length;let t=0,r=0,i=0,o=0;const s=5;for(;t+r<e.length&&t+i<n.length;){if(e.charAt(t+r)==n.charAt(t+i))o++;else{r=0,i=0;for(let a=0;a<s;a++){if(t+a<e.length&&e.charAt(t+a)==n.charAt(t)){r=a;break}if(t+a<n.length&&e.charAt(t)==n.charAt(t+a)){i=a;break}}}t++}return(e.length+n.length)/2-o}M.default=ve;var Le=u&&u.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(c,"__esModule",{value:!0});c.POPULAR_TLDS=c.POPULAR_DOMAINS=c.DEFAULT_CONFIG=void 0;const De=Le(M),G=["msn.com","bellsouth.net","telus.net","comcast.net","optusnet.com.au","earthlink.net","qq.com","sky.com","icloud.com","sympatico.ca","googlemail.com","att.net","xtra.co.nz","web.de","cox.net","gmail.com","ymail.com","aim.com","rogers.com","verizon.net","rocketmail.com","optonline.net","sbcglobal.net","aol.com","aim.com","me.com","mailw.com","btinternet.com","charter.net","shaw.ca","hey.com","proton.me","pm.com","protonmail.com","zoho.com","yandex.com","titan.email"];c.POPULAR_DOMAINS=G;const B=["com","com.au","com.tw","co","ca","co.nz","co.uk","de","fr","it","ru","org","edu","gov","jp","nl","kr","se","eu","ie","co.il","us","at","be","dk","hk","es","gr","ch","no","cz","net","net.au","info","biz","mil","co.jp","sg","hu","uk","sk","ar","cf","cl","cn","ga","gq","ir","ml","mx","nu","nz","ph","pl","ro","tk","tw","ua","vg","ws","xn","za","app","au","ai","biz","br","blog","cloud","club","cc","de","dev","digital","fi","finance","id","in","io","me","mobi","network","pw","so","xyz","software","to","tech"];c.POPULAR_TLDS=B;const Ae={domainThreshold:2,domains:G,secondLevelThreshold:2,secondLevelDomains:["yahoo","hotmail","mail","live","outlook"],topLevelThreshold:2,topLevelDomains:B,distanceFunction:De.default};c.DEFAULT_CONFIG=Ae;Object.defineProperty(I,"__esModule",{value:!0});const p=c;function ye(e){return{email:e.email,domains:e.domains||p.DEFAULT_CONFIG.domains,topLevelDomains:e.topLevelDomains||p.DEFAULT_CONFIG.topLevelDomains,secondLevelDomains:e.secondLevelDomains||p.DEFAULT_CONFIG.secondLevelDomains,distanceFunction:e.distanceFunction||p.DEFAULT_CONFIG.distanceFunction,domainThreshold:e.domainThreshold||p.DEFAULT_CONFIG.domainThreshold,secondLevelThreshold:e.secondLevelThreshold||p.DEFAULT_CONFIG.secondLevelThreshold,topLevelThreshold:e.topLevelThreshold||p.DEFAULT_CONFIG.topLevelThreshold,suggested:e.suggested||void 0,empty:e.suggested||void 0}}I.default=ye;var S=u&&u.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(D,"__esModule",{value:!0});const Pe=S(A),Te=S(P),Oe=S(I);function be(e){const n=Oe.default(e);Pe.default(n||{});const t=Te.default(n);return!t&&e.empty&&e.empty(),t&&e.suggested&&e.suggested(t),t}D.default=be;(function(e){var n=u&&u.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(e,"__esModule",{value:!0}),e.POPULAR_TLDS=e.POPULAR_DOMAINS=e.run=void 0;const t=n(D);e.run=t.default;const r=c;Object.defineProperty(e,"POPULAR_DOMAINS",{enumerable:!0,get:function(){return r.POPULAR_DOMAINS}}),Object.defineProperty(e,"POPULAR_TLDS",{enumerable:!0,get:function(){return r.POPULAR_TLDS}});const i={run:t.default,POPULAR_DOMAINS:r.POPULAR_DOMAINS,POPULAR_TLDS:r.POPULAR_TLDS};e.default=i})(z);const Ee=ee(z),Fe=["gmail.com","orange.fr","wanadoo.fr","yahoo.fr","hotmail.fr","free.fr","fnac.com","hotmail.com","outlook.fr","cultura.fr"],Ie={domainThreshold:4,domains:Fe,secondLevelDomains:[],topLevelDomains:[]},Me=(e,n)=>{var t;if(!n)return(t=Ee.run({...Ie,email:e}))==null?void 0:t.full},V={"email-validation-error":"_email-validation-error_1btx9_1","email-validation-tip":"_email-validation-tip_1btx9_9"},h=R.forwardRef(({name:e,description:n,label:t,className:r,onApplyTip:i,maxLength:o=255,required:s,asterisk:a=!0,error:l,...m},_)=>{const[f,j]=R.useState(),W=U=>{var x;const N=U.target.value;if(N.length>0){const C=Me(N.toString(),!!l);C?j(C):k()}(x=m.onBlur)==null||x.call(m,U)},k=()=>{j(null)};return d.jsxs(d.Fragment,{children:[d.jsx(te,{ref:_,label:t,name:e,description:n,autoComplete:"email",className:r,maxLength:o,required:s,asterisk:a,error:l,...m,onBlur:W}),f&&d.jsxs("div",{className:V["email-validation-error"],children:[d.jsxs("div",{className:V["email-validation-tip"],children:["Voulez-vous plutÃ´t dire ",f," ?"]}),d.jsx(Q,{variant:Z.TERNARY,icon:K,iconPosition:X.LEFT,onClick:()=>{i(f),k()},autoFocus:!0,children:"Appliquer la modification"})]})]})});h.displayName="EmailSpellCheckInput";try{h.displayName="EmailSpellCheckInput",h.__docgenInfo={description:"",displayName:"EmailSpellCheckInput",props:{name:{defaultValue:null,description:"",name:"name",required:!0,type:{name:"string"}},description:{defaultValue:null,description:"",name:"description",required:!0,type:{name:"string"}},label:{defaultValue:null,description:"",name:"label",required:!0,type:{name:"string"}},onApplyTip:{defaultValue:null,description:"",name:"onApplyTip",required:!0,type:{name:"(tip: string) => void"}},overrideInitialTip:{defaultValue:null,description:"",name:"overrideInitialTip",required:!1,type:{name:"string | null"}},maxLength:{defaultValue:{value:"255"},description:"",name:"maxLength",required:!1,type:{name:"number"}},required:{defaultValue:null,description:"",name:"required",required:!1,type:{name:"boolean"}},asterisk:{defaultValue:{value:"true"},description:"",name:"asterisk",required:!1,type:{name:"boolean"}},error:{defaultValue:null,description:"",name:"error",required:!1,type:{name:"string"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},onBlur:{defaultValue:null,description:"",name:"onBlur",required:!1,type:{name:"((event: FocusEvent<HTMLInputElement, Element>) => void)"}}}}}catch{}const Se=({children:e})=>{const n=Y({defaultValues:{email:"jmclery@htomil.com"}});return d.jsx(J,{...n,children:e})},Qe={title:"@/ui-kit/forms/EmailSpellCheckInput",component:h,decorators:[e=>d.jsx(Se,{children:d.jsx(e,{})})]},v={args:{name:"email",label:"Adresse email",description:"Format: email@exemple.com",error:"",required:!0,asterisk:!0},render:e=>{const{setValue:n,register:t}=H();return d.jsx(h,{...e,...t("email"),onApplyTip:r=>{n("email",r)}})}};var q,w,$;v.parameters={...v.parameters,docs:{...(q=v.parameters)==null?void 0:q.docs,source:{originalSource:`{
  args: {
    name: 'email',
    label: 'Adresse email',
    description: 'Format: email@exemple.com',
    error: '',
    required: true,
    asterisk: true
  },
  render: args => {
    // eslint-disable-next-line react-hooks/rules-of-hooks
    const {
      setValue,
      register
    } = useFormContext<WrapperFormValues>();
    return <EmailSpellCheckInput {...args} {...register('email')} onApplyTip={tip => {
      setValue('email', tip);
    }} />;
  }
}`,...($=(w=v.parameters)==null?void 0:w.docs)==null?void 0:$.source}}};const Xe=["Default"];export{v as Default,Xe as __namedExportsOrder,Qe as default};
