import{j as t}from"./jsx-runtime-CfatFE5O.js";import{c as v}from"./index-DeARc5FM.js";import{r as u}from"./index-ClcD9ViR.js";import{f as D}from"./full-clear-Q4kCtSRL.js";import{f as H}from"./full-close-5Oxr7nnd.js";import{f as O}from"./full-help-blUMxBcv.js";import{B as I}from"./Button-V7-uMFsX.js";import{B as T}from"./types-DjX_gQD6.js";import{F as S}from"./FieldError-Bb6I73np.js";const l={"field-layout":"_field-layout_19hog_1","field-layout-label":"_field-layout-label_19hog_5","field-layout-label-container":"_field-layout-label-container_19hog_10","field-layout-label-break":"_field-layout-label-break_19hog_13","field-layout-label-asterisk":"_field-layout-label-asterisk_19hog_16","field-layout-label-with-help":"_field-layout-label-with-help_19hog_19","field-layout-small-label":"_field-layout-small-label_19hog_23","field-layout-button-tooltip-help":"_field-layout-button-tooltip-help_19hog_31","field-layout-button-tooltip-help-content":"_field-layout-button-tooltip-help-content_19hog_38","field-layout-inline":"_field-layout-inline_19hog_43","field-layout-content":"_field-layout-content_19hog_51","field-layout-footer":"_field-layout-footer_19hog_58","field-layout-error":"_field-layout-error_19hog_64","field-layout-input-description":"_field-layout-input-description_19hog_70","input-wrapper":"_input-wrapper_19hog_79","clear-button":"_clear-button_19hog_83","clear-button-container":"_clear-button-container_19hog_90","clear-button-clear-container":"_clear-button-clear-container_19hog_95","clear-button-close-container":"_clear-button-close-container_19hog_100","clear-button-icon":"_clear-button-icon_19hog_113","visually-hidden":"_visually-hidden_19hog_121"};function W(a,e,o){var h=this,s=u.useRef(null),n=u.useRef(0),i=u.useRef(null),d=u.useRef([]),f=u.useRef(),p=u.useRef(),L=u.useRef(a),_=u.useRef(!0);L.current=a;var q=typeof window<"u",x=!e&&e!==0&&q;if(typeof a!="function")throw new TypeError("Expected a function");e=+e||0;var A=!!(o=o||{}).leading,C=!("trailing"in o)||!!o.trailing,b="maxWait"in o,R="debounceOnServer"in o&&!!o.debounceOnServer,N=b?Math.max(+o.maxWait||0,e):null;u.useEffect(function(){return _.current=!0,function(){_.current=!1}},[]);var m=u.useMemo(function(){var g=function(r){var c=d.current,E=f.current;return d.current=f.current=null,n.current=r,p.current=L.current.apply(E,c)},y=function(r,c){x&&cancelAnimationFrame(i.current),i.current=x?requestAnimationFrame(r):setTimeout(r,c)},V=function(r){if(!_.current)return!1;var c=r-s.current;return!s.current||c>=e||c<0||b&&r-n.current>=N},F=function(r){return i.current=null,C&&d.current?g(r):(d.current=f.current=null,p.current)},j=function r(){var c=Date.now();if(V(c))return F(c);if(_.current){var E=e-(c-s.current),B=b?Math.min(E,N-(c-n.current)):E;y(r,B)}},w=function(){if(q||R){var r=Date.now(),c=V(r);if(d.current=[].slice.call(arguments),f.current=h,s.current=r,c){if(!i.current&&_.current)return n.current=s.current,y(j,e),A?g(s.current):p.current;if(b)return y(j,e),g(s.current)}return i.current||y(j,e),p.current}};return w.cancel=function(){i.current&&(x?cancelAnimationFrame(i.current):clearTimeout(i.current)),n.current=0,d.current=s.current=f.current=i.current=null},w.isPending=function(){return!!i.current},w.flush=function(){return i.current?F(Date.now()):p.current},w},[A,b,e,N,C,x,q,R]);return m}function Y(a,e){return a===e}function z(a,e,o){var h=Y,s=u.useRef(a),n=u.useState({})[1],i=W(u.useCallback(function(f){s.current=f,n({})},[n]),e,o),d=u.useRef(a);return h(d.current,a)||(i(a),d.current=a),[s.current,i]}const $={"field-layout-character-count":"_field-layout-character-count_1si9v_1","visually-hidden":"_visually-hidden_1si9v_8"};function k({count:a,maxLength:e,name:o}){const[h]=z(a,1e3);return t.jsxs(t.Fragment,{children:[t.jsxs("span",{role:"status",className:$["visually-hidden"],id:`field-characters-count-${o}`,children:[h," caractères sur ",e]}),t.jsxs("span",{className:$["field-layout-character-count"],"data-testid":`counter-${o}`,"aria-hidden":!0,children:[a,"/",e]})]})}try{k.displayName="FieldLayoutCharacterCount",k.__docgenInfo={description:"",displayName:"FieldLayoutCharacterCount",props:{count:{defaultValue:null,description:"",name:"count",required:!0,type:{name:"number"}},maxLength:{defaultValue:null,description:"",name:"maxLength",required:!0,type:{name:"number"}},name:{defaultValue:null,description:"",name:"name",required:!0,type:{name:"string"}}}}}catch{}const M=({children:a,label:e,isLabelHidden:o=!1,hasLabelLineBreak:h=!0,className:s,name:n,showError:i=!1,error:d,count:f=void 0,maxLength:p=void 0,isOptional:L=!1,showMandatoryAsterisk:_=!0,smallLabel:q,hideFooter:x=!1,inline:A=!1,classNameLabel:C,classNameFooter:b,classNameInput:R,description:N,clearButtonProps:m,ErrorDetails:g,help:y})=>{const V=i&&!!d,F=f!==void 0&&p!==void 0,j=u.useId(),w=!x||V||F||!!g,r=(m==null?void 0:m.display)||"clear";return t.jsxs("div",{className:v(l["field-layout"],{[l["field-layout-small-label"]]:q,[l["field-layout-inline"]]:A},s),"data-testid":`wrapper-${n}`,children:[t.jsxs("div",{className:v(l["field-layout-label-container"],C,{[l["visually-hidden"]]:o}),children:[t.jsxs("div",{className:v({[l["field-layout-label-with-help"]]:!!y}),children:[t.jsxs("label",{className:v(l["field-layout-label"],h&&l["field-layout-label-break"]),htmlFor:n,children:[e," ",!L&&_&&"*"]}),y&&t.jsx(I,{className:l["field-layout-button-tooltip-help"],tooltipContentClassName:l["field-layout-button-tooltip-help-content"],icon:O,iconAlt:"À propos",type:"button",hasTooltip:!0,variant:T.SECONDARY,children:y})]}),N&&t.jsx("span",{id:`description-${n}`,"data-testid":`description-${n}`,className:l["field-layout-input-description"],children:N})]}),t.jsxs("div",{className:l["field-layout-content"],children:[t.jsxs("div",{className:v(l["input-wrapper"],R),children:[a,m&&t.jsx("div",{className:v(l["clear-button-container"],l[`clear-button-${r}-container`]),children:t.jsx(I,{...m,"aria-describedby":j,className:l["clear-button"],hasTooltip:!0,type:"button",icon:r==="clear"?D:H,variant:T.TERNARY,children:m.tooltip||"Supprimer"})})]}),w&&t.jsxs("div",{className:v(b,l["field-layout-footer"]),children:[t.jsx("div",{role:"alert",className:l["field-layout-error"],id:`error-details-${n}`,children:(V||!!g)&&t.jsxs(t.Fragment,{children:[V&&t.jsx(S,{name:n,children:d}),g]})}),F&&t.jsx(k,{count:f,maxLength:p,name:n})]})]})]})};try{M.displayName="FieldLayout",M.__docgenInfo={description:"",displayName:"FieldLayout",props:{label:{defaultValue:null,description:"",name:"label",required:!0,type:{name:"string | Element"}},name:{defaultValue:null,description:"",name:"name",required:!0,type:{name:"string"}},description:{defaultValue:null,description:"",name:"description",required:!1,type:{name:"string"}},maxLength:{defaultValue:{value:"undefined"},description:"",name:"maxLength",required:!1,type:{name:"number"}},isLabelHidden:{defaultValue:{value:"false"},description:`A flag to hide the label.
To be used with caution, as it can affect accessibility.
Do not use it if the label is mandatory, placeholder is not
a substitute for a label.`,name:"isLabelHidden",required:!1,type:{name:"boolean"}},hasLabelLineBreak:{defaultValue:{value:"true"},description:"",name:"hasLabelLineBreak",required:!1,type:{name:"boolean"}},isOptional:{defaultValue:{value:"false"},description:`A flag to indicate that the field is optional.
It will display an asterisk next to the label.`,name:"isOptional",required:!1,type:{name:"boolean"}},showMandatoryAsterisk:{defaultValue:{value:"true"},description:`Can be false only when it's the only field in a form and it's mandatory,
or when all fields are mandatory and the form indicates that all fields are mandatory`,name:"showMandatoryAsterisk",required:!1,type:{name:"boolean"}},className:{defaultValue:null,description:`A custom class for the field layout,
where label, description, input, and footer are displayed.`,name:"className",required:!1,type:{name:"string"}},classNameLabel:{defaultValue:null,description:"",name:"classNameLabel",required:!1,type:{name:"string"}},classNameFooter:{defaultValue:null,description:`A custom class for the footer,
where errors and character count are displayed.`,name:"classNameFooter",required:!1,type:{name:"string"}},classNameInput:{defaultValue:null,description:"",name:"classNameInput",required:!1,type:{name:"string"}},filterVariant:{defaultValue:null,description:"",name:"filterVariant",required:!1,type:{name:"boolean"}},smallLabel:{defaultValue:null,description:"A flag to display a smaller label.",name:"smallLabel",required:!1,type:{name:"boolean"}},hideFooter:{defaultValue:{value:"false"},description:`A flag to hide the footer.
To be used with caution, as it can affect accessibility.`,name:"hideFooter",required:!1,type:{name:"boolean"}},inline:{defaultValue:{value:"false"},description:"",name:"inline",required:!1,type:{name:"boolean"}},clearButtonProps:{defaultValue:null,description:"",name:"clearButtonProps",required:!1,type:{name:'(ButtonHTMLAttributes<HTMLButtonElement> & { tooltip: string; display?: "clear" | "close"; })'}},ErrorDetails:{defaultValue:null,description:"",name:"ErrorDetails",required:!1,type:{name:"ReactNode"}},showError:{defaultValue:{value:"false"},description:"",name:"showError",required:!1,type:{name:"boolean"}},error:{defaultValue:null,description:"",name:"error",required:!1,type:{name:"string"}},count:{defaultValue:{value:"undefined"},description:"",name:"count",required:!1,type:{name:"number"}},help:{defaultValue:null,description:"",name:"help",required:!1,type:{name:"string"}}}}}catch{}export{M as F};
