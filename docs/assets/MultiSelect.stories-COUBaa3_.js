import{V as ne}from"./index-CknRkA2u.js";import{j as e}from"./jsx-runtime-CfatFE5O.js";import{r as u}from"./index-ClcD9ViR.js";import{F as se}from"./FieldLayout-BmRJlFua.js";import{S as oe}from"./SelectedValuesTags-3Vmth-uC.js";import{B as ie,s as ce}from"./BaseInput-zpkrYXWy.js";import{B as D}from"./BaseCheckbox-BbgqOLh4.js";import{c as de}from"./index-DeARc5FM.js";import{f as ue}from"./full-down-Cmbtr9nI.js";import{f as pe}from"./full-up-D6TPt2ju.js";import{S as me}from"./SvgIcon-CUWb-Ez8.js";import"./index-D3nBDJe7.js";import"./index-MhaI5ydX.js";import"./_commonjsHelpers-Cpj98o6Y.js";import"./index-C3LhMar3.js";import"./full-clear-Q4kCtSRL.js";import"./full-close-5Oxr7nnd.js";import"./full-help-blUMxBcv.js";import"./Button-CSQAIFQX.js";import"./stroke-pass-CALgybTM.js";import"./Tooltip-CPMX2zM9.js";import"./useTooltipProps-C5TDwaI9.js";import"./Button.module-CvOOzViS.js";import"./types-DjX_gQD6.js";import"./FieldError-DblMbt5C.js";import"./stroke-error-DSZD431a.js";import"./FieldLayoutCharacterCount-DooUcf1c.js";function he(l,n){u.useEffect(()=>{const r=i=>{!l.current||l.current.contains(i.target)||n(i)};return document.addEventListener("mousedown",r),document.addEventListener("focusin",r),document.addEventListener("touchstart",r),()=>{document.removeEventListener("mousedown",r),document.removeEventListener("focusin",r),document.removeEventListener("touchstart",r)}},[l,n])}const fe="_container_1xzjk_1",be="_legend_1xzjk_9",ge="_trigger_1xzjk_17",_e="_badge_1xzjk_71",Se="_chevron_1xzjk_85",ye="_item_1xzjk_95",xe="_tags_1xzjk_107",ve="_panel_1xzjk_113",je="_label_1xzjk_130",ke="_checkbox_1xzjk_137",Oe="_separator_1xzjk_167",t={container:fe,legend:be,trigger:ge,"trigger-selected":"_trigger-selected_1xzjk_50","trigger-error":"_trigger-error_1xzjk_53","trigger-content":"_trigger-content_1xzjk_57","trigger-label":"_trigger-label_1xzjk_64",badge:_e,chevron:Se,"chevron-open":"_chevron-open_1xzjk_91",item:ye,tags:xe,panel:ve,"panel-scrollable":"_panel-scrollable_1xzjk_125",label:je,checkbox:ke,"search-input":"_search-input_1xzjk_141","empty-search":"_empty-search_1xzjk_146","visually-hidden":"_visually-hidden_1xzjk_155",separator:Oe},V=({id:l,options:n,onOptionSelect:r,onSelectAll:i,hasSearch:c=!1,searchLabel:f,hasSelectAllOptions:b,isAllChecked:m})=>{const[p,O]=u.useState(""),g=u.useMemo(()=>n.filter(s=>s.label.toLowerCase().includes(p.toLowerCase())),[n,p]);return e.jsxs("div",{id:l,className:t.panel,children:[c&&e.jsxs("div",{className:t["search-input"],children:[e.jsx("label",{className:t["visually-hidden"],htmlFor:`search-input-${l}`,children:f}),e.jsx(ie,{type:"search",id:`search-input-${l}`,leftIcon:ce,value:p,onChange:s=>O(s.target.value),autoComplete:"off",spellCheck:!1})]}),e.jsxs("div",{className:t["panel-scrollable"],children:[e.jsx("p",{className:t["visually-hidden"],role:"status",children:e.jsxs("span",{children:[g.length," résultats trouvés"]})}),g.length>0?e.jsxs("ul",{className:t.container,children:[b&&e.jsx("li",{className:t.item,children:e.jsx(D,{label:"Tout sélectionner",checked:m,labelClassName:t.label,inputClassName:t.checkbox,onChange:i})},"all-options"),g.map(s=>e.jsx("li",{className:t.item,children:e.jsx(D,{labelClassName:t.label,inputClassName:t.checkbox,label:s.label,checked:s.checked,onChange:()=>r(s)})},s.id))]}):e.jsx("div",{className:t["empty-search"],children:e.jsx("span",{children:"Aucun résultat trouvé pour votre recherche."})})]})]})};try{V.displayName="MultiSelectPanel",V.__docgenInfo={description:"",displayName:"MultiSelectPanel",props:{id:{defaultValue:null,description:"",name:"id",required:!0,type:{name:"string"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},label:{defaultValue:null,description:"",name:"label",required:!0,type:{name:"string"}},options:{defaultValue:null,description:"",name:"options",required:!0,type:{name:"(Option & { checked: boolean; })[]"}},hasSelectAllOptions:{defaultValue:null,description:"",name:"hasSelectAllOptions",required:!1,type:{name:"boolean"}},isAllChecked:{defaultValue:null,description:"",name:"isAllChecked",required:!0,type:{name:"boolean"}},hasSearch:{defaultValue:{value:"false"},description:"",name:"hasSearch",required:!1,type:{name:"boolean"}},searchLabel:{defaultValue:null,description:"",name:"searchLabel",required:!1,type:{name:"string"}},onOptionSelect:{defaultValue:null,description:"",name:"onOptionSelect",required:!0,type:{name:"(option: Option) => void"}},onSelectAll:{defaultValue:null,description:"",name:"onSelectAll",required:!0,type:{name:"() => void"}}}}}catch{}const N=({id:l,isOpen:n,selectedCount:r,toggleDropdown:i,buttonLabel:c,fieldLabel:f,disabled:b,error:m})=>e.jsxs(e.Fragment,{children:[e.jsx("legend",{className:t["visually-hidden"],children:f}),e.jsxs("button",{type:"button",className:de(t.trigger,{[t["trigger-selected"]]:r>0,[t["trigger-error"]]:!!m}),onClick:i,"aria-haspopup":"listbox","aria-label":c,"aria-expanded":n,"aria-controls":l,disabled:b,"data-error":!!m,children:[e.jsxs("div",{className:t["trigger-content"],children:[r>0&&e.jsxs("div",{className:t.badge,children:[r," ",e.jsx("span",{className:t["visually-hidden"],children:"éléments sélectionnés"})]}),e.jsx("span",{className:t["trigger-label"],children:c})]}),e.jsx(me,{className:`${t.chevron} ${n?t.chevronOpen:""}`,src:n?pe:ue})]})]});try{N.displayName="MultiSelectTrigger",N.__docgenInfo={description:"",displayName:"MultiSelectTrigger",props:{id:{defaultValue:null,description:"",name:"id",required:!0,type:{name:"string"}},isOpen:{defaultValue:null,description:"",name:"isOpen",required:!0,type:{name:"boolean"}},selectedCount:{defaultValue:null,description:"",name:"selectedCount",required:!0,type:{name:"number"}},toggleDropdown:{defaultValue:null,description:"",name:"toggleDropdown",required:!0,type:{name:"() => void"}},buttonLabel:{defaultValue:null,description:"",name:"buttonLabel",required:!0,type:{name:"string"}},fieldLabel:{defaultValue:null,description:"",name:"fieldLabel",required:!0,type:{name:"string"}},disabled:{defaultValue:null,description:"",name:"disabled",required:!1,type:{name:"boolean"}},error:{defaultValue:null,description:"",name:"error",required:!1,type:{name:"string"}}}}}catch{}const q=({options:l,defaultOptions:n=[],hasSearch:r=!1,searchLabel:i,label:c,hasSelectAllOptions:f,disabled:b,onSelectedOptionsChanged:m,error:p,name:O,buttonLabel:g})=>{const[s,A]=u.useState(!1),[o,ee]=u.useState(n),C=o.length===l.length,I=u.useRef(null),z=u.useId(),te=()=>A(a=>!a);function L(a){ee(a),m(a)}const ae=a=>{const d=o.some(_=>_.id===a.id)?o.filter(_=>_.id!==a.id):[...o,a];L(d)},le=()=>{L(C?[]:l)},re=a=>{const d=o.filter(_=>_.id!==a);L(d)},w=a=>{a.key==="Escape"&&A(!1)};return u.useEffect(()=>(document.addEventListener("keydown",w),()=>{document.removeEventListener("keydown",w)}),[]),he(I,()=>A(!1)),e.jsx(se,{label:c,name:O,error:p,showError:!!p,children:e.jsxs("fieldset",{className:t.container,children:[e.jsxs("div",{ref:I,children:[e.jsx(N,{id:z,buttonLabel:g,fieldLabel:c,isOpen:s,toggleDropdown:te,selectedCount:o.length,disabled:b,error:p}),s&&e.jsx(V,{id:z,label:c,options:l.map(a=>({...a,checked:o.some(d=>d.id===a.id)})),onOptionSelect:ae,onSelectAll:le,isAllChecked:C,hasSearch:r,searchLabel:i,hasSelectAllOptions:f})]}),e.jsx(oe,{disabled:!1,selectedOptions:o.map(a=>a.id),removeOption:re,fieldName:"tags",optionsLabelById:o.reduce((a,d)=>({...a,[d.id]:d.label}),{})})]})})};try{q.displayName="MultiSelect",q.__docgenInfo={description:`MultiSelect component for selecting multiple options from a dropdown list.

This component provides a customizable dropdown for selecting multiple options,
with features like search functionality, select all option, and individual option selection.
It integrates with form layouts.`,displayName:"MultiSelect",props:{options:{defaultValue:null,description:"Array of available options",name:"options",required:!0,type:{name:"Option[]"}},defaultOptions:{defaultValue:{value:"[]"},description:"Array of initially selected options",name:"defaultOptions",required:!1,type:{name:"Option[]"}},label:{defaultValue:null,description:"Label for the MultiSelect field",name:"label",required:!0,type:{name:"string"}},hasSelectAllOptions:{defaultValue:null,description:'Whether to include a "Select All" option',name:"hasSelectAllOptions",required:!1,type:{name:"boolean"}},disabled:{defaultValue:null,description:"Whether the MultiSelect is disabled",name:"disabled",required:!1,type:{name:"boolean"}},onSelectedOptionsChanged:{defaultValue:null,description:"Callback function called when selected options change",name:"onSelectedOptionsChanged",required:!0,type:{name:"(options: Option[]) => void"}},error:{defaultValue:null,description:"Error message to display",name:"error",required:!1,type:{name:"string"}},name:{defaultValue:null,description:"Name attribute for the form field",name:"name",required:!0,type:{name:"string"}},buttonLabel:{defaultValue:null,description:"Label for the dropdown button",name:"buttonLabel",required:!0,type:{name:"string"}},hasSearch:{defaultValue:{value:"false"},description:"Whether to include a search bar above options\nIf `hasSearch` is `true`, `searchLabel` are required. This part applies the condition",name:"hasSearch",required:!1,type:{name:"boolean"}},searchLabel:{defaultValue:null,description:"",name:"searchLabel",required:!1,type:{name:"string"}}}}}catch{}const et={title:"ui-kit/MultiSelect",decorators:[ne],component:q,parameters:{docs:{story:{inline:!1,iframeHeight:380}}}},Ae=[{id:"1",label:"01 - Ain"},{id:"2",label:"02 - Aisne"},{id:"3",label:"03 - Allier"},{id:"4",label:"04 - Alpes-de-Haute-Provence"},{id:"5",label:"05 - Hautes-Alpes"},{id:"6",label:"06 - Alpes-Maritimes"},{id:"7",label:"07 - Ardèche"},{id:"8",label:"08 - Ardennes"},{id:"9",label:"09 - Ariège"},{id:"10",label:"10 - Aube"},{id:"11",label:"11 - Aude"},{id:"12",label:"12 - Aveyron"},{id:"13",label:"13 - Bouches-du-Rhône"},{id:"14",label:"14 - Calvados"},{id:"15",label:"15 - Cantal"}],h={options:Ae,legend:"Département",label:"Sélectionner un département"},S={args:{...h}},y={args:{...h,defaultOptions:[{id:"2",label:"75 - Paris"},{id:"3",label:"44 - Nantes"}]}},x={args:{...h,hasSearch:!0,searchLabel:"Rechercher des départements",buttonLabel:"Départements",label:"Sélectionner des départements",name:"départements"}},v={args:{...h,hasSelectAllOptions:!0,buttonLabel:"Départements",label:"Sélectionner des départements",name:"départements"}},j={args:{...h,hasSearch:!0,searchLabel:"Rechercher des départements",hasSelectAllOptions:!0,buttonLabel:"Départements",label:"Sélectionner des départements"}},k={args:{...h,buttonLabel:"Départements",label:"Sélectionner des départements",error:"Veuillez sélectionner un département",name:"départements"}};var E,M,P;S.parameters={...S.parameters,docs:{...(E=S.parameters)==null?void 0:E.docs,source:{originalSource:`{
  args: {
    ...defaultProps
  }
}`,...(P=(M=S.parameters)==null?void 0:M.docs)==null?void 0:P.source}}};var W,R,T;y.parameters={...y.parameters,docs:{...(W=y.parameters)==null?void 0:W.docs,source:{originalSource:`{
  args: {
    ...defaultProps,
    defaultOptions: [{
      id: '2',
      label: '75 - Paris'
    }, {
      id: '3',
      label: '44 - Nantes'
    }]
  }
}`,...(T=(R=y.parameters)==null?void 0:R.docs)==null?void 0:T.source}}};var B,F,$;x.parameters={...x.parameters,docs:{...(B=x.parameters)==null?void 0:B.docs,source:{originalSource:`{
  args: {
    ...defaultProps,
    hasSearch: true,
    searchLabel: 'Rechercher des départements',
    buttonLabel: 'Départements',
    label: 'Sélectionner des départements',
    name: 'départements'
  }
}`,...($=(F=x.parameters)==null?void 0:F.docs)==null?void 0:$.source}}};var H,K,U;v.parameters={...v.parameters,docs:{...(H=v.parameters)==null?void 0:H.docs,source:{originalSource:`{
  args: {
    ...defaultProps,
    hasSelectAllOptions: true,
    buttonLabel: 'Départements',
    label: 'Sélectionner des départements',
    name: 'départements'
  }
}`,...(U=(K=v.parameters)==null?void 0:K.docs)==null?void 0:U.source}}};var G,J,Q;j.parameters={...j.parameters,docs:{...(G=j.parameters)==null?void 0:G.docs,source:{originalSource:`{
  args: {
    ...defaultProps,
    hasSearch: true,
    searchLabel: 'Rechercher des départements',
    hasSelectAllOptions: true,
    buttonLabel: 'Départements',
    label: 'Sélectionner des départements'
  }
}`,...(Q=(J=j.parameters)==null?void 0:J.docs)==null?void 0:Q.source}}};var X,Y,Z;k.parameters={...k.parameters,docs:{...(X=k.parameters)==null?void 0:X.docs,source:{originalSource:`{
  args: {
    ...defaultProps,
    buttonLabel: 'Départements',
    label: 'Sélectionner des départements',
    error: 'Veuillez sélectionner un département',
    name: 'départements'
  }
}`,...(Z=(Y=k.parameters)==null?void 0:Y.docs)==null?void 0:Z.source}}};const tt=["Default","WithDefaultOptions","WithSearchInput","WithSelectAllOption","WithSearchInputAndSelectAllOption","WithError"];export{S as Default,y as WithDefaultOptions,k as WithError,x as WithSearchInput,j as WithSearchInputAndSelectAllOption,v as WithSelectAllOption,tt as __namedExportsOrder,et as default};
