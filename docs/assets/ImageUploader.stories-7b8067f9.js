import{j as c}from"./jsx-runtime-ffb262ed.js";import{r as _}from"./index-76fb7be0.js";import{g as rr,R as nr,n as ar}from"./notificationReducer-96c596d5.js";import{S as ir,a as at,g as or}from"./Spinner-d902c896.js";import{_ as ur,D as Ft}from"./DialogBox-d35e49a8.js";import"./hoist-non-react-statics.cjs-3f8ebaa8.js";import{f as lr}from"./full-show-8f58c70a.js";import{D as sr}from"./Divider-7c035ea9.js";import{S as Tt}from"./SubmitButton-ac42f7a5.js";import"./Tag-2c2f8155.js";import{B as ge,a as ve}from"./Button-870abbd5.js";import"./TextInput-89d10e68.js";import"./TextArea-c75eb086.js";import"./Select-75a52864.js";import"./RadioButton-b9d41adc.js";import"./EmailSpellCheckInput-97c6fdb4.js";import"./DatePicker-7a86e1ea.js";import"./TimePicker-9296f708.js";import"./MultiSelectAutocomplete-712c3933.js";import"./stroke-offer-152efb83.js";import"./Banner-ac29b041.js";import"./InfoBox-f880f60a.js";import"./Thumb-a813d0e8.js";import{I as Dt,a as oe}from"./ImagePreviewsWrapper-2dfd564c.js";import{u as Mt}from"./useNotification-49718deb.js";import{f as cr}from"./full-trash-98c73dd7.js";import{S as qt}from"./SvgIcon-c0bf369c.js";import{C as dr}from"./ConfirmDialog-761eec11.js";import{s as fr}from"./stroke-trash-04d1aada.js";import{f as pr}from"./full-edit-fa9e4e17.js";import{c as Xe}from"./index-a587463d.js";import{s as mr,f as gr}from"./stroke-more-2a2e7561.js";import{u as vr,F as hr}from"./formik.esm-96bdd02b.js";import{C as yr}from"./CreditInput-cf90e3c4.js";import{I as _r}from"./ImageEditor-17dd4c49.js";import{g as br,i as ie,C as wr}from"./imageConstraints-b22a3264.js";import"./BaseCheckbox-2cbf2f9d.js";import{B as Er}from"./BaseFileInput-5547a44b.js";import"./stroke-down-fe50db78.js";import"./AutocompleteList-8264ed5d.js";import"./FieldError-0089fdbc.js";import"./FieldSuccess-31bdacb0.js";import{c as Ir,a as jr}from"./index.esm-93e60fe1.js";import{P as Sr}from"./PreferredOrientation-9bfa0563.js";import"./_commonjsHelpers-de833af9.js";import"./index-b0fbc9cc.js";import"./config-cb91ff0d.js";import"./stroke-pass-cf331655.js";import"./objectWithoutPropertiesLoose-df62547b.js";import"./tslib.es6-9c2726d7.js";import"./typeof-7fd5df1e.js";import"./stroke-close-3a7bfe9e.js";import"./index-76bbc159.js";import"./full-right-83efe067.js";import"./Tooltip-383b3df2.js";import"./BaseInput-fad17e7a.js";import"./index-9d475cdf.js";import"./BaseRadio-dfa7f1ae.js";import"./full-next-ebff3494.js";import"./Checkbox-ba83a848.js";import"./CheckboxGroup-58926f04.js";import"./stroke-show-1133cf8e.js";import"./utils-70f14cd5.js";import"./index-564ee5c9.js";import"./getLabelString-a0462018.js";import"./full-clear-9268779e.js";import"./shadow-tips-help-841f916a.js";import"./shadow-tips-warning-66fb0429.js";import"./LinkNodes-50260786.js";import"./full-link-9eb5e1cb.js";import"./stroke-error-ed5fe82d.js";import"./Dialog-1f389d90.js";import"./useEffectUnmount-959ed16c.js";import"./constants-79bc88c3.js";import"./stroke-valid-9c345a33.js";function Pr(){const e=rr();let t=null,r=null;return{clear(){t=null,r=null},notify(){e(()=>{let n=t;for(;n;)n.callback(),n=n.next})},get(){let n=[],a=t;for(;a;)n.push(a),a=a.next;return n},subscribe(n){let a=!0,i=r={callback:n,next:null,prev:r};return i.prev?i.prev.next=i:t=i,function(){!a||t===null||(a=!1,i.next?i.next.prev=i.prev:r=i.prev,i.prev?i.prev.next=i.next:t=i.next)}}}}const it={notify(){},get:()=>[]};function Or(e,t){let r,n=it;function a(f){return s(),n.subscribe(f)}function i(){n.notify()}function u(){d.onStateChange&&d.onStateChange()}function l(){return!!r}function s(){r||(r=t?t.addNestedSub(u):e.subscribe(u),n=Pr())}function o(){r&&(r(),r=void 0,n.clear(),n=it)}const d={addNestedSub:a,notifyNestedSubs:i,handleChangeWrapper:u,isSubscribed:l,trySubscribe:s,tryUnsubscribe:o,getListeners:()=>n};return d}const xr=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Cr=xr?_.useLayoutEffect:_.useEffect;function Nr({store:e,context:t,children:r,serverState:n,stabilityCheck:a="once",noopCheck:i="once"}){const u=_.useMemo(()=>{const o=Or(e);return{store:e,subscription:o,getServerState:n?()=>n:void 0,stabilityCheck:a,noopCheck:i}},[e,n,a,i]),l=_.useMemo(()=>e.getState(),[e]);Cr(()=>{const{subscription:o}=u;return o.onStateChange=o.notifyNestedSubs,o.trySubscribe(),l!==e.getState()&&o.notifyNestedSubs(),()=>{o.tryUnsubscribe(),o.onStateChange=void 0}},[u,l]);const s=t||nr;return _.createElement(s.Provider,{value:u},r)}function C(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];throw Error("[Immer] minified error nr: "+e+(r.length?" "+r.map(function(a){return"'"+a+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function B(e){return!!e&&!!e[I]}function L(e){var t;return!!e&&(function(r){if(!r||typeof r!="object")return!1;var n=Object.getPrototypeOf(r);if(n===null)return!0;var a=Object.hasOwnProperty.call(n,"constructor")&&n.constructor;return a===Object||typeof a=="function"&&Function.toString.call(a)===qr}(e)||Array.isArray(e)||!!e[ft]||!!(!((t=e.constructor)===null||t===void 0)&&t[ft])||Ye(e)||Ze(e))}function k(e,t,r){r===void 0&&(r=!1),Y(e)===0?(r?Object.keys:G)(e).forEach(function(n){r&&typeof n=="symbol"||t(n,e[n],e)}):e.forEach(function(n,a){return t(a,n,e)})}function Y(e){var t=e[I];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:Ye(e)?2:Ze(e)?3:0}function $(e,t){return Y(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function Ar(e,t){return Y(e)===2?e.get(t):e[t]}function Bt(e,t,r){var n=Y(e);n===2?e.set(t,r):n===3?e.add(r):e[t]=r}function Lt(e,t){return e===t?e!==0||1/e==1/t:e!=e&&t!=t}function Ye(e){return Dr&&e instanceof Map}function Ze(e){return Mr&&e instanceof Set}function q(e){return e.o||e.t}function Je(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=Wt(e);delete t[I];for(var r=G(t),n=0;n<r.length;n++){var a=r[n],i=t[a];i.writable===!1&&(i.writable=!0,i.configurable=!0),(i.get||i.set)&&(t[a]={configurable:!0,writable:!0,enumerable:i.enumerable,value:e[a]})}return Object.create(Object.getPrototypeOf(e),t)}function Qe(e,t){return t===void 0&&(t=!1),et(e)||B(e)||!L(e)||(Y(e)>1&&(e.set=e.add=e.clear=e.delete=Rr),Object.freeze(e),t&&k(e,function(r,n){return Qe(n,!0)},!0)),e}function Rr(){C(2)}function et(e){return e==null||typeof e!="object"||Object.isFrozen(e)}function U(e){var t=Fe[e];return t||C(18,e),t}function Ur(e,t){Fe[e]||(Fe[e]=t)}function Re(){return re}function be(e,t){t&&(U("Patches"),e.u=[],e.s=[],e.v=t)}function ue(e){Ue(e),e.p.forEach(Vr),e.p=null}function Ue(e){e===re&&(re=e.l)}function ot(e){return re={p:[],l:re,h:e,m:!0,_:0}}function Vr(e){var t=e[I];t.i===0||t.i===1?t.j():t.g=!0}function we(e,t){t._=t.p.length;var r=t.p[0],n=e!==void 0&&e!==r;return t.h.O||U("ES5").S(t,e,n),n?(r[I].P&&(ue(t),C(4)),L(e)&&(e=le(t,e),t.l||se(t,e)),t.u&&U("Patches").M(r[I].t,e,t.u,t.s)):e=le(t,r,[]),ue(t),t.u&&t.v(t.u,t.s),e!==kt?e:void 0}function le(e,t,r){if(et(t))return t;var n=t[I];if(!n)return k(t,function(l,s){return ut(e,n,t,l,s,r)},!0),t;if(n.A!==e)return t;if(!n.P)return se(e,n.t,!0),n.t;if(!n.I){n.I=!0,n.A._--;var a=n.i===4||n.i===5?n.o=Je(n.k):n.o,i=a,u=!1;n.i===3&&(i=new Set(a),a.clear(),u=!0),k(i,function(l,s){return ut(e,n,a,l,s,r,u)}),se(e,a,!1),r&&e.u&&U("Patches").N(n,r,e.u,e.s)}return n.o}function ut(e,t,r,n,a,i,u){if(B(a)){var l=le(e,a,i&&t&&t.i!==3&&!$(t.R,n)?i.concat(n):void 0);if(Bt(r,n,l),!B(l))return;e.m=!1}else u&&r.add(a);if(L(a)&&!et(a)){if(!e.h.D&&e._<1)return;le(e,a),t&&t.A.l||se(e,a)}}function se(e,t,r){r===void 0&&(r=!1),!e.l&&e.h.D&&e.m&&Qe(t,r)}function Ee(e,t){var r=e[I];return(r?q(r):e)[t]}function lt(e,t){if(t in e)for(var r=Object.getPrototypeOf(e);r;){var n=Object.getOwnPropertyDescriptor(r,t);if(n)return n;r=Object.getPrototypeOf(r)}}function D(e){e.P||(e.P=!0,e.l&&D(e.l))}function Ie(e){e.o||(e.o=Je(e.t))}function Ve(e,t,r){var n=Ye(t)?U("MapSet").F(t,r):Ze(t)?U("MapSet").T(t,r):e.O?function(a,i){var u=Array.isArray(a),l={i:u?1:0,A:i?i.A:Re(),P:!1,I:!1,R:{},l:i,t:a,k:null,o:null,j:null,C:!1},s=l,o=ne;u&&(s=[l],o=J);var d=Proxy.revocable(s,o),f=d.revoke,p=d.proxy;return l.k=p,l.j=f,p}(t,r):U("ES5").J(t,r);return(r?r.A:Re()).p.push(n),n}function Fr(e){return B(e)||C(22,e),function t(r){if(!L(r))return r;var n,a=r[I],i=Y(r);if(a){if(!a.P&&(a.i<4||!U("ES5").K(a)))return a.t;a.I=!0,n=st(r,i),a.I=!1}else n=st(r,i);return k(n,function(u,l){a&&Ar(a.t,u)===l||Bt(n,u,t(l))}),i===3?new Set(n):n}(e)}function st(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return Je(e)}function Tr(){function e(i,u){var l=a[i];return l?l.enumerable=u:a[i]=l={configurable:!0,enumerable:u,get:function(){var s=this[I];return ne.get(s,i)},set:function(s){var o=this[I];ne.set(o,i,s)}},l}function t(i){for(var u=i.length-1;u>=0;u--){var l=i[u][I];if(!l.P)switch(l.i){case 5:n(l)&&D(l);break;case 4:r(l)&&D(l)}}}function r(i){for(var u=i.t,l=i.k,s=G(l),o=s.length-1;o>=0;o--){var d=s[o];if(d!==I){var f=u[d];if(f===void 0&&!$(u,d))return!0;var p=l[d],m=p&&p[I];if(m?m.t!==f:!Lt(p,f))return!0}}var h=!!u[I];return s.length!==G(u).length+(h?0:1)}function n(i){var u=i.k;if(u.length!==i.t.length)return!0;var l=Object.getOwnPropertyDescriptor(u,u.length-1);if(l&&!l.get)return!0;for(var s=0;s<u.length;s++)if(!u.hasOwnProperty(s))return!0;return!1}var a={};Ur("ES5",{J:function(i,u){var l=Array.isArray(i),s=function(d,f){if(d){for(var p=Array(f.length),m=0;m<f.length;m++)Object.defineProperty(p,""+m,e(m,!0));return p}var h=Wt(f);delete h[I];for(var g=G(h),y=0;y<g.length;y++){var w=g[y];h[w]=e(w,d||!!h[w].enumerable)}return Object.create(Object.getPrototypeOf(f),h)}(l,i),o={i:l?5:4,A:u?u.A:Re(),P:!1,I:!1,R:{},l:u,t:i,k:s,o:null,g:!1,C:!1};return Object.defineProperty(s,I,{value:o,writable:!0}),s},S:function(i,u,l){l?B(u)&&u[I].A===i&&t(i.p):(i.u&&function s(o){if(o&&typeof o=="object"){var d=o[I];if(d){var f=d.t,p=d.k,m=d.R,h=d.i;if(h===4)k(p,function(E){E!==I&&(f[E]!==void 0||$(f,E)?m[E]||s(p[E]):(m[E]=!0,D(d)))}),k(f,function(E){p[E]!==void 0||$(p,E)||(m[E]=!1,D(d))});else if(h===5){if(n(d)&&(D(d),m.length=!0),p.length<f.length)for(var g=p.length;g<f.length;g++)m[g]=!1;else for(var y=f.length;y<p.length;y++)m[y]=!0;for(var w=Math.min(p.length,f.length),v=0;v<w;v++)p.hasOwnProperty(v)||(m[v]=!0),m[v]===void 0&&s(p[v])}}}}(i.p[0]),t(i.p))},K:function(i){return i.i===4?r(i):n(i)}})}var ct,re,tt=typeof Symbol<"u"&&typeof Symbol("x")=="symbol",Dr=typeof Map<"u",Mr=typeof Set<"u",dt=typeof Proxy<"u"&&Proxy.revocable!==void 0&&typeof Reflect<"u",kt=tt?Symbol.for("immer-nothing"):((ct={})["immer-nothing"]=!0,ct),ft=tt?Symbol.for("immer-draftable"):"__$immer_draftable",I=tt?Symbol.for("immer-state"):"__$immer_state",qr=""+Object.prototype.constructor,G=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,Wt=Object.getOwnPropertyDescriptors||function(e){var t={};return G(e).forEach(function(r){t[r]=Object.getOwnPropertyDescriptor(e,r)}),t},Fe={},ne={get:function(e,t){if(t===I)return e;var r=q(e);if(!$(r,t))return function(a,i,u){var l,s=lt(i,u);return s?"value"in s?s.value:(l=s.get)===null||l===void 0?void 0:l.call(a.k):void 0}(e,r,t);var n=r[t];return e.I||!L(n)?n:n===Ee(e.t,t)?(Ie(e),e.o[t]=Ve(e.A.h,n,e)):n},has:function(e,t){return t in q(e)},ownKeys:function(e){return Reflect.ownKeys(q(e))},set:function(e,t,r){var n=lt(q(e),t);if(n!=null&&n.set)return n.set.call(e.k,r),!0;if(!e.P){var a=Ee(q(e),t),i=a==null?void 0:a[I];if(i&&i.t===r)return e.o[t]=r,e.R[t]=!1,!0;if(Lt(r,a)&&(r!==void 0||$(e.t,t)))return!0;Ie(e),D(e)}return e.o[t]===r&&(r!==void 0||t in e.o)||Number.isNaN(r)&&Number.isNaN(e.o[t])||(e.o[t]=r,e.R[t]=!0),!0},deleteProperty:function(e,t){return Ee(e.t,t)!==void 0||t in e.t?(e.R[t]=!1,Ie(e),D(e)):delete e.R[t],e.o&&delete e.o[t],!0},getOwnPropertyDescriptor:function(e,t){var r=q(e),n=Reflect.getOwnPropertyDescriptor(r,t);return n&&{writable:!0,configurable:e.i!==1||t!=="length",enumerable:n.enumerable,value:r[t]}},defineProperty:function(){C(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){C(12)}},J={};k(ne,function(e,t){J[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}}),J.deleteProperty=function(e,t){return J.set.call(this,e,t,void 0)},J.set=function(e,t,r){return ne.set.call(this,e[0],t,r,e[0])};var Br=function(){function e(r){var n=this;this.O=dt,this.D=!0,this.produce=function(a,i,u){if(typeof a=="function"&&typeof i!="function"){var l=i;i=a;var s=n;return function(g){var y=this;g===void 0&&(g=l);for(var w=arguments.length,v=Array(w>1?w-1:0),E=1;E<w;E++)v[E-1]=arguments[E];return s.produce(g,function(j){var x;return(x=i).call.apply(x,[y,j].concat(v))})}}var o;if(typeof i!="function"&&C(6),u!==void 0&&typeof u!="function"&&C(7),L(a)){var d=ot(n),f=Ve(n,a,void 0),p=!0;try{o=i(f),p=!1}finally{p?ue(d):Ue(d)}return typeof Promise<"u"&&o instanceof Promise?o.then(function(g){return be(d,u),we(g,d)},function(g){throw ue(d),g}):(be(d,u),we(o,d))}if(!a||typeof a!="object"){if((o=i(a))===void 0&&(o=a),o===kt&&(o=void 0),n.D&&Qe(o,!0),u){var m=[],h=[];U("Patches").M(a,o,m,h),u(m,h)}return o}C(21,a)},this.produceWithPatches=function(a,i){if(typeof a=="function")return function(o){for(var d=arguments.length,f=Array(d>1?d-1:0),p=1;p<d;p++)f[p-1]=arguments[p];return n.produceWithPatches(o,function(m){return a.apply(void 0,[m].concat(f))})};var u,l,s=n.produce(a,i,function(o,d){u=o,l=d});return typeof Promise<"u"&&s instanceof Promise?s.then(function(o){return[o,u,l]}):[s,u,l]},typeof(r==null?void 0:r.useProxies)=="boolean"&&this.setUseProxies(r.useProxies),typeof(r==null?void 0:r.autoFreeze)=="boolean"&&this.setAutoFreeze(r.autoFreeze)}var t=e.prototype;return t.createDraft=function(r){L(r)||C(8),B(r)&&(r=Fr(r));var n=ot(this),a=Ve(this,r,void 0);return a[I].C=!0,Ue(n),a},t.finishDraft=function(r,n){var a=r&&r[I],i=a.A;return be(i,n),we(void 0,i)},t.setAutoFreeze=function(r){this.D=r},t.setUseProxies=function(r){r&&!dt&&C(20),this.O=r},t.applyPatches=function(r,n){var a;for(a=n.length-1;a>=0;a--){var i=n[a];if(i.path.length===0&&i.op==="replace"){r=i.value;break}}a>-1&&(n=n.slice(a+1));var u=U("Patches").$;return B(r)?u(r,n):this.produce(r,function(l){return u(l,n)})},e}(),O=new Br;O.produce;O.produceWithPatches.bind(O);O.setAutoFreeze.bind(O);O.setUseProxies.bind(O);O.applyPatches.bind(O);O.createDraft.bind(O);O.finishDraft.bind(O);function pt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function mt(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?pt(Object(r),!0).forEach(function(n){ur(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):pt(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function S(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var gt=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),je=function(){return Math.random().toString(36).substring(7).split("").join(".")},ce={INIT:"@@redux/INIT"+je(),REPLACE:"@@redux/REPLACE"+je(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+je()}};function Lr(e){if(typeof e!="object"||e===null)return!1;for(var t=e;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function zt(e,t,r){var n;if(typeof t=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(S(0));if(typeof t=="function"&&typeof r>"u"&&(r=t,t=void 0),typeof r<"u"){if(typeof r!="function")throw new Error(S(1));return r(zt)(e,t)}if(typeof e!="function")throw new Error(S(2));var a=e,i=t,u=[],l=u,s=!1;function o(){l===u&&(l=u.slice())}function d(){if(s)throw new Error(S(3));return i}function f(g){if(typeof g!="function")throw new Error(S(4));if(s)throw new Error(S(5));var y=!0;return o(),l.push(g),function(){if(y){if(s)throw new Error(S(6));y=!1,o();var v=l.indexOf(g);l.splice(v,1),u=null}}}function p(g){if(!Lr(g))throw new Error(S(7));if(typeof g.type>"u")throw new Error(S(8));if(s)throw new Error(S(9));try{s=!0,i=a(i,g)}finally{s=!1}for(var y=u=l,w=0;w<y.length;w++){var v=y[w];v()}return g}function m(g){if(typeof g!="function")throw new Error(S(10));a=g,p({type:ce.REPLACE})}function h(){var g,y=f;return g={subscribe:function(v){if(typeof v!="object"||v===null)throw new Error(S(11));function E(){v.next&&v.next(d())}E();var j=y(E);return{unsubscribe:j}}},g[gt]=function(){return this},g}return p({type:ce.INIT}),n={dispatch:p,subscribe:f,getState:d,replaceReducer:m},n[gt]=h,n}function kr(e){Object.keys(e).forEach(function(t){var r=e[t],n=r(void 0,{type:ce.INIT});if(typeof n>"u")throw new Error(S(12));if(typeof r(void 0,{type:ce.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(S(13))})}function $t(e){for(var t=Object.keys(e),r={},n=0;n<t.length;n++){var a=t[n];typeof e[a]=="function"&&(r[a]=e[a])}var i=Object.keys(r),u;try{kr(r)}catch(l){u=l}return function(s,o){if(s===void 0&&(s={}),u)throw u;for(var d=!1,f={},p=0;p<i.length;p++){var m=i[p],h=r[m],g=s[m],y=h(g,o);if(typeof y>"u")throw o&&o.type,new Error(S(14));f[m]=y,d=d||y!==g}return d=d||i.length!==Object.keys(s).length,d?f:s}}function de(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.length===0?function(n){return n}:t.length===1?t[0]:t.reduce(function(n,a){return function(){return n(a.apply(void 0,arguments))}})}function Wr(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(n){return function(){var a=n.apply(void 0,arguments),i=function(){throw new Error(S(15))},u={getState:a.getState,dispatch:function(){return i.apply(void 0,arguments)}},l=t.map(function(s){return s(u)});return i=de.apply(void 0,l)(a.dispatch),mt(mt({},a),{},{dispatch:i})}}}function Gt(e){var t=function(n){var a=n.dispatch,i=n.getState;return function(u){return function(l){return typeof l=="function"?l(a,i,e):u(l)}}};return t}var Ht=Gt();Ht.withExtraArgument=Gt;const vt=Ht;var Kt=globalThis&&globalThis.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(n[i]=a[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),zr=globalThis&&globalThis.__generator||function(e,t){var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,a,i,u;return u={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function l(o){return function(d){return s([o,d])}}function s(o){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,a&&(i=o[0]&2?a.return:o[0]?a.throw||((i=a.return)&&i.call(a),0):a.next)&&!(i=i.call(a,o[1])).done)return i;switch(a=0,i&&(o=[o[0]&2,i.value]),o[0]){case 0:case 1:i=o;break;case 4:return r.label++,{value:o[1],done:!1};case 5:r.label++,a=o[1],o=[0];continue;case 7:o=r.ops.pop(),r.trys.pop();continue;default:if(i=r.trys,!(i=i.length>0&&i[i.length-1])&&(o[0]===6||o[0]===2)){r=0;continue}if(o[0]===3&&(!i||o[1]>i[0]&&o[1]<i[3])){r.label=o[1];break}if(o[0]===6&&r.label<i[1]){r.label=i[1],i=o;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(o);break}i[2]&&r.ops.pop(),r.trys.pop();continue}o=t.call(e,r)}catch(d){o=[6,d],a=0}finally{n=i=0}if(o[0]&5)throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}},ae=globalThis&&globalThis.__spreadArray||function(e,t){for(var r=0,n=t.length,a=e.length;r<n;r++,a++)e[a]=t[r];return e},$r=Object.defineProperty,Gr=Object.defineProperties,Hr=Object.getOwnPropertyDescriptors,ht=Object.getOwnPropertySymbols,Kr=Object.prototype.hasOwnProperty,Xr=Object.prototype.propertyIsEnumerable,yt=function(e,t,r){return t in e?$r(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r},H=function(e,t){for(var r in t||(t={}))Kr.call(t,r)&&yt(e,r,t[r]);if(ht)for(var n=0,a=ht(t);n<a.length;n++){var r=a[n];Xr.call(t,r)&&yt(e,r,t[r])}return e},Se=function(e,t){return Gr(e,Hr(t))},Yr=function(e,t,r){return new Promise(function(n,a){var i=function(s){try{l(r.next(s))}catch(o){a(o)}},u=function(s){try{l(r.throw(s))}catch(o){a(o)}},l=function(s){return s.done?n(s.value):Promise.resolve(s.value).then(i,u)};l((r=r.apply(e,t)).next())})},Zr=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?de:de.apply(null,arguments)};function Jr(e){if(typeof e!="object"||e===null)return!1;var t=Object.getPrototypeOf(e);if(t===null)return!0;for(var r=t;Object.getPrototypeOf(r)!==null;)r=Object.getPrototypeOf(r);return t===r}var Qr=function(e){Kt(t,e);function t(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];var a=e.apply(this,r)||this;return Object.setPrototypeOf(a,t.prototype),a}return Object.defineProperty(t,Symbol.species,{get:function(){return t},enumerable:!1,configurable:!0}),t.prototype.concat=function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return e.prototype.concat.apply(this,r)},t.prototype.prepend=function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return r.length===1&&Array.isArray(r[0])?new(t.bind.apply(t,ae([void 0],r[0].concat(this)))):new(t.bind.apply(t,ae([void 0],r.concat(this))))},t}(Array),en=function(e){Kt(t,e);function t(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];var a=e.apply(this,r)||this;return Object.setPrototypeOf(a,t.prototype),a}return Object.defineProperty(t,Symbol.species,{get:function(){return t},enumerable:!1,configurable:!0}),t.prototype.concat=function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return e.prototype.concat.apply(this,r)},t.prototype.prepend=function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return r.length===1&&Array.isArray(r[0])?new(t.bind.apply(t,ae([void 0],r[0].concat(this)))):new(t.bind.apply(t,ae([void 0],r.concat(this))))},t}(Array);function tn(e){return typeof e=="boolean"}function rn(){return function(t){return nn(t)}}function nn(e){e===void 0&&(e={});var t=e.thunk,r=t===void 0?!0:t;e.immutableCheck,e.serializableCheck;var n=new Qr;return r&&(tn(r)?n.push(vt):n.push(vt.withExtraArgument(r.extraArgument))),n}var an=!0;function on(e){var t=rn(),r=e||{},n=r.reducer,a=n===void 0?void 0:n,i=r.middleware,u=i===void 0?t():i,l=r.devTools,s=l===void 0?!0:l,o=r.preloadedState,d=o===void 0?void 0:o,f=r.enhancers,p=f===void 0?void 0:f,m;if(typeof a=="function")m=a;else if(Jr(a))m=$t(a);else throw new Error('"reducer" is a required argument, and must be a function or an object of functions that can be passed to combineReducers');var h=u;typeof h=="function"&&(h=h(t));var g=Wr.apply(void 0,h),y=de;s&&(y=Zr(H({trace:!an},typeof s=="object"&&s)));var w=new en(g),v=w;Array.isArray(p)?v=ae([g],p):typeof p=="function"&&(v=p(w));var E=y.apply(void 0,v);return zt(m,d,E)}function K(e,t){function r(){for(var n=[],a=0;a<arguments.length;a++)n[a]=arguments[a];if(t){var i=t.apply(void 0,n);if(!i)throw new Error("prepareAction did not return an object");return H(H({type:e,payload:i.payload},"meta"in i&&{meta:i.meta}),"error"in i&&{error:i.error})}return{type:e,payload:n[0]}}return r.toString=function(){return""+e},r.type=e,r.match=function(n){return n.type===e},r}var un="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",ln=function(e){e===void 0&&(e=21);for(var t="",r=e;r--;)t+=un[Math.random()*64|0];return t},sn=["name","message","stack","code"],Pe=function(){function e(t,r){this.payload=t,this.meta=r}return e}(),_t=function(){function e(t,r){this.payload=t,this.meta=r}return e}(),cn=function(e){if(typeof e=="object"&&e!==null){for(var t={},r=0,n=sn;r<n.length;r++){var a=n[r];typeof e[a]=="string"&&(t[a]=e[a])}return t}return{message:String(e)}};(function(){function e(t,r,n){var a=K(t+"/fulfilled",function(o,d,f,p){return{payload:o,meta:Se(H({},p||{}),{arg:f,requestId:d,requestStatus:"fulfilled"})}}),i=K(t+"/pending",function(o,d,f){return{payload:void 0,meta:Se(H({},f||{}),{arg:d,requestId:o,requestStatus:"pending"})}}),u=K(t+"/rejected",function(o,d,f,p,m){return{payload:p,error:(n&&n.serializeError||cn)(o||"Rejected"),meta:Se(H({},m||{}),{arg:f,requestId:d,rejectedWithValue:!!p,requestStatus:"rejected",aborted:(o==null?void 0:o.name)==="AbortError",condition:(o==null?void 0:o.name)==="ConditionError"})}}),l=typeof AbortController<"u"?AbortController:function(){function o(){this.signal={aborted:!1,addEventListener:function(){},dispatchEvent:function(){return!1},onabort:function(){},removeEventListener:function(){},reason:void 0,throwIfAborted:function(){}}}return o.prototype.abort=function(){},o}();function s(o){return function(d,f,p){var m=n!=null&&n.idGenerator?n.idGenerator(o):ln(),h=new l,g;function y(v){g=v,h.abort()}var w=function(){return Yr(this,null,function(){var v,E,j,x,N,A,R;return zr(this,function(F){switch(F.label){case 0:return F.trys.push([0,4,,5]),x=(v=n==null?void 0:n.condition)==null?void 0:v.call(n,o,{getState:f,extra:p}),fn(x)?[4,x]:[3,2];case 1:x=F.sent(),F.label=2;case 2:if(x===!1||h.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};return N=new Promise(function(P,M){return h.signal.addEventListener("abort",function(){return M({name:"AbortError",message:g||"Aborted"})})}),d(i(m,o,(E=n==null?void 0:n.getPendingMeta)==null?void 0:E.call(n,{requestId:m,arg:o},{getState:f,extra:p}))),[4,Promise.race([N,Promise.resolve(r(o,{dispatch:d,getState:f,extra:p,requestId:m,signal:h.signal,abort:y,rejectWithValue:function(P,M){return new Pe(P,M)},fulfillWithValue:function(P,M){return new _t(P,M)}})).then(function(P){if(P instanceof Pe)throw P;return P instanceof _t?a(P.payload,m,o,P.meta):a(P,m,o)})])];case 3:return j=F.sent(),[3,5];case 4:return A=F.sent(),j=A instanceof Pe?u(null,m,o,A.payload,A.meta):u(A,m,o),[3,5];case 5:return R=n&&!n.dispatchConditionRejection&&u.match(j)&&j.meta.condition,R||d(j),[2,j]}})})}();return Object.assign(w,{abort:y,requestId:m,arg:o,unwrap:function(){return w.then(dn)}})}}return Object.assign(s,{pending:i,rejected:u,fulfilled:a,typePrefix:t})}return e.withTypes=function(){return e},e})();function dn(e){if(e.meta&&e.meta.rejectedWithValue)throw e.payload;if(e.error)throw e.error;return e.payload}function fn(e){return e!==null&&typeof e=="object"&&typeof e.then=="function"}var rt="listenerMiddleware";K(rt+"/add");K(rt+"/removeAll");K(rt+"/remove");var bt;typeof queueMicrotask=="function"&&queueMicrotask.bind(typeof window<"u"?window:typeof global<"u"?global:globalThis);Tr();const pn={initialized:!1,list:[]},mn=(e=pn)=>e,gn="SAVE_SEARCH_FILTERS",vn="SAVE_PAGE_NUMBER",hn={list:[],searchFilters:{},pageNumber:1,categories:{}},yn=(e=hn,t)=>{switch(t.type){case gn:return{...e,searchFilters:{...e.searchFilters,...t.filters}};case vn:return{...e,pageNumber:t.pageNumber};default:return e}},_n="SET_USER_IS_INITIALIZED",bn="RESET_USER_IS_INITIALIZED",wn="SET_CURRENT_USER",En={initialized:!1,currentUser:null},In=(e=En,t)=>{switch(t.type){case bn:return{...e,initialized:!1,currentUser:null};case _n:return{...e,initialized:!0};case wn:return{...e,currentUser:t.currentUser};default:return e}},jn="FAIL_DATA_",Sn="SUCCESS_DATA_",Pn=503,On={isActivated:!1},xn=(e=On,t={type:"",payload:{error_type:""}})=>{const{type:r,payload:n}=t;return r.startsWith(Sn)?Object.assign({},e,{isActivated:!1}):r.startsWith(jn)&&n.status===Pn&&n.error_type==="SERVER_ERROR"?Object.assign({},e,{isActivated:!0}):e},Cn=$t({features:mn,offers:yn,notification:ar,user:In,maintenance:xn}),Nn=(e={})=>({store:on({reducer:Cn,preloadedState:e,middleware:r=>r({immutableCheck:{warnAfter:128},serializableCheck:{warnAfter:128}})})}),Te=({children:e,isDev:t=!1})=>{const[r,n]=_.useState(),[a,i]=_.useState(),[u,l]=_.useState(null);if(_.useEffect(()=>{function o(){n(null),i([])}async function d(){at.getProfile().then(f=>n(f)).catch(()=>n(null)),at.listFeatures().then(f=>i(f)).catch(()=>i([]))}t?o():d()},[]),_.useEffect(()=>{r!==void 0&&a!==void 0&&l({user:{currentUser:r,initialized:!0},features:{list:a||[],initialized:!0}})},[r,a]),u===null)return c.jsx("main",{id:"content",className:"spinner-container",children:c.jsx(ir,{})});const{store:s}=Nn(u);return c.jsx(Nr,{store:s,children:e})};try{Te.displayName="StoreProvider",Te.__docgenInfo={description:"",displayName:"StoreProvider",props:{isDev:{defaultValue:{value:"false"},description:"",name:"isDev",required:!1,type:{name:"boolean"}}}}}catch{}const An=""+new URL("offer-home-shell-d20f1443.png",import.meta.url).href,Rn=""+new URL("offer-shell-ba5c7311.png",import.meta.url).href,wt={"image-preview-shell":"_image-preview-shell_1xnl4_1","image-preview-home-preview":"_image-preview-home-preview_1xnl4_6"},Oe={"image-preview-shell":"_image-preview-shell_glg9w_1","image-preview-blur-offer-preview":"_image-preview-blur-offer-preview_glg9w_7","image-preview-offer-preview":"_image-preview-offer-preview_glg9w_16"},X=({imageUrl:e})=>c.jsxs(Dt,{children:[c.jsxs(oe,{title:"Page d’accueil",children:[c.jsx("img",{alt:"",className:wt["image-preview-shell"],src:An}),c.jsx("img",{"data-testid":"app-preview-offer-img-home",alt:"",className:wt["image-preview-home-preview"],src:e})]}),c.jsxs(oe,{title:"Détails de l’offre",children:[c.jsx("img",{alt:"",className:Oe["image-preview-blur-offer-preview"],src:e}),c.jsx("img",{alt:"",className:Oe["image-preview-shell"],src:Rn}),c.jsx("img",{"data-testid":"app-preview-offer-img",alt:"",className:Oe["image-preview-offer-preview"],src:e})]})]});try{X.displayName="AppPreviewOffer",X.__docgenInfo={description:"",displayName:"AppPreviewOffer",props:{imageUrl:{defaultValue:null,description:"",name:"imageUrl",required:!0,type:{name:"string"}}}}}catch{}const Un=""+new URL("venue-home-shell-9bfd5682.png",import.meta.url).href,Vn=""+new URL("venue-shell-5e096072.png",import.meta.url).href,Et={"image-preview-shell":"_image-preview-shell_3dbf9_1","image-preview-home-preview":"_image-preview-home-preview_3dbf9_6"},xe={"image-preview-shell":"_image-preview-shell_gbu12_1","image-preview-blur-venue-preview":"_image-preview-blur-venue-preview_gbu12_7","image-preview-venue-preview":"_image-preview-venue-preview_gbu12_16"},fe=({imageUrl:e})=>{const t=Mt(),r=_.useCallback(()=>{t.error("Une erreur est survenue. Merci de réessayer plus tard")},[t]);return c.jsxs(Dt,{children:[c.jsxs(oe,{title:"Page d’accueil",children:[c.jsx("img",{alt:"",className:Et["image-preview-shell"],src:Un}),c.jsx("img",{"data-testid":"app-preview-venue-img-home",alt:"",className:Et["image-preview-home-preview"],onError:r,src:e})]}),c.jsxs(oe,{title:"Page Lieu",children:[c.jsx("img",{alt:"",className:xe["image-preview-blur-venue-preview"],src:e}),c.jsx("img",{alt:"",className:xe["image-preview-shell"],src:Vn}),c.jsx("img",{"data-testid":"app-preview-venue-img",alt:"",className:xe["image-preview-venue-preview"],src:e})]})]})};try{fe.displayName="AppPreviewVenue",fe.__docgenInfo={description:"",displayName:"AppPreviewVenue",props:{imageUrl:{defaultValue:null,description:"",name:"imageUrl",required:!0,type:{name:"string"}}}}}catch{}var b=(e=>(e.OFFER="offer",e.OFFER_COLLECTIVE="offer_collective",e.VENUE="venue",e))(b||{});const Fn="_container_uuguy_2",Tn="_header_uuguy_8",Dn="_subtitle_uuguy_17",Mn="_actions_uuguy_23",qn="_button_uuguy_28",Ce={container:Fn,header:Tn,subtitle:Dn,actions:Mn,button:qn},De=({mode:e,hideModal:t,imageUrl:r})=>{const n={[b.VENUE]:fe,[b.OFFER]:X,[b.OFFER_COLLECTIVE]:X}[e];return c.jsx(Ft,{hasCloseButton:!0,labelledBy:"Ajouter une image",onDismiss:t,children:c.jsxs("div",{className:Ce.container,children:[c.jsx("header",{children:c.jsx("h1",{className:Ce.header,children:"Ajouter une image"})}),c.jsx("div",{className:Ce.subtitle,children:"Prévisualisation de votre image dans l’application pass Culture"}),c.jsx(n,{imageUrl:r})]})})};try{De.displayName="ModalAppPreview",De.__docgenInfo={description:"",displayName:"ModalAppPreview",props:{hideModal:{defaultValue:null,description:"",name:"hideModal",required:!0,type:{name:"() => void"}},mode:{defaultValue:null,description:"",name:"mode",required:!0,type:{name:"enum",value:[{value:'"offer"'},{value:'"offer_collective"'},{value:'"venue"'}]}},imageUrl:{defaultValue:null,description:"",name:"imageUrl",required:!0,type:{name:"string"}}}}}catch{}const Me=({imageUrl:e,mode:t})=>{const[r,n]=_.useState(!1);return c.jsxs(c.Fragment,{children:[c.jsx(ge,{onClick:()=>n(!0),variant:ve.TERNARY,icon:lr,children:"Prévisualiser"}),r&&e&&c.jsx(De,{mode:t,imageUrl:e,hideModal:()=>n(!1)})]})};try{Me.displayName="ButtonAppPreview",Me.__docgenInfo={description:"",displayName:"ButtonAppPreview",props:{mode:{defaultValue:null,description:"",name:"mode",required:!0,type:{name:"enum",value:[{value:'"offer"'},{value:'"offer_collective"'},{value:'"venue"'}]}},imageUrl:{defaultValue:null,description:"",name:"imageUrl",required:!0,type:{name:"string"}}}}}catch{}const Bn={"button-image-delete-icon":"_button-image-delete-icon_ooh4c_1"},qe=({isLoading:e,onConfirm:t,onDismiss:r})=>c.jsx(dr,{cancelText:"Retour",confirmText:"Supprimer",icon:fr,isLoading:e,onCancel:r,onConfirm:t,title:"Supprimer l’image",children:"Souhaitez-vous vraiment supprimer cette image ?"});try{qe.displayName="ModalImageDelete",qe.__docgenInfo={description:"",displayName:"ModalImageDelete",props:{isLoading:{defaultValue:null,description:"",name:"isLoading",required:!0,type:{name:"boolean"}},onConfirm:{defaultValue:null,description:"",name:"onConfirm",required:!0,type:{name:"() => void"}},onDismiss:{defaultValue:null,description:"",name:"onDismiss",required:!0,type:{name:"() => void"}}}}}catch{}const Be=({onImageDelete:e})=>{const[t,r]=_.useState(!1),[n,a]=_.useState(!1),i=async()=>{a(!0),await e()};return c.jsxs(c.Fragment,{children:[c.jsxs(ge,{onClick:()=>r(!0),variant:ve.TERNARY,children:[c.jsx(qt,{alt:"",className:Bn["button-image-delete-icon"],src:cr}),"Supprimer"]}),t&&c.jsx(qe,{isLoading:n,onConfirm:i,onDismiss:()=>r(!1)})]})};try{Be.displayName="ButtonImageDelete",Be.__docgenInfo={description:"",displayName:"ButtonImageDelete",props:{onImageDelete:{defaultValue:null,description:"",name:"onImageDelete",required:!0,type:{name:"() => Promise<void>"}}}}}catch{}const Ln="_icon_bzfcf_32",kn="_label_bzfcf_38",Z={"button-image-add":"_button-image-add_bzfcf_2","add-image-venue":"_add-image-venue_bzfcf_14","add-image-offer":"_add-image-offer_bzfcf_18","image-upload-button-label":"_image-upload-button-label_bzfcf_25",icon:Ln,label:kn},Le=({onClick:e,mode:t})=>c.jsxs("button",{className:Xe(Z["button-image-add"],{[Z["add-image-venue"]]:t===b.VENUE,[Z["add-image-offer"]]:t===b.OFFER||t===b.OFFER_COLLECTIVE}),onClick:e,type:"button",children:[c.jsx(qt,{src:mr,alt:"",className:Z.icon}),c.jsxs("span",{className:Z.label,children:["Ajouter ",c.jsx("br",{})," une image"]})]});try{Le.displayName="ButtonImageAdd",Le.__docgenInfo={description:"",displayName:"ButtonImageAdd",props:{onClick:{defaultValue:null,description:"",name:"onClick",required:!0,type:{name:"() => void"}},mode:{defaultValue:null,description:"",name:"mode",required:!0,type:{name:"enum",value:[{value:'"offer"'},{value:'"offer_collective"'},{value:'"venue"'}]}}}}}catch{}const pe=(e,t)=>e+t/2,Wn=e=>1/e,Xt={[b.OFFER]:{maxSize:1e7,minWidth:400,types:["image/png","image/jpeg"],minHeight:600},[b.OFFER_COLLECTIVE]:{maxSize:1e7,minWidth:400,types:["image/png","image/jpeg"],minHeight:600},[b.VENUE]:{maxSize:1e7,minWidth:600,types:["image/png","image/jpeg"],minHeight:400}},zn=e=>{const[t,r]=_.useState(0),[n,a]=_.useState(0);return _.useEffect(()=>{br(e).then(i=>{i&&(r(i.width),a(i.height))})},[]),{width:t,height:n}},W={"modal-image-crop":"_modal-image-crop_3jjc8_2","modal-image-crop-form":"_modal-image-crop-form_3jjc8_9","modal-image-crop-header":"_modal-image-crop-header_3jjc8_15","modal-image-crop-right":"_modal-image-crop-right_3jjc8_23","modal-image-crop-credit":"_modal-image-crop-credit_3jjc8_29","modal-image-crop-footer":"_modal-image-crop-footer_3jjc8_35"},$n=({originalDimensions:e,orientation:t})=>t==="landscape"?{width:Math.floor(Math.min(e.width,e.height/2*3)),height:Math.floor(Math.min(e.height,e.width/3*2))}:{width:Math.floor(Math.min(e.width,e.height/3*2)),height:Math.floor(Math.min(e.height,e.width/2*3))},ke=({onReplaceImage:e,image:t,credit:r,onSetCredit:n,onEditedImageSave:a,saveInitialScale:i,saveInitialPosition:u,initialPosition:l,initialScale:s,mode:o,submitButtonText:d})=>{const{width:f,height:p}=zn(t),m=_.useRef(null),h=Mt(),g=Xt[o].minWidth,{width:y}=$n({originalDimensions:{width:f,height:p},orientation:o===b.VENUE?"landscape":"portrait"}),w=Math.min(4,(y-10)/g),v={[b.OFFER]:384,[b.OFFER_COLLECTIVE]:384,[b.VENUE]:244}[o],E={[b.OFFER]:{canvasHeight:v,canvasWidth:v*6/9,cropBorderColor:"#FFF",cropBorderHeight:50,cropBorderWidth:105,maxScale:w},[b.OFFER_COLLECTIVE]:{canvasHeight:v,canvasWidth:v*6/9,cropBorderColor:"#FFF",cropBorderHeight:50,cropBorderWidth:105,maxScale:w},[b.VENUE]:{canvasHeight:v,canvasWidth:v*3/2,cropBorderColor:"#FFF",cropBorderHeight:40,cropBorderWidth:100,maxScale:w}}[o],j=_.useCallback(()=>{try{if(m.current){const A=m.current.getImage(),R=m.current.getCroppingRect();u({x:pe(R.x,R.width),y:pe(R.y,R.height)}),a(A.toDataURL(),R)}}catch{h.error("Une erreur est survenue. Merci de réessayer plus tard")}},[a,u,h]),N=vr({initialValues:{credit:""},onSubmit:j});return c.jsx("section",{className:W["modal-image-crop"],children:c.jsx(hr,{value:N,children:c.jsxs("form",{action:"#",onSubmit:N.handleSubmit,children:[c.jsxs("div",{className:W["modal-image-crop-form"],children:[c.jsx("header",{children:c.jsx("h1",{className:W["modal-image-crop-header"],children:"Ajouter une image"})}),c.jsx("p",{className:W["modal-image-crop-right"],children:"En utilisant ce contenu, je certifie que je suis propriétaire ou que je dispose des autorisations nécessaires pour l’utilisation de celui-ci."}),c.jsx(_r,{...E,image:t,initialPosition:l,initialScale:s,ref:m,saveInitialScale:i}),c.jsx(yr,{credit:r,extraClassName:W["modal-image-crop-credit"],updateCredit:n})]}),c.jsx(sr,{}),c.jsxs("footer",{className:W["modal-image-crop-footer"],children:[c.jsx(ge,{icon:gr,onClick:e,variant:ve.TERNARY,children:"Remplacer l’image"}),c.jsx(Tt,{onClick:j,children:d})]})]})})})};try{ke.displayName="ModalImageCrop",ke.__docgenInfo={description:"",displayName:"ModalImageCrop",props:{image:{defaultValue:null,description:"",name:"image",required:!0,type:{name:"File"}},credit:{defaultValue:null,description:"",name:"credit",required:!0,type:{name:"string"}},onSetCredit:{defaultValue:null,description:"",name:"onSetCredit",required:!0,type:{name:"(credit: string) => void"}},onReplaceImage:{defaultValue:null,description:"",name:"onReplaceImage",required:!0,type:{name:"() => void"}},initialPosition:{defaultValue:null,description:"",name:"initialPosition",required:!1,type:{name:"Position"}},initialScale:{defaultValue:null,description:"",name:"initialScale",required:!1,type:{name:"number"}},saveInitialScale:{defaultValue:null,description:"",name:"saveInitialScale",required:!0,type:{name:"(scale: number) => void"}},saveInitialPosition:{defaultValue:null,description:"",name:"saveInitialPosition",required:!0,type:{name:"(position: Position) => void"}},onEditedImageSave:{defaultValue:null,description:"",name:"onEditedImageSave",required:!0,type:{name:"(dataUrl: string, croppedRect: CroppedRect) => void"}},mode:{defaultValue:null,description:"",name:"mode",required:!0,type:{name:"enum",value:[{value:'"offer"'},{value:'"offer_collective"'},{value:'"venue"'}]}},submitButtonText:{defaultValue:null,description:"",name:"submitButtonText",required:!0,type:{name:"string"}}}}}catch{}const Gn=({constraints:e})=>Ir().shape(e.reduce((t,r)=>({...t,[r.id]:jr().test({message:r.description,test:async(n,a)=>r.asyncValidator(a.parent.image)})}),{})),We=({onSubmit:e,mode:t})=>{const[r,n]=_.useState([]),a=Xt[t],i=[ie.formats(a.types),ie.size(a.maxSize),ie.width(a.minWidth),ie.height(a.minHeight)],u=Gn({constraints:i}),l=async s=>{const o=s.currentTarget.files&&s.currentTarget.files[0]||null;o&&u.validate({image:o},{abortEarly:!1}).then(()=>e({image:o})).catch(d=>n(d.inner.map(f=>f.path||"unknown")))};return c.jsxs("form",{onSubmit:s=>s.preventDefault(),children:[c.jsx(Er,{label:"Importer une image depuis l’ordinateur",fileTypes:["image/png","image/jpeg"],isValid:r.length===0,onChange:l}),c.jsx(wr,{constraints:i,failingConstraints:r})]})};try{We.displayName="ImageUploadBrowserForm",We.__docgenInfo={description:"",displayName:"ImageUploadBrowserForm",props:{onSubmit:{defaultValue:null,description:"",name:"onSubmit",required:!0,type:{name:"(values: ImageUploadBrowserFormValues) => void"}},mode:{defaultValue:null,description:"",name:"mode",required:!0,type:{name:"enum",value:[{value:'"offer"'},{value:'"offer_collective"'},{value:'"venue"'}]}}}}}catch{}const Hn="_header_12lh2_9",It={"modal-upload-browser":"_modal-upload-browser_12lh2_2",header:Hn,"horizontal-rule":"_horizontal-rule_12lh2_15"},ze=({onImageClientUpload:e,mode:t})=>{const r={[b.OFFER]:"portrait",[b.OFFER_COLLECTIVE]:"portrait",[b.VENUE]:"landscape"}[t];return c.jsxs("section",{className:It["modal-upload-browser"],children:[c.jsx("header",{children:c.jsx("h1",{className:It.header,children:"Ajouter une image"})}),c.jsx(Sr,{orientation:r}),c.jsx(We,{onSubmit:e,mode:t})]})};try{ze.displayName="ModalImageUploadBrowser",ze.__docgenInfo={description:"",displayName:"ModalImageUploadBrowser",props:{onImageClientUpload:{defaultValue:null,description:"",name:"onImageClientUpload",required:!0,type:{name:"(values: ImageUploadBrowserFormValues) => void"}},mode:{defaultValue:null,description:"",name:"mode",required:!0,type:{name:"enum",value:[{value:'"offer"'},{value:'"offer_collective"'},{value:'"venue"'}]}}}}}catch{}const Kn="_container_uuguy_2",Xn="_header_uuguy_8",Yn="_subtitle_uuguy_17",Zn="_actions_uuguy_23",Jn="_button_uuguy_28",z={container:Kn,header:Xn,subtitle:Yn,actions:Zn,button:Jn},$e=({imageUrl:e,isUploading:t,onGoBack:r,onUploadImage:n,mode:a})=>{const i={[b.VENUE]:fe,[b.OFFER]:X,[b.OFFER_COLLECTIVE]:X}[a];return c.jsxs("div",{className:z.container,children:[c.jsx("header",{children:c.jsx("h1",{className:z.header,children:"Ajouter une image"})}),c.jsx("div",{className:z.subtitle,children:"Prévisualisation de votre image dans l’application pass Culture"}),c.jsx(i,{imageUrl:e}),c.jsxs("div",{className:z.actions,children:[c.jsx("button",{className:Xe("secondary-button",z.button),onClick:r,title:"Retour",type:"button",children:"Retour"}),c.jsx(Tt,{className:z.button,disabled:!1,isLoading:!!t,onClick:n})]})]})};try{$e.displayName="ModalImageUploadConfirm",$e.__docgenInfo={description:"",displayName:"ModalImageUploadConfirm",props:{imageUrl:{defaultValue:null,description:"",name:"imageUrl",required:!0,type:{name:"string"}},mode:{defaultValue:null,description:"",name:"mode",required:!0,type:{name:"enum",value:[{value:'"offer"'},{value:'"offer_collective"'},{value:'"venue"'}]}},isUploading:{defaultValue:null,description:"",name:"isUploading",required:!0,type:{name:"boolean"}},onGoBack:{defaultValue:null,description:"",name:"onGoBack",required:!0,type:{name:"() => void"}},onUploadImage:{defaultValue:null,description:"",name:"onUploadImage",required:!0,type:{name:"() => void"}}}}}catch{}const Ge=({mode:e,onDismiss:t,onImageUpload:r,initialValues:n={}})=>{const[a,i]=_.useState(!1),{imageUrl:u,originalImageUrl:l,credit:s,cropParams:o}=n,[d,f]=_.useState();_.useEffect(()=>{async function V(_e){f(await or(_e)),i(!0)}const T=l||u;T?V(T):i(!0)},[]);const[p,m]=_.useState(s||""),[h,g]=_.useState(),[y,w]=_.useState(""),[v,E]=_.useState(!1),{xCropPercent:j,yCropPercent:x,heightCropPercent:N,widthCropPercent:A}=o||{},[R,F]=_.useState(N?Wn(N):1),[P,M]=_.useState({x:j&&A?pe(j,A):.5,y:x&&N?pe(x,N):.5}),Jt=_.useCallback(()=>{w("")},[]),Qt=V=>{f(V.image||void 0)},er=_.useCallback(()=>{f(void 0)},[f]),he=async(V,T,_e)=>{V===void 0||T===void 0||(await r({imageFile:T,imageCroppedDataUrl:_e,cropParams:V,credit:p}),t(),E(!1))},ye=e!==b.OFFER_COLLECTIVE,tr=_.useCallback((V,T)=>{g(T),w(V),ye||he(T,d,V)},[w,g,ye,he,d]);return a?c.jsx(Ft,{hasCloseButton:!0,labelledBy:"Ajouter une image",onDismiss:t,children:d?!h||!y?c.jsx(ke,{credit:p,image:d,initialPosition:P,initialScale:R,onEditedImageSave:tr,onReplaceImage:er,onSetCredit:m,saveInitialPosition:M,saveInitialScale:F,mode:e,submitButtonText:ye?"Suivant":"Enregistrer"}):c.jsx($e,{isUploading:v,onGoBack:Jt,onUploadImage:()=>he(h,d,y),imageUrl:y,mode:e}):c.jsx(ze,{onImageClientUpload:Qt,mode:e})}):null};try{Ge.displayName="ModalImageEdit",Ge.__docgenInfo={description:"",displayName:"ModalImageEdit",props:{mode:{defaultValue:null,description:"",name:"mode",required:!0,type:{name:"enum",value:[{value:'"offer"'},{value:'"offer_collective"'},{value:'"venue"'}]}},onDismiss:{defaultValue:null,description:"",name:"onDismiss",required:!0,type:{name:"() => void"}},onImageUpload:{defaultValue:null,description:"",name:"onImageUpload",required:!0,type:{name:"(values: OnImageUploadArgs) => Promise<void>"}},initialValues:{defaultValue:{value:"{}"},description:"",name:"initialValues",required:!1,type:{name:"UploadImageValues"}}}}}catch{}const me=({mode:e,initialValues:t={},onImageUpload:r,onClickButtonImage:n})=>{const[a,i]=_.useState(!1),{imageUrl:u,originalImageUrl:l}=t,s=()=>{n&&n(),i(!0)};return c.jsxs(c.Fragment,{children:[u||l?c.jsx(ge,{onClick:s,variant:ve.TERNARY,alt:"Modifier l’image",icon:pr,children:"Modifier"}):c.jsx(Le,{mode:e,onClick:s}),a&&c.jsx(Ge,{mode:e,onDismiss:()=>i(!1),onImageUpload:r,initialValues:t})]})};try{me.displayName="ButtonImageEdit",me.__docgenInfo={description:"",displayName:"ButtonImageEdit",props:{onImageUpload:{defaultValue:null,description:"",name:"onImageUpload",required:!0,type:{name:"(values: OnImageUploadArgs) => Promise<void>"}},initialValues:{defaultValue:{value:"{}"},description:"",name:"initialValues",required:!1,type:{name:"UploadImageValues"}},mode:{defaultValue:null,description:"",name:"mode",required:!0,type:{name:"enum",value:[{value:'"offer"'},{value:'"offer_collective"'},{value:'"venue"'}]}},onClickButtonImage:{defaultValue:null,description:"",name:"onClickButtonImage",required:!1,type:{name:"(() => void)"}}}}}catch{}const Ne={"image-preview":"_image-preview_806us_1","preview-venue":"_preview-venue_806us_7","preview-offer":"_preview-offer_806us_11"},He=({imageUrl:e,alt:t,mode:r})=>c.jsx("img",{alt:t,className:Xe(Ne["image-preview"],{[Ne["preview-venue"]]:r===b.VENUE,[Ne["preview-offer"]]:r===b.OFFER||r===b.OFFER_COLLECTIVE}),src:e});try{He.displayName="ImagePreview",He.__docgenInfo={description:"",displayName:"ImagePreview",props:{imageUrl:{defaultValue:null,description:"",name:"imageUrl",required:!0,type:{name:"string"}},alt:{defaultValue:null,description:"",name:"alt",required:!0,type:{name:"string"}},mode:{defaultValue:null,description:"",name:"mode",required:!0,type:{name:"enum",value:[{value:'"offer"'},{value:'"offer_collective"'},{value:'"venue"'}]}}}}}catch{}const Ae={"explanatory-text":"_explanatory-text_pfqdv_1","image-uploader-image-container":"_image-uploader-image-container_pfqdv_5","image-uploader-actions-container":"_image-uploader-actions-container_pfqdv_9","actions-wrapper":"_actions-wrapper_pfqdv_16"},Ke=({onImageUpload:e,onImageDelete:t,initialValues:r={},mode:n,onClickButtonImageAdd:a})=>{const{imageUrl:i,originalImageUrl:u,credit:l,cropParams:s}=r;return c.jsx("div",{className:Ae["image-uploader-image-container"],children:i&&u?c.jsxs(c.Fragment,{children:[c.jsx(He,{mode:n,imageUrl:i,alt:"Prévisualisation de l’image"}),c.jsx("div",{className:Ae["image-uploader-actions-container"],children:c.jsxs("div",{className:Ae["actions-wrapper"],children:[c.jsx(me,{mode:n,initialValues:{originalImageUrl:u,imageUrl:i,credit:l,cropParams:s},onImageUpload:e,onClickButtonImage:a}),n!=b.OFFER_COLLECTIVE&&c.jsx(Me,{imageUrl:i,mode:n}),c.jsx(Be,{onImageDelete:t})]})})]}):c.jsx(me,{mode:n,onImageUpload:e,onClickButtonImage:a})})},Yt=Ke;try{Ke.displayName="ImageUploader",Ke.__docgenInfo={description:"",displayName:"ImageUploader",props:{onImageUpload:{defaultValue:null,description:"",name:"onImageUpload",required:!0,type:{name:"(values: OnImageUploadArgs) => Promise<void>"}},onImageDelete:{defaultValue:null,description:"",name:"onImageDelete",required:!0,type:{name:"() => Promise<void>"}},initialValues:{defaultValue:{value:"{}"},description:"",name:"initialValues",required:!1,type:{name:"UploadImageValues"}},mode:{defaultValue:null,description:"",name:"mode",required:!0,type:{name:"enum",value:[{value:'"offer"'},{value:'"offer_collective"'},{value:'"venue"'}]}},onClickButtonImageAdd:{defaultValue:null,description:"",name:"onClickButtonImageAdd",required:!1,type:{name:"(() => void)"}}}}}catch{}const jt=""+new URL("sample-image-landscape-b60948dd.jpg",import.meta.url).href,St=""+new URL("sample-image-portrait-4cb7a498.jpg",import.meta.url).href,bi={title:"components/ImageUploader",component:Yt},nt=e=>c.jsx(Te,{isDev:!0,children:c.jsx(Yt,{...e})}),Zt={initialValues:{originalImageUrl:St,imageUrl:St,credit:"John Do",cropParams:{xCropPercent:0,yCropPercent:0,heightCropPercent:1,widthCropPercent:1}},mode:b.OFFER,onImageDelete:async()=>{alert("onDelete have been called.")},onImageUpload:async()=>{alert("onImageUpload have been called.")}},Q=nt.bind({});Q.args={...Zt};const ee=nt.bind({});ee.args={...Zt,initialValues:{imageUrl:jt,originalImageUrl:jt},mode:b.VENUE};const te=nt.bind({});te.args={mode:b.OFFER};var Pt,Ot,xt;Q.parameters={...Q.parameters,docs:{...(Pt=Q.parameters)==null?void 0:Pt.docs,source:{originalSource:`props => <StoreProvider isDev>
    <ImageUploader {...props} />
  </StoreProvider>`,...(xt=(Ot=Q.parameters)==null?void 0:Ot.docs)==null?void 0:xt.source}}};var Ct,Nt,At;ee.parameters={...ee.parameters,docs:{...(Ct=ee.parameters)==null?void 0:Ct.docs,source:{originalSource:`props => <StoreProvider isDev>
    <ImageUploader {...props} />
  </StoreProvider>`,...(At=(Nt=ee.parameters)==null?void 0:Nt.docs)==null?void 0:At.source}}};var Rt,Ut,Vt;te.parameters={...te.parameters,docs:{...(Rt=te.parameters)==null?void 0:Rt.docs,source:{originalSource:`props => <StoreProvider isDev>
    <ImageUploader {...props} />
  </StoreProvider>`,...(Vt=(Ut=te.parameters)==null?void 0:Ut.docs)==null?void 0:Vt.source}}};const wi=["WithImageOffer","WithImageVenue","WithoutImage"];export{Q as WithImageOffer,ee as WithImageVenue,te as WithoutImage,wi as __namedExportsOrder,bi as default};
//# sourceMappingURL=ImageUploader.stories-7b8067f9.js.map
