import{j as e}from"./jsx-runtime-BYYWji4R.js";import{o as G,c as J,a as K}from"./index.esm-CL5q6RXi.js";import{u as Q,a as Z,F as ee}from"./index.esm-nHDMj4MR.js";import{i as re}from"./parseAndValidateFrenchPhoneNumber-CedPwoDO.js";import{r as i}from"./index-ClcD9ViR.js";import{B as ne}from"./BaseInput-BI1b_EYZ.js";import{F as te}from"./FieldError-ky1_Lcaw.js";import{c as E}from"./index-DeARc5FM.js";import{f as ae}from"./full-right-Dd3YsyCq.js";import{S as oe}from"./SvgIcon-CyWUmZpn.js";import"./_commonjsHelpers-Cpj98o6Y.js";import"./stroke-error-DSZD431a.js";const f={"select-input-wrapper":"_select-input-wrapper_vh09u_1","select-input":"_select-input_vh09u_1","select-input-icon":"_select-input-icon_vh09u_17","select-input-icon-disabled":"_select-input-icon-disabled_vh09u_96"},y=({disabled:r,options:a,className:o,value:t,onChange:p,onBlur:m})=>e.jsxs("div",{className:E(f["select-input-wrapper"],o),children:[e.jsx(oe,{src:ae,alt:"",className:E(f["select-input-icon"],{[f["select-input-icon-disabled"]]:r}),width:"16"}),e.jsx("select",{className:f["select-input"],id:"countryCode",disabled:r,value:t,onChange:p,onBlur:m,autoComplete:"tel-country-code",children:a.map(u=>e.jsx("option",{value:u.value,label:u.value,children:u.value},u.value))})]});try{y.displayName="CountryCodeSelect",y.__docgenInfo={description:"",displayName:"CountryCodeSelect",props:{disabled:{defaultValue:null,description:"",name:"disabled",required:!0,type:{name:"boolean"}},options:{defaultValue:null,description:"",name:"options",required:!0,type:{name:"PhoneCodeSelectOption[]"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},value:{defaultValue:null,description:"",name:"value",required:!0,type:{name:"string"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!0,type:{name:"(event: ChangeEvent<HTMLSelectElement>) => void"}},onBlur:{defaultValue:null,description:"",name:"onBlur",required:!0,type:{name:"(event: FocusEvent<HTMLSelectElement, Element>) => void"}}}}}catch{}const N=[{value:"+33"},{value:"+262"},{value:"+508"},{value:"+590"},{value:"+594"},{value:"+596"},{value:"+687"}],se={"+33":"6 12 34 56 78","+262":"692 12 34 56","+508":"55 12 34","+590":"690 00 01 02","+594":"694 00 01 02","+596":"696 00 01 02","+687":"75 12 34"},s={"phone-number-input":"_phone-number-input_mlezx_104","phone-number-input-wrapper":"_phone-number-input-wrapper_mlezx_110","phone-number-input-legend":"_phone-number-input-legend_mlezx_114","phone-number-input-footer":"_phone-number-input-footer_mlezx_119","phone-number-input-error":"_phone-number-input-error_mlezx_125","country-code-select":"_country-code-select_mlezx_132","visually-hidden":"_visually-hidden_mlezx_138","phone-format":"_phone-format_mlezx_150","phone-number-inpus":"_phone-number-inpus_mlezx_158"},c=i.forwardRef(({value:r="",onChange:a,onBlur:o,name:t,disabled:p,maxLength:m=25,error:u,label:R,required:T=!1,asterisk:W=!0,...M},A)=>{const P=i.useId(),g=N[0].value,{prefix:D,phoneNumber:$}=S(r),[d,C]=i.useState(D||g),[h,q]=i.useState($),x=i.useCallback(n=>{const{prefix:l,phoneNumber:Y}=S(n);C(l||g),q(Y)},[g]);i.useEffect(()=>{x(r)},[r,x]);const U=n=>{const l=n.target.value;C(l),a&&a({...n,target:{...n.target,value:l+h,name:t}})},X=n=>{const l=n.target.value;q(l),a&&a({...n,target:{...n.target,value:d+l,name:t}})},j=n=>{o&&o({...n,target:{...n.target,value:d+h,name:t}})};return i.useImperativeHandle(A,()=>{const n=document.createElement("input");return Object.defineProperty(n,"value",{get:()=>d+h,set:l=>{x(l)}}),n.name=t||"",n}),e.jsxs("fieldset",{className:s["phone-number-input-wrapper"],children:[e.jsxs("legend",{className:s["phone-number-input-legend"],children:[R," ",T&&W&&"*"]}),e.jsxs("p",{className:s["phone-format"],id:P,children:["Par exemple : ",se[d]]}),e.jsxs("div",{className:s["phone-number-inpus"],children:[e.jsx("label",{htmlFor:"countryCode",className:s["visually-hidden"],children:"Indicatif téléphonique"}),e.jsx(y,{disabled:!!p,options:N,className:s["country-code-select"],value:d,onChange:U,onBlur:j}),e.jsx("label",{htmlFor:t,className:s["visually-hidden"],children:"Numéro de téléphone"}),e.jsx(ne,{disabled:p,hasError:!!u,type:"text",name:t,value:h,onChange:X,onBlur:j,className:s["phone-number-input"],autoComplete:"tel-national",maxLength:m,"aria-describedby":P,...M}),e.jsx("div",{className:s["phone-number-input-footer"],children:u&&e.jsx("div",{className:s["phone-number-input-error"],children:e.jsx(te,{name:t,children:u})})})]})]})});c.displayName="PhoneNumberInput";const S=r=>{const o=N.map(t=>t.value).find(t=>r.startsWith(t));return o?{prefix:o,phoneNumber:r.substring(o.length)}:{prefix:"",phoneNumber:r}};try{c.displayName="PhoneNumberInput",c.__docgenInfo={description:"",displayName:"PhoneNumberInput",props:{disabled:{defaultValue:null,description:"",name:"disabled",required:!1,type:{name:"boolean"}},name:{defaultValue:null,description:"",name:"name",required:!0,type:{name:"string"}},value:{defaultValue:{value:""},description:"",name:"value",required:!1,type:{name:"string"}},onBlur:{defaultValue:null,description:"",name:"onBlur",required:!1,type:{name:"((e: FocusEvent<HTMLInputElement | HTMLSelectElement, Element>) => void)"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!1,type:{name:"((e: { target: { value: string; name?: string; }; }) => void)"}},label:{defaultValue:null,description:"",name:"label",required:!0,type:{name:"string | Element"}},maxLength:{defaultValue:{value:"25"},description:"",name:"maxLength",required:!1,type:{name:"number"}},required:{defaultValue:{value:"false"},description:"",name:"required",required:!1,type:{name:"boolean"}},asterisk:{defaultValue:{value:"true"},description:"",name:"asterisk",required:!1,type:{name:"boolean"}},error:{defaultValue:null,description:"",name:"error",required:!1,type:{name:"string"}}}}}catch{}const le=({children:r})=>{const a=Z({defaultValues:{phone:"+33612345678"},resolver:G(J().shape({phone:K().required().test({name:"is-phone-valid",message:"Veuillez entrer un numéro de téléphone valide",test:re})})),mode:"onTouched"});return e.jsx(ee,{...a,children:r})},xe={title:"ui-kit/formsV2/PhoneNumberInput",component:c,decorators:[r=>e.jsx(le,{children:e.jsx(r,{})})]},V={wrapper:{color:"#666",fontSize:"0.8rem",padding:"0 1rem",backgroundColor:"#f5f5f5",borderRadius:"0.2rem",border:"thin solid #e1e1e1"},pre:{display:"inline-block",padding:"0.5rem"}},b={args:{name:"phone",label:"Custom label for my required field (with validation)"},render:r=>{var m;const{register:a,watch:o,formState:{errors:t}}=Q(),p=o("phone");return e.jsxs(e.Fragment,{children:[e.jsx(c,{...r,...a("phone"),required:!0,error:(m=t.phone)==null?void 0:m.message}),e.jsxs("div",{style:V.wrapper,children:["RAW value: ",e.jsx("pre",{style:V.pre,children:p})]})]})}},v={args:{name:"phone",label:"Phone number input optional",required:!1}},_={args:{name:"phone",label:"Custom label in forced error state",error:"Ce champs comporte une erreur"}};var w,I,F;b.parameters={...b.parameters,docs:{...(w=b.parameters)==null?void 0:w.docs,source:{originalSource:`{
  args: {
    name: 'phone',
    label: 'Custom label for my required field (with validation)'
  },
  render: args => {
    const {
      register,
      watch,
      formState: {
        errors
      }
      // eslint-disable-next-line react-hooks/rules-of-hooks
    } = useFormContext<WrapperFormValues>();
    const phoneNumber = watch('phone');
    return <>
        <PhoneNumberInput {...args} {...register('phone')} required={true} error={errors.phone?.message} />
        <div style={demoStyles['wrapper']}>
          RAW value: <pre style={demoStyles['pre']}>{phoneNumber}</pre>
        </div>
      </>;
  }
}`,...(F=(I=b.parameters)==null?void 0:I.docs)==null?void 0:F.source}}};var O,z,k;v.parameters={...v.parameters,docs:{...(O=v.parameters)==null?void 0:O.docs,source:{originalSource:`{
  args: {
    name: 'phone',
    label: 'Phone number input optional',
    required: false
  }
}`,...(k=(z=v.parameters)==null?void 0:z.docs)==null?void 0:k.source}}};var B,H,L;_.parameters={..._.parameters,docs:{...(B=_.parameters)==null?void 0:B.docs,source:{originalSource:`{
  args: {
    name: 'phone',
    label: 'Custom label in forced error state',
    error: 'Ce champs comporte une erreur'
  }
}`,...(L=(H=_.parameters)==null?void 0:H.docs)==null?void 0:L.source}}};const ye=["Default","WithOptional","InErrorState"];export{b as Default,_ as InErrorState,v as WithOptional,ye as __namedExportsOrder,xe as default};
