import{j as E}from"./jsx-runtime-ffb262ed.js";import{D as se}from"./index-12c0097d.js";import{B as le,a as ee}from"./Breadcrumb-1939009b.js";import{r as b}from"./index-76fb7be0.js";import{a as j,i as ce,S as ue}from"./Spinner-eecfb02b.js";import{u as de}from"./useNotification-49718deb.js";import{u as fe}from"./utils-70f14cd5.js";import"./formik.esm-d2c4e539.js";import{O as m,I as k}from"./constants-79bc88c3.js";import{c as me}from"./_commonjsHelpers-de833af9.js";import{u as X,a as pe,g as he}from"./index-76bbc159.js";import{u as ve,E as ge,O as ye}from"./useAnalytics-484d11d8.js";import{c as Z}from"./index-a587463d.js";import"./Stepper-ecb90926.js";import"./full-arrow-right-b1f27636.js";import"./SvgIcon-c0bf369c.js";import"./config-cb91ff0d.js";import"./VenuePhysicalLocation-313db5a9.js";import"./stroke-pass-cf331655.js";import"./notificationReducer-96c596d5.js";import"./index-b0fbc9cc.js";import"./hoist-non-react-statics.cjs-3f8ebaa8.js";var L=(e=>(e.VISUAL="visual",e.MENTAL="mental",e.AUDIO="audio",e.MOTOR="motor",e.NONE="none",e))(L||{});const B="Nous avons rencontré un problème lors de la récupération des données.",Ae={isOk:!1,message:B,payload:{categories:[],subCategories:[]}},Ie=e=>({id:e.id,proLabel:e.proLabel,isSelectable:e.isSelectable}),Ce=e=>({id:e.id,categoryId:e.categoryId,proLabel:e.proLabel,isEvent:e.isEvent,conditionalFields:e.conditionalFields,canBeDuo:e.canBeDuo,canBeEducational:e.canBeEducational,onlineOfflinePlatform:e.onlineOfflinePlatform,reimbursementRule:e.reimbursementRule,isSelectable:e.isSelectable,canBeWithdrawable:e.canBeWithdrawable}),Oe=async()=>{try{const e=await j.getCategories();return{isOk:!0,message:null,payload:{categories:e.categories.map(Ie),subCategories:e.subcategories.map(Ce)}}}catch{return Ae}},Ne=e=>({id:e.venue.managingOfferer.id,name:e.venue.managingOfferer.name}),Te=e=>{const a={[L.VISUAL]:e.venue.visualDisabilityCompliant||!1,[L.MENTAL]:e.venue.mentalDisabilityCompliant||!1,[L.AUDIO]:e.venue.audioDisabilityCompliant||!1,[L.MOTOR]:e.venue.motorDisabilityCompliant||!1};return{id:e.venue.id,name:e.venue.name,publicName:e.venue.publicName||"",isVirtual:e.venue.isVirtual,address:e.venue.address||"",postalCode:e.venue.postalCode||"",departmentCode:e.venue.departementCode||"",city:e.venue.city||"",offerer:Ne(e),accessibility:{...a,[L.NONE]:!Object.values(a).includes(!0)}}},Ee=e=>{const a=e.remainingQuantity??"unlimited";return{beginningDatetime:e.beginningDatetime??null,bookingLimitDatetime:e.bookingLimitDatetime??null,bookingsQuantity:e.bookingsQuantity,dateCreated:new Date(e.dateCreated),hasActivationCode:e.hasActivationCode,id:e.id,isEventDeletable:e.isEventDeletable,isEventExpired:e.isEventExpired,isSoftDeleted:e.isSoftDeleted,price:e.price,priceCategoryId:e.priceCategoryId,quantity:e.quantity,remainingQuantity:a,activationCodesExpirationDatetime:e.activationCodesExpirationDatetime?new Date(e.activationCodesExpirationDatetime):null,activationCodes:[]}},De=e=>{var a,l,i,r,n,g,A,N,T,I;return{author:((a=e.extraData)==null?void 0:a.author)||"",musicType:((l=e.extraData)==null?void 0:l.musicType)||"",musicSubType:((i=e.extraData)==null?void 0:i.musicSubType)||"",performer:((r=e.extraData)==null?void 0:r.performer)||"",ean:((n=e.extraData)==null?void 0:n.ean)||"",showType:((g=e.extraData)==null?void 0:g.showType)||"",showSubType:((A=e.extraData)==null?void 0:A.showSubType)||"",speaker:((N=e.extraData)==null?void 0:N.speaker)||"",stageDirector:((T=e.extraData)==null?void 0:T.stageDirector)||"",visa:((I=e.extraData)==null?void 0:I.visa)||""}},xe=e=>e===null?null:{name:e.name},_e=e=>{var a;if(e.activeMediation){if(e.activeMediation.thumbUrl)return{originalUrl:e.activeMediation.thumbUrl,url:e.activeMediation.thumbUrl,credit:((a=e.activeMediation)==null?void 0:a.credit)||""}}else if(e.thumbUrl)return{originalUrl:e.thumbUrl,url:e.thumbUrl,credit:""}},Re=e=>{var i;const a={[L.VISUAL]:e.visualDisabilityCompliant||!1,[L.MENTAL]:e.mentalDisabilityCompliant||!1,[L.AUDIO]:e.audioDisabilityCompliant||!1,[L.MOTOR]:e.motorDisabilityCompliant||!1};return{id:e.id,bookingEmail:e.bookingEmail||"",bookingContact:e.bookingContact||"",description:e.description||"",durationMinutes:e.durationMinutes||null,isActive:e.isActive,isDuo:e.isDuo,isEvent:e.isEvent,isDigital:e.isDigital,isNational:e.isNational,name:e.name,offererId:e.venue.managingOfferer.id,offererName:e.venue.managingOfferer.name,priceCategories:e.priceCategories,subcategoryId:e.subcategoryId,url:e.url||"",externalTicketOfficeUrl:e.externalTicketOfficeUrl||"",venueId:e.venue.id,venue:Te(e),withdrawalDetails:e.withdrawalDetails||"",withdrawalDelay:e.withdrawalDelay===void 0?null:e.withdrawalDelay,withdrawalType:e.withdrawalType||null,image:_e(e),accessibility:{...a,[L.NONE]:!Object.values(a).includes(!0)},stocks:e.stocks.map(Ee),lastProviderName:((i=e.lastProvider)==null?void 0:i.name)||null,lastProvider:xe(e.lastProvider||null),status:e.status,...De(e)}},te={isOk:!1,message:"Une erreur est survenue lors de la récupération de votre offre",payload:null},Fe=async e=>{if(e===void 0)return te;try{const a=await j.getOffer(e);return{isOk:!0,message:"",payload:Re(a)}}catch{return te}};var K="NOT_FOUND";function Se(e){var a;return{get:function(i){return a&&e(a.key,i)?a.value:K},put:function(i,r){a={key:i,value:r}},getEntries:function(){return a?[a]:[]},clear:function(){a=void 0}}}function Le(e,a){var l=[];function i(A){var N=l.findIndex(function(I){return a(A,I.key)});if(N>-1){var T=l[N];return N>0&&(l.splice(N,1),l.unshift(T)),T.value}return K}function r(A,N){i(A)===K&&(l.unshift({key:A,value:N}),l.length>e&&l.pop())}function n(){return l}function g(){l=[]}return{get:i,put:r,getEntries:n,clear:g}}var we=function(a,l){return a===l};function be(e){return function(l,i){if(l===null||i===null||l.length!==i.length)return!1;for(var r=l.length,n=0;n<r;n++)if(!e(l[n],i[n]))return!1;return!0}}function ke(e,a){var l=typeof a=="object"?a:{equalityCheck:a},i=l.equalityCheck,r=i===void 0?we:i,n=l.maxSize,g=n===void 0?1:n,A=l.resultEqualityCheck,N=be(r),T=g===1?Se(N):Le(g,N);function I(){var x=T.get(arguments);if(x===K){if(x=e.apply(null,arguments),A){var F=T.getEntries(),D=F.find(function(_){return A(_.value,x)});D&&(x=D.value)}T.put(arguments,x)}return x}return I.clearCache=function(){return T.clear()},I}function Me(e){var a=Array.isArray(e[0])?e[0]:e;if(!a.every(function(i){return typeof i=="function"})){var l=a.map(function(i){return typeof i=="function"?"function "+(i.name||"unnamed")+"()":typeof i}).join(", ");throw new Error("createSelector expects all input-selectors to be functions, but received the following types: ["+l+"]")}return a}function Pe(e){for(var a=arguments.length,l=new Array(a>1?a-1:0),i=1;i<a;i++)l[i-1]=arguments[i];var r=function(){for(var g=arguments.length,A=new Array(g),N=0;N<g;N++)A[N]=arguments[N];var T=0,I,x={memoizeOptions:void 0},F=A.pop();if(typeof F=="object"&&(x=F,F=A.pop()),typeof F!="function")throw new Error("createSelector expects an output function after the inputs, but received: ["+typeof F+"]");var D=x,_=D.memoizeOptions,R=_===void 0?l:_,t=Array.isArray(R)?R:[R],s=Me(A),o=e.apply(void 0,[function(){return T++,F.apply(null,arguments)}].concat(t)),u=e(function(){for(var v=[],d=s.length,C=0;C<d;C++)v.push(s[C].apply(null,arguments));return I=o.apply(null,v),I});return Object.assign(u,{resultFunc:F,memoizedResultFunc:o,dependencies:s,lastResult:function(){return I},recomputations:function(){return T},resetRecomputations:function(){return T=0}}),u};return r}var Ve=Pe(ke);function Ue(e){return typeof e=="string"||typeof e=="number"}var je=function(){function e(){this._cache={}}var a=e.prototype;return a.set=function(i,r){this._cache[i]=r},a.get=function(i){return this._cache[i]},a.remove=function(i){delete this._cache[i]},a.clear=function(){this._cache={}},a.isValidCacheKey=function(i){return Ue(i)},e}(),Be=je,ze=function(){return!0};function Ke(){for(var e=arguments.length,a=new Array(e),l=0;l<e;l++)a[l]=arguments[l];return function(i,r){if(r)throw new Error('[re-reselect] "options" as second argument is not supported anymore. Please provide an option object as single argument.');var n=typeof i=="function"?{keySelector:i}:Object.assign({},i),g=0,A=a.pop(),N=Array.isArray(a[0])?a[0]:[].concat(a),T=function(){return g++,A.apply(void 0,arguments)};a.push(T);var I=n.cacheObject||new Be,x=n.selectorCreator||Ve,F=I.isValidCacheKey||ze;n.keySelectorCreator&&(n.keySelector=n.keySelectorCreator({keySelector:n.keySelector,inputSelectors:N,resultFunc:A}));var D=function(){var R=n.keySelector.apply(n,arguments);if(F(R)){var t=I.get(R);return t===void 0&&(t=x.apply(void 0,a),I.set(R,t)),t.apply(void 0,arguments)}console.warn('[re-reselect] Invalid cache key "'+R+'" has been returned by keySelector function.')};return D.getMatchingSelector=function(){var _=n.keySelector.apply(n,arguments);return I.get(_)},D.removeMatchingSelector=function(){var _=n.keySelector.apply(n,arguments);I.remove(_)},D.clearCache=function(){I.clear()},D.resultFunc=A,D.dependencies=N,D.cache=I,D.recomputations=function(){return g},D.resetRecomputations=function(){return g=0},D.keySelector=n.keySelector,D}}const qe=e=>e.length!==9?"Le SIREN doit comporter 9 caractères.":"",Ge=async e=>{const a=fe(e||"");if(e==="")return{isOk:!0,message:"",payload:{values:{address:"",city:"",name:"",postalCode:"",siren:"",apeCode:""}}};const l=qe(a);if(l)return{isOk:!1,message:l,payload:{}};try{const i=await j.getSirenInfo(a);return{isOk:!0,message:`Informations récupéré avec success pour le SIREN: ${e}`,payload:{values:{address:i.address.street,city:i.address.city,name:i.name,postalCode:i.address.postalCode,siren:i.siren,apeCode:i.ape_code}}}}catch(i){let r="Une erreur est survenue";return ce(i)&&i.status==400&&i.body.global&&(r=i.body.global[0]),{isOk:!1,message:r,payload:{}}}},Ye=e=>e||"";Ke(e=>e,Ge)(Ye);const He={isOk:!1,message:B,payload:[]},$e=async({offererId:e})=>{try{return{isOk:!0,message:null,payload:(await j.listOfferersNames(null,null,e)).offerersNames}}catch{return He}},Je=()=>{const e=X(),l=[{pathPart:"creation",mode:m.CREATION},{pathPart:"brouillon",mode:m.DRAFT}].find(i=>e.pathname.includes(i.pathPart));return l?l.mode:m.EDITION};var Qe={exports:{}};/*
 * [hi-base32]{@link https://github.com/emn178/hi-base32}
 *
 * @version 0.5.0
 * @author Chen, Yi-Cyuan [emn178@gmail.com]
 * @copyright Chen, Yi-Cyuan 2015-2018
 * @license MIT
 */(function(e){(function(){var a=typeof window=="object"?window:{},l=!a.HI_BASE32_NO_NODE_JS&&typeof process=="object"&&process.versions&&process.versions.node;l&&(a=me);var i=!a.HI_BASE32_NO_COMMON_JS&&!0&&e.exports,r="ABCDEFGHIJKLMNOPQRSTUVWXYZ234567".split(""),n={A:0,B:1,C:2,D:3,E:4,F:5,G:6,H:7,I:8,J:9,K:10,L:11,M:12,N:13,O:14,P:15,Q:16,R:17,S:18,T:19,U:20,V:21,W:22,X:23,Y:24,Z:25,2:26,3:27,4:28,5:29,6:30,7:31},g=[0,0,0,0,0,0,0,0],A=function(t,s){s.length>10&&(s="..."+s.substr(-10));var o=new Error("Decoded data is not valid UTF-8. Maybe try base32.decode.asBytes()? Partial data after reading "+t+" bytes: "+s+" <-");throw o.position=t,o},N=function(t){for(var s="",o=t.length,u=0,f=0,v,d;u<o;){if(v=t[u++],v<=127){s+=String.fromCharCode(v);continue}else v>191&&v<=223?(d=v&31,f=1):v<=239?(d=v&15,f=2):v<=247?(d=v&7,f=3):A(u,s);for(var C=0;C<f;++C)v=t[u++],(v<128||v>191)&&A(u,s),d<<=6,d+=v&63;d>=55296&&d<=57343&&A(u,s),d>1114111&&A(u,s),d<=65535?s+=String.fromCharCode(d):(d-=65536,s+=String.fromCharCode((d>>10)+55296),s+=String.fromCharCode((d&1023)+56320))}return s},T=function(t){if(t==="")return[];if(!/^[A-Z2-7=]+$/.test(t))throw new Error("Invalid base32 characters");t=t.replace(/=/g,"");for(var s,o,u,f,v,d,C,p,y=[],h=0,w=t.length,c=0,S=w>>3<<3;c<S;)s=n[t.charAt(c++)],o=n[t.charAt(c++)],u=n[t.charAt(c++)],f=n[t.charAt(c++)],v=n[t.charAt(c++)],d=n[t.charAt(c++)],C=n[t.charAt(c++)],p=n[t.charAt(c++)],y[h++]=(s<<3|o>>>2)&255,y[h++]=(o<<6|u<<1|f>>>4)&255,y[h++]=(f<<4|v>>>1)&255,y[h++]=(v<<7|d<<2|C>>>3)&255,y[h++]=(C<<5|p)&255;var M=w-S;return M===2?(s=n[t.charAt(c++)],o=n[t.charAt(c++)],y[h++]=(s<<3|o>>>2)&255):M===4?(s=n[t.charAt(c++)],o=n[t.charAt(c++)],u=n[t.charAt(c++)],f=n[t.charAt(c++)],y[h++]=(s<<3|o>>>2)&255,y[h++]=(o<<6|u<<1|f>>>4)&255):M===5?(s=n[t.charAt(c++)],o=n[t.charAt(c++)],u=n[t.charAt(c++)],f=n[t.charAt(c++)],v=n[t.charAt(c++)],y[h++]=(s<<3|o>>>2)&255,y[h++]=(o<<6|u<<1|f>>>4)&255,y[h++]=(f<<4|v>>>1)&255):M===7&&(s=n[t.charAt(c++)],o=n[t.charAt(c++)],u=n[t.charAt(c++)],f=n[t.charAt(c++)],v=n[t.charAt(c++)],d=n[t.charAt(c++)],C=n[t.charAt(c++)],y[h++]=(s<<3|o>>>2)&255,y[h++]=(o<<6|u<<1|f>>>4)&255,y[h++]=(f<<4|v>>>1)&255,y[h++]=(v<<7|d<<2|C>>>3)&255),y},I=function(t){for(var s,o,u,f,v,d="",C=t.length,p=0,y=parseInt(C/5)*5;p<y;)s=t.charCodeAt(p++),o=t.charCodeAt(p++),u=t.charCodeAt(p++),f=t.charCodeAt(p++),v=t.charCodeAt(p++),d+=r[s>>>3]+r[(s<<2|o>>>6)&31]+r[o>>>1&31]+r[(o<<4|u>>>4)&31]+r[(u<<1|f>>>7)&31]+r[f>>>2&31]+r[(f<<3|v>>>5)&31]+r[v&31];var h=C-y;return h===1?(s=t.charCodeAt(p),d+=r[s>>>3]+r[s<<2&31]+"======"):h===2?(s=t.charCodeAt(p++),o=t.charCodeAt(p),d+=r[s>>>3]+r[(s<<2|o>>>6)&31]+r[o>>>1&31]+r[o<<4&31]+"===="):h===3?(s=t.charCodeAt(p++),o=t.charCodeAt(p++),u=t.charCodeAt(p),d+=r[s>>>3]+r[(s<<2|o>>>6)&31]+r[o>>>1&31]+r[(o<<4|u>>>4)&31]+r[u<<1&31]+"==="):h===4&&(s=t.charCodeAt(p++),o=t.charCodeAt(p++),u=t.charCodeAt(p++),f=t.charCodeAt(p),d+=r[s>>>3]+r[(s<<2|o>>>6)&31]+r[o>>>1&31]+r[(o<<4|u>>>4)&31]+r[(u<<1|f>>>7)&31]+r[f>>>2&31]+r[f<<3&31]+"="),d},x=function(t){var s,o,u,f,v,d,C=!1,p="",y=0,h,w=0,c=t.length;if(t==="")return p;do{for(g[0]=g[5],g[1]=g[6],g[2]=g[7],h=w;y<c&&h<5;++y)d=t.charCodeAt(y),d<128?g[h++]=d:d<2048?(g[h++]=192|d>>6,g[h++]=128|d&63):d<55296||d>=57344?(g[h++]=224|d>>12,g[h++]=128|d>>6&63,g[h++]=128|d&63):(d=65536+((d&1023)<<10|t.charCodeAt(++y)&1023),g[h++]=240|d>>18,g[h++]=128|d>>12&63,g[h++]=128|d>>6&63,g[h++]=128|d&63);w=h-5,y===c&&++y,y>c&&h<6&&(C=!0),s=g[0],h>4?(o=g[1],u=g[2],f=g[3],v=g[4],p+=r[s>>>3]+r[(s<<2|o>>>6)&31]+r[o>>>1&31]+r[(o<<4|u>>>4)&31]+r[(u<<1|f>>>7)&31]+r[f>>>2&31]+r[(f<<3|v>>>5)&31]+r[v&31]):h===1?p+=r[s>>>3]+r[s<<2&31]+"======":h===2?(o=g[1],p+=r[s>>>3]+r[(s<<2|o>>>6)&31]+r[o>>>1&31]+r[o<<4&31]+"===="):h===3?(o=g[1],u=g[2],p+=r[s>>>3]+r[(s<<2|o>>>6)&31]+r[o>>>1&31]+r[(o<<4|u>>>4)&31]+r[u<<1&31]+"==="):(o=g[1],u=g[2],f=g[3],p+=r[s>>>3]+r[(s<<2|o>>>6)&31]+r[o>>>1&31]+r[(o<<4|u>>>4)&31]+r[(u<<1|f>>>7)&31]+r[f>>>2&31]+r[f<<3&31]+"=")}while(!C);return p},F=function(t){for(var s,o,u,f,v,d="",C=t.length,p=0,y=parseInt(C/5)*5;p<y;)s=t[p++],o=t[p++],u=t[p++],f=t[p++],v=t[p++],d+=r[s>>>3]+r[(s<<2|o>>>6)&31]+r[o>>>1&31]+r[(o<<4|u>>>4)&31]+r[(u<<1|f>>>7)&31]+r[f>>>2&31]+r[(f<<3|v>>>5)&31]+r[v&31];var h=C-y;return h===1?(s=t[p],d+=r[s>>>3]+r[s<<2&31]+"======"):h===2?(s=t[p++],o=t[p],d+=r[s>>>3]+r[(s<<2|o>>>6)&31]+r[o>>>1&31]+r[o<<4&31]+"===="):h===3?(s=t[p++],o=t[p++],u=t[p],d+=r[s>>>3]+r[(s<<2|o>>>6)&31]+r[o>>>1&31]+r[(o<<4|u>>>4)&31]+r[u<<1&31]+"==="):h===4&&(s=t[p++],o=t[p++],u=t[p++],f=t[p],d+=r[s>>>3]+r[(s<<2|o>>>6)&31]+r[o>>>1&31]+r[(o<<4|u>>>4)&31]+r[(u<<1|f>>>7)&31]+r[f>>>2&31]+r[f<<3&31]+"="),d},D=function(t,s){var o=typeof t!="string";return o&&t.constructor===ArrayBuffer&&(t=new Uint8Array(t)),o?F(t):s?I(t):x(t)},_=function(t,s){if(!s)return N(T(t));if(t==="")return"";if(!/^[A-Z2-7=]+$/.test(t))throw new Error("Invalid base32 characters");var o,u,f,v,d,C,p,y,h="",w=t.indexOf("=");w===-1&&(w=t.length);for(var c=0,S=w>>3<<3;c<S;)o=n[t.charAt(c++)],u=n[t.charAt(c++)],f=n[t.charAt(c++)],v=n[t.charAt(c++)],d=n[t.charAt(c++)],C=n[t.charAt(c++)],p=n[t.charAt(c++)],y=n[t.charAt(c++)],h+=String.fromCharCode((o<<3|u>>>2)&255)+String.fromCharCode((u<<6|f<<1|v>>>4)&255)+String.fromCharCode((v<<4|d>>>1)&255)+String.fromCharCode((d<<7|C<<2|p>>>3)&255)+String.fromCharCode((p<<5|y)&255);var M=w-S;return M===2?(o=n[t.charAt(c++)],u=n[t.charAt(c++)],h+=String.fromCharCode((o<<3|u>>>2)&255)):M===4?(o=n[t.charAt(c++)],u=n[t.charAt(c++)],f=n[t.charAt(c++)],v=n[t.charAt(c++)],h+=String.fromCharCode((o<<3|u>>>2)&255)+String.fromCharCode((u<<6|f<<1|v>>>4)&255)):M===5?(o=n[t.charAt(c++)],u=n[t.charAt(c++)],f=n[t.charAt(c++)],v=n[t.charAt(c++)],d=n[t.charAt(c++)],h+=String.fromCharCode((o<<3|u>>>2)&255)+String.fromCharCode((u<<6|f<<1|v>>>4)&255)+String.fromCharCode((v<<4|d>>>1)&255)):M===7&&(o=n[t.charAt(c++)],u=n[t.charAt(c++)],f=n[t.charAt(c++)],v=n[t.charAt(c++)],d=n[t.charAt(c++)],C=n[t.charAt(c++)],p=n[t.charAt(c++)],h+=String.fromCharCode((o<<3|u>>>2)&255)+String.fromCharCode((u<<6|f<<1|v>>>4)&255)+String.fromCharCode((v<<4|d>>>1)&255)+String.fromCharCode((d<<7|C<<2|p>>>3)&255)),h},R={encode:D,decode:_};_.asBytes=T,i?e.exports=R:a.base32=R})()})(Qe);const We=e=>Object.fromEntries(new URLSearchParams(e)),Xe={isOk:!1,message:B,payload:[]},Ze=async({offererId:e})=>{try{const a=await j.getVenues(null,!0,e),l=i=>{const r={[L.VISUAL]:i.visualDisabilityCompliant||!1,[L.MENTAL]:i.mentalDisabilityCompliant||!1,[L.AUDIO]:i.audioDisabilityCompliant||!1,[L.MOTOR]:i.motorDisabilityCompliant||!1};return{id:i.id,managingOffererId:i.managingOffererId,name:i.publicName||i.name,isVirtual:i.isVirtual,withdrawalDetails:i.withdrawalDetails||null,accessibility:{...r,[L.NONE]:!Object.values(r).includes(!0)},bookingEmail:i.bookingEmail||null,hasMissingReimbursementPoint:i.hasMissingReimbursementPoint,hasCreatedOffer:i.hasCreatedOffer}};return{isOk:!0,message:null,payload:a.venues.map(l)}}catch{return Xe}},Y={isOk:!1,message:B,payload:null},et=async({offerer:e,queryOffererId:a,isAdmin:l})=>{const i=l&&e?e.id:a,r={offererNames:[],venueList:[],categoriesData:{categories:[],subCategories:[]}};if(l&&!e&&!a)return Promise.resolve({isOk:!0,message:null,payload:r});const n=await Oe();if(n.isOk)r.categoriesData=n.payload;else return Promise.resolve(Y);const g=await Ze({offererId:i?Number(i):void 0});if(g.isOk)r.venueList=g.payload;else return Promise.resolve(Y);if(l&&e)r.offererNames=[{id:1,name:e.name}];else{const A=await $e({offererId:l?Number(i):void 0});if(A.isOk)r.offererNames=A.payload;else return Promise.resolve(Y)}return Promise.resolve({isOk:!0,message:null,payload:r})},ie=b.createContext({offerId:null,offer:null,setOffer:null,categories:[],subCategories:[],offererNames:[],venueList:[],shouldTrack:!0,setShouldTrack:()=>{},showVenuePopin:{}}),tt=()=>b.useContext(ie);function re({children:e,isUserAdmin:a,offerId:l,queryOffererId:i}){const r="/accueil",n=de(),g=pe(),[A,N]=b.useState(!0),[T,I]=b.useState(!0),[x,F]=b.useState(null),[D,_]=b.useState(),[R,t]=b.useState(null),[s,o]=b.useState([]),[u,f]=b.useState([]),[v,d]=b.useState([]),[C,p]=b.useState([]),[y,h]=b.useState({}),w=c=>{t(c),F(c?{id:c.venue.offerer.id,name:c.venue.offerer.name}:null)};return b.useEffect(()=>{async function c(){const S=await Fe(Number(l));S.isOk?(w(S.payload),_(S.payload.venueId)):(g(r),n.error("Une erreur est survenue lors de la récupération de votre offre"))}l?c():w(null)},[l]),b.useEffect(()=>{async function c(){const S=await et({offerer:x||void 0,queryOffererId:i,isAdmin:a});if(S.isOk){o(S.payload.categoriesData.categories),f(S.payload.categoriesData.subCategories),d(S.payload.offererNames),p(S.payload.venueList);const M={};S.payload.venueList.forEach(G=>{M[G.id]=!G.hasCreatedOffer&&G.hasMissingReimbursementPoint}),h(M)}else o([]),f([]),d([]),p([]),g(r),n.error(B);N(!1)}(!l||R!==null)&&c()},[l,x]),A===!0?E.jsx(ue,{}):E.jsx(ie.Provider,{value:{offerId:(R==null?void 0:R.id)||null,offer:R,setOffer:w,categories:s,subCategories:u,offererNames:v,venueList:C,shouldTrack:T,setShouldTrack:I,venueId:D,offerOfferer:x,showVenuePopin:y},children:e})}try{re.displayName="OfferIndividualContextProvider",re.__docgenInfo={description:"",displayName:"OfferIndividualContextProvider",props:{isUserAdmin:{defaultValue:null,description:"",name:"isUserAdmin",required:!0,type:{name:"boolean"}},offerId:{defaultValue:null,description:"",name:"offerId",required:!1,type:{name:"string"}},queryOffererId:{defaultValue:null,description:"",name:"queryOffererId",required:!1,type:{name:"string"}}}}}catch{}const rt=({isCreation:e=!1,mode:a,step:l})=>e?"/offre/creation/individuel":{[O.INFORMATIONS]:{[m.CREATION]:"/offre/:offerId/individuel/creation",[m.DRAFT]:"/offre/:offerId/individuel/brouillon",[m.EDITION]:"/offre/:offerId/individuel/edition"},[O.STOCKS]:{[m.CREATION]:"/offre/:offerId/individuel/creation/stocks",[m.DRAFT]:"/offre/:offerId/individuel/brouillon/stocks",[m.EDITION]:"/offre/:offerId/individuel/stocks"},[O.TARIFS]:{[m.CREATION]:"/offre/:offerId/individuel/creation/tarifs",[m.DRAFT]:"/offre/:offerId/individuel/brouillon/tarifs",[m.EDITION]:"/offre/:offerId/individuel/tarifs"},[O.SUMMARY]:{[m.CREATION]:"/offre/:offerId/individuel/creation/recapitulatif",[m.DRAFT]:"/offre/:offerId/individuel/brouillon/recapitulatif",[m.EDITION]:"/offre/:offerId/individuel/recapitulatif"},[O.CONFIRMATION]:{[m.CREATION]:"/offre/:offerId/individuel/creation/confirmation",[m.DRAFT]:"/offre/:offerId/individuel/brouillon/confirmation",[m.EDITION]:""}}[l][a],P=({isCreation:e=!1,mode:a,step:l,isV2:i=!1})=>i?rt({isCreation:e,mode:a,step:l}):e?"/offre/individuelle/creation/informations":{[O.INFORMATIONS]:{[m.CREATION]:"/offre/individuelle/:offerId/creation/informations",[m.DRAFT]:"/offre/individuelle/:offerId/brouillon/informations",[m.EDITION]:"/offre/individuelle/:offerId/informations"},[O.STOCKS]:{[m.CREATION]:"/offre/individuelle/:offerId/creation/stocks",[m.DRAFT]:"/offre/individuelle/:offerId/brouillon/stocks",[m.EDITION]:"/offre/individuelle/:offerId/stocks"},[O.TARIFS]:{[m.CREATION]:"/offre/individuelle/:offerId/creation/tarifs",[m.DRAFT]:"/offre/individuelle/:offerId/brouillon/tarifs",[m.EDITION]:"/offre/individuelle/:offerId/tarifs"},[O.SUMMARY]:{[m.CREATION]:"/offre/individuelle/:offerId/creation/recapitulatif",[m.DRAFT]:"/offre/individuelle/:offerId/brouillon/recapitulatif",[m.EDITION]:"/offre/individuelle/:offerId/recapitulatif"},[O.CONFIRMATION]:{[m.CREATION]:"/offre/individuelle/:offerId/creation/confirmation",[m.DRAFT]:"/offre/individuelle/:offerId/brouillon/confirmation",[m.EDITION]:""}}[l][a],H=e=>{const i=X().pathname.split("/");let n=i[i.length-1];return e&&(e.includes(n)||(n=e[0])),n};try{H.displayName="useActiveStep",H.__docgenInfo={description:"",displayName:"useActiveStep",props:{}}}catch{}const at=(e,a)=>{switch(We(e)["offer-type"]){case k.PHYSICAL_GOOD:return k.PHYSICAL_GOOD;case k.VIRTUAL_GOOD:return k.VIRTUAL_GOOD;case k.PHYSICAL_EVENT:return k.PHYSICAL_EVENT;case k.VIRTUAL_EVENT:return k.VIRTUAL_EVENT}return a===null?null:a.isDigital?a.isEvent?k.VIRTUAL_EVENT:k.VIRTUAL_GOOD:a.isEvent?k.PHYSICAL_EVENT:k.PHYSICAL_GOOD},nt=e=>e===null?null:e===k.PHYSICAL_EVENT||e===k.VIRTUAL_EVENT;var O=(e=>(e.INFORMATIONS="informations",e.TARIFS="tarifs",e.STOCKS="stocks",e.SUMMARY="recapitulatif",e.CONFIRMATION="confirmation",e))(O||{});const ot={"stepper-creation":"_stepper-creation_1ckc5_1"},$=({shouldTrack:e=!0})=>{var D;const{offer:a}=tt(),l=H(Object.values(O)),{logEvent:i}=ve(),r=Je(),n=a!==null,g=!!(a!=null&&a.priceCategories&&((D=a==null?void 0:a.priceCategories)==null?void 0:D.length)>0),A=a!==null&&a.stocks.length>0,{search:N}=X(),T=at(N,a),I=(a==null?void 0:a.isEvent)||nt(T),x=[{id:O.INFORMATIONS,label:"Détails de l’offre",path:{[m.CREATION]:P({step:O.INFORMATIONS,mode:m.CREATION}),[m.DRAFT]:P({step:O.INFORMATIONS,mode:m.DRAFT}),[m.EDITION]:P({step:O.INFORMATIONS,mode:m.EDITION})}[r],isActive:!0},{id:O.STOCKS,label:I?"Dates & Capacités":"Stock & Prix",path:{[m.CREATION]:P({step:O.STOCKS,mode:m.CREATION}),[m.DRAFT]:P({step:O.STOCKS,mode:m.DRAFT}),[m.EDITION]:P({step:O.STOCKS,mode:m.EDITION})}[r],isActive:I&&g||!I&&n}];I&&x.splice(1,0,{id:O.TARIFS,label:"Tarifs",path:{[m.CREATION]:P({step:O.TARIFS,mode:m.CREATION}),[m.DRAFT]:P({step:O.TARIFS,mode:m.DRAFT}),[m.EDITION]:P({step:O.TARIFS,mode:m.EDITION})}[r],isActive:n}),r!==m.EDITION&&x.push({id:O.SUMMARY,label:"Récapitulatif",path:{[m.CREATION]:P({step:O.SUMMARY,mode:m.CREATION}),[m.DRAFT]:P({step:O.SUMMARY,mode:m.DRAFT})}[r],isActive:A},{id:O.CONFIRMATION,label:"Confirmation",isActive:!1});const F=x.map(_=>{const R={id:_.id,label:_.label,onClick:()=>{e&&(i==null||i(ge.CLICKED_OFFER_FORM_NAVIGATION,{from:l,to:R.id,used:ye.BREADCRUMB,isEdition:r!==m.CREATION,isDraft:r!==m.EDITION,offerId:a==null?void 0:a.id}))}};return _.isActive&&_.path&&a&&(R.url=he(_.path,{offerId:a.id})),R});return E.jsx(le,{activeStep:l,steps:F,styleType:r!==m.EDITION?ee.STEPPER:ee.TAB,className:r!==m.EDITION?ot["stepper-creation"]:""})};try{$.displayName="OfferIndividualBreadcrumb",$.__docgenInfo={description:"",displayName:"OfferIndividualBreadcrumb",props:{shouldTrack:{defaultValue:{value:"true"},description:"",name:"shouldTrack",required:!1,type:{name:"boolean"}}}}}catch{}const it="_stepper_fjrud_2",st="_content_fjrud_6",lt="_title_fjrud_18",ct="_right_fjrud_21",q={stepper:it,content:st,title:lt,right:ct},J=({children:e,className:a})=>E.jsx("div",{className:Z(q.content,a),children:e});try{J.displayName="OfferFormLayoutContent",J.__docgenInfo={description:"",displayName:"OfferFormLayoutContent",props:{className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}}}}}catch{}const Q=({children:e,className:a})=>E.jsx("div",{className:Z(q.stepper,a),children:e});try{Q.displayName="OfferFormLayoutStepper",Q.__docgenInfo={description:"",displayName:"OfferFormLayoutStepper",props:{className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}}}}}catch{}const W=({actions:e,children:a,className:l})=>E.jsxs("div",{className:Z(q.title,l),children:[E.jsx("div",{children:a}),e&&E.jsx("div",{className:q.right,children:e})]});try{W.displayName="OfferFormLayoutTitleBlock",W.__docgenInfo={description:"",displayName:"OfferFormLayoutTitleBlock",props:{actions:{defaultValue:null,description:"",name:"actions",required:!1,type:{name:"ReactNode"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}}}}}catch{}const V=({children:e,className:a})=>E.jsx("div",{className:a,children:e});V.TitleBlock=W;V.Stepper=Q;V.Content=J;const U=V;try{V.displayName="OfferFormLayout",V.__docgenInfo={description:"",displayName:"OfferFormLayout",props:{className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}}}}}catch{}const bt={title:"components/OfferFormLayout",component:U,decorators:[se]},ut=()=>E.jsxs("div",{children:[E.jsx("button",{children:"Clique-moi"}),E.jsx("span",{children:"Statut"})]}),dt=()=>E.jsx("div",{style:{width:780},children:E.jsxs(U,{children:[E.jsxs(U.TitleBlock,{actions:ut(),children:[E.jsx("h1",{children:'"Mon super titre !'}),E.jsx("h4",{children:"Le nom de mon offre"})]}),E.jsx(U.Stepper,{children:E.jsx($,{})}),E.jsx(U.Content,{children:E.jsxs("div",{children:[E.jsx("h5",{children:"Info"}),E.jsx("p",{children:"Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum."})]})})]})}),z=dt.bind({});var ae,ne,oe;z.parameters={...z.parameters,docs:{...(ae=z.parameters)==null?void 0:ae.docs,source:{originalSource:`() => <div style={{
  width: 780
}}>
    <OfferFormLayout>
      <OfferFormLayout.TitleBlock actions={Actions()}>
        <h1>"Mon super titre !</h1>
        <h4>Le nom de mon offre</h4>
      </OfferFormLayout.TitleBlock>

      <OfferFormLayout.Stepper>
        <OfferIndividualBreadcrumb />
      </OfferFormLayout.Stepper>

      <OfferFormLayout.Content>
        <div>
          <h5>Info</h5>
          <p>
            Lorem Ipsum is simply dummy text of the printing and typesetting
            industry. Lorem Ipsum has been the industry's standard dummy text
            ever since the 1500s, when an unknown printer took a galley of type
            and scrambled it to make a type specimen book. It has survived not
            only five centuries, but also the leap into electronic typesetting,
            remaining essentially unchanged. It was popularised in the 1960s
            with the release of Letraset sheets containing Lorem Ipsum passages,
            and more recently with desktop publishing software like Aldus
            PageMaker including versions of Lorem Ipsum.
          </p>
        </div>
      </OfferFormLayout.Content>
    </OfferFormLayout>
  </div>`,...(oe=(ne=z.parameters)==null?void 0:ne.docs)==null?void 0:oe.source}}};const kt=["Default"];export{z as Default,kt as __namedExportsOrder,bt as default};
//# sourceMappingURL=OfferFormLayout.stories-124be78d.js.map
