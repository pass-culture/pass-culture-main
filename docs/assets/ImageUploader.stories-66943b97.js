import{j as l}from"./jsx-runtime-ffb262ed.js";import{r as _,R as nr}from"./index-76fb7be0.js";import{g as ar,R as ir,n as or}from"./notificationReducer-622781bf.js";import{S as ur,a as at,g as sr}from"./Spinner-7c0f310a.js";import{_ as lr,D as Ft}from"./DialogBox-d35e49a8.js";import"./hoist-non-react-statics.cjs-3f8ebaa8.js";import{f as cr}from"./full-show-8f58c70a.js";import{D as dr}from"./Divider-7c035ea9.js";import{S as Dt}from"./SubmitButton-d034975e.js";import"./Tag-2c2f8155.js";import{B as ge,a as ve}from"./Button-dca582cc.js";import"./TextInput-7de2a26c.js";import"./TextArea-c062b79f.js";import"./Select-bbcae0dc.js";import"./RadioButton-6ad243d2.js";import"./EmailSpellCheckInput-f7d27617.js";import"./DatePicker-e0195d08.js";import"./TimePicker-aa49368f.js";import"./MultiSelectAutocomplete-aa0f6de9.js";import"./SelectAutocomplete-71ba0f07.js";import"./stroke-offer-3e15095b.js";import"./Banner-82c7cbbd.js";import"./InfoBox-e388601c.js";import"./Thumb-695dc798.js";import{I as Mt,a as oe}from"./ImagePreviewsWrapper-2dfd564c.js";import{u as Bt}from"./useNotification-a266f850.js";import{f as pr}from"./full-trash-98c73dd7.js";import{S as qt}from"./SvgIcon-c0bf369c.js";import{C as fr}from"./ConfirmDialog-8c2d365e.js";import{s as mr}from"./stroke-trash-04d1aada.js";import{f as gr}from"./full-edit-fa9e4e17.js";import{c as He}from"./index-a587463d.js";import{s as vr,f as hr}from"./stroke-more-2a2e7561.js";import{u as yr,F as _r}from"./formik.esm-96bdd02b.js";import{C as br}from"./CreditInput-30205ed3.js";import{I as wr}from"./ImageEditor-164679e7.js";import{g as Er,i as ie,C as Ir}from"./imageConstraints-49fe42c0.js";import"./BaseCheckbox-2cbf2f9d.js";import{B as Or}from"./BaseFileInput-5547a44b.js";import"./stroke-down-f1e965f4.js";import"./AutocompleteList-31da84c1.js";import"./FieldError-0089fdbc.js";import"./FieldSuccess-31bdacb0.js";import{c as Sr,a as jr}from"./index.esm-93e60fe1.js";import{P as Pr}from"./PreferredOrientation-9bfa0563.js";import"./_commonjsHelpers-de833af9.js";import"./index-b0fbc9cc.js";import"./config-2929a776.js";import"./stroke-pass-cf331655.js";import"./objectWithoutPropertiesLoose-df62547b.js";import"./tslib.es6-9c2726d7.js";import"./typeof-7fd5df1e.js";import"./stroke-close-3a7bfe9e.js";import"./index-47dfd0dd.js";import"./full-right-83efe067.js";import"./Tooltip-383b3df2.js";import"./BaseInput-a47c473b.js";import"./index-9d475cdf.js";import"./BaseRadio-d45b7978.js";import"./full-next-ebff3494.js";import"./Checkbox-76858c4f.js";import"./CheckboxGroup-66dff462.js";import"./stroke-show-1133cf8e.js";import"./utils-70f14cd5.js";import"./index-564ee5c9.js";import"./getLabelString-a0462018.js";import"./full-link-9eb5e1cb.js";import"./full-clear-9268779e.js";import"./shadow-tips-help-841f916a.js";import"./shadow-tips-warning-66fb0429.js";import"./stroke-error-ed5fe82d.js";import"./Dialog-1f389d90.js";import"./constants-46592b63.js";import"./stroke-valid-9c345a33.js";function Rr(){const e=ar();let t=null,r=null;return{clear(){t=null,r=null},notify(){e(()=>{let n=t;for(;n;)n.callback(),n=n.next})},get(){let n=[],a=t;for(;a;)n.push(a),a=a.next;return n},subscribe(n){let a=!0,i=r={callback:n,next:null,prev:r};return i.prev?i.prev.next=i:t=i,function(){!a||t===null||(a=!1,i.next?i.next.prev=i.prev:r=i.prev,i.prev?i.prev.next=i.next:t=i.next)}}}}const it={notify(){},get:()=>[]};function Ar(e,t){let r,n=it;function a(p){return c(),n.subscribe(p)}function i(){n.notify()}function s(){d.onStateChange&&d.onStateChange()}function u(){return!!r}function c(){r||(r=t?t.addNestedSub(s):e.subscribe(s),n=Rr())}function o(){r&&(r(),r=void 0,n.clear(),n=it)}const d={addNestedSub:a,notifyNestedSubs:i,handleChangeWrapper:s,isSubscribed:u,trySubscribe:c,tryUnsubscribe:o,getListeners:()=>n};return d}const Nr=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",xr=Nr?_.useLayoutEffect:_.useEffect;function Cr({store:e,context:t,children:r,serverState:n}){const a=_.useMemo(()=>{const u=Ar(e);return{store:e,subscription:u,getServerState:n?()=>n:void 0}},[e,n]),i=_.useMemo(()=>e.getState(),[e]);xr(()=>{const{subscription:u}=a;return u.onStateChange=u.notifyNestedSubs,u.trySubscribe(),i!==e.getState()&&u.notifyNestedSubs(),()=>{u.tryUnsubscribe(),u.onStateChange=void 0}},[a,i]);const s=t||ir;return nr.createElement(s.Provider,{value:a},r)}function A(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];throw Error("[Immer] minified error nr: "+e+(r.length?" "+r.map(function(a){return"'"+a+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function q(e){return!!e&&!!e[I]}function L(e){var t;return!!e&&(function(r){if(!r||typeof r!="object")return!1;var n=Object.getPrototypeOf(r);if(n===null)return!0;var a=Object.hasOwnProperty.call(n,"constructor")&&n.constructor;return a===Object||typeof a=="function"&&Function.toString.call(a)===Lr}(e)||Array.isArray(e)||!!e[pt]||!!(!((t=e.constructor)===null||t===void 0)&&t[pt])||Xe(e)||Ze(e))}function k(e,t,r){r===void 0&&(r=!1),X(e)===0?(r?Object.keys:G)(e).forEach(function(n){r&&typeof n=="symbol"||t(n,e[n],e)}):e.forEach(function(n,a){return t(a,n,e)})}function X(e){var t=e[I];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:Xe(e)?2:Ze(e)?3:0}function $(e,t){return X(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function Ur(e,t){return X(e)===2?e.get(t):e[t]}function Lt(e,t,r){var n=X(e);n===2?e.set(t,r):n===3?e.add(r):e[t]=r}function kt(e,t){return e===t?e!==0||1/e==1/t:e!=e&&t!=t}function Xe(e){return Br&&e instanceof Map}function Ze(e){return qr&&e instanceof Set}function B(e){return e.o||e.t}function Je(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=zt(e);delete t[I];for(var r=G(t),n=0;n<r.length;n++){var a=r[n],i=t[a];i.writable===!1&&(i.writable=!0,i.configurable=!0),(i.get||i.set)&&(t[a]={configurable:!0,writable:!0,enumerable:i.enumerable,value:e[a]})}return Object.create(Object.getPrototypeOf(e),t)}function Qe(e,t){return t===void 0&&(t=!1),et(e)||q(e)||!L(e)||(X(e)>1&&(e.set=e.add=e.clear=e.delete=Tr),Object.freeze(e),t&&k(e,function(r,n){return Qe(n,!0)},!0)),e}function Tr(){A(2)}function et(e){return e==null||typeof e!="object"||Object.isFrozen(e)}function U(e){var t=Ve[e];return t||A(18,e),t}function Vr(e,t){Ve[e]||(Ve[e]=t)}function Ce(){return re}function be(e,t){t&&(U("Patches"),e.u=[],e.s=[],e.v=t)}function ue(e){Ue(e),e.p.forEach(Fr),e.p=null}function Ue(e){e===re&&(re=e.l)}function ot(e){return re={p:[],l:re,h:e,m:!0,_:0}}function Fr(e){var t=e[I];t.i===0||t.i===1?t.j():t.g=!0}function we(e,t){t._=t.p.length;var r=t.p[0],n=e!==void 0&&e!==r;return t.h.O||U("ES5").S(t,e,n),n?(r[I].P&&(ue(t),A(4)),L(e)&&(e=se(t,e),t.l||le(t,e)),t.u&&U("Patches").M(r[I].t,e,t.u,t.s)):e=se(t,r,[]),ue(t),t.u&&t.v(t.u,t.s),e!==Wt?e:void 0}function se(e,t,r){if(et(t))return t;var n=t[I];if(!n)return k(t,function(u,c){return ut(e,n,t,u,c,r)},!0),t;if(n.A!==e)return t;if(!n.P)return le(e,n.t,!0),n.t;if(!n.I){n.I=!0,n.A._--;var a=n.i===4||n.i===5?n.o=Je(n.k):n.o,i=a,s=!1;n.i===3&&(i=new Set(a),a.clear(),s=!0),k(i,function(u,c){return ut(e,n,a,u,c,r,s)}),le(e,a,!1),r&&e.u&&U("Patches").N(n,r,e.u,e.s)}return n.o}function ut(e,t,r,n,a,i,s){if(q(a)){var u=se(e,a,i&&t&&t.i!==3&&!$(t.R,n)?i.concat(n):void 0);if(Lt(r,n,u),!q(u))return;e.m=!1}else s&&r.add(a);if(L(a)&&!et(a)){if(!e.h.D&&e._<1)return;se(e,a),t&&t.A.l||le(e,a)}}function le(e,t,r){r===void 0&&(r=!1),!e.l&&e.h.D&&e.m&&Qe(t,r)}function Ee(e,t){var r=e[I];return(r?B(r):e)[t]}function st(e,t){if(t in e)for(var r=Object.getPrototypeOf(e);r;){var n=Object.getOwnPropertyDescriptor(r,t);if(n)return n;r=Object.getPrototypeOf(r)}}function D(e){e.P||(e.P=!0,e.l&&D(e.l))}function Ie(e){e.o||(e.o=Je(e.t))}function Te(e,t,r){var n=Xe(t)?U("MapSet").F(t,r):Ze(t)?U("MapSet").T(t,r):e.O?function(a,i){var s=Array.isArray(a),u={i:s?1:0,A:i?i.A:Ce(),P:!1,I:!1,R:{},l:i,t:a,k:null,o:null,j:null,C:!1},c=u,o=ne;s&&(c=[u],o=J);var d=Proxy.revocable(c,o),p=d.revoke,f=d.proxy;return u.k=f,u.j=p,f}(t,r):U("ES5").J(t,r);return(r?r.A:Ce()).p.push(n),n}function Dr(e){return q(e)||A(22,e),function t(r){if(!L(r))return r;var n,a=r[I],i=X(r);if(a){if(!a.P&&(a.i<4||!U("ES5").K(a)))return a.t;a.I=!0,n=lt(r,i),a.I=!1}else n=lt(r,i);return k(n,function(s,u){a&&Ur(a.t,s)===u||Lt(n,s,t(u))}),i===3?new Set(n):n}(e)}function lt(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return Je(e)}function Mr(){function e(i,s){var u=a[i];return u?u.enumerable=s:a[i]=u={configurable:!0,enumerable:s,get:function(){var c=this[I];return ne.get(c,i)},set:function(c){var o=this[I];ne.set(o,i,c)}},u}function t(i){for(var s=i.length-1;s>=0;s--){var u=i[s][I];if(!u.P)switch(u.i){case 5:n(u)&&D(u);break;case 4:r(u)&&D(u)}}}function r(i){for(var s=i.t,u=i.k,c=G(u),o=c.length-1;o>=0;o--){var d=c[o];if(d!==I){var p=s[d];if(p===void 0&&!$(s,d))return!0;var f=u[d],m=f&&f[I];if(m?m.t!==p:!kt(f,p))return!0}}var h=!!s[I];return c.length!==G(s).length+(h?0:1)}function n(i){var s=i.k;if(s.length!==i.t.length)return!0;var u=Object.getOwnPropertyDescriptor(s,s.length-1);if(u&&!u.get)return!0;for(var c=0;c<s.length;c++)if(!s.hasOwnProperty(c))return!0;return!1}var a={};Vr("ES5",{J:function(i,s){var u=Array.isArray(i),c=function(d,p){if(d){for(var f=Array(p.length),m=0;m<p.length;m++)Object.defineProperty(f,""+m,e(m,!0));return f}var h=zt(p);delete h[I];for(var g=G(h),y=0;y<g.length;y++){var w=g[y];h[w]=e(w,d||!!h[w].enumerable)}return Object.create(Object.getPrototypeOf(p),h)}(u,i),o={i:u?5:4,A:s?s.A:Ce(),P:!1,I:!1,R:{},l:s,t:i,k:c,o:null,g:!1,C:!1};return Object.defineProperty(c,I,{value:o,writable:!0}),c},S:function(i,s,u){u?q(s)&&s[I].A===i&&t(i.p):(i.u&&function c(o){if(o&&typeof o=="object"){var d=o[I];if(d){var p=d.t,f=d.k,m=d.R,h=d.i;if(h===4)k(f,function(E){E!==I&&(p[E]!==void 0||$(p,E)?m[E]||c(f[E]):(m[E]=!0,D(d)))}),k(p,function(E){f[E]!==void 0||$(f,E)||(m[E]=!1,D(d))});else if(h===5){if(n(d)&&(D(d),m.length=!0),f.length<p.length)for(var g=f.length;g<p.length;g++)m[g]=!1;else for(var y=p.length;y<f.length;y++)m[y]=!0;for(var w=Math.min(f.length,p.length),v=0;v<w;v++)f.hasOwnProperty(v)||(m[v]=!0),m[v]===void 0&&c(f[v])}}}}(i.p[0]),t(i.p))},K:function(i){return i.i===4?r(i):n(i)}})}var ct,re,tt=typeof Symbol<"u"&&typeof Symbol("x")=="symbol",Br=typeof Map<"u",qr=typeof Set<"u",dt=typeof Proxy<"u"&&Proxy.revocable!==void 0&&typeof Reflect<"u",Wt=tt?Symbol.for("immer-nothing"):((ct={})["immer-nothing"]=!0,ct),pt=tt?Symbol.for("immer-draftable"):"__$immer_draftable",I=tt?Symbol.for("immer-state"):"__$immer_state",Lr=""+Object.prototype.constructor,G=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,zt=Object.getOwnPropertyDescriptors||function(e){var t={};return G(e).forEach(function(r){t[r]=Object.getOwnPropertyDescriptor(e,r)}),t},Ve={},ne={get:function(e,t){if(t===I)return e;var r=B(e);if(!$(r,t))return function(a,i,s){var u,c=st(i,s);return c?"value"in c?c.value:(u=c.get)===null||u===void 0?void 0:u.call(a.k):void 0}(e,r,t);var n=r[t];return e.I||!L(n)?n:n===Ee(e.t,t)?(Ie(e),e.o[t]=Te(e.A.h,n,e)):n},has:function(e,t){return t in B(e)},ownKeys:function(e){return Reflect.ownKeys(B(e))},set:function(e,t,r){var n=st(B(e),t);if(n!=null&&n.set)return n.set.call(e.k,r),!0;if(!e.P){var a=Ee(B(e),t),i=a==null?void 0:a[I];if(i&&i.t===r)return e.o[t]=r,e.R[t]=!1,!0;if(kt(r,a)&&(r!==void 0||$(e.t,t)))return!0;Ie(e),D(e)}return e.o[t]===r&&(r!==void 0||t in e.o)||Number.isNaN(r)&&Number.isNaN(e.o[t])||(e.o[t]=r,e.R[t]=!0),!0},deleteProperty:function(e,t){return Ee(e.t,t)!==void 0||t in e.t?(e.R[t]=!1,Ie(e),D(e)):delete e.R[t],e.o&&delete e.o[t],!0},getOwnPropertyDescriptor:function(e,t){var r=B(e),n=Reflect.getOwnPropertyDescriptor(r,t);return n&&{writable:!0,configurable:e.i!==1||t!=="length",enumerable:n.enumerable,value:r[t]}},defineProperty:function(){A(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){A(12)}},J={};k(ne,function(e,t){J[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}}),J.deleteProperty=function(e,t){return J.set.call(this,e,t,void 0)},J.set=function(e,t,r){return ne.set.call(this,e[0],t,r,e[0])};var kr=function(){function e(r){var n=this;this.O=dt,this.D=!0,this.produce=function(a,i,s){if(typeof a=="function"&&typeof i!="function"){var u=i;i=a;var c=n;return function(g){var y=this;g===void 0&&(g=u);for(var w=arguments.length,v=Array(w>1?w-1:0),E=1;E<w;E++)v[E-1]=arguments[E];return c.produce(g,function(O){var R;return(R=i).call.apply(R,[y,O].concat(v))})}}var o;if(typeof i!="function"&&A(6),s!==void 0&&typeof s!="function"&&A(7),L(a)){var d=ot(n),p=Te(n,a,void 0),f=!0;try{o=i(p),f=!1}finally{f?ue(d):Ue(d)}return typeof Promise<"u"&&o instanceof Promise?o.then(function(g){return be(d,s),we(g,d)},function(g){throw ue(d),g}):(be(d,s),we(o,d))}if(!a||typeof a!="object"){if((o=i(a))===void 0&&(o=a),o===Wt&&(o=void 0),n.D&&Qe(o,!0),s){var m=[],h=[];U("Patches").M(a,o,m,h),s(m,h)}return o}A(21,a)},this.produceWithPatches=function(a,i){if(typeof a=="function")return function(o){for(var d=arguments.length,p=Array(d>1?d-1:0),f=1;f<d;f++)p[f-1]=arguments[f];return n.produceWithPatches(o,function(m){return a.apply(void 0,[m].concat(p))})};var s,u,c=n.produce(a,i,function(o,d){s=o,u=d});return typeof Promise<"u"&&c instanceof Promise?c.then(function(o){return[o,s,u]}):[c,s,u]},typeof(r==null?void 0:r.useProxies)=="boolean"&&this.setUseProxies(r.useProxies),typeof(r==null?void 0:r.autoFreeze)=="boolean"&&this.setAutoFreeze(r.autoFreeze)}var t=e.prototype;return t.createDraft=function(r){L(r)||A(8),q(r)&&(r=Dr(r));var n=ot(this),a=Te(this,r,void 0);return a[I].C=!0,Ue(n),a},t.finishDraft=function(r,n){var a=r&&r[I],i=a.A;return be(i,n),we(void 0,i)},t.setAutoFreeze=function(r){this.D=r},t.setUseProxies=function(r){r&&!dt&&A(20),this.O=r},t.applyPatches=function(r,n){var a;for(a=n.length-1;a>=0;a--){var i=n[a];if(i.path.length===0&&i.op==="replace"){r=i.value;break}}a>-1&&(n=n.slice(a+1));var s=U("Patches").$;return q(r)?s(r,n):this.produce(r,function(u){return s(u,n)})},e}(),P=new kr;P.produce;P.produceWithPatches.bind(P);P.setAutoFreeze.bind(P);P.setUseProxies.bind(P);P.applyPatches.bind(P);P.createDraft.bind(P);P.finishDraft.bind(P);function ft(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function mt(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?ft(Object(r),!0).forEach(function(n){lr(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ft(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function S(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var gt=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),Oe=function(){return Math.random().toString(36).substring(7).split("").join(".")},ce={INIT:"@@redux/INIT"+Oe(),REPLACE:"@@redux/REPLACE"+Oe(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+Oe()}};function Wr(e){if(typeof e!="object"||e===null)return!1;for(var t=e;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function $t(e,t,r){var n;if(typeof t=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(S(0));if(typeof t=="function"&&typeof r>"u"&&(r=t,t=void 0),typeof r<"u"){if(typeof r!="function")throw new Error(S(1));return r($t)(e,t)}if(typeof e!="function")throw new Error(S(2));var a=e,i=t,s=[],u=s,c=!1;function o(){u===s&&(u=s.slice())}function d(){if(c)throw new Error(S(3));return i}function p(g){if(typeof g!="function")throw new Error(S(4));if(c)throw new Error(S(5));var y=!0;return o(),u.push(g),function(){if(y){if(c)throw new Error(S(6));y=!1,o();var v=u.indexOf(g);u.splice(v,1),s=null}}}function f(g){if(!Wr(g))throw new Error(S(7));if(typeof g.type>"u")throw new Error(S(8));if(c)throw new Error(S(9));try{c=!0,i=a(i,g)}finally{c=!1}for(var y=s=u,w=0;w<y.length;w++){var v=y[w];v()}return g}function m(g){if(typeof g!="function")throw new Error(S(10));a=g,f({type:ce.REPLACE})}function h(){var g,y=p;return g={subscribe:function(v){if(typeof v!="object"||v===null)throw new Error(S(11));function E(){v.next&&v.next(d())}E();var O=y(E);return{unsubscribe:O}}},g[gt]=function(){return this},g}return f({type:ce.INIT}),n={dispatch:f,subscribe:p,getState:d,replaceReducer:m},n[gt]=h,n}function zr(e){Object.keys(e).forEach(function(t){var r=e[t],n=r(void 0,{type:ce.INIT});if(typeof n>"u")throw new Error(S(12));if(typeof r(void 0,{type:ce.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(S(13))})}function Gt(e){for(var t=Object.keys(e),r={},n=0;n<t.length;n++){var a=t[n];typeof e[a]=="function"&&(r[a]=e[a])}var i=Object.keys(r),s;try{zr(r)}catch(u){s=u}return function(c,o){if(c===void 0&&(c={}),s)throw s;for(var d=!1,p={},f=0;f<i.length;f++){var m=i[f],h=r[m],g=c[m],y=h(g,o);if(typeof y>"u")throw o&&o.type,new Error(S(14));p[m]=y,d=d||y!==g}return d=d||i.length!==Object.keys(c).length,d?p:c}}function de(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.length===0?function(n){return n}:t.length===1?t[0]:t.reduce(function(n,a){return function(){return n(a.apply(void 0,arguments))}})}function $r(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(n){return function(){var a=n.apply(void 0,arguments),i=function(){throw new Error(S(15))},s={getState:a.getState,dispatch:function(){return i.apply(void 0,arguments)}},u=t.map(function(c){return c(s)});return i=de.apply(void 0,u)(a.dispatch),mt(mt({},a),{},{dispatch:i})}}}function Kt(e){var t=function(n){var a=n.dispatch,i=n.getState;return function(s){return function(u){return typeof u=="function"?u(a,i,e):s(u)}}};return t}var Yt=Kt();Yt.withExtraArgument=Kt;const vt=Yt;var Ht=globalThis&&globalThis.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(n[i]=a[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Gr=globalThis&&globalThis.__generator||function(e,t){var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,a,i,s;return s={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function u(o){return function(d){return c([o,d])}}function c(o){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,a&&(i=o[0]&2?a.return:o[0]?a.throw||((i=a.return)&&i.call(a),0):a.next)&&!(i=i.call(a,o[1])).done)return i;switch(a=0,i&&(o=[o[0]&2,i.value]),o[0]){case 0:case 1:i=o;break;case 4:return r.label++,{value:o[1],done:!1};case 5:r.label++,a=o[1],o=[0];continue;case 7:o=r.ops.pop(),r.trys.pop();continue;default:if(i=r.trys,!(i=i.length>0&&i[i.length-1])&&(o[0]===6||o[0]===2)){r=0;continue}if(o[0]===3&&(!i||o[1]>i[0]&&o[1]<i[3])){r.label=o[1];break}if(o[0]===6&&r.label<i[1]){r.label=i[1],i=o;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(o);break}i[2]&&r.ops.pop(),r.trys.pop();continue}o=t.call(e,r)}catch(d){o=[6,d],a=0}finally{n=i=0}if(o[0]&5)throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}},ae=globalThis&&globalThis.__spreadArray||function(e,t){for(var r=0,n=t.length,a=e.length;r<n;r++,a++)e[a]=t[r];return e},Kr=Object.defineProperty,Yr=Object.defineProperties,Hr=Object.getOwnPropertyDescriptors,ht=Object.getOwnPropertySymbols,Xr=Object.prototype.hasOwnProperty,Zr=Object.prototype.propertyIsEnumerable,yt=function(e,t,r){return t in e?Kr(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r},K=function(e,t){for(var r in t||(t={}))Xr.call(t,r)&&yt(e,r,t[r]);if(ht)for(var n=0,a=ht(t);n<a.length;n++){var r=a[n];Zr.call(t,r)&&yt(e,r,t[r])}return e},Se=function(e,t){return Yr(e,Hr(t))},Jr=function(e,t,r){return new Promise(function(n,a){var i=function(c){try{u(r.next(c))}catch(o){a(o)}},s=function(c){try{u(r.throw(c))}catch(o){a(o)}},u=function(c){return c.done?n(c.value):Promise.resolve(c.value).then(i,s)};u((r=r.apply(e,t)).next())})},Qr=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?de:de.apply(null,arguments)};function en(e){if(typeof e!="object"||e===null)return!1;var t=Object.getPrototypeOf(e);if(t===null)return!0;for(var r=t;Object.getPrototypeOf(r)!==null;)r=Object.getPrototypeOf(r);return t===r}var tn=function(e){Ht(t,e);function t(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];var a=e.apply(this,r)||this;return Object.setPrototypeOf(a,t.prototype),a}return Object.defineProperty(t,Symbol.species,{get:function(){return t},enumerable:!1,configurable:!0}),t.prototype.concat=function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return e.prototype.concat.apply(this,r)},t.prototype.prepend=function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return r.length===1&&Array.isArray(r[0])?new(t.bind.apply(t,ae([void 0],r[0].concat(this)))):new(t.bind.apply(t,ae([void 0],r.concat(this))))},t}(Array),rn=function(e){Ht(t,e);function t(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];var a=e.apply(this,r)||this;return Object.setPrototypeOf(a,t.prototype),a}return Object.defineProperty(t,Symbol.species,{get:function(){return t},enumerable:!1,configurable:!0}),t.prototype.concat=function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return e.prototype.concat.apply(this,r)},t.prototype.prepend=function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return r.length===1&&Array.isArray(r[0])?new(t.bind.apply(t,ae([void 0],r[0].concat(this)))):new(t.bind.apply(t,ae([void 0],r.concat(this))))},t}(Array);function nn(e){return typeof e=="boolean"}function an(){return function(t){return on(t)}}function on(e){e===void 0&&(e={});var t=e.thunk,r=t===void 0?!0:t;e.immutableCheck,e.serializableCheck;var n=new tn;return r&&(nn(r)?n.push(vt):n.push(vt.withExtraArgument(r.extraArgument))),n}var un=!0;function sn(e){var t=an(),r=e||{},n=r.reducer,a=n===void 0?void 0:n,i=r.middleware,s=i===void 0?t():i,u=r.devTools,c=u===void 0?!0:u,o=r.preloadedState,d=o===void 0?void 0:o,p=r.enhancers,f=p===void 0?void 0:p,m;if(typeof a=="function")m=a;else if(en(a))m=Gt(a);else throw new Error('"reducer" is a required argument, and must be a function or an object of functions that can be passed to combineReducers');var h=s;typeof h=="function"&&(h=h(t));var g=$r.apply(void 0,h),y=de;c&&(y=Qr(K({trace:!un},typeof c=="object"&&c)));var w=new rn(g),v=w;Array.isArray(f)?v=ae([g],f):typeof f=="function"&&(v=f(w));var E=y.apply(void 0,v);return $t(m,d,E)}function Y(e,t){function r(){for(var n=[],a=0;a<arguments.length;a++)n[a]=arguments[a];if(t){var i=t.apply(void 0,n);if(!i)throw new Error("prepareAction did not return an object");return K(K({type:e,payload:i.payload},"meta"in i&&{meta:i.meta}),"error"in i&&{error:i.error})}return{type:e,payload:n[0]}}return r.toString=function(){return""+e},r.type=e,r.match=function(n){return n.type===e},r}var ln="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",cn=function(e){e===void 0&&(e=21);for(var t="",r=e;r--;)t+=ln[Math.random()*64|0];return t},dn=["name","message","stack","code"],je=function(){function e(t,r){this.payload=t,this.meta=r}return e}(),_t=function(){function e(t,r){this.payload=t,this.meta=r}return e}(),pn=function(e){if(typeof e=="object"&&e!==null){for(var t={},r=0,n=dn;r<n.length;r++){var a=n[r];typeof e[a]=="string"&&(t[a]=e[a])}return t}return{message:String(e)}};(function(){function e(t,r,n){var a=Y(t+"/fulfilled",function(o,d,p,f){return{payload:o,meta:Se(K({},f||{}),{arg:p,requestId:d,requestStatus:"fulfilled"})}}),i=Y(t+"/pending",function(o,d,p){return{payload:void 0,meta:Se(K({},p||{}),{arg:d,requestId:o,requestStatus:"pending"})}}),s=Y(t+"/rejected",function(o,d,p,f,m){return{payload:f,error:(n&&n.serializeError||pn)(o||"Rejected"),meta:Se(K({},m||{}),{arg:p,requestId:d,rejectedWithValue:!!f,requestStatus:"rejected",aborted:(o==null?void 0:o.name)==="AbortError",condition:(o==null?void 0:o.name)==="ConditionError"})}}),u=typeof AbortController<"u"?AbortController:function(){function o(){this.signal={aborted:!1,addEventListener:function(){},dispatchEvent:function(){return!1},onabort:function(){},removeEventListener:function(){},reason:void 0,throwIfAborted:function(){}}}return o.prototype.abort=function(){},o}();function c(o){return function(d,p,f){var m=n!=null&&n.idGenerator?n.idGenerator(o):cn(),h=new u,g;function y(v){g=v,h.abort()}var w=function(){return Jr(this,null,function(){var v,E,O,R,N,x,C;return Gr(this,function(V){switch(V.label){case 0:return V.trys.push([0,4,,5]),R=(v=n==null?void 0:n.condition)==null?void 0:v.call(n,o,{getState:p,extra:f}),mn(R)?[4,R]:[3,2];case 1:R=V.sent(),V.label=2;case 2:if(R===!1||h.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};return N=new Promise(function(j,M){return h.signal.addEventListener("abort",function(){return M({name:"AbortError",message:g||"Aborted"})})}),d(i(m,o,(E=n==null?void 0:n.getPendingMeta)==null?void 0:E.call(n,{requestId:m,arg:o},{getState:p,extra:f}))),[4,Promise.race([N,Promise.resolve(r(o,{dispatch:d,getState:p,extra:f,requestId:m,signal:h.signal,abort:y,rejectWithValue:function(j,M){return new je(j,M)},fulfillWithValue:function(j,M){return new _t(j,M)}})).then(function(j){if(j instanceof je)throw j;return j instanceof _t?a(j.payload,m,o,j.meta):a(j,m,o)})])];case 3:return O=V.sent(),[3,5];case 4:return x=V.sent(),O=x instanceof je?s(null,m,o,x.payload,x.meta):s(x,m,o),[3,5];case 5:return C=n&&!n.dispatchConditionRejection&&s.match(O)&&O.meta.condition,C||d(O),[2,O]}})})}();return Object.assign(w,{abort:y,requestId:m,arg:o,unwrap:function(){return w.then(fn)}})}}return Object.assign(c,{pending:i,rejected:s,fulfilled:a,typePrefix:t})}return e.withTypes=function(){return e},e})();function fn(e){if(e.meta&&e.meta.rejectedWithValue)throw e.payload;if(e.error)throw e.error;return e.payload}function mn(e){return e!==null&&typeof e=="object"&&typeof e.then=="function"}var rt="listenerMiddleware";Y(rt+"/add");Y(rt+"/removeAll");Y(rt+"/remove");var bt;typeof queueMicrotask=="function"&&queueMicrotask.bind(typeof window<"u"?window:typeof global<"u"?global:globalThis);Mr();const gn="SET_DISPLAY_DOMAIN_BANNER",vn="SET_LOG_EVENT",hn={displayDomainBanner:!1,logEvent:void 0},yn=(e=hn,t)=>{switch(t.type){case gn:return{...e,displayDomainBanner:t.displayDomainBanner};case vn:return{...e,logEvent:t.logEvent};default:return e}},_n="SET_FEATURE_IS_INITIALIZED",bn="SET_FEATURES",wn={initialized:!1,list:[]},En=(e=wn,t)=>{switch(t.type){case _n:return{...e,initialized:!0};case bn:return{...e,list:t.features};default:return e}},In="SAVE_SEARCH_FILTERS",On="SAVE_PAGE_NUMBER",Sn="SET_CATEGORIES",jn={list:[],searchFilters:{},pageNumber:1,categories:{}},Pn=(e=jn,t)=>{switch(t.type){case In:return{...e,searchFilters:{...e.searchFilters,...t.filters}};case On:return{...e,pageNumber:t.pageNumber};case Sn:return{...e,categories:t.categories};default:return e}},Rn="SET_USER_IS_INITIALIZED",An="RESET_USER_IS_INITIALIZED",Nn="SET_CURRENT_USER",xn={initialized:!1,currentUser:null},Cn=(e=xn,t)=>{switch(t.type){case An:return{...e,initialized:!1,currentUser:null};case Rn:return{...e,initialized:!0};case Nn:return{...e,currentUser:t.currentUser};default:return e}},Un={bookingsFrom:"",bookingsTo:"",isFilteredByDigitalVenues:!1,offerId:"",venueId:""},Tn=(e=Un,t={})=>{switch(!0){case t.type==="BOOKING_SUMMARY_IS_FILTERED_BY_DIGITAL_VENUES":return Object.assign({},e,{isFilteredByDigitalVenues:t.payload,bookingsFrom:"",bookingsTo:"",offerId:"",venueId:""});case(t.type==="BOOKING_SUMMARY_UPDATE_VENUE_ID"&&t.payload==="all"):return Object.assign({},e,{bookingsFrom:"",bookingsTo:"",offerId:"",venueId:t.payload});case(t.type==="BOOKING_SUMMARY_UPDATE_VENUE_ID"&&t.payload!=="all"):return Object.assign({},e,{bookingsFrom:"",bookingsTo:"",offerId:"",venueId:t.payload});case(t.type==="BOOKING_SUMMARY_UPDATE_OFFER_ID"&&t.payload==="all"):return Object.assign({},e,{bookingsFrom:"",bookingsTo:"",offerId:t.payload});case(t.type==="BOOKING_SUMMARY_UPDATE_OFFER_ID"&&t.payload!=="all"):return Object.assign({},e,{offerId:t.payload});case t.type==="BOOKING_SUMMARY_UPDATE_BOOKINGS_FROM":return Object.assign({},e,{bookingsFrom:t.payload});case t.type==="BOOKING_SUMMARY_UPDATE_BOOKINGS_TO":return Object.assign({},e,{bookingsTo:t.payload});default:return e}},Vn="MERGE_ERRORS",Fn="REMOVE_ERRORS",Dn="RESET_ERRRORS",wt={},Mn=(e=wt,t)=>{switch(t.type){case Vn:return Object.assign({},e,{[t.name]:Object.assign({},e[t.name],t.patch)});case Fn:return Object.assign({},e,{[t.name]:null});case Dn:return wt;default:return e}},Bn="FAIL_DATA_",qn="SUCCESS_DATA_",Ln=503,kn={isActivated:!1},Wn=(e=kn,t={type:"",payload:{error_type:""}})=>{const{type:r,payload:n}=t;return r.startsWith(qn)?Object.assign({},e,{isActivated:!1}):r.startsWith(Bn)&&n.status===Ln&&n.error_type==="SERVER_ERROR"?Object.assign({},e,{isActivated:!0}):e},zn=Gt({app:yn,bookingSummary:Tn,errors:Mn,features:En,offers:Pn,notification:or,user:Cn,maintenance:Wn}),$n=(e={})=>({store:sn({reducer:zn,preloadedState:e})}),Fe=({children:e,isDev:t=!1})=>{const[r,n]=_.useState(),[a,i]=_.useState(),[s,u]=_.useState(null);if(_.useEffect(()=>{function o(){n(null),i([])}async function d(){at.getProfile().then(p=>n(p)).catch(()=>n(null)),at.listFeatures().then(p=>i(p)).catch(()=>i([]))}t?o():d()},[]),_.useEffect(()=>{r!==void 0&&a!==void 0&&u({user:{currentUser:r,initialized:!0},features:{list:a||[],initialized:!0}})},[r,a]),s===null)return l.jsx("main",{id:"content",className:"spinner-container",children:l.jsx(ur,{})});const{store:c}=$n(s);return l.jsx(Cr,{store:c,children:e})};try{Fe.displayName="StoreProvider",Fe.__docgenInfo={description:"",displayName:"StoreProvider",props:{isDev:{defaultValue:{value:"false"},description:"",name:"isDev",required:!1,type:{name:"boolean"}}}}}catch{}const Gn=""+new URL("offer-home-shell-d20f1443.png",import.meta.url).href,Kn=""+new URL("offer-shell-ba5c7311.png",import.meta.url).href,Et={"image-preview-shell":"_image-preview-shell_1xnl4_1","image-preview-home-preview":"_image-preview-home-preview_1xnl4_6"},Pe={"image-preview-shell":"_image-preview-shell_glg9w_1","image-preview-blur-offer-preview":"_image-preview-blur-offer-preview_glg9w_7","image-preview-offer-preview":"_image-preview-offer-preview_glg9w_16"},H=({imageUrl:e})=>l.jsxs(Mt,{children:[l.jsxs(oe,{title:"Page d’accueil",children:[l.jsx("img",{alt:"",className:Et["image-preview-shell"],src:Gn}),l.jsx("img",{"data-testid":"app-preview-offer-img-home",alt:"",className:Et["image-preview-home-preview"],src:e})]}),l.jsxs(oe,{title:"Détails de l’offre",children:[l.jsx("img",{alt:"",className:Pe["image-preview-blur-offer-preview"],src:e}),l.jsx("img",{alt:"",className:Pe["image-preview-shell"],src:Kn}),l.jsx("img",{"data-testid":"app-preview-offer-img",alt:"",className:Pe["image-preview-offer-preview"],src:e})]})]});try{H.displayName="AppPreviewOffer",H.__docgenInfo={description:"",displayName:"AppPreviewOffer",props:{imageUrl:{defaultValue:null,description:"",name:"imageUrl",required:!0,type:{name:"string"}}}}}catch{}const Yn=""+new URL("venue-home-shell-9bfd5682.png",import.meta.url).href,Hn=""+new URL("venue-shell-5e096072.png",import.meta.url).href,It={"image-preview-shell":"_image-preview-shell_3dbf9_1","image-preview-home-preview":"_image-preview-home-preview_3dbf9_6"},Re={"image-preview-shell":"_image-preview-shell_gbu12_1","image-preview-blur-venue-preview":"_image-preview-blur-venue-preview_gbu12_7","image-preview-venue-preview":"_image-preview-venue-preview_gbu12_16"},pe=({imageUrl:e})=>{const t=Bt(),r=_.useCallback(()=>{t.error("Une erreur est survenue. Merci de réessayer plus tard")},[t]);return l.jsxs(Mt,{children:[l.jsxs(oe,{title:"Page d’accueil",children:[l.jsx("img",{alt:"",className:It["image-preview-shell"],src:Yn}),l.jsx("img",{"data-testid":"app-preview-venue-img-home",alt:"",className:It["image-preview-home-preview"],onError:r,src:e})]}),l.jsxs(oe,{title:"Page Lieu",children:[l.jsx("img",{alt:"",className:Re["image-preview-blur-venue-preview"],src:e}),l.jsx("img",{alt:"",className:Re["image-preview-shell"],src:Hn}),l.jsx("img",{"data-testid":"app-preview-venue-img",alt:"",className:Re["image-preview-venue-preview"],src:e})]})]})};try{pe.displayName="AppPreviewVenue",pe.__docgenInfo={description:"",displayName:"AppPreviewVenue",props:{imageUrl:{defaultValue:null,description:"",name:"imageUrl",required:!0,type:{name:"string"}}}}}catch{}var b=(e=>(e.OFFER="offer",e.OFFER_COLLECTIVE="offer_collective",e.VENUE="venue",e))(b||{});const Xn="_container_uuguy_2",Zn="_header_uuguy_8",Jn="_subtitle_uuguy_17",Qn="_actions_uuguy_23",ea="_button_uuguy_28",Ae={container:Xn,header:Zn,subtitle:Jn,actions:Qn,button:ea},De=({mode:e,hideModal:t,imageUrl:r})=>{const n={[b.VENUE]:pe,[b.OFFER]:H,[b.OFFER_COLLECTIVE]:H}[e];return l.jsx(Ft,{hasCloseButton:!0,labelledBy:"Ajouter une image",onDismiss:t,children:l.jsxs("div",{className:Ae.container,children:[l.jsx("header",{children:l.jsx("h1",{className:Ae.header,children:"Ajouter une image"})}),l.jsx("div",{className:Ae.subtitle,children:"Prévisualisation de votre image dans l’application pass Culture"}),l.jsx(n,{imageUrl:r})]})})};try{De.displayName="ModalAppPreview",De.__docgenInfo={description:"",displayName:"ModalAppPreview",props:{hideModal:{defaultValue:null,description:"",name:"hideModal",required:!0,type:{name:"() => void"}},mode:{defaultValue:null,description:"",name:"mode",required:!0,type:{name:"enum",value:[{value:'"offer"'},{value:'"offer_collective"'},{value:'"venue"'}]}},imageUrl:{defaultValue:null,description:"",name:"imageUrl",required:!0,type:{name:"string"}}}}}catch{}const Me=({imageUrl:e,mode:t})=>{const[r,n]=_.useState(!1);return l.jsxs(l.Fragment,{children:[l.jsx(ge,{onClick:()=>n(!0),variant:ve.TERNARY,icon:cr,children:"Prévisualiser"}),r&&e&&l.jsx(De,{mode:t,imageUrl:e,hideModal:()=>n(!1)})]})};try{Me.displayName="ButtonAppPreview",Me.__docgenInfo={description:"",displayName:"ButtonAppPreview",props:{mode:{defaultValue:null,description:"",name:"mode",required:!0,type:{name:"enum",value:[{value:'"offer"'},{value:'"offer_collective"'},{value:'"venue"'}]}},imageUrl:{defaultValue:null,description:"",name:"imageUrl",required:!0,type:{name:"string"}}}}}catch{}const ta={"button-image-delete-icon":"_button-image-delete-icon_ooh4c_1"},Be=({isLoading:e,onConfirm:t,onDismiss:r})=>l.jsx(fr,{cancelText:"Retour",confirmText:"Supprimer",icon:mr,isLoading:e,onCancel:r,onConfirm:t,title:"Supprimer l’image",children:"Souhaitez-vous vraiment supprimer cette image ?"});try{Be.displayName="ModalImageDelete",Be.__docgenInfo={description:"",displayName:"ModalImageDelete",props:{isLoading:{defaultValue:null,description:"",name:"isLoading",required:!0,type:{name:"boolean"}},onConfirm:{defaultValue:null,description:"",name:"onConfirm",required:!0,type:{name:"() => void"}},onDismiss:{defaultValue:null,description:"",name:"onDismiss",required:!0,type:{name:"() => void"}}}}}catch{}const qe=({onImageDelete:e})=>{const[t,r]=_.useState(!1),[n,a]=_.useState(!1),i=async()=>{a(!0),await e()};return l.jsxs(l.Fragment,{children:[l.jsxs(ge,{onClick:()=>r(!0),variant:ve.TERNARY,children:[l.jsx(qt,{alt:"",className:ta["button-image-delete-icon"],src:pr}),"Supprimer"]}),t&&l.jsx(Be,{isLoading:n,onConfirm:i,onDismiss:()=>r(!1)})]})};try{qe.displayName="ButtonImageDelete",qe.__docgenInfo={description:"",displayName:"ButtonImageDelete",props:{onImageDelete:{defaultValue:null,description:"",name:"onImageDelete",required:!0,type:{name:"() => Promise<void>"}}}}}catch{}const ra="_icon_bzfcf_32",na="_label_bzfcf_38",Z={"button-image-add":"_button-image-add_bzfcf_2","add-image-venue":"_add-image-venue_bzfcf_14","add-image-offer":"_add-image-offer_bzfcf_18","image-upload-button-label":"_image-upload-button-label_bzfcf_25",icon:ra,label:na},Le=({onClick:e,mode:t})=>l.jsxs("button",{className:He(Z["button-image-add"],{[Z["add-image-venue"]]:t===b.VENUE,[Z["add-image-offer"]]:t===b.OFFER||t===b.OFFER_COLLECTIVE}),onClick:e,type:"button",children:[l.jsx(qt,{src:vr,alt:"",className:Z.icon}),l.jsxs("span",{className:Z.label,children:["Ajouter ",l.jsx("br",{})," une image"]})]});try{Le.displayName="ButtonImageAdd",Le.__docgenInfo={description:"",displayName:"ButtonImageAdd",props:{onClick:{defaultValue:null,description:"",name:"onClick",required:!0,type:{name:"() => void"}},mode:{defaultValue:null,description:"",name:"mode",required:!0,type:{name:"enum",value:[{value:'"offer"'},{value:'"offer_collective"'},{value:'"venue"'}]}}}}}catch{}const fe=(e,t)=>e+t/2,aa=e=>1/e,Xt={[b.OFFER]:{maxSize:1e7,minWidth:400,types:["image/png","image/jpeg"],minHeight:600},[b.OFFER_COLLECTIVE]:{maxSize:1e7,minWidth:400,types:["image/png","image/jpeg"],minHeight:600},[b.VENUE]:{maxSize:1e7,minWidth:600,types:["image/png","image/jpeg"],minHeight:400}},ia=e=>{const[t,r]=_.useState(0),[n,a]=_.useState(0);return _.useEffect(()=>{Er(e).then(i=>{i&&(r(i.width),a(i.height))})},[]),{width:t,height:n}},W={"modal-image-crop":"_modal-image-crop_3jjc8_2","modal-image-crop-form":"_modal-image-crop-form_3jjc8_9","modal-image-crop-header":"_modal-image-crop-header_3jjc8_15","modal-image-crop-right":"_modal-image-crop-right_3jjc8_23","modal-image-crop-credit":"_modal-image-crop-credit_3jjc8_29","modal-image-crop-footer":"_modal-image-crop-footer_3jjc8_35"},oa=({originalDimensions:e,orientation:t})=>t==="landscape"?{width:Math.floor(Math.min(e.width,e.height/2*3)),height:Math.floor(Math.min(e.height,e.width/3*2))}:{width:Math.floor(Math.min(e.width,e.height/3*2)),height:Math.floor(Math.min(e.height,e.width/2*3))},ke=({onReplaceImage:e,image:t,credit:r,onSetCredit:n,onEditedImageSave:a,saveInitialScale:i,saveInitialPosition:s,initialPosition:u,initialScale:c,mode:o,submitButtonText:d})=>{const{width:p,height:f}=ia(t),m=_.useRef(null),h=Bt(),g=Xt[o].minWidth,{width:y}=oa({originalDimensions:{width:p,height:f},orientation:o===b.VENUE?"landscape":"portrait"}),w=Math.min(4,(y-10)/g),v={[b.OFFER]:384,[b.OFFER_COLLECTIVE]:384,[b.VENUE]:244}[o],E={[b.OFFER]:{canvasHeight:v,canvasWidth:v*6/9,cropBorderColor:"#FFF",cropBorderHeight:50,cropBorderWidth:105,maxScale:w},[b.OFFER_COLLECTIVE]:{canvasHeight:v,canvasWidth:v*6/9,cropBorderColor:"#FFF",cropBorderHeight:50,cropBorderWidth:105,maxScale:w},[b.VENUE]:{canvasHeight:v,canvasWidth:v*3/2,cropBorderColor:"#FFF",cropBorderHeight:40,cropBorderWidth:100,maxScale:w}}[o],O=_.useCallback(()=>{try{if(m.current){const x=m.current.getImage(),C=m.current.getCroppingRect();s({x:fe(C.x,C.width),y:fe(C.y,C.height)}),a(x.toDataURL(),C)}}catch{h.error("Une erreur est survenue. Merci de réessayer plus tard")}},[a,s,h]),N=yr({initialValues:{credit:""},onSubmit:O});return l.jsx("section",{className:W["modal-image-crop"],children:l.jsx(_r,{value:N,children:l.jsxs("form",{action:"#",onSubmit:N.handleSubmit,children:[l.jsxs("div",{className:W["modal-image-crop-form"],children:[l.jsx("header",{children:l.jsx("h1",{className:W["modal-image-crop-header"],children:"Ajouter une image"})}),l.jsx("p",{className:W["modal-image-crop-right"],children:"En utilisant ce contenu, je certifie que je suis propriétaire ou que je dispose des autorisations nécessaires pour l’utilisation de celui-ci."}),l.jsx(wr,{...E,image:t,initialPosition:u,initialScale:c,ref:m,saveInitialScale:i}),l.jsx(br,{credit:r,extraClassName:W["modal-image-crop-credit"],updateCredit:n})]}),l.jsx(dr,{}),l.jsxs("footer",{className:W["modal-image-crop-footer"],children:[l.jsx(ge,{icon:hr,onClick:e,variant:ve.TERNARY,children:"Remplacer l’image"}),l.jsx(Dt,{onClick:O,children:d})]})]})})})};try{ke.displayName="ModalImageCrop",ke.__docgenInfo={description:"",displayName:"ModalImageCrop",props:{image:{defaultValue:null,description:"",name:"image",required:!0,type:{name:"File"}},credit:{defaultValue:null,description:"",name:"credit",required:!0,type:{name:"string"}},onSetCredit:{defaultValue:null,description:"",name:"onSetCredit",required:!0,type:{name:"(credit: string) => void"}},onReplaceImage:{defaultValue:null,description:"",name:"onReplaceImage",required:!0,type:{name:"() => void"}},initialPosition:{defaultValue:null,description:"",name:"initialPosition",required:!1,type:{name:"Position"}},initialScale:{defaultValue:null,description:"",name:"initialScale",required:!1,type:{name:"number"}},saveInitialScale:{defaultValue:null,description:"",name:"saveInitialScale",required:!0,type:{name:"(scale: number) => void"}},saveInitialPosition:{defaultValue:null,description:"",name:"saveInitialPosition",required:!0,type:{name:"(position: Position) => void"}},onEditedImageSave:{defaultValue:null,description:"",name:"onEditedImageSave",required:!0,type:{name:"(dataUrl: string, croppedRect: CroppedRect) => void"}},mode:{defaultValue:null,description:"",name:"mode",required:!0,type:{name:"enum",value:[{value:'"offer"'},{value:'"offer_collective"'},{value:'"venue"'}]}},submitButtonText:{defaultValue:null,description:"",name:"submitButtonText",required:!0,type:{name:"string"}}}}}catch{}const ua=({constraints:e})=>Sr().shape(e.reduce((t,r)=>({...t,[r.id]:jr().test({message:r.description,test:async(n,a)=>r.asyncValidator(a.parent.image)})}),{})),We=({onSubmit:e,mode:t})=>{const[r,n]=_.useState([]),a=Xt[t],i=[ie.formats(a.types),ie.size(a.maxSize),ie.width(a.minWidth),ie.height(a.minHeight)],s=ua({constraints:i}),u=async c=>{const o=c.currentTarget.files&&c.currentTarget.files[0]||null;o&&s.validate({image:o},{abortEarly:!1}).then(()=>e({image:o})).catch(d=>n(d.inner.map(p=>p.path||"unknown")))};return l.jsxs("form",{onSubmit:c=>c.preventDefault(),children:[l.jsx(Or,{label:"Importer une image depuis l’ordinateur",fileTypes:["image/png","image/jpeg"],isValid:r.length===0,onChange:u}),l.jsx(Ir,{constraints:i,failingConstraints:r})]})};try{We.displayName="ImageUploadBrowserForm",We.__docgenInfo={description:"",displayName:"ImageUploadBrowserForm",props:{onSubmit:{defaultValue:null,description:"",name:"onSubmit",required:!0,type:{name:"(values: ImageUploadBrowserFormValues) => void"}},mode:{defaultValue:null,description:"",name:"mode",required:!0,type:{name:"enum",value:[{value:'"offer"'},{value:'"offer_collective"'},{value:'"venue"'}]}}}}}catch{}const sa="_header_12lh2_9",Ot={"modal-upload-browser":"_modal-upload-browser_12lh2_2",header:sa,"horizontal-rule":"_horizontal-rule_12lh2_15"},ze=({onImageClientUpload:e,mode:t})=>{const r={[b.OFFER]:"portrait",[b.OFFER_COLLECTIVE]:"portrait",[b.VENUE]:"landscape"}[t];return l.jsxs("section",{className:Ot["modal-upload-browser"],children:[l.jsx("header",{children:l.jsx("h1",{className:Ot.header,children:"Ajouter une image"})}),l.jsx(Pr,{orientation:r}),l.jsx(We,{onSubmit:e,mode:t})]})};try{ze.displayName="ModalImageUploadBrowser",ze.__docgenInfo={description:"",displayName:"ModalImageUploadBrowser",props:{onImageClientUpload:{defaultValue:null,description:"",name:"onImageClientUpload",required:!0,type:{name:"(values: ImageUploadBrowserFormValues) => void"}},mode:{defaultValue:null,description:"",name:"mode",required:!0,type:{name:"enum",value:[{value:'"offer"'},{value:'"offer_collective"'},{value:'"venue"'}]}}}}}catch{}const la="_container_uuguy_2",ca="_header_uuguy_8",da="_subtitle_uuguy_17",pa="_actions_uuguy_23",fa="_button_uuguy_28",z={container:la,header:ca,subtitle:da,actions:pa,button:fa},$e=({imageUrl:e,isUploading:t,onGoBack:r,onUploadImage:n,mode:a})=>{const i={[b.VENUE]:pe,[b.OFFER]:H,[b.OFFER_COLLECTIVE]:H}[a];return l.jsxs("div",{className:z.container,children:[l.jsx("header",{children:l.jsx("h1",{className:z.header,children:"Ajouter une image"})}),l.jsx("div",{className:z.subtitle,children:"Prévisualisation de votre image dans l’application pass Culture"}),l.jsx(i,{imageUrl:e}),l.jsxs("div",{className:z.actions,children:[l.jsx("button",{className:He("secondary-button",z.button),onClick:r,title:"Retour",type:"button",children:"Retour"}),l.jsx(Dt,{className:z.button,disabled:!1,isLoading:!!t,onClick:n})]})]})};try{$e.displayName="ModalImageUploadConfirm",$e.__docgenInfo={description:"",displayName:"ModalImageUploadConfirm",props:{imageUrl:{defaultValue:null,description:"",name:"imageUrl",required:!0,type:{name:"string"}},mode:{defaultValue:null,description:"",name:"mode",required:!0,type:{name:"enum",value:[{value:'"offer"'},{value:'"offer_collective"'},{value:'"venue"'}]}},isUploading:{defaultValue:null,description:"",name:"isUploading",required:!0,type:{name:"boolean"}},onGoBack:{defaultValue:null,description:"",name:"onGoBack",required:!0,type:{name:"() => void"}},onUploadImage:{defaultValue:null,description:"",name:"onUploadImage",required:!0,type:{name:"() => void"}}}}}catch{}const Ge=({mode:e,onDismiss:t,onImageUpload:r,initialValues:n={}})=>{const[a,i]=_.useState(!1),{imageUrl:s,originalImageUrl:u,credit:c,cropParams:o}=n,[d,p]=_.useState();_.useEffect(()=>{async function T(_e){p(await sr(_e)),i(!0)}const F=u||s;F?T(F):i(!0)},[]);const[f,m]=_.useState(c||""),[h,g]=_.useState(),[y,w]=_.useState(""),[v,E]=_.useState(!1),{xCropPercent:O,yCropPercent:R,heightCropPercent:N,widthCropPercent:x}=o||{},[C,V]=_.useState(N?aa(N):1),[j,M]=_.useState({x:O&&x?fe(O,x):.5,y:R&&N?fe(R,N):.5}),Qt=_.useCallback(()=>{w("")},[]),er=T=>{p(T.image||void 0)},tr=_.useCallback(()=>{p(void 0)},[p]),he=async(T,F,_e)=>{T===void 0||F===void 0||(await r({imageFile:F,imageCroppedDataUrl:_e,cropParams:T,credit:f}),t(),E(!1))},ye=e!==b.OFFER_COLLECTIVE,rr=_.useCallback((T,F)=>{g(F),w(T),ye||he(F,d,T)},[w,g,ye,he,d]);return a?l.jsx(Ft,{hasCloseButton:!0,labelledBy:"Ajouter une image",onDismiss:t,children:d?!h||!y?l.jsx(ke,{credit:f,image:d,initialPosition:j,initialScale:C,onEditedImageSave:rr,onReplaceImage:tr,onSetCredit:m,saveInitialPosition:M,saveInitialScale:V,mode:e,submitButtonText:ye?"Suivant":"Enregistrer"}):l.jsx($e,{isUploading:v,onGoBack:Qt,onUploadImage:()=>he(h,d,y),imageUrl:y,mode:e}):l.jsx(ze,{onImageClientUpload:er,mode:e})}):null};try{Ge.displayName="ModalImageEdit",Ge.__docgenInfo={description:"",displayName:"ModalImageEdit",props:{mode:{defaultValue:null,description:"",name:"mode",required:!0,type:{name:"enum",value:[{value:'"offer"'},{value:'"offer_collective"'},{value:'"venue"'}]}},onDismiss:{defaultValue:null,description:"",name:"onDismiss",required:!0,type:{name:"() => void"}},onImageUpload:{defaultValue:null,description:"",name:"onImageUpload",required:!0,type:{name:"(values: OnImageUploadArgs) => Promise<void>"}},initialValues:{defaultValue:{value:"{}"},description:"",name:"initialValues",required:!1,type:{name:"UploadImageValues"}}}}}catch{}const me=({mode:e,initialValues:t={},onImageUpload:r,onClickButtonImage:n})=>{const[a,i]=_.useState(!1),{imageUrl:s,originalImageUrl:u}=t,c=()=>{n&&n(),i(!0)};return l.jsxs(l.Fragment,{children:[s||u?l.jsx(ge,{onClick:c,variant:ve.TERNARY,alt:"Modifier l’image",icon:gr,children:"Modifier"}):l.jsx(Le,{mode:e,onClick:c}),a&&l.jsx(Ge,{mode:e,onDismiss:()=>i(!1),onImageUpload:r,initialValues:t})]})};try{me.displayName="ButtonImageEdit",me.__docgenInfo={description:"",displayName:"ButtonImageEdit",props:{onImageUpload:{defaultValue:null,description:"",name:"onImageUpload",required:!0,type:{name:"(values: OnImageUploadArgs) => Promise<void>"}},initialValues:{defaultValue:{value:"{}"},description:"",name:"initialValues",required:!1,type:{name:"UploadImageValues"}},mode:{defaultValue:null,description:"",name:"mode",required:!0,type:{name:"enum",value:[{value:'"offer"'},{value:'"offer_collective"'},{value:'"venue"'}]}},onClickButtonImage:{defaultValue:null,description:"",name:"onClickButtonImage",required:!1,type:{name:"(() => void)"}}}}}catch{}const Ne={"image-preview":"_image-preview_806us_1","preview-venue":"_preview-venue_806us_7","preview-offer":"_preview-offer_806us_11"},Ke=({imageUrl:e,alt:t,mode:r})=>l.jsx("img",{alt:t,className:He(Ne["image-preview"],{[Ne["preview-venue"]]:r===b.VENUE,[Ne["preview-offer"]]:r===b.OFFER||r===b.OFFER_COLLECTIVE}),src:e});try{Ke.displayName="ImagePreview",Ke.__docgenInfo={description:"",displayName:"ImagePreview",props:{imageUrl:{defaultValue:null,description:"",name:"imageUrl",required:!0,type:{name:"string"}},alt:{defaultValue:null,description:"",name:"alt",required:!0,type:{name:"string"}},mode:{defaultValue:null,description:"",name:"mode",required:!0,type:{name:"enum",value:[{value:'"offer"'},{value:'"offer_collective"'},{value:'"venue"'}]}}}}}catch{}const xe={"explanatory-text":"_explanatory-text_pfqdv_1","image-uploader-image-container":"_image-uploader-image-container_pfqdv_5","image-uploader-actions-container":"_image-uploader-actions-container_pfqdv_9","actions-wrapper":"_actions-wrapper_pfqdv_16"},Ye=({onImageUpload:e,onImageDelete:t,initialValues:r={},mode:n,onClickButtonImageAdd:a})=>{const{imageUrl:i,originalImageUrl:s,credit:u,cropParams:c}=r;return l.jsx("div",{className:xe["image-uploader-image-container"],children:i&&s?l.jsxs(l.Fragment,{children:[l.jsx(Ke,{mode:n,imageUrl:i,alt:"Prévisualisation de l’image"}),l.jsx("div",{className:xe["image-uploader-actions-container"],children:l.jsxs("div",{className:xe["actions-wrapper"],children:[l.jsx(me,{mode:n,initialValues:{originalImageUrl:s,imageUrl:i,credit:u,cropParams:c},onImageUpload:e,onClickButtonImage:a}),n!=b.OFFER_COLLECTIVE&&l.jsx(Me,{imageUrl:i,mode:n}),l.jsx(qe,{onImageDelete:t})]})})]}):l.jsx(me,{mode:n,onImageUpload:e,onClickButtonImage:a})})},Zt=Ye;try{Ye.displayName="ImageUploader",Ye.__docgenInfo={description:"",displayName:"ImageUploader",props:{onImageUpload:{defaultValue:null,description:"",name:"onImageUpload",required:!0,type:{name:"(values: OnImageUploadArgs) => Promise<void>"}},onImageDelete:{defaultValue:null,description:"",name:"onImageDelete",required:!0,type:{name:"() => Promise<void>"}},initialValues:{defaultValue:{value:"{}"},description:"",name:"initialValues",required:!1,type:{name:"UploadImageValues"}},mode:{defaultValue:null,description:"",name:"mode",required:!0,type:{name:"enum",value:[{value:'"offer"'},{value:'"offer_collective"'},{value:'"venue"'}]}},onClickButtonImageAdd:{defaultValue:null,description:"",name:"onClickButtonImageAdd",required:!1,type:{name:"(() => void)"}}}}}catch{}const St=""+new URL("sample-image-landscape-b60948dd.jpg",import.meta.url).href,jt=""+new URL("sample-image-portrait-4cb7a498.jpg",import.meta.url).href,Ti={title:"components/ImageUploader",component:Zt},nt=e=>l.jsx(Fe,{isDev:!0,children:l.jsx(Zt,{...e})}),Jt={initialValues:{originalImageUrl:jt,imageUrl:jt,credit:"John Do",cropParams:{xCropPercent:0,yCropPercent:0,heightCropPercent:1,widthCropPercent:1}},mode:b.OFFER,onImageDelete:async()=>{alert("onDelete have been called.")},onImageUpload:async()=>{alert("onImageUpload have been called.")}},Q=nt.bind({});Q.args={...Jt};const ee=nt.bind({});ee.args={...Jt,initialValues:{imageUrl:St,originalImageUrl:St},mode:b.VENUE};const te=nt.bind({});te.args={mode:b.OFFER};var Pt,Rt,At;Q.parameters={...Q.parameters,docs:{...(Pt=Q.parameters)==null?void 0:Pt.docs,source:{originalSource:`props => <StoreProvider isDev>
    <ImageUploader {...props} />
  </StoreProvider>`,...(At=(Rt=Q.parameters)==null?void 0:Rt.docs)==null?void 0:At.source}}};var Nt,xt,Ct;ee.parameters={...ee.parameters,docs:{...(Nt=ee.parameters)==null?void 0:Nt.docs,source:{originalSource:`props => <StoreProvider isDev>
    <ImageUploader {...props} />
  </StoreProvider>`,...(Ct=(xt=ee.parameters)==null?void 0:xt.docs)==null?void 0:Ct.source}}};var Ut,Tt,Vt;te.parameters={...te.parameters,docs:{...(Ut=te.parameters)==null?void 0:Ut.docs,source:{originalSource:`props => <StoreProvider isDev>
    <ImageUploader {...props} />
  </StoreProvider>`,...(Vt=(Tt=te.parameters)==null?void 0:Tt.docs)==null?void 0:Vt.source}}};const Vi=["WithImageOffer","WithImageVenue","WithoutImage"];export{Q as WithImageOffer,ee as WithImageVenue,te as WithoutImage,Vi as __namedExportsOrder,Ti as default};
//# sourceMappingURL=ImageUploader.stories-66943b97.js.map
