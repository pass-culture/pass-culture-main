import{j as n}from"./jsx-runtime-ffb262ed.js";import{c as O}from"./index-a587463d.js";import{a as T,c as j}from"./formik.esm-d2c4e539.js";import{r}from"./index-76fb7be0.js";import{T as w}from"./Tag-2c2f8155.js";import{g as I}from"./getLabelString-a0462018.js";import{B as R}from"./BaseCheckbox-58c59efd.js";import"./BaseFileInput-5547a44b.js";import"./stroke-down-fe50db78.js";import{F as D,A as P}from"./AutocompleteList-8264ed5d.js";import"./FieldError-0089fdbc.js";import"./FieldSuccess-31bdacb0.js";import{B as z}from"./BaseInput-fad17e7a.js";const L={"multi-select-autocomplete-container":"_multi-select-autocomplete-container_79j57_2","multi-select-autocomplete-tags":"_multi-select-autocomplete-tags_79j57_8","multi-select-autocomplete-placeholder-input":"_multi-select-autocomplete-placeholder-input_79j57_15"},q=({className:p,name:l,hideFooter:N=!1,hideTags:v=!1,isOptional:B=!1,label:x,options:s,onChange:f,maxDisplayOptions:c,maxHeight:$,pluralLabel:_,smallLabel:M=!1,disabled:h=!1,placeholder:S,inline:C})=>{const{setFieldValue:g,handleChange:k,setFieldTouched:b}=T(),[t,y]=j(l),[i,E]=j(`search-${l}`),d=r.useRef(null),[u,m]=r.useState(!1),[V,F]=r.useState(s);r.useEffect(()=>{F(s)},[s]),r.useEffect(()=>{!u&&i.value!==""&&g(`search-${l}`,"",!1)},[u]),r.useEffect(()=>{const e=a=>{var o;(o=d.current)!=null&&o.contains(a.target)||m(!1)};return d.current&&document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[d]),r.useEffect(()=>{F(s.filter(e=>i.value===""||e.label.toLocaleLowerCase().includes(i.value.toLocaleLowerCase())))},[i.value]);const A=r.useMemo(()=>s.reduce((e,a)=>(e[a.value]=a.label,e),{}),[s]),H=()=>{u?(m(!1),g(`search-${l}`,"",!1)):m(!0),b(l,!0)};return n.jsxs(D,{className:p,error:y.error,hideFooter:!v&&t.value.length>0?!0:N,isOptional:B,label:x,name:`search-${l}`,showError:y.touched&&!!y.error,smallLabel:M,inline:C,children:[n.jsxs("div",{className:O(L["multi-select-autocomplete-container"],p),ref:d,children:[n.jsx(z,{onFocus:()=>{u||m(!0),b(l,!0)},placeholder:S??(t.value.length>1&&_?_:I(x)),style:{paddingLeft:t.value.length>0?"2.2rem":"1rem"},className:O({[L["multi-select-autocomplete-placeholder-input"]]:t.value.length>0}),hasError:E.touched&&!!E.error,type:"text",disabled:h,...i}),n.jsx(P,{disabled:h,onButtonClick:H,isOpen:u,filteredOptions:[...V.slice(0,c??V.length),...c&&c<V.length?[{value:"",label:`${c} rÃ©sultats maximum. Veuillez affiner votre recherche`,disabled:!0}]:[]],maxHeight:$,displayNumberOfSelectedValues:t.value.length>0,numberOfSelectedOptions:t.value.length,renderOption:({value:e,label:a})=>n.jsx(R,{label:a,value:e,name:l,onChange:o=>{b(`search-${l}`,!0),k(o),f==null||f(o)},checked:t.value.includes(e)},`${l}-${e}`)})]}),!v&&t.value.length>0&&n.jsx("div",{className:L["multi-select-autocomplete-tags"],children:t.value.map(e=>n.jsx(w,{label:A[e],closeable:{onClose:()=>{g(l,t.value.filter(a=>a!==e))},disabled:h}},`tag-${l}-${e}`))})]})},re=q;try{q.displayName="MultiSelectAutocomplete",q.__docgenInfo={description:"",displayName:"MultiSelectAutocomplete",props:{label:{defaultValue:null,description:"",name:"label",required:!0,type:{name:"string | Element"}},name:{defaultValue:null,description:"",name:"name",required:!0,type:{name:"string"}},description:{defaultValue:null,description:"",name:"description",required:!1,type:{name:"string"}},maxLength:{defaultValue:null,description:"",name:"maxLength",required:!1,type:{name:"number"}},isLabelHidden:{defaultValue:null,description:"",name:"isLabelHidden",required:!1,type:{name:"boolean"}},hasLabelLineBreak:{defaultValue:null,description:"",name:"hasLabelLineBreak",required:!1,type:{name:"boolean"}},isOptional:{defaultValue:{value:"false"},description:"",name:"isOptional",required:!1,type:{name:"boolean"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},classNameLabel:{defaultValue:null,description:"",name:"classNameLabel",required:!1,type:{name:"string"}},classNameFooter:{defaultValue:null,description:"",name:"classNameFooter",required:!1,type:{name:"string"}},filterVariant:{defaultValue:null,description:"",name:"filterVariant",required:!1,type:{name:"boolean"}},smallLabel:{defaultValue:{value:"false"},description:"",name:"smallLabel",required:!1,type:{name:"boolean"}},hideFooter:{defaultValue:{value:"false"},description:"",name:"hideFooter",required:!1,type:{name:"boolean"}},inline:{defaultValue:null,description:"",name:"inline",required:!1,type:{name:"boolean"}},clearButtonProps:{defaultValue:null,description:"",name:"clearButtonProps",required:!1,type:{name:"(ButtonHTMLAttributes<HTMLButtonElement> & { tooltip: string; })"}},ErrorDetails:{defaultValue:null,description:"",name:"ErrorDetails",required:!1,type:{name:"ReactNode"}},hideTags:{defaultValue:{value:"false"},description:"",name:"hideTags",required:!1,type:{name:"boolean"}},maxDisplayOptions:{defaultValue:null,description:"",name:"maxDisplayOptions",required:!1,type:{name:"number"}},maxDisplayOptionsLabel:{defaultValue:null,description:"",name:"maxDisplayOptionsLabel",required:!1,type:{name:"string"}},maxHeight:{defaultValue:null,description:"",name:"maxHeight",required:!1,type:{name:"number"}},options:{defaultValue:null,description:"",name:"options",required:!0,type:{name:"SelectOption[]"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!1,type:{name:"((e: ChangeEvent<HTMLInputElement>) => void)"}},pluralLabel:{defaultValue:null,description:"",name:"pluralLabel",required:!1,type:{name:"string"}},disabled:{defaultValue:{value:"false"},description:"",name:"disabled",required:!1,type:{name:"boolean"}},placeholder:{defaultValue:null,description:"",name:"placeholder",required:!1,type:{name:"string"}}}}}catch{}export{re as M};
//# sourceMappingURL=MultiSelectAutocomplete-72f0267f.js.map
