import{j as c}from"./jsx-runtime-ffb262ed.js";import{r as _}from"./index-76fb7be0.js";import{g as er,R as tr,n as rr}from"./notificationReducer-8713d724.js";import{S as nr,a as nt,g as ar}from"./Spinner-ff13b7c7.js";import{_ as ir,D as Vt}from"./DialogBox-71c4735e.js";import"./hoist-non-react-statics.cjs-3f8ebaa8.js";import"./react-is.production.min-a192e302.js";import{f as or}from"./full-show-8f58c70a.js";import{D as ur}from"./Divider-7c035ea9.js";import{S as Ft}from"./SubmitButton-2c491e8d.js";import"./Tag-2c2f8155.js";import{B as ae,a as ie}from"./Button-ef5b83a7.js";import"./Thumb-78f345f6.js";import"./stroke-show-b083c009.js";import"./Banner-4e386c9b.js";import"./InfoBox-635ca44e.js";import{I as Tt,a as le}from"./ImagePreviewsWrapper-2dfd564c.js";import{u as Dt}from"./useNotification-5c4129b6.js";import{f as lr}from"./full-trash-98c73dd7.js";import{S as Mt}from"./SvgIcon-c0bf369c.js";import{C as sr}from"./ConfirmDialog-50ee79f3.js";import{s as cr}from"./stroke-trash-04d1aada.js";import{f as dr}from"./full-edit-fa9e4e17.js";import{c as qt}from"./index-a587463d.js";import{s as fr,f as pr}from"./stroke-more-2a2e7561.js";import{u as mr,F as gr}from"./formik.esm-5489b507.js";import{C as vr}from"./CreditInput-87252cc8.js";import{I as hr}from"./ImageEditor-4005e2fe.js";import{g as yr,i as ue,C as _r}from"./imageConstraints-8a704f77.js";import"./BaseCheckbox-14ab89c3.js";import{B as br}from"./BaseFileInput-5e0c3522.js";import"./FieldError-10cbd29d.js";import"./FieldSuccess-31bdacb0.js";import{c as wr,a as Er}from"./index.esm-93e60fe1.js";import{P as Ir}from"./PreferredOrientation-9bfa0563.js";import"./_commonjsHelpers-de833af9.js";import"./index-b0fbc9cc.js";import"./config-cb91ff0d.js";import"./VenuePhysicalLocation-313db5a9.js";import"./stroke-pass-cf331655.js";import"./tslib.es6-0a050bf6.js";import"./typeof-7fd5df1e.js";import"./stroke-close-3a7bfe9e.js";import"./index-70f1445f.js";import"./full-right-83efe067.js";import"./Button.module-cdbd9853.js";import"./Tooltip-38002e21.js";import"./full-next-ebff3494.js";import"./BaseRadio-1a306312.js";import"./full-clear-9268779e.js";import"./index-9d475cdf.js";import"./BaseInput-be025c1d.js";import"./utils-70f14cd5.js";import"./shadow-tips-help-841f916a.js";import"./shadow-tips-warning-66fb0429.js";import"./LinkNodes-f13f0d45.js";import"./full-link-9eb5e1cb.js";import"./stroke-error-ed5fe82d.js";import"./Dialog-b711093d.js";import"./Slider-463e7c4c.js";import"./stroke-valid-9c345a33.js";function jr(){const e=er();let t=null,r=null;return{clear(){t=null,r=null},notify(){e(()=>{let n=t;for(;n;)n.callback(),n=n.next})},get(){let n=[],a=t;for(;a;)n.push(a),a=a.next;return n},subscribe(n){let a=!0,i=r={callback:n,next:null,prev:r};return i.prev?i.prev.next=i:t=i,function(){!a||t===null||(a=!1,i.next?i.next.prev=i.prev:r=i.prev,i.prev?i.prev.next=i.next:t=i.next)}}}}const at={notify(){},get:()=>[]};function Or(e,t){let r,n=at;function a(p){return s(),n.subscribe(p)}function i(){n.notify()}function u(){d.onStateChange&&d.onStateChange()}function l(){return!!r}function s(){r||(r=t?t.addNestedSub(u):e.subscribe(u),n=jr())}function o(){r&&(r(),r=void 0,n.clear(),n=at)}const d={addNestedSub:a,notifyNestedSubs:i,handleChangeWrapper:u,isSubscribed:l,trySubscribe:s,tryUnsubscribe:o,getListeners:()=>n};return d}const Pr=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Sr=Pr?_.useLayoutEffect:_.useEffect;function xr({store:e,context:t,children:r,serverState:n,stabilityCheck:a="once",noopCheck:i="once"}){const u=_.useMemo(()=>{const o=Or(e);return{store:e,subscription:o,getServerState:n?()=>n:void 0,stabilityCheck:a,noopCheck:i}},[e,n,a,i]),l=_.useMemo(()=>e.getState(),[e]);Sr(()=>{const{subscription:o}=u;return o.onStateChange=o.notifyNestedSubs,o.trySubscribe(),l!==e.getState()&&o.notifyNestedSubs(),()=>{o.tryUnsubscribe(),o.onStateChange=void 0}},[u,l]);const s=t||tr;return _.createElement(s.Provider,{value:u},r)}function N(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];throw Error("[Immer] minified error nr: "+e+(r.length?" "+r.map(function(a){return"'"+a+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function q(e){return!!e&&!!e[I]}function B(e){var t;return!!e&&(function(r){if(!r||typeof r!="object")return!1;var n=Object.getPrototypeOf(r);if(n===null)return!0;var a=Object.hasOwnProperty.call(n,"constructor")&&n.constructor;return a===Object||typeof a=="function"&&Function.toString.call(a)===Dr}(e)||Array.isArray(e)||!!e[dt]||!!(!((t=e.constructor)===null||t===void 0)&&t[dt])||Xe(e)||Ye(e))}function L(e,t,r){r===void 0&&(r=!1),X(e)===0?(r?Object.keys:$)(e).forEach(function(n){r&&typeof n=="symbol"||t(n,e[n],e)}):e.forEach(function(n,a){return t(a,n,e)})}function X(e){var t=e[I];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:Xe(e)?2:Ye(e)?3:0}function z(e,t){return X(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function Cr(e,t){return X(e)===2?e.get(t):e[t]}function Bt(e,t,r){var n=X(e);n===2?e.set(t,r):n===3?e.add(r):e[t]=r}function Lt(e,t){return e===t?e!==0||1/e==1/t:e!=e&&t!=t}function Xe(e){return Fr&&e instanceof Map}function Ye(e){return Tr&&e instanceof Set}function M(e){return e.o||e.t}function Ze(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=Wt(e);delete t[I];for(var r=$(t),n=0;n<r.length;n++){var a=r[n],i=t[a];i.writable===!1&&(i.writable=!0,i.configurable=!0),(i.get||i.set)&&(t[a]={configurable:!0,writable:!0,enumerable:i.enumerable,value:e[a]})}return Object.create(Object.getPrototypeOf(e),t)}function Je(e,t){return t===void 0&&(t=!1),Qe(e)||q(e)||!B(e)||(X(e)>1&&(e.set=e.add=e.clear=e.delete=Nr),Object.freeze(e),t&&L(e,function(r,n){return Je(n,!0)},!0)),e}function Nr(){N(2)}function Qe(e){return e==null||typeof e!="object"||Object.isFrozen(e)}function A(e){var t=Fe[e];return t||N(18,e),t}function Ar(e,t){Fe[e]||(Fe[e]=t)}function Re(){return te}function be(e,t){t&&(A("Patches"),e.u=[],e.s=[],e.v=t)}function se(e){Ue(e),e.p.forEach(Rr),e.p=null}function Ue(e){e===te&&(te=e.l)}function it(e){return te={p:[],l:te,h:e,m:!0,_:0}}function Rr(e){var t=e[I];t.i===0||t.i===1?t.j():t.g=!0}function we(e,t){t._=t.p.length;var r=t.p[0],n=e!==void 0&&e!==r;return t.h.O||A("ES5").S(t,e,n),n?(r[I].P&&(se(t),N(4)),B(e)&&(e=ce(t,e),t.l||de(t,e)),t.u&&A("Patches").M(r[I].t,e,t.u,t.s)):e=ce(t,r,[]),se(t),t.u&&t.v(t.u,t.s),e!==kt?e:void 0}function ce(e,t,r){if(Qe(t))return t;var n=t[I];if(!n)return L(t,function(l,s){return ot(e,n,t,l,s,r)},!0),t;if(n.A!==e)return t;if(!n.P)return de(e,n.t,!0),n.t;if(!n.I){n.I=!0,n.A._--;var a=n.i===4||n.i===5?n.o=Ze(n.k):n.o,i=a,u=!1;n.i===3&&(i=new Set(a),a.clear(),u=!0),L(i,function(l,s){return ot(e,n,a,l,s,r,u)}),de(e,a,!1),r&&e.u&&A("Patches").N(n,r,e.u,e.s)}return n.o}function ot(e,t,r,n,a,i,u){if(q(a)){var l=ce(e,a,i&&t&&t.i!==3&&!z(t.R,n)?i.concat(n):void 0);if(Bt(r,n,l),!q(l))return;e.m=!1}else u&&r.add(a);if(B(a)&&!Qe(a)){if(!e.h.D&&e._<1)return;ce(e,a),t&&t.A.l||de(e,a)}}function de(e,t,r){r===void 0&&(r=!1),!e.l&&e.h.D&&e.m&&Je(t,r)}function Ee(e,t){var r=e[I];return(r?M(r):e)[t]}function ut(e,t){if(t in e)for(var r=Object.getPrototypeOf(e);r;){var n=Object.getOwnPropertyDescriptor(r,t);if(n)return n;r=Object.getPrototypeOf(r)}}function T(e){e.P||(e.P=!0,e.l&&T(e.l))}function Ie(e){e.o||(e.o=Ze(e.t))}function Ve(e,t,r){var n=Xe(t)?A("MapSet").F(t,r):Ye(t)?A("MapSet").T(t,r):e.O?function(a,i){var u=Array.isArray(a),l={i:u?1:0,A:i?i.A:Re(),P:!1,I:!1,R:{},l:i,t:a,k:null,o:null,j:null,C:!1},s=l,o=re;u&&(s=[l],o=Z);var d=Proxy.revocable(s,o),p=d.revoke,f=d.proxy;return l.k=f,l.j=p,f}(t,r):A("ES5").J(t,r);return(r?r.A:Re()).p.push(n),n}function Ur(e){return q(e)||N(22,e),function t(r){if(!B(r))return r;var n,a=r[I],i=X(r);if(a){if(!a.P&&(a.i<4||!A("ES5").K(a)))return a.t;a.I=!0,n=lt(r,i),a.I=!1}else n=lt(r,i);return L(n,function(u,l){a&&Cr(a.t,u)===l||Bt(n,u,t(l))}),i===3?new Set(n):n}(e)}function lt(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return Ze(e)}function Vr(){function e(i,u){var l=a[i];return l?l.enumerable=u:a[i]=l={configurable:!0,enumerable:u,get:function(){var s=this[I];return re.get(s,i)},set:function(s){var o=this[I];re.set(o,i,s)}},l}function t(i){for(var u=i.length-1;u>=0;u--){var l=i[u][I];if(!l.P)switch(l.i){case 5:n(l)&&T(l);break;case 4:r(l)&&T(l)}}}function r(i){for(var u=i.t,l=i.k,s=$(l),o=s.length-1;o>=0;o--){var d=s[o];if(d!==I){var p=u[d];if(p===void 0&&!z(u,d))return!0;var f=l[d],m=f&&f[I];if(m?m.t!==p:!Lt(f,p))return!0}}var h=!!u[I];return s.length!==$(u).length+(h?0:1)}function n(i){var u=i.k;if(u.length!==i.t.length)return!0;var l=Object.getOwnPropertyDescriptor(u,u.length-1);if(l&&!l.get)return!0;for(var s=0;s<u.length;s++)if(!u.hasOwnProperty(s))return!0;return!1}var a={};Ar("ES5",{J:function(i,u){var l=Array.isArray(i),s=function(d,p){if(d){for(var f=Array(p.length),m=0;m<p.length;m++)Object.defineProperty(f,""+m,e(m,!0));return f}var h=Wt(p);delete h[I];for(var g=$(h),v=0;v<g.length;v++){var y=g[v];h[y]=e(y,d||!!h[y].enumerable)}return Object.create(Object.getPrototypeOf(p),h)}(l,i),o={i:l?5:4,A:u?u.A:Re(),P:!1,I:!1,R:{},l:u,t:i,k:s,o:null,g:!1,C:!1};return Object.defineProperty(s,I,{value:o,writable:!0}),s},S:function(i,u,l){l?q(u)&&u[I].A===i&&t(i.p):(i.u&&function s(o){if(o&&typeof o=="object"){var d=o[I];if(d){var p=d.t,f=d.k,m=d.R,h=d.i;if(h===4)L(f,function(E){E!==I&&(p[E]!==void 0||z(p,E)?m[E]||s(f[E]):(m[E]=!0,T(d)))}),L(p,function(E){f[E]!==void 0||z(f,E)||(m[E]=!1,T(d))});else if(h===5){if(n(d)&&(T(d),m.length=!0),f.length<p.length)for(var g=f.length;g<p.length;g++)m[g]=!1;else for(var v=p.length;v<f.length;v++)m[v]=!0;for(var y=Math.min(f.length,p.length),b=0;b<y;b++)f.hasOwnProperty(b)||(m[b]=!0),m[b]===void 0&&s(f[b])}}}}(i.p[0]),t(i.p))},K:function(i){return i.i===4?r(i):n(i)}})}var st,te,et=typeof Symbol<"u"&&typeof Symbol("x")=="symbol",Fr=typeof Map<"u",Tr=typeof Set<"u",ct=typeof Proxy<"u"&&Proxy.revocable!==void 0&&typeof Reflect<"u",kt=et?Symbol.for("immer-nothing"):((st={})["immer-nothing"]=!0,st),dt=et?Symbol.for("immer-draftable"):"__$immer_draftable",I=et?Symbol.for("immer-state"):"__$immer_state",Dr=""+Object.prototype.constructor,$=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,Wt=Object.getOwnPropertyDescriptors||function(e){var t={};return $(e).forEach(function(r){t[r]=Object.getOwnPropertyDescriptor(e,r)}),t},Fe={},re={get:function(e,t){if(t===I)return e;var r=M(e);if(!z(r,t))return function(a,i,u){var l,s=ut(i,u);return s?"value"in s?s.value:(l=s.get)===null||l===void 0?void 0:l.call(a.k):void 0}(e,r,t);var n=r[t];return e.I||!B(n)?n:n===Ee(e.t,t)?(Ie(e),e.o[t]=Ve(e.A.h,n,e)):n},has:function(e,t){return t in M(e)},ownKeys:function(e){return Reflect.ownKeys(M(e))},set:function(e,t,r){var n=ut(M(e),t);if(n!=null&&n.set)return n.set.call(e.k,r),!0;if(!e.P){var a=Ee(M(e),t),i=a==null?void 0:a[I];if(i&&i.t===r)return e.o[t]=r,e.R[t]=!1,!0;if(Lt(r,a)&&(r!==void 0||z(e.t,t)))return!0;Ie(e),T(e)}return e.o[t]===r&&(r!==void 0||t in e.o)||Number.isNaN(r)&&Number.isNaN(e.o[t])||(e.o[t]=r,e.R[t]=!0),!0},deleteProperty:function(e,t){return Ee(e.t,t)!==void 0||t in e.t?(e.R[t]=!1,Ie(e),T(e)):delete e.R[t],e.o&&delete e.o[t],!0},getOwnPropertyDescriptor:function(e,t){var r=M(e),n=Reflect.getOwnPropertyDescriptor(r,t);return n&&{writable:!0,configurable:e.i!==1||t!=="length",enumerable:n.enumerable,value:r[t]}},defineProperty:function(){N(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){N(12)}},Z={};L(re,function(e,t){Z[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}}),Z.deleteProperty=function(e,t){return Z.set.call(this,e,t,void 0)},Z.set=function(e,t,r){return re.set.call(this,e[0],t,r,e[0])};var Mr=function(){function e(r){var n=this;this.O=ct,this.D=!0,this.produce=function(a,i,u){if(typeof a=="function"&&typeof i!="function"){var l=i;i=a;var s=n;return function(g){var v=this;g===void 0&&(g=l);for(var y=arguments.length,b=Array(y>1?y-1:0),E=1;E<y;E++)b[E-1]=arguments[E];return s.produce(g,function(O){var P;return(P=i).call.apply(P,[v,O].concat(b))})}}var o;if(typeof i!="function"&&N(6),u!==void 0&&typeof u!="function"&&N(7),B(a)){var d=it(n),p=Ve(n,a,void 0),f=!0;try{o=i(p),f=!1}finally{f?se(d):Ue(d)}return typeof Promise<"u"&&o instanceof Promise?o.then(function(g){return be(d,u),we(g,d)},function(g){throw se(d),g}):(be(d,u),we(o,d))}if(!a||typeof a!="object"){if((o=i(a))===void 0&&(o=a),o===kt&&(o=void 0),n.D&&Je(o,!0),u){var m=[],h=[];A("Patches").M(a,o,m,h),u(m,h)}return o}N(21,a)},this.produceWithPatches=function(a,i){if(typeof a=="function")return function(o){for(var d=arguments.length,p=Array(d>1?d-1:0),f=1;f<d;f++)p[f-1]=arguments[f];return n.produceWithPatches(o,function(m){return a.apply(void 0,[m].concat(p))})};var u,l,s=n.produce(a,i,function(o,d){u=o,l=d});return typeof Promise<"u"&&s instanceof Promise?s.then(function(o){return[o,u,l]}):[s,u,l]},typeof(r==null?void 0:r.useProxies)=="boolean"&&this.setUseProxies(r.useProxies),typeof(r==null?void 0:r.autoFreeze)=="boolean"&&this.setAutoFreeze(r.autoFreeze)}var t=e.prototype;return t.createDraft=function(r){B(r)||N(8),q(r)&&(r=Ur(r));var n=it(this),a=Ve(this,r,void 0);return a[I].C=!0,Ue(n),a},t.finishDraft=function(r,n){var a=r&&r[I],i=a.A;return be(i,n),we(void 0,i)},t.setAutoFreeze=function(r){this.D=r},t.setUseProxies=function(r){r&&!ct&&N(20),this.O=r},t.applyPatches=function(r,n){var a;for(a=n.length-1;a>=0;a--){var i=n[a];if(i.path.length===0&&i.op==="replace"){r=i.value;break}}a>-1&&(n=n.slice(a+1));var u=A("Patches").$;return q(r)?u(r,n):this.produce(r,function(l){return u(l,n)})},e}(),C=new Mr;C.produce;C.produceWithPatches.bind(C);C.setAutoFreeze.bind(C);C.setUseProxies.bind(C);C.applyPatches.bind(C);C.createDraft.bind(C);C.finishDraft.bind(C);function ft(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function pt(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?ft(Object(r),!0).forEach(function(n){ir(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ft(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function j(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var mt=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),je=function(){return Math.random().toString(36).substring(7).split("").join(".")},fe={INIT:"@@redux/INIT"+je(),REPLACE:"@@redux/REPLACE"+je(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+je()}};function qr(e){if(typeof e!="object"||e===null)return!1;for(var t=e;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function zt(e,t,r){var n;if(typeof t=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(j(0));if(typeof t=="function"&&typeof r>"u"&&(r=t,t=void 0),typeof r<"u"){if(typeof r!="function")throw new Error(j(1));return r(zt)(e,t)}if(typeof e!="function")throw new Error(j(2));var a=e,i=t,u=[],l=u,s=!1;function o(){l===u&&(l=u.slice())}function d(){if(s)throw new Error(j(3));return i}function p(g){if(typeof g!="function")throw new Error(j(4));if(s)throw new Error(j(5));var v=!0;return o(),l.push(g),function(){if(v){if(s)throw new Error(j(6));v=!1,o();var b=l.indexOf(g);l.splice(b,1),u=null}}}function f(g){if(!qr(g))throw new Error(j(7));if(typeof g.type>"u")throw new Error(j(8));if(s)throw new Error(j(9));try{s=!0,i=a(i,g)}finally{s=!1}for(var v=u=l,y=0;y<v.length;y++){var b=v[y];b()}return g}function m(g){if(typeof g!="function")throw new Error(j(10));a=g,f({type:fe.REPLACE})}function h(){var g,v=p;return g={subscribe:function(b){if(typeof b!="object"||b===null)throw new Error(j(11));function E(){b.next&&b.next(d())}E();var O=v(E);return{unsubscribe:O}}},g[mt]=function(){return this},g}return f({type:fe.INIT}),n={dispatch:f,subscribe:p,getState:d,replaceReducer:m},n[mt]=h,n}function Br(e){Object.keys(e).forEach(function(t){var r=e[t],n=r(void 0,{type:fe.INIT});if(typeof n>"u")throw new Error(j(12));if(typeof r(void 0,{type:fe.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(j(13))})}function $t(e){for(var t=Object.keys(e),r={},n=0;n<t.length;n++){var a=t[n];typeof e[a]=="function"&&(r[a]=e[a])}var i=Object.keys(r),u;try{Br(r)}catch(l){u=l}return function(s,o){if(s===void 0&&(s={}),u)throw u;for(var d=!1,p={},f=0;f<i.length;f++){var m=i[f],h=r[m],g=s[m],v=h(g,o);if(typeof v>"u")throw o&&o.type,new Error(j(14));p[m]=v,d=d||v!==g}return d=d||i.length!==Object.keys(s).length,d?p:s}}function pe(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.length===0?function(n){return n}:t.length===1?t[0]:t.reduce(function(n,a){return function(){return n(a.apply(void 0,arguments))}})}function Lr(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(n){return function(){var a=n.apply(void 0,arguments),i=function(){throw new Error(j(15))},u={getState:a.getState,dispatch:function(){return i.apply(void 0,arguments)}},l=t.map(function(s){return s(u)});return i=pe.apply(void 0,l)(a.dispatch),pt(pt({},a),{},{dispatch:i})}}}function Gt(e){var t=function(n){var a=n.dispatch,i=n.getState;return function(u){return function(l){return typeof l=="function"?l(a,i,e):u(l)}}};return t}var Ht=Gt();Ht.withExtraArgument=Gt;const gt=Ht;var Kt=globalThis&&globalThis.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(n[i]=a[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),kr=globalThis&&globalThis.__generator||function(e,t){var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,a,i,u;return u={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function l(o){return function(d){return s([o,d])}}function s(o){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,a&&(i=o[0]&2?a.return:o[0]?a.throw||((i=a.return)&&i.call(a),0):a.next)&&!(i=i.call(a,o[1])).done)return i;switch(a=0,i&&(o=[o[0]&2,i.value]),o[0]){case 0:case 1:i=o;break;case 4:return r.label++,{value:o[1],done:!1};case 5:r.label++,a=o[1],o=[0];continue;case 7:o=r.ops.pop(),r.trys.pop();continue;default:if(i=r.trys,!(i=i.length>0&&i[i.length-1])&&(o[0]===6||o[0]===2)){r=0;continue}if(o[0]===3&&(!i||o[1]>i[0]&&o[1]<i[3])){r.label=o[1];break}if(o[0]===6&&r.label<i[1]){r.label=i[1],i=o;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(o);break}i[2]&&r.ops.pop(),r.trys.pop();continue}o=t.call(e,r)}catch(d){o=[6,d],a=0}finally{n=i=0}if(o[0]&5)throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}},ne=globalThis&&globalThis.__spreadArray||function(e,t){for(var r=0,n=t.length,a=e.length;r<n;r++,a++)e[a]=t[r];return e},Wr=Object.defineProperty,zr=Object.defineProperties,$r=Object.getOwnPropertyDescriptors,vt=Object.getOwnPropertySymbols,Gr=Object.prototype.hasOwnProperty,Hr=Object.prototype.propertyIsEnumerable,ht=function(e,t,r){return t in e?Wr(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r},G=function(e,t){for(var r in t||(t={}))Gr.call(t,r)&&ht(e,r,t[r]);if(vt)for(var n=0,a=vt(t);n<a.length;n++){var r=a[n];Hr.call(t,r)&&ht(e,r,t[r])}return e},Oe=function(e,t){return zr(e,$r(t))},Kr=function(e,t,r){return new Promise(function(n,a){var i=function(s){try{l(r.next(s))}catch(o){a(o)}},u=function(s){try{l(r.throw(s))}catch(o){a(o)}},l=function(s){return s.done?n(s.value):Promise.resolve(s.value).then(i,u)};l((r=r.apply(e,t)).next())})},Xr=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?pe:pe.apply(null,arguments)};function Yr(e){if(typeof e!="object"||e===null)return!1;var t=Object.getPrototypeOf(e);if(t===null)return!0;for(var r=t;Object.getPrototypeOf(r)!==null;)r=Object.getPrototypeOf(r);return t===r}function H(e,t){function r(){for(var n=[],a=0;a<arguments.length;a++)n[a]=arguments[a];if(t){var i=t.apply(void 0,n);if(!i)throw new Error("prepareAction did not return an object");return G(G({type:e,payload:i.payload},"meta"in i&&{meta:i.meta}),"error"in i&&{error:i.error})}return{type:e,payload:n[0]}}return r.toString=function(){return""+e},r.type=e,r.match=function(n){return n.type===e},r}var Zr=function(e){Kt(t,e);function t(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];var a=e.apply(this,r)||this;return Object.setPrototypeOf(a,t.prototype),a}return Object.defineProperty(t,Symbol.species,{get:function(){return t},enumerable:!1,configurable:!0}),t.prototype.concat=function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return e.prototype.concat.apply(this,r)},t.prototype.prepend=function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return r.length===1&&Array.isArray(r[0])?new(t.bind.apply(t,ne([void 0],r[0].concat(this)))):new(t.bind.apply(t,ne([void 0],r.concat(this))))},t}(Array),Jr=function(e){Kt(t,e);function t(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];var a=e.apply(this,r)||this;return Object.setPrototypeOf(a,t.prototype),a}return Object.defineProperty(t,Symbol.species,{get:function(){return t},enumerable:!1,configurable:!0}),t.prototype.concat=function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return e.prototype.concat.apply(this,r)},t.prototype.prepend=function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return r.length===1&&Array.isArray(r[0])?new(t.bind.apply(t,ne([void 0],r[0].concat(this)))):new(t.bind.apply(t,ne([void 0],r.concat(this))))},t}(Array);function Qr(e){return typeof e=="boolean"}function en(){return function(t){return tn(t)}}function tn(e){e===void 0&&(e={});var t=e.thunk,r=t===void 0?!0:t;e.immutableCheck,e.serializableCheck,e.actionCreatorCheck;var n=new Zr;return r&&(Qr(r)?n.push(gt):n.push(gt.withExtraArgument(r.extraArgument))),n}var rn=!0;function nn(e){var t=en(),r=e||{},n=r.reducer,a=n===void 0?void 0:n,i=r.middleware,u=i===void 0?t():i,l=r.devTools,s=l===void 0?!0:l,o=r.preloadedState,d=o===void 0?void 0:o,p=r.enhancers,f=p===void 0?void 0:p,m;if(typeof a=="function")m=a;else if(Yr(a))m=$t(a);else throw new Error('"reducer" is a required argument, and must be a function or an object of functions that can be passed to combineReducers');var h=u;typeof h=="function"&&(h=h(t));var g=Lr.apply(void 0,h),v=pe;s&&(v=Xr(G({trace:!rn},typeof s=="object"&&s)));var y=new Jr(g),b=y;Array.isArray(f)?b=ne([g],f):typeof f=="function"&&(b=f(y));var E=v.apply(void 0,b);return zt(m,d,E)}var an="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",on=function(e){e===void 0&&(e=21);for(var t="",r=e;r--;)t+=an[Math.random()*64|0];return t},un=["name","message","stack","code"],Pe=function(){function e(t,r){this.payload=t,this.meta=r}return e}(),yt=function(){function e(t,r){this.payload=t,this.meta=r}return e}(),ln=function(e){if(typeof e=="object"&&e!==null){for(var t={},r=0,n=un;r<n.length;r++){var a=n[r];typeof e[a]=="string"&&(t[a]=e[a])}return t}return{message:String(e)}};(function(){function e(t,r,n){var a=H(t+"/fulfilled",function(o,d,p,f){return{payload:o,meta:Oe(G({},f||{}),{arg:p,requestId:d,requestStatus:"fulfilled"})}}),i=H(t+"/pending",function(o,d,p){return{payload:void 0,meta:Oe(G({},p||{}),{arg:d,requestId:o,requestStatus:"pending"})}}),u=H(t+"/rejected",function(o,d,p,f,m){return{payload:f,error:(n&&n.serializeError||ln)(o||"Rejected"),meta:Oe(G({},m||{}),{arg:p,requestId:d,rejectedWithValue:!!f,requestStatus:"rejected",aborted:(o==null?void 0:o.name)==="AbortError",condition:(o==null?void 0:o.name)==="ConditionError"})}}),l=typeof AbortController<"u"?AbortController:function(){function o(){this.signal={aborted:!1,addEventListener:function(){},dispatchEvent:function(){return!1},onabort:function(){},removeEventListener:function(){},reason:void 0,throwIfAborted:function(){}}}return o.prototype.abort=function(){},o}();function s(o){return function(d,p,f){var m=n!=null&&n.idGenerator?n.idGenerator(o):on(),h=new l,g;function v(b){g=b,h.abort()}var y=function(){return Kr(this,null,function(){var b,E,O,P,R,S,oe;return kr(this,function(V){switch(V.label){case 0:return V.trys.push([0,4,,5]),P=(b=n==null?void 0:n.condition)==null?void 0:b.call(n,o,{getState:p,extra:f}),cn(P)?[4,P]:[3,2];case 1:P=V.sent(),V.label=2;case 2:if(P===!1||h.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};return R=new Promise(function(x,D){return h.signal.addEventListener("abort",function(){return D({name:"AbortError",message:g||"Aborted"})})}),d(i(m,o,(E=n==null?void 0:n.getPendingMeta)==null?void 0:E.call(n,{requestId:m,arg:o},{getState:p,extra:f}))),[4,Promise.race([R,Promise.resolve(r(o,{dispatch:d,getState:p,extra:f,requestId:m,signal:h.signal,abort:v,rejectWithValue:function(x,D){return new Pe(x,D)},fulfillWithValue:function(x,D){return new yt(x,D)}})).then(function(x){if(x instanceof Pe)throw x;return x instanceof yt?a(x.payload,m,o,x.meta):a(x,m,o)})])];case 3:return O=V.sent(),[3,5];case 4:return S=V.sent(),O=S instanceof Pe?u(null,m,o,S.payload,S.meta):u(S,m,o),[3,5];case 5:return oe=n&&!n.dispatchConditionRejection&&u.match(O)&&O.meta.condition,oe||d(O),[2,O]}})})}();return Object.assign(y,{abort:v,requestId:m,arg:o,unwrap:function(){return y.then(sn)}})}}return Object.assign(s,{pending:i,rejected:u,fulfilled:a,typePrefix:t})}return e.withTypes=function(){return e},e})();function sn(e){if(e.meta&&e.meta.rejectedWithValue)throw e.payload;if(e.error)throw e.error;return e.payload}function cn(e){return e!==null&&typeof e=="object"&&typeof e.then=="function"}var tt="listenerMiddleware";H(tt+"/add");H(tt+"/removeAll");H(tt+"/remove");var _t;typeof queueMicrotask=="function"&&queueMicrotask.bind(typeof window<"u"?window:typeof global<"u"?global:globalThis);Vr();const dn={initialized:!1,list:[]},fn=(e=dn)=>e,pn="SAVE_SEARCH_FILTERS",mn="SAVE_PAGE_NUMBER",gn={list:[],searchFilters:{},pageNumber:1,categories:{}},vn=(e=gn,t)=>{switch(t.type){case pn:return{...e,searchFilters:{...e.searchFilters,...t.filters}};case mn:return{...e,pageNumber:t.pageNumber};default:return e}},hn="SET_USER_IS_INITIALIZED",yn="RESET_USER_IS_INITIALIZED",_n="SET_CURRENT_USER",bn={initialized:!1,currentUser:null},wn=(e=bn,t)=>{switch(t.type){case yn:return{...e,initialized:!1,currentUser:null};case hn:return{...e,initialized:!0};case _n:return{...e,currentUser:t.currentUser};default:return e}},En="FAIL_DATA_",In="SUCCESS_DATA_",jn=503,On={isActivated:!1},Pn=(e=On,t={type:"",payload:{error_type:""}})=>{const{type:r,payload:n}=t;return r.startsWith(In)?Object.assign({},e,{isActivated:!1}):r.startsWith(En)&&n.status===jn&&n.error_type==="SERVER_ERROR"?Object.assign({},e,{isActivated:!0}):e},Sn=$t({features:fn,offers:vn,notification:rr,user:wn,maintenance:Pn}),xn=(e={})=>({store:nn({reducer:Sn,preloadedState:e,middleware:r=>r({immutableCheck:{warnAfter:128},serializableCheck:{warnAfter:128}})})}),Te=({children:e,isAdageIframe:t=!1,isDev:r=!1})=>{const[n,a]=_.useState(),[i,u]=_.useState(),[l,s]=_.useState(null);if(_.useEffect(()=>{function d(){a(null),u([])}async function p(){t?a(null):nt.getProfile().then(f=>a(f)).catch(()=>a(null)),nt.listFeatures().then(f=>u(f)).catch(()=>u([]))}r?d():p()},[]),_.useEffect(()=>{n!==void 0&&i!==void 0&&s({user:{currentUser:n,initialized:!0},features:{list:i||[],initialized:!0}})},[n,i]),l===null)return c.jsx("main",{id:"content",className:"spinner-container",children:c.jsx(nr,{})});const{store:o}=xn(l);return c.jsx(xr,{store:o,children:e})};try{Te.displayName="StoreProvider",Te.__docgenInfo={description:"",displayName:"StoreProvider",props:{isDev:{defaultValue:{value:"false"},description:"",name:"isDev",required:!1,type:{name:"boolean"}},isAdageIframe:{defaultValue:{value:"false"},description:"",name:"isAdageIframe",required:!1,type:{name:"boolean"}}}}}catch{}const Cn=""+new URL("offer-home-shell-d20f1443.png",import.meta.url).href,Nn=""+new URL("offer-shell-ba5c7311.png",import.meta.url).href,bt={"image-preview-shell":"_image-preview-shell_1xnl4_1","image-preview-home-preview":"_image-preview-home-preview_1xnl4_6"},Se={"image-preview-shell":"_image-preview-shell_glg9w_1","image-preview-blur-offer-preview":"_image-preview-blur-offer-preview_glg9w_7","image-preview-offer-preview":"_image-preview-offer-preview_glg9w_16"},K=({imageUrl:e})=>c.jsxs(Tt,{children:[c.jsxs(le,{title:"Page d’accueil",children:[c.jsx("img",{alt:"",className:bt["image-preview-shell"],src:Cn}),c.jsx("img",{"data-testid":"app-preview-offer-img-home",alt:"",className:bt["image-preview-home-preview"],src:e})]}),c.jsxs(le,{title:"Détails de l’offre",children:[c.jsx("img",{alt:"",className:Se["image-preview-blur-offer-preview"],src:e}),c.jsx("img",{alt:"",className:Se["image-preview-shell"],src:Nn}),c.jsx("img",{"data-testid":"app-preview-offer-img",alt:"",className:Se["image-preview-offer-preview"],src:e})]})]});try{K.displayName="AppPreviewOffer",K.__docgenInfo={description:"",displayName:"AppPreviewOffer",props:{imageUrl:{defaultValue:null,description:"",name:"imageUrl",required:!0,type:{name:"string"}}}}}catch{}const An=""+new URL("venue-home-shell-9bfd5682.png",import.meta.url).href,Rn=""+new URL("venue-shell-5e096072.png",import.meta.url).href,wt={"image-preview-shell":"_image-preview-shell_3dbf9_1","image-preview-home-preview":"_image-preview-home-preview_3dbf9_6"},xe={"image-preview-shell":"_image-preview-shell_gbu12_1","image-preview-blur-venue-preview":"_image-preview-blur-venue-preview_gbu12_7","image-preview-venue-preview":"_image-preview-venue-preview_gbu12_16"},me=({imageUrl:e})=>{const t=Dt(),r=_.useCallback(()=>{t.error("Une erreur est survenue. Merci de réessayer plus tard")},[t]);return c.jsxs(Tt,{children:[c.jsxs(le,{title:"Page d’accueil",children:[c.jsx("img",{alt:"",className:wt["image-preview-shell"],src:An}),c.jsx("img",{"data-testid":"app-preview-venue-img-home",alt:"",className:wt["image-preview-home-preview"],onError:r,src:e})]}),c.jsxs(le,{title:"Page Lieu",children:[c.jsx("img",{alt:"",className:xe["image-preview-blur-venue-preview"],src:e}),c.jsx("img",{alt:"",className:xe["image-preview-shell"],src:Rn}),c.jsx("img",{"data-testid":"app-preview-venue-img",alt:"",className:xe["image-preview-venue-preview"],src:e})]})]})};try{me.displayName="AppPreviewVenue",me.__docgenInfo={description:"",displayName:"AppPreviewVenue",props:{imageUrl:{defaultValue:null,description:"",name:"imageUrl",required:!0,type:{name:"string"}}}}}catch{}var w=(e=>(e.OFFER="offer",e.OFFER_COLLECTIVE="offer_collective",e.VENUE="venue",e))(w||{});const Un="_container_uuguy_2",Vn="_header_uuguy_8",Fn="_subtitle_uuguy_17",Tn="_actions_uuguy_23",Dn="_button_uuguy_28",Ce={container:Un,header:Vn,subtitle:Fn,actions:Tn,button:Dn},De=({mode:e,hideModal:t,imageUrl:r})=>{const n={[w.VENUE]:me,[w.OFFER]:K,[w.OFFER_COLLECTIVE]:K}[e];return c.jsx(Vt,{hasCloseButton:!0,labelledBy:"Ajouter une image",onDismiss:t,children:c.jsxs("div",{className:Ce.container,children:[c.jsx("header",{children:c.jsx("h1",{className:Ce.header,children:"Ajouter une image"})}),c.jsx("div",{className:Ce.subtitle,children:"Prévisualisation de votre image dans l’application pass Culture"}),c.jsx(n,{imageUrl:r})]})})};try{De.displayName="ModalAppPreview",De.__docgenInfo={description:"",displayName:"ModalAppPreview",props:{hideModal:{defaultValue:null,description:"",name:"hideModal",required:!0,type:{name:"() => void"}},mode:{defaultValue:null,description:"",name:"mode",required:!0,type:{name:"enum",value:[{value:'"offer"'},{value:'"offer_collective"'},{value:'"venue"'}]}},imageUrl:{defaultValue:null,description:"",name:"imageUrl",required:!0,type:{name:"string"}}}}}catch{}const Me=({imageUrl:e,mode:t})=>{const[r,n]=_.useState(!1);return c.jsxs(c.Fragment,{children:[c.jsx(ae,{onClick:()=>n(!0),variant:ie.TERNARY,icon:or,children:"Prévisualiser"}),r&&e&&c.jsx(De,{mode:t,imageUrl:e,hideModal:()=>n(!1)})]})};try{Me.displayName="ButtonAppPreview",Me.__docgenInfo={description:"",displayName:"ButtonAppPreview",props:{mode:{defaultValue:null,description:"",name:"mode",required:!0,type:{name:"enum",value:[{value:'"offer"'},{value:'"offer_collective"'},{value:'"venue"'}]}},imageUrl:{defaultValue:null,description:"",name:"imageUrl",required:!0,type:{name:"string"}}}}}catch{}const Mn={"button-image-delete-icon":"_button-image-delete-icon_ooh4c_1"},qe=({isLoading:e,onConfirm:t,onDismiss:r})=>c.jsx(sr,{cancelText:"Retour",confirmText:"Supprimer",icon:cr,isLoading:e,onCancel:r,onConfirm:t,title:"Supprimer l’image",children:"Souhaitez-vous vraiment supprimer cette image ?"});try{qe.displayName="ModalImageDelete",qe.__docgenInfo={description:"",displayName:"ModalImageDelete",props:{isLoading:{defaultValue:null,description:"",name:"isLoading",required:!0,type:{name:"boolean"}},onConfirm:{defaultValue:null,description:"",name:"onConfirm",required:!0,type:{name:"() => void"}},onDismiss:{defaultValue:null,description:"",name:"onDismiss",required:!0,type:{name:"() => void"}}}}}catch{}const Be=({onImageDelete:e})=>{const[t,r]=_.useState(!1),[n,a]=_.useState(!1),i=async()=>{a(!0),await e()};return c.jsxs(c.Fragment,{children:[c.jsxs(ae,{onClick:()=>r(!0),variant:ie.TERNARY,children:[c.jsx(Mt,{alt:"",className:Mn["button-image-delete-icon"],src:lr}),"Supprimer"]}),t&&c.jsx(qe,{isLoading:n,onConfirm:i,onDismiss:()=>r(!1)})]})};try{Be.displayName="ButtonImageDelete",Be.__docgenInfo={description:"",displayName:"ButtonImageDelete",props:{onImageDelete:{defaultValue:null,description:"",name:"onImageDelete",required:!0,type:{name:"() => Promise<void>"}}}}}catch{}const qn="_icon_bzfcf_32",Bn="_label_bzfcf_38",Y={"button-image-add":"_button-image-add_bzfcf_2","add-image-venue":"_add-image-venue_bzfcf_14","add-image-offer":"_add-image-offer_bzfcf_18","image-upload-button-label":"_image-upload-button-label_bzfcf_25",icon:qn,label:Bn},Le=({onClick:e,mode:t})=>c.jsxs("button",{className:qt(Y["button-image-add"],{[Y["add-image-venue"]]:t===w.VENUE,[Y["add-image-offer"]]:t===w.OFFER||t===w.OFFER_COLLECTIVE}),onClick:e,type:"button",children:[c.jsx(Mt,{src:fr,alt:"",className:Y.icon}),c.jsxs("span",{className:Y.label,children:["Ajouter ",c.jsx("br",{})," une image"]})]});try{Le.displayName="ButtonImageAdd",Le.__docgenInfo={description:"",displayName:"ButtonImageAdd",props:{onClick:{defaultValue:null,description:"",name:"onClick",required:!0,type:{name:"() => void"}},mode:{defaultValue:null,description:"",name:"mode",required:!0,type:{name:"enum",value:[{value:'"offer"'},{value:'"offer_collective"'},{value:'"venue"'}]}}}}}catch{}const ge=(e,t)=>e+t/2,Ln=e=>1/e,Xt={[w.OFFER]:{maxSize:1e7,minWidth:400,types:["image/png","image/jpeg"],minHeight:600},[w.OFFER_COLLECTIVE]:{maxSize:1e7,minWidth:400,types:["image/png","image/jpeg"],minHeight:600},[w.VENUE]:{maxSize:1e7,minWidth:600,types:["image/png","image/jpeg"],minHeight:400}},kn=e=>{const[t,r]=_.useState(0),[n,a]=_.useState(0);return _.useEffect(()=>{yr(e).then(i=>{i&&(r(i.width),a(i.height))})},[]),{width:t,height:n}},k={"modal-image-crop":"_modal-image-crop_3jjc8_2","modal-image-crop-form":"_modal-image-crop-form_3jjc8_9","modal-image-crop-header":"_modal-image-crop-header_3jjc8_15","modal-image-crop-right":"_modal-image-crop-right_3jjc8_23","modal-image-crop-credit":"_modal-image-crop-credit_3jjc8_29","modal-image-crop-footer":"_modal-image-crop-footer_3jjc8_35"},Wn=({originalDimensions:e,orientation:t})=>t==="landscape"?{width:Math.floor(Math.min(e.width,e.height/2*3)),height:Math.floor(Math.min(e.height,e.width/3*2))}:{width:Math.floor(Math.min(e.width,e.height/3*2)),height:Math.floor(Math.min(e.height,e.width/2*3))},ke=({onReplaceImage:e,image:t,credit:r,onSetCredit:n,onEditedImageSave:a,saveInitialPosition:i,initialPosition:u,initialScale:l,mode:s,submitButtonText:o})=>{const{width:d,height:p}=kn(t),f=_.useRef(null),m=Dt(),h=Xt[s].minWidth,{width:g}=Wn({originalDimensions:{width:d,height:p},orientation:s===w.VENUE?"landscape":"portrait"}),v=Math.min(4,(g-10)/h),y={[w.OFFER]:384,[w.OFFER_COLLECTIVE]:384,[w.VENUE]:244}[s],b={[w.OFFER]:{canvasHeight:y,canvasWidth:y*6/9,cropBorderColor:"#FFF",cropBorderHeight:50,cropBorderWidth:105,maxScale:v},[w.OFFER_COLLECTIVE]:{canvasHeight:y,canvasWidth:y*6/9,cropBorderColor:"#FFF",cropBorderHeight:50,cropBorderWidth:105,maxScale:v},[w.VENUE]:{canvasHeight:y,canvasWidth:y*3/2,cropBorderColor:"#FFF",cropBorderHeight:40,cropBorderWidth:100,maxScale:v}}[s],E=_.useCallback(()=>{try{if(f.current){const R=f.current.getImage(),S=f.current.getCroppingRect();i({x:ge(S.x,S.width),y:ge(S.y,S.height)}),a(R.toDataURL(),S)}}catch{m.error("Une erreur est survenue. Merci de réessayer plus tard")}},[a,i,m]),P=mr({initialValues:{credit:"",scale:l||1},onSubmit:E});return c.jsx("section",{className:k["modal-image-crop"],children:c.jsx(gr,{value:P,children:c.jsxs("form",{action:"#",onSubmit:P.handleSubmit,children:[c.jsxs("div",{className:k["modal-image-crop-form"],children:[c.jsx("header",{children:c.jsx("h1",{className:k["modal-image-crop-header"],children:"Ajouter une image"})}),c.jsx("p",{className:k["modal-image-crop-right"],children:"En utilisant ce contenu, je certifie que je suis propriétaire ou que je dispose des autorisations nécessaires pour l’utilisation de celui-ci."}),c.jsx(hr,{...b,image:t,initialPosition:u,ref:f}),c.jsx(vr,{credit:r,extraClassName:k["modal-image-crop-credit"],updateCredit:n})]}),c.jsx(ur,{}),c.jsxs("footer",{className:k["modal-image-crop-footer"],children:[c.jsx(ae,{icon:pr,onClick:e,variant:ie.TERNARY,children:"Remplacer l’image"}),c.jsx(Ft,{onClick:E,children:o})]})]})})})};try{ke.displayName="ModalImageCrop",ke.__docgenInfo={description:"",displayName:"ModalImageCrop",props:{image:{defaultValue:null,description:"",name:"image",required:!0,type:{name:"File"}},credit:{defaultValue:null,description:"",name:"credit",required:!0,type:{name:"string"}},onSetCredit:{defaultValue:null,description:"",name:"onSetCredit",required:!0,type:{name:"(credit: string) => void"}},onReplaceImage:{defaultValue:null,description:"",name:"onReplaceImage",required:!0,type:{name:"() => void"}},initialPosition:{defaultValue:null,description:"",name:"initialPosition",required:!1,type:{name:"Position"}},initialScale:{defaultValue:null,description:"",name:"initialScale",required:!1,type:{name:"number"}},saveInitialPosition:{defaultValue:null,description:"",name:"saveInitialPosition",required:!0,type:{name:"(position: Position) => void"}},onEditedImageSave:{defaultValue:null,description:"",name:"onEditedImageSave",required:!0,type:{name:"(dataUrl: string, croppedRect: CroppedRect) => void"}},mode:{defaultValue:null,description:"",name:"mode",required:!0,type:{name:"enum",value:[{value:'"offer"'},{value:'"offer_collective"'},{value:'"venue"'}]}},submitButtonText:{defaultValue:null,description:"",name:"submitButtonText",required:!0,type:{name:"string"}}}}}catch{}const zn=({constraints:e})=>wr().shape(e.reduce((t,r)=>({...t,[r.id]:Er().test({message:r.description,test:async(n,a)=>r.asyncValidator(a.parent.image)})}),{})),We=({onSubmit:e,mode:t})=>{const[r,n]=_.useState([]),a=Xt[t],i=[ue.formats(a.types),ue.size(a.maxSize),ue.width(a.minWidth),ue.height(a.minHeight)],u=zn({constraints:i}),l=async s=>{const o=s.currentTarget.files&&s.currentTarget.files[0]||null;o&&u.validate({image:o},{abortEarly:!1}).then(()=>e({image:o})).catch(d=>n(d.inner.map(p=>p.path||"unknown")))};return c.jsxs("form",{onSubmit:s=>s.preventDefault(),children:[c.jsx(br,{label:"Importer une image depuis l’ordinateur",fileTypes:["image/png","image/jpeg"],isValid:r.length===0,onChange:l}),c.jsx(_r,{constraints:i,failingConstraints:r})]})};try{We.displayName="ImageUploadBrowserForm",We.__docgenInfo={description:"",displayName:"ImageUploadBrowserForm",props:{onSubmit:{defaultValue:null,description:"",name:"onSubmit",required:!0,type:{name:"(values: ImageUploadBrowserFormValues) => void"}},mode:{defaultValue:null,description:"",name:"mode",required:!0,type:{name:"enum",value:[{value:'"offer"'},{value:'"offer_collective"'},{value:'"venue"'}]}}}}}catch{}const $n="_header_12lh2_9",Et={"modal-upload-browser":"_modal-upload-browser_12lh2_2",header:$n,"horizontal-rule":"_horizontal-rule_12lh2_15"},ze=({onImageClientUpload:e,mode:t})=>{const r={[w.OFFER]:"portrait",[w.OFFER_COLLECTIVE]:"portrait",[w.VENUE]:"landscape"}[t];return c.jsxs("section",{className:Et["modal-upload-browser"],children:[c.jsx("header",{children:c.jsx("h1",{className:Et.header,children:"Ajouter une image"})}),c.jsx(Ir,{orientation:r}),c.jsx(We,{onSubmit:e,mode:t})]})};try{ze.displayName="ModalImageUploadBrowser",ze.__docgenInfo={description:"",displayName:"ModalImageUploadBrowser",props:{onImageClientUpload:{defaultValue:null,description:"",name:"onImageClientUpload",required:!0,type:{name:"(values: ImageUploadBrowserFormValues) => void"}},mode:{defaultValue:null,description:"",name:"mode",required:!0,type:{name:"enum",value:[{value:'"offer"'},{value:'"offer_collective"'},{value:'"venue"'}]}}}}}catch{}const Gn="_container_uuguy_2",Hn="_header_uuguy_8",Kn="_subtitle_uuguy_17",Xn="_actions_uuguy_23",Yn="_button_uuguy_28",W={container:Gn,header:Hn,subtitle:Kn,actions:Xn,button:Yn},$e=({imageUrl:e,isUploading:t,onGoBack:r,onUploadImage:n,mode:a})=>{const i={[w.VENUE]:me,[w.OFFER]:K,[w.OFFER_COLLECTIVE]:K}[a];return c.jsxs("div",{className:W.container,children:[c.jsx("header",{children:c.jsx("h1",{className:W.header,children:"Ajouter une image"})}),c.jsx("div",{className:W.subtitle,children:"Prévisualisation de votre image dans l’application pass Culture"}),c.jsx(i,{imageUrl:e}),c.jsxs("div",{className:W.actions,children:[c.jsx(ae,{className:W.button,onClick:r,title:"Retour",type:"button",variant:ie.SECONDARY,children:"Retour"}),c.jsx(Ft,{className:W.button,disabled:!1,isLoading:!!t,onClick:n})]})]})};try{$e.displayName="ModalImageUploadConfirm",$e.__docgenInfo={description:"",displayName:"ModalImageUploadConfirm",props:{imageUrl:{defaultValue:null,description:"",name:"imageUrl",required:!0,type:{name:"string"}},mode:{defaultValue:null,description:"",name:"mode",required:!0,type:{name:"enum",value:[{value:'"offer"'},{value:'"offer_collective"'},{value:'"venue"'}]}},isUploading:{defaultValue:null,description:"",name:"isUploading",required:!0,type:{name:"boolean"}},onGoBack:{defaultValue:null,description:"",name:"onGoBack",required:!0,type:{name:"() => void"}},onUploadImage:{defaultValue:null,description:"",name:"onUploadImage",required:!0,type:{name:"() => void"}}}}}catch{}const Ge=({mode:e,onDismiss:t,onImageUpload:r,initialValues:n={}})=>{const[a,i]=_.useState(!1),{imageUrl:u,originalImageUrl:l,credit:s,cropParams:o}=n,[d,p]=_.useState();_.useEffect(()=>{async function U(_e){p(await ar(_e)),i(!0)}const F=l||u;F?U(F):i(!0)},[]);const[f,m]=_.useState(s||""),[h,g]=_.useState(),[v,y]=_.useState(""),[b,E]=_.useState(!1),{xCropPercent:O,yCropPercent:P,heightCropPercent:R,widthCropPercent:S}=o||{},[oe,V]=_.useState({x:O&&S?ge(O,S):.5,y:P&&R?ge(P,R):.5}),x=_.useCallback(()=>{y("")},[]),D=U=>{p(U.image||void 0)},Jt=_.useCallback(()=>{p(void 0)},[p]),he=async(U,F,_e)=>{U===void 0||F===void 0||(await r({imageFile:F,imageCroppedDataUrl:_e,cropParams:U,credit:f}),t(),E(!1))},ye=e!==w.OFFER_COLLECTIVE,Qt=_.useCallback((U,F)=>{g(F),y(U),ye||he(F,d,U)},[y,g,ye,he,d]);return a?c.jsx(Vt,{hasCloseButton:!0,labelledBy:"Ajouter une image",onDismiss:t,children:d?!h||!v?c.jsx(ke,{credit:f,image:d,initialPosition:oe,initialScale:R?Ln(R):1,onEditedImageSave:Qt,onReplaceImage:Jt,onSetCredit:m,saveInitialPosition:V,mode:e,submitButtonText:ye?"Suivant":"Enregistrer"}):c.jsx($e,{isUploading:b,onGoBack:x,onUploadImage:()=>he(h,d,v),imageUrl:v,mode:e}):c.jsx(ze,{onImageClientUpload:D,mode:e})}):null};try{Ge.displayName="ModalImageEdit",Ge.__docgenInfo={description:"",displayName:"ModalImageEdit",props:{mode:{defaultValue:null,description:"",name:"mode",required:!0,type:{name:"enum",value:[{value:'"offer"'},{value:'"offer_collective"'},{value:'"venue"'}]}},onDismiss:{defaultValue:null,description:"",name:"onDismiss",required:!0,type:{name:"() => void"}},onImageUpload:{defaultValue:null,description:"",name:"onImageUpload",required:!0,type:{name:"(values: OnImageUploadArgs) => Promise<void>"}},initialValues:{defaultValue:{value:"{}"},description:"",name:"initialValues",required:!1,type:{name:"UploadImageValues"}}}}}catch{}const ve=({mode:e,initialValues:t={},onImageUpload:r,onClickButtonImage:n})=>{const[a,i]=_.useState(!1),{imageUrl:u,originalImageUrl:l}=t,s=()=>{n&&n(),i(!0)};return c.jsxs(c.Fragment,{children:[u||l?c.jsx(ae,{onClick:s,variant:ie.TERNARY,alt:"Modifier l’image",icon:dr,children:"Modifier"}):c.jsx(Le,{mode:e,onClick:s}),a&&c.jsx(Ge,{mode:e,onDismiss:()=>i(!1),onImageUpload:r,initialValues:t})]})};try{ve.displayName="ButtonImageEdit",ve.__docgenInfo={description:"",displayName:"ButtonImageEdit",props:{onImageUpload:{defaultValue:null,description:"",name:"onImageUpload",required:!0,type:{name:"(values: OnImageUploadArgs) => Promise<void>"}},initialValues:{defaultValue:{value:"{}"},description:"",name:"initialValues",required:!1,type:{name:"UploadImageValues"}},mode:{defaultValue:null,description:"",name:"mode",required:!0,type:{name:"enum",value:[{value:'"offer"'},{value:'"offer_collective"'},{value:'"venue"'}]}},onClickButtonImage:{defaultValue:null,description:"",name:"onClickButtonImage",required:!1,type:{name:"(() => void)"}}}}}catch{}const Ne={"image-preview":"_image-preview_806us_1","preview-venue":"_preview-venue_806us_7","preview-offer":"_preview-offer_806us_11"},He=({imageUrl:e,alt:t,mode:r})=>c.jsx("img",{alt:t,className:qt(Ne["image-preview"],{[Ne["preview-venue"]]:r===w.VENUE,[Ne["preview-offer"]]:r===w.OFFER||r===w.OFFER_COLLECTIVE}),src:e});try{He.displayName="ImagePreview",He.__docgenInfo={description:"",displayName:"ImagePreview",props:{imageUrl:{defaultValue:null,description:"",name:"imageUrl",required:!0,type:{name:"string"}},alt:{defaultValue:null,description:"",name:"alt",required:!0,type:{name:"string"}},mode:{defaultValue:null,description:"",name:"mode",required:!0,type:{name:"enum",value:[{value:'"offer"'},{value:'"offer_collective"'},{value:'"venue"'}]}}}}}catch{}const Ae={"explanatory-text":"_explanatory-text_pfqdv_1","image-uploader-image-container":"_image-uploader-image-container_pfqdv_5","image-uploader-actions-container":"_image-uploader-actions-container_pfqdv_9","actions-wrapper":"_actions-wrapper_pfqdv_16"},Ke=({onImageUpload:e,onImageDelete:t,initialValues:r={},mode:n,onClickButtonImageAdd:a})=>{const{imageUrl:i,originalImageUrl:u,credit:l,cropParams:s}=r;return c.jsx("div",{className:Ae["image-uploader-image-container"],children:i&&u?c.jsxs(c.Fragment,{children:[c.jsx(He,{mode:n,imageUrl:i,alt:"Prévisualisation de l’image"}),c.jsx("div",{className:Ae["image-uploader-actions-container"],children:c.jsxs("div",{className:Ae["actions-wrapper"],children:[c.jsx(ve,{mode:n,initialValues:{originalImageUrl:u,imageUrl:i,credit:l,cropParams:s},onImageUpload:e,onClickButtonImage:a}),n!=w.OFFER_COLLECTIVE&&c.jsx(Me,{imageUrl:i,mode:n}),c.jsx(Be,{onImageDelete:t})]})})]}):c.jsx(ve,{mode:n,onImageUpload:e,onClickButtonImage:a})})},Yt=Ke;try{Ke.displayName="ImageUploader",Ke.__docgenInfo={description:"",displayName:"ImageUploader",props:{onImageUpload:{defaultValue:null,description:"",name:"onImageUpload",required:!0,type:{name:"(values: OnImageUploadArgs) => Promise<void>"}},onImageDelete:{defaultValue:null,description:"",name:"onImageDelete",required:!0,type:{name:"() => Promise<void>"}},initialValues:{defaultValue:{value:"{}"},description:"",name:"initialValues",required:!1,type:{name:"UploadImageValues"}},mode:{defaultValue:null,description:"",name:"mode",required:!0,type:{name:"enum",value:[{value:'"offer"'},{value:'"offer_collective"'},{value:'"venue"'}]}},onClickButtonImageAdd:{defaultValue:null,description:"",name:"onClickButtonImageAdd",required:!1,type:{name:"(() => void)"}}}}}catch{}const It=""+new URL("sample-image-landscape-b60948dd.jpg",import.meta.url).href,jt=""+new URL("sample-image-portrait-4cb7a498.jpg",import.meta.url).href,ai={title:"components/ImageUploader",component:Yt},rt=e=>c.jsx(Te,{isDev:!0,children:c.jsx(Yt,{...e})}),Zt={initialValues:{originalImageUrl:jt,imageUrl:jt,credit:"John Do",cropParams:{xCropPercent:0,yCropPercent:0,heightCropPercent:1,widthCropPercent:1}},mode:w.OFFER,onImageDelete:async()=>{alert("onDelete have been called.")},onImageUpload:async()=>{alert("onImageUpload have been called.")}},J=rt.bind({});J.args={...Zt};const Q=rt.bind({});Q.args={...Zt,initialValues:{imageUrl:It,originalImageUrl:It},mode:w.VENUE};const ee=rt.bind({});ee.args={mode:w.OFFER};var Ot,Pt,St;J.parameters={...J.parameters,docs:{...(Ot=J.parameters)==null?void 0:Ot.docs,source:{originalSource:`props => <StoreProvider isDev>
    <ImageUploader {...props} />
  </StoreProvider>`,...(St=(Pt=J.parameters)==null?void 0:Pt.docs)==null?void 0:St.source}}};var xt,Ct,Nt;Q.parameters={...Q.parameters,docs:{...(xt=Q.parameters)==null?void 0:xt.docs,source:{originalSource:`props => <StoreProvider isDev>
    <ImageUploader {...props} />
  </StoreProvider>`,...(Nt=(Ct=Q.parameters)==null?void 0:Ct.docs)==null?void 0:Nt.source}}};var At,Rt,Ut;ee.parameters={...ee.parameters,docs:{...(At=ee.parameters)==null?void 0:At.docs,source:{originalSource:`props => <StoreProvider isDev>
    <ImageUploader {...props} />
  </StoreProvider>`,...(Ut=(Rt=ee.parameters)==null?void 0:Rt.docs)==null?void 0:Ut.source}}};const ii=["WithImageOffer","WithImageVenue","WithoutImage"];export{J as WithImageOffer,Q as WithImageVenue,ee as WithoutImage,ii as __namedExportsOrder,ai as default};
//# sourceMappingURL=ImageUploader.stories-6b8952e2.js.map
