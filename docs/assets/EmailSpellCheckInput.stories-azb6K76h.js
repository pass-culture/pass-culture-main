import{j as f}from"./jsx-runtime-DKKDLQjB.js";import{a as W,u as H,F as Y}from"./index.esm-CuEGUcun.js";import{g as J,r as S}from"./iframe-CnfVxGgg.js";import{B as K}from"./Banner-ByPQeA5h.js";import{B as Q,b as X,a as Z}from"./Button-CRTTfNRA.js";import{T as ee}from"./TextInput-B7vjq6me.js";import{f as te}from"./full-next-B_76kGmE.js";import"./preload-helper-PPVm8Dsz.js";import"./index-DMt7lw30.js";import"./full-close-5Oxr7nnd.js";import"./full-info-D24AtBVt.js";import"./SvgIcon-BgRkYrhG.js";import"./Tooltip-0Q1hzrna.js";import"./stroke-pass-CALgybTM.js";import"./chunk-EPOLDU6W-WowPydQ5.js";import"./FieldFooter-CBnn5hci.js";import"./full-error-BFAmjN4t.js";import"./index.module-E4YOit4J.js";import"./FieldHeader-sJtqNFmp.js";var y={},v={},D={},P={},I;function re(){if(I)return P;I=1,Object.defineProperty(P,"__esModule",{value:!0});function t(i,e){if(!i)throw new Error(e)}return P.default=t,P}var U;function ne(){if(U)return D;U=1;var t=D&&D.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(D,"__esModule",{value:!0});const i=t(re());function e(r){i.default(Array.isArray(r.domains),"domains must be an array"),i.default(Array.isArray(r.topLevelDomains),"topLevelDomains must be an array"),i.default(Array.isArray(r.secondLevelDomains),"secondLevelDomains must be an array"),i.default(typeof r.distanceFunction=="function","distanceFunction must be a function")}return D.default=e,D}var L={},E={},j;function ie(){if(j)return E;j=1,Object.defineProperty(E,"__esModule",{value:!0});function t(i){return encodeURI(i).replace(/%20/g," ").replace(/%25/g,"%").replace(/%5E/g,"^").replace(/%60/g,"`").replace(/%7B/g,"{").replace(/%7C/g,"|").replace(/%7D/g,"}")}return E.default=t,E}var O={},M;function oe(){if(M)return O;M=1,Object.defineProperty(O,"__esModule",{value:!0});function t(i){const{domain:e,domains:r,distanceFunction:o,threshold:n}=i;let u,a=1/0,l=null;if(!(!e||!r)){for(let s=0;s<r.length;s++){if(e===r[s])return e;u=o(e,r[s]),u<a&&(a=u,l=r[s])}if(a<=n&&l!==null)return l}}return O.default=t,O}var A={},F={},k;function ae(){if(k)return F;k=1,Object.defineProperty(F,"__esModule",{value:!0});const t=/\s/;function i(o){return o.trim?o.trim():r(e(o))}function e(o){return o.trimLeft?o.trimLeft():o.replace(/^\s\s*/,"")}function r(o){if(o.trimRight)return o.trimRight();let n=o.length;for(;t.test(o.charAt(--n)););return o.slice(0,n+1)}return F.default=i,F}var x;function le(){if(x)return A;x=1;var t=A&&A.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(A,"__esModule",{value:!0});const i=t(ae()),e=2;function r(o){const u=i.default(o).split("@");if(u.length<e)return!1;for(let m=0;m<u.length;m++)if(u[m]==="")return!1;let a="",l="";const s=u.pop(),d=s.split(".");if(d.length===0)return!1;if(d.length==1)l=d[0];else{a=d[0];for(let m=1;m<d.length;m++)l+=d[m]+".";l=l.substring(0,l.length-1)}return{topLevelDomain:l,secondLevelDomain:a,domain:s,address:u.join("@")}}return A.default=r,A}var N;function ue(){if(N)return L;N=1;var t=L&&L.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(L,"__esModule",{value:!0});const i=t(ie()),e=t(oe()),r=t(le());function o(n){const u=i.default(n.email.toLowerCase()),a=r.default(u);if(!a)return;const{domains:l,domainThreshold:s,distanceFunction:d,secondLevelDomains:m,topLevelDomains:_}=n;if(m&&_&&m.indexOf(a.secondLevelDomain)!==-1&&_.indexOf(a.topLevelDomain)!==-1)return;let c=e.default({domain:a.domain,domains:l,distanceFunction:d,threshold:s});if(c)return c==a.domain?void 0:{address:a.address,domain:c,full:a.address+"@"+c};const h=e.default({domain:a.secondLevelDomain,domains:m,distanceFunction:d,threshold:n.secondLevelThreshold}),g=e.default({domain:a.topLevelDomain,domains:_,distanceFunction:d,threshold:n.topLevelThreshold});if(a.domain){c=a.domain;let q=!1;if(h&&h!=a.secondLevelDomain&&(c=c.replace(a.secondLevelDomain,h),q=!0),g&&g!=a.topLevelDomain&&a.secondLevelDomain!==""&&(c=c.replace(new RegExp(a.topLevelDomain+"$"),g),q=!0),q)return{address:a.address,domain:c,full:a.address+"@"+c}}}return L.default=o,L}var b={},p={},C={},V;function se(){if(V)return C;V=1,Object.defineProperty(C,"__esModule",{value:!0});function t(i,e){if(i==null||i.length===0)return e==null||e.length===0?0:e.length;if(e==null||e.length===0)return i.length;let r=0,o=0,n=0,u=0;const a=5;for(;r+o<i.length&&r+n<e.length;){if(i.charAt(r+o)==e.charAt(r+n))u++;else{o=0,n=0;for(let l=0;l<a;l++){if(r+l<i.length&&i.charAt(r+l)==e.charAt(r)){o=l;break}if(r+l<e.length&&i.charAt(r)==e.charAt(r+l)){n=l;break}}}r++}return(i.length+e.length)/2-u}return C.default=t,C}var w;function $(){if(w)return p;w=1;var t=p&&p.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(p,"__esModule",{value:!0}),p.POPULAR_TLDS=p.POPULAR_DOMAINS=p.DEFAULT_CONFIG=void 0;const i=t(se()),e=["msn.com","bellsouth.net","telus.net","comcast.net","optusnet.com.au","earthlink.net","qq.com","sky.com","icloud.com","sympatico.ca","googlemail.com","att.net","xtra.co.nz","web.de","cox.net","gmail.com","ymail.com","aim.com","rogers.com","verizon.net","rocketmail.com","optonline.net","sbcglobal.net","aol.com","aim.com","me.com","mailw.com","btinternet.com","charter.net","shaw.ca","hey.com","proton.me","pm.com","protonmail.com","zoho.com","yandex.com","titan.email"];p.POPULAR_DOMAINS=e;const r=["com","com.au","com.tw","co","ca","co.nz","co.uk","de","fr","it","ru","org","edu","gov","jp","nl","kr","se","eu","ie","co.il","us","at","be","dk","hk","es","gr","ch","no","cz","net","net.au","info","biz","mil","co.jp","sg","hu","uk","sk","ar","cf","cl","cn","ga","gq","ir","ml","mx","nu","nz","ph","pl","ro","tk","tw","ua","vg","ws","xn","za","app","au","ai","biz","br","blog","cloud","club","cc","de","dev","digital","fi","finance","id","in","io","me","mobi","network","pw","so","xyz","software","to","tech"];p.POPULAR_TLDS=r;const o={domainThreshold:2,domains:e,secondLevelThreshold:2,secondLevelDomains:["yahoo","hotmail","mail","live","outlook"],topLevelThreshold:2,topLevelDomains:r,distanceFunction:i.default};return p.DEFAULT_CONFIG=o,p}var z;function ce(){if(z)return b;z=1,Object.defineProperty(b,"__esModule",{value:!0});const t=$();function i(e){return{email:e.email,domains:e.domains||t.DEFAULT_CONFIG.domains,topLevelDomains:e.topLevelDomains||t.DEFAULT_CONFIG.topLevelDomains,secondLevelDomains:e.secondLevelDomains||t.DEFAULT_CONFIG.secondLevelDomains,distanceFunction:e.distanceFunction||t.DEFAULT_CONFIG.distanceFunction,domainThreshold:e.domainThreshold||t.DEFAULT_CONFIG.domainThreshold,secondLevelThreshold:e.secondLevelThreshold||t.DEFAULT_CONFIG.secondLevelThreshold,topLevelThreshold:e.topLevelThreshold||t.DEFAULT_CONFIG.topLevelThreshold,suggested:e.suggested||void 0,empty:e.suggested||void 0}}return b.default=i,b}var B;function de(){if(B)return v;B=1;var t=v&&v.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(v,"__esModule",{value:!0});const i=t(ne()),e=t(ue()),r=t(ce());function o(n){const u=r.default(n);i.default(u||{});const a=e.default(u);return!a&&n.empty&&n.empty(),a&&n.suggested&&n.suggested(a),a}return v.default=o,v}var G;function me(){return G||(G=1,(function(t){var i=y&&y.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(t,"__esModule",{value:!0}),t.POPULAR_TLDS=t.POPULAR_DOMAINS=t.run=void 0;const e=i(de());t.run=e.default;const r=$();Object.defineProperty(t,"POPULAR_DOMAINS",{enumerable:!0,get:function(){return r.POPULAR_DOMAINS}}),Object.defineProperty(t,"POPULAR_TLDS",{enumerable:!0,get:function(){return r.POPULAR_TLDS}});const o={run:e.default,POPULAR_DOMAINS:r.POPULAR_DOMAINS,POPULAR_TLDS:r.POPULAR_TLDS};t.default=o})(y)),y}var fe=me();const pe=J(fe),_e=["gmail.com","orange.fr","wanadoo.fr","yahoo.fr","hotmail.fr","free.fr","fnac.com","hotmail.com","outlook.fr","cultura.fr"],he={domainThreshold:4,domains:_e,secondLevelDomains:[],topLevelDomains:[]},ge=(t,i)=>{if(!i)return pe.run({...he,email:t})?.full},ve={"email-validation-error":"_email-validation-error_kinzo_1"},T=S.forwardRef(({name:t,description:i,label:e,onApplyTip:r,required:o,error:n,currentCount:u,...a},l)=>{const[s,d]=S.useState(),m=c=>{const h=c.target.value;if(h.length>0){const g=ge(h.toString(),!!n);g?d(g):_()}a.onBlur?.(c)},_=()=>{d(null)};return f.jsxs(f.Fragment,{children:[f.jsx(ee,{ref:l,label:e,name:t,description:i,autoComplete:"email",maxCharactersCount:255,required:o,error:n,...a,onBlur:m}),s&&f.jsx("div",{className:ve["email-validation-error"],children:f.jsx(K,{description:f.jsxs(f.Fragment,{children:[f.jsxs("p",{children:["Voulez-vous plutôt dire ",s," ?"]}),f.jsx(Q,{variant:Z.TERTIARY,color:X.NEUTRAL,icon:te,onClick:()=>{r(s),_()},autoFocus:!0,label:"Appliquer la modification"})]}),title:"Correction suggérée"})})]})});T.displayName="EmailSpellCheckInput";try{T.displayName="EmailSpellCheckInput",T.__docgenInfo={description:"",displayName:"EmailSpellCheckInput",props:{name:{defaultValue:null,description:"",name:"name",required:!0,type:{name:"string"}},description:{defaultValue:null,description:"",name:"description",required:!0,type:{name:"string"}},label:{defaultValue:null,description:"",name:"label",required:!0,type:{name:"string"}},onApplyTip:{defaultValue:null,description:"",name:"onApplyTip",required:!0,type:{name:"(tip: string) => void"}},required:{defaultValue:null,description:"",name:"required",required:!1,type:{name:"boolean"}},error:{defaultValue:null,description:"",name:"error",required:!1,type:{name:"string"}},onBlur:{defaultValue:null,description:"",name:"onBlur",required:!1,type:{name:"((event: FocusEvent<HTMLInputElement, Element>) => void)"}},currentCount:{defaultValue:null,description:"",name:"currentCount",required:!0,type:{name:"number"}}}}}catch{}const De=({children:t})=>{const i=H({defaultValues:{email:"jmclery@htomil.com"}});return f.jsx(Y,{...i,children:t})},Ne={title:"@/ui-kit/forms/EmailSpellCheckInput",component:T,decorators:[t=>f.jsx(De,{children:f.jsx(t,{})})]},R={args:{name:"email",label:"Adresse email",description:"Format: email@exemple.com",error:"",required:!0,currentCount:10},render:t=>{const{setValue:i,register:e}=W();return f.jsx(T,{...t,...e("email"),onApplyTip:r=>{i("email",r)}})}};R.parameters={...R.parameters,docs:{...R.parameters?.docs,source:{originalSource:`{
  args: {
    name: 'email',
    label: 'Adresse email',
    description: 'Format: email@exemple.com',
    error: '',
    required: true,
    currentCount: 10
  },
  render: args => {
    // eslint-disable-next-line react-hooks/rules-of-hooks
    const {
      setValue,
      register
    } = useFormContext<WrapperFormValues>();
    return <EmailSpellCheckInput {...args} {...register('email')} onApplyTip={tip => {
      setValue('email', tip);
    }} />;
  }
}`,...R.parameters?.docs?.source}}};const Ve=["Default"];export{R as Default,Ve as __namedExportsOrder,Ne as default};
