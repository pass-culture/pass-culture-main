var ot=(t,e,r)=>{if(!e.has(t))throw TypeError("Cannot "+r)};var u=(t,e,r)=>(ot(t,e,"read from private field"),r?r.call(t):e.get(t)),f=(t,e,r)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,r)},p=(t,e,r,i)=>(ot(t,e,"write to private field"),i?i.call(t,r):e.set(t,r),r);import{j as l}from"./jsx-runtime-iXOPPpZ7.js";import{r as m}from"./index-7OBYoplD.js";import{c as Rt,u as Gt}from"./reducer-r8g06hF1.js";import{U as We,A as Ft}from"./config-KjRYmNhP.js";import"./VenuePhysicalLocation-v2PyZzNX.js";import{c as fe}from"./index-XNbs-YUW.js";import{s as Mt}from"./stroke-pass-84wyy11D.js";import{S as ze}from"./SvgIcon-UUSKXfrA.js";import{f as Wt,s as zt,a as Jt}from"./full-download-fPe7ZvD3.js";import{D as Kt}from"./Divider-Bz64tZ7o.js";import{S as St}from"./SubmitButton-1RSlOlg9.js";import{B as ee,a as te}from"./Button-UBhUfAOc.js";import{T as Yt}from"./Thumb-0wMyg6Dd.js";import"./stroke-offer-vqhbfYxZ.js";import"./Banner-K3isowJS.js";import"./InfoBox-0Csbt8ma.js";import{D as Ut}from"./DialogBox-0kGC-nYu.js";import{a as Ct,I as ce}from"./ImagePreviewsWrapper-245mf2uo.js";import{u as wt}from"./useNotification-afKFCIA2.js";import{f as Qt}from"./full-trash-A0u8oE8D.js";import{C as Xt}from"./ConfirmDialog-DCj2oIUx.js";import{s as Zt}from"./stroke-trash-pW9H4mMs.js";import{f as er}from"./full-edit--NrgCQQr.js";import{u as tr,F as rr,a as sr}from"./formik.esm-y2tUiI7x.js";import{I as or}from"./ImageEditor-XFmaQkHd.js";import{g as ir,i as ne,C as ar}from"./imageConstraints-Yy-_V8uq.js";import"./BaseCheckbox-Q_oD9jls.js";import{B as nr}from"./BaseFileInput-L1z9lXK8.js";import"./FieldError-_oiQB8Lp.js";import"./FieldSuccess-KBPQwpG2.js";import{c as lr,a as ur}from"./index.esm-Fq04sIRF.js";import{P as dr}from"./PreferredOrientation-oLVbqnsC.js";import"./_commonjsHelpers-4gQjN7DL.js";import"./index-Odt4icYv.js";import"./index-NZh7eYUr.js";import"./Button.module-yhzTO7gk.js";import"./Tooltip-ehW0-cvy.js";import"./useTooltipProps-Xf9SOXrU.js";import"./full-next-6FYpialQ.js";import"./BaseRadio-NI7qJIMy.js";import"./full-clear-0L2gsxg_.js";import"./index-VFMbf6KQ.js";import"./SelectInput-aEEqLxEg.js";import"./stroke-down-4xbrRvHV.js";import"./typeof-Q9eVcF_1.js";import"./BaseInput-GGUmafiT.js";import"./stroke-close-KQNU-49n.js";import"./shadow-tips-help-vs0tLBP5.js";import"./shadow-tips-warning-og_aO0Ug.js";import"./LinkNodes-A9d8st-V.js";import"./full-link-GGegv9yK.js";import"./tslib.es6-OTA_Hx-d.js";import"./stroke-error-U5wg3Vd5.js";import"./Dialog-o5sDHP-B.js";import"./Slider-D-_UhTzL.js";import"./stroke-valid-qcZpl8lN.js";let cr=class{constructor(e){this.config=e}},we=class extends Error{constructor(e,r,i){super(i),this.name="ApiError",this.url=r.url,this.status=r.status,this.statusText=r.statusText,this.body=r.body,this.request=e}},pr=class extends Error{constructor(e){super(e),this.name="CancelError"}get isCancelled(){return!0}};var _,T,E,P,V,M,I,ht;let hr=(ht=class{constructor(e){f(this,_,void 0);f(this,T,void 0);f(this,E,void 0);f(this,P,void 0);f(this,V,void 0);f(this,M,void 0);f(this,I,void 0);p(this,_,!1),p(this,T,!1),p(this,E,!1),p(this,P,[]),p(this,V,new Promise((r,i)=>{p(this,M,r),p(this,I,i);const s=n=>{u(this,_)||u(this,T)||u(this,E)||(p(this,_,!0),u(this,M)&&u(this,M).call(this,n))},o=n=>{u(this,_)||u(this,T)||u(this,E)||(p(this,T,!0),u(this,I)&&u(this,I).call(this,n))},a=n=>{u(this,_)||u(this,T)||u(this,E)||u(this,P).push(n)};return Object.defineProperty(a,"isResolved",{get:()=>u(this,_)}),Object.defineProperty(a,"isRejected",{get:()=>u(this,T)}),Object.defineProperty(a,"isCancelled",{get:()=>u(this,E)}),e(s,o,a)}))}get[Symbol.toStringTag](){return"Cancellable Promise"}then(e,r){return u(this,V).then(e,r)}catch(e){return u(this,V).catch(e)}finally(e){return u(this,V).finally(e)}cancel(){if(!(u(this,_)||u(this,T)||u(this,E))){if(p(this,E,!0),u(this,P).length)try{for(const e of u(this,P))e()}catch(e){console.warn("Cancellation threw an error",e);return}u(this,P).length=0,u(this,I)&&u(this,I).call(this,new pr("Request aborted"))}}get isCancelled(){return u(this,E)}},_=new WeakMap,T=new WeakMap,E=new WeakMap,P=new WeakMap,V=new WeakMap,M=new WeakMap,I=new WeakMap,ht);const Je=t=>t!=null,re=t=>typeof t=="string",qe=t=>re(t)&&t!=="",Ke=t=>typeof t=="object"&&typeof t.type=="string"&&typeof t.stream=="function"&&typeof t.arrayBuffer=="function"&&typeof t.constructor=="function"&&typeof t.constructor.name=="string"&&/^(Blob|File)$/.test(t.constructor.name)&&/^(Blob|File)$/.test(t[Symbol.toStringTag]),Ot=t=>t instanceof FormData,mr=t=>{try{return btoa(t)}catch{return Buffer.from(t).toString("base64")}},fr=t=>{const e=[],r=(s,o)=>{e.push(`${encodeURIComponent(s)}=${encodeURIComponent(String(o))}`)},i=(s,o)=>{Je(o)&&(Array.isArray(o)?o.forEach(a=>{i(s,a)}):typeof o=="object"?Object.entries(o).forEach(([a,n])=>{i(`${s}[${a}]`,n)}):r(s,o))};return Object.entries(t).forEach(([s,o])=>{i(s,o)}),e.length>0?`?${e.join("&")}`:""},yr=(t,e)=>{const r=t.ENCODE_PATH||encodeURI,i=e.url.replace("{api-version}",t.VERSION).replace(/{(.*?)}/g,(o,a)=>{var n;return(n=e.path)!=null&&n.hasOwnProperty(a)?r(String(e.path[a])):o}),s=`${t.BASE}${i}`;return e.query?`${s}${fr(e.query)}`:s},br=t=>{if(t.formData){const e=new FormData,r=(i,s)=>{re(s)||Ke(s)?e.append(i,s):e.append(i,JSON.stringify(s))};return Object.entries(t.formData).filter(([i,s])=>Je(s)).forEach(([i,s])=>{Array.isArray(s)?s.forEach(o=>r(i,o)):r(i,s)}),e}},le=async(t,e)=>typeof e=="function"?e(t):e,gr=async(t,e)=>{const r=await le(e,t.TOKEN),i=await le(e,t.USERNAME),s=await le(e,t.PASSWORD),o=await le(e,t.HEADERS),a=Object.entries({Accept:"application/json",...o,...e.headers}).filter(([n,d])=>Je(d)).reduce((n,[d,c])=>({...n,[d]:String(c)}),{});if(qe(r)&&(a.Authorization=`Bearer ${r}`),qe(i)&&qe(s)){const n=mr(`${i}:${s}`);a.Authorization=`Basic ${n}`}return e.body&&(e.mediaType?a["Content-Type"]=e.mediaType:Ke(e.body)?a["Content-Type"]=e.body.type||"application/octet-stream":re(e.body)?a["Content-Type"]="text/plain":Ot(e.body)||(a["Content-Type"]="application/json")),new Headers(a)},Er=t=>{var e;if(t.body)return(e=t.mediaType)!=null&&e.includes("/json")?JSON.stringify(t.body):re(t.body)||Ke(t.body)||Ot(t.body)?t.body:JSON.stringify(t.body)},vr=async(t,e,r,i,s,o,a)=>{const n=new AbortController,d={headers:o,body:i??s,method:e.method,signal:n.signal};return t.WITH_CREDENTIALS&&(d.credentials=t.CREDENTIALS),a(()=>n.abort()),fetch(r,d)},qr=(t,e)=>{if(e){const r=t.headers.get(e);if(re(r))return r}},_r=async t=>{if(t.status!==204)try{const e=t.headers.get("Content-Type");if(e)return e.toLowerCase().startsWith("application/json")?await t.json():await t.text()}catch(e){console.error(e)}},Tr=(t,e)=>{const i={400:"Bad Request",401:"Unauthorized",403:"Forbidden",404:"Not Found",500:"Internal Server Error",502:"Bad Gateway",503:"Service Unavailable",...t.errors}[e.status];if(e.status===503){window.location.assign(We);return}if(i)throw new we(t,e,i);if(!e.ok)throw new we(t,e,"Generic Error")},Rr=(t,e)=>new hr(async(r,i,s)=>{try{const o=yr(t,e),a=br(e),n=Er(e),d=await gr(t,e);if(!s.isCancelled){const c=await vr(t,e,o,n,a,d,s),y=await _r(c),g=qr(c,e.responseHeader),b={url:o,ok:c.ok,status:c.status,statusText:c.statusText,body:g??y};Tr(e,b),r(b.body)}}catch(o){o instanceof we&&o.status===401&&!o.url.includes("/users/current")&&!o.url.includes("/users/signin")&&(window.location.href="/connexion"),o instanceof Error&&(o.message==="Failed to fetch"||o.message.includes("NetworkError"))?console.error(o):i(o)}});let Fr=class extends cr{constructor(e){super(e)}request(e){return Rr(this.config,e)}},Sr=class{constructor(e){this.httpRequest=e}authenticate(){return this.httpRequest.request({method:"GET",url:"/adage-iframe/authenticate",errors:{403:"Forbidden",422:"Unprocessable Entity"}})}getAcademies(){return this.httpRequest.request({method:"GET",url:"/adage-iframe/collective/academies",errors:{403:"Forbidden",422:"Unprocessable Entity"}})}getEducationalEligibleOffersByUai(){return this.httpRequest.request({method:"GET",url:"/adage-iframe/collective/all-offers",errors:{403:"Forbidden",422:"Unprocessable Entity"}})}bookCollectiveOffer(e){return this.httpRequest.request({method:"POST",url:"/adage-iframe/collective/bookings",body:e,mediaType:"application/json",errors:{400:"Bad Request",403:"Forbidden",422:"Unprocessable Entity"}})}getCollectiveFavorites(){return this.httpRequest.request({method:"GET",url:"/adage-iframe/collective/favorites",errors:{403:"Forbidden",422:"Unprocessable Entity"}})}getEducationalInstitutionWithBudget(){return this.httpRequest.request({method:"GET",url:"/adage-iframe/collective/institution",errors:{403:"Forbidden",422:"Unprocessable Entity"}})}deleteFavoriteForCollectiveOffer(e){return this.httpRequest.request({method:"DELETE",url:"/adage-iframe/collective/offer/{offer_id}/favorites",path:{offer_id:e},errors:{403:"Forbidden",422:"Unprocessable Entity"}})}getCollectiveOfferTemplate(e){return this.httpRequest.request({method:"GET",url:"/adage-iframe/collective/offers-template/{offer_id}",path:{offer_id:e},errors:{403:"Forbidden",404:"Not Found",422:"Unprocessable Entity"}})}createCollectiveRequest(e,r){return this.httpRequest.request({method:"POST",url:"/adage-iframe/collective/offers-template/{offer_id}/request",path:{offer_id:e},body:r,mediaType:"application/json",errors:{403:"Forbidden",404:"Not Found",422:"Unprocessable Entity"}})}getCollectiveOffersForMyInstitution(){return this.httpRequest.request({method:"GET",url:"/adage-iframe/collective/offers/my_institution",errors:{403:"Forbidden",422:"Unprocessable Entity"}})}getCollectiveOffer(e){return this.httpRequest.request({method:"GET",url:"/adage-iframe/collective/offers/{offer_id}",path:{offer_id:e},errors:{403:"Forbidden",404:"Not Found",422:"Unprocessable Entity"}})}postCollectiveOfferFavorites(e){return this.httpRequest.request({method:"POST",url:"/adage-iframe/collective/offers/{offer_id}/favorites",path:{offer_id:e},errors:{403:"Forbidden",422:"Unprocessable Entity"}})}deleteFavoriteForCollectiveOfferTemplate(e){return this.httpRequest.request({method:"DELETE",url:"/adage-iframe/collective/template/{offer_template_id}/favorites",path:{offer_template_id:e},errors:{403:"Forbidden",422:"Unprocessable Entity"}})}postCollectiveTemplateFavorites(e){return this.httpRequest.request({method:"POST",url:"/adage-iframe/collective/templates/{offer_id}/favorites",path:{offer_id:e},errors:{403:"Forbidden",422:"Unprocessable Entity"}})}listFeatures(){return this.httpRequest.request({method:"GET",url:"/adage-iframe/features",errors:{403:"Forbidden",404:"Not Found",422:"Unprocessable Entity"}})}logBookingModalButtonClick(e){return this.httpRequest.request({method:"POST",url:"/adage-iframe/logs/booking-modal-button",body:e,mediaType:"application/json",errors:{403:"Forbidden",404:"Not Found",422:"Unprocessable Entity"}})}logCatalogView(e){return this.httpRequest.request({method:"POST",url:"/adage-iframe/logs/catalog-view",body:e,mediaType:"application/json",errors:{403:"Forbidden",404:"Not Found",422:"Unprocessable Entity"}})}logConsultPlaylistElement(e){return this.httpRequest.request({method:"POST",url:"/adage-iframe/logs/consult-playlist-element",body:e,mediaType:"application/json",errors:{403:"Forbidden",404:"Not Found",422:"Unprocessable Entity"}})}logContactModalButtonClick(e){return this.httpRequest.request({method:"POST",url:"/adage-iframe/logs/contact-modal-button",body:e,mediaType:"application/json",errors:{403:"Forbidden",404:"Not Found",422:"Unprocessable Entity"}})}logFavOfferButtonClick(e){return this.httpRequest.request({method:"POST",url:"/adage-iframe/logs/fav-offer/",body:e,mediaType:"application/json",errors:{403:"Forbidden",404:"Not Found",422:"Unprocessable Entity"}})}logHasSeenWholePlaylist(e){return this.httpRequest.request({method:"POST",url:"/adage-iframe/logs/has-seen-whole-playlist/",body:e,mediaType:"application/json",errors:{403:"Forbidden",404:"Not Found",422:"Unprocessable Entity"}})}logHeaderLinkClick(e){return this.httpRequest.request({method:"POST",url:"/adage-iframe/logs/header-link-click/",body:e,mediaType:"application/json",errors:{403:"Forbidden",404:"Not Found",422:"Unprocessable Entity"}})}logOfferDetailsButtonClick(e){return this.httpRequest.request({method:"POST",url:"/adage-iframe/logs/offer-detail",body:e,mediaType:"application/json",errors:{403:"Forbidden",404:"Not Found",422:"Unprocessable Entity"}})}logOfferTemplateDetailsButtonClick(e){return this.httpRequest.request({method:"POST",url:"/adage-iframe/logs/offer-template-detail",body:e,mediaType:"application/json",errors:{403:"Forbidden",404:"Not Found",422:"Unprocessable Entity"}})}logHasSeenAllPlaylist(e){return this.httpRequest.request({method:"POST",url:"/adage-iframe/logs/playlist",body:e,mediaType:"application/json",errors:{403:"Forbidden",404:"Not Found",422:"Unprocessable Entity"}})}logRequestFormPopinDismiss(e){return this.httpRequest.request({method:"POST",url:"/adage-iframe/logs/request-popin-dismiss",body:e,mediaType:"application/json",errors:{403:"Forbidden",404:"Not Found",422:"Unprocessable Entity"}})}logOpenSatisfactionSurvey(e){return this.httpRequest.request({method:"POST",url:"/adage-iframe/logs/sat-survey",body:e,mediaType:"application/json",errors:{403:"Forbidden",404:"Not Found",422:"Unprocessable Entity"}})}logSearchButtonClick(e){return this.httpRequest.request({method:"POST",url:"/adage-iframe/logs/search-button",body:e,mediaType:"application/json",errors:{403:"Forbidden",404:"Not Found",422:"Unprocessable Entity"}})}logSearchShowMore(e){return this.httpRequest.request({method:"POST",url:"/adage-iframe/logs/search-show-more",body:e,mediaType:"application/json",errors:{403:"Forbidden",404:"Not Found",422:"Unprocessable Entity"}})}logTrackingAutocompleteSuggestionClick(e){return this.httpRequest.request({method:"POST",url:"/adage-iframe/logs/tracking-autocompletion",body:e,mediaType:"application/json",errors:{403:"Forbidden",404:"Not Found",422:"Unprocessable Entity"}})}logTrackingCtaShare(e){return this.httpRequest.request({method:"POST",url:"/adage-iframe/logs/tracking-cta-share",body:e,mediaType:"application/json",errors:{403:"Forbidden",404:"Not Found",422:"Unprocessable Entity"}})}logTrackingFilter(e){return this.httpRequest.request({method:"POST",url:"/adage-iframe/logs/tracking-filter",body:e,mediaType:"application/json",errors:{403:"Forbidden",404:"Not Found",422:"Unprocessable Entity"}})}logTrackingMap(e){return this.httpRequest.request({method:"POST",url:"/adage-iframe/logs/tracking-map",body:e,mediaType:"application/json",errors:{403:"Forbidden",404:"Not Found",422:"Unprocessable Entity"}})}getEducationalOffersCategories(){return this.httpRequest.request({method:"GET",url:"/adage-iframe/offers/categories",errors:{403:"Forbidden",422:"Unprocessable Entity"}})}getEducationalOffersFormats(){return this.httpRequest.request({method:"GET",url:"/adage-iframe/offers/formats",errors:{403:"Forbidden",422:"Unprocessable Entity"}})}getClassroomPlaylist(){return this.httpRequest.request({method:"GET",url:"/adage-iframe/playlists/classroom",errors:{403:"Forbidden",422:"Unprocessable Entity"}})}getLocalOfferersPlaylist(){return this.httpRequest.request({method:"GET",url:"/adage-iframe/playlists/local-offerers",errors:{403:"Forbidden",422:"Unprocessable Entity"}})}newTemplateOffersPlaylist(){return this.httpRequest.request({method:"GET",url:"/adage-iframe/playlists/new_template_offers",errors:{403:"Forbidden",404:"Not Found",422:"Unprocessable Entity"}})}saveRedactorPreferences(e){return this.httpRequest.request({method:"POST",url:"/adage-iframe/redactor/preferences",body:e,mediaType:"application/json",errors:{403:"Forbidden",422:"Unprocessable Entity"}})}createAdageJwtFakeToken(){return this.httpRequest.request({method:"GET",url:"/adage-iframe/testing/token",errors:{403:"Forbidden",404:"Not Found",422:"Unprocessable Entity"}})}getVenueBySiret(e,r=!1){return this.httpRequest.request({method:"GET",url:"/adage-iframe/venues/siret/{siret}",path:{siret:e},query:{getRelative:r},errors:{403:"Forbidden",422:"Unprocessable Entity"}})}getVenueById(e,r=!1){return this.httpRequest.request({method:"GET",url:"/adage-iframe/venues/{venue_id}",path:{venue_id:e},query:{getRelative:r},errors:{403:"Forbidden",422:"Unprocessable Entity"}})}};class Ur{constructor(e,r=Fr){this.request=new r({BASE:(e==null?void 0:e.BASE)??"http://localhost:5001",VERSION:(e==null?void 0:e.VERSION)??"0.1.0",WITH_CREDENTIALS:(e==null?void 0:e.WITH_CREDENTIALS)??!1,CREDENTIALS:(e==null?void 0:e.CREDENTIALS)??"include",TOKEN:e==null?void 0:e.TOKEN,USERNAME:e==null?void 0:e.USERNAME,PASSWORD:e==null?void 0:e.PASSWORD,HEADERS:e==null?void 0:e.HEADERS,ENCODE_PATH:e==null?void 0:e.ENCODE_PATH}),this.default=new Sr(this.request)}}let Cr=class{constructor(e){this.config=e}},Oe=class extends Error{constructor(e,r,i){super(i),this.name="ApiError",this.url=r.url,this.status=r.status,this.statusText=r.statusText,this.body=r.body,this.request=e}},wr=class extends Error{constructor(e){super(e),this.name="CancelError"}get isCancelled(){return!0}};var R,F,v,j,D,W,N,mt;let Or=(mt=class{constructor(e){f(this,R,void 0);f(this,F,void 0);f(this,v,void 0);f(this,j,void 0);f(this,D,void 0);f(this,W,void 0);f(this,N,void 0);p(this,R,!1),p(this,F,!1),p(this,v,!1),p(this,j,[]),p(this,D,new Promise((r,i)=>{p(this,W,r),p(this,N,i);const s=n=>{u(this,R)||u(this,F)||u(this,v)||(p(this,R,!0),u(this,W)&&u(this,W).call(this,n))},o=n=>{u(this,R)||u(this,F)||u(this,v)||(p(this,F,!0),u(this,N)&&u(this,N).call(this,n))},a=n=>{u(this,R)||u(this,F)||u(this,v)||u(this,j).push(n)};return Object.defineProperty(a,"isResolved",{get:()=>u(this,R)}),Object.defineProperty(a,"isRejected",{get:()=>u(this,F)}),Object.defineProperty(a,"isCancelled",{get:()=>u(this,v)}),e(s,o,a)}))}get[Symbol.toStringTag](){return"Cancellable Promise"}then(e,r){return u(this,D).then(e,r)}catch(e){return u(this,D).catch(e)}finally(e){return u(this,D).finally(e)}cancel(){if(!(u(this,R)||u(this,F)||u(this,v))){if(p(this,v,!0),u(this,j).length)try{for(const e of u(this,j))e()}catch(e){console.warn("Cancellation threw an error",e);return}u(this,j).length=0,u(this,N)&&u(this,N).call(this,new wr("Request aborted"))}}get isCancelled(){return u(this,v)}},R=new WeakMap,F=new WeakMap,v=new WeakMap,j=new WeakMap,D=new WeakMap,W=new WeakMap,N=new WeakMap,mt);const Ye=t=>t!=null,se=t=>typeof t=="string",_e=t=>se(t)&&t!=="",Qe=t=>typeof t=="object"&&typeof t.type=="string"&&typeof t.stream=="function"&&typeof t.arrayBuffer=="function"&&typeof t.constructor=="function"&&typeof t.constructor.name=="string"&&/^(Blob|File)$/.test(t.constructor.name)&&/^(Blob|File)$/.test(t[Symbol.toStringTag]),Pt=t=>t instanceof FormData,Pr=t=>{try{return btoa(t)}catch{return Buffer.from(t).toString("base64")}},Ir=t=>{const e=[],r=(s,o)=>{e.push(`${encodeURIComponent(s)}=${encodeURIComponent(String(o))}`)},i=(s,o)=>{Ye(o)&&(Array.isArray(o)?o.forEach(a=>{i(s,a)}):typeof o=="object"?Object.entries(o).forEach(([a,n])=>{i(`${s}[${a}]`,n)}):r(s,o))};return Object.entries(t).forEach(([s,o])=>{i(s,o)}),e.length>0?`?${e.join("&")}`:""},jr=(t,e)=>{const r=t.ENCODE_PATH||encodeURI,i=e.url.replace("{api-version}",t.VERSION).replace(/{(.*?)}/g,(o,a)=>{var n;return(n=e.path)!=null&&n.hasOwnProperty(a)?r(String(e.path[a])):o}),s=`${t.BASE}${i}`;return e.query?`${s}${Ir(e.query)}`:s},Nr=t=>{if(t.formData){const e=new FormData,r=(i,s)=>{se(s)||Qe(s)?e.append(i,s):e.append(i,JSON.stringify(s))};return Object.entries(t.formData).filter(([i,s])=>Ye(s)).forEach(([i,s])=>{Array.isArray(s)?s.forEach(o=>r(i,o)):r(i,s)}),e}},ue=async(t,e)=>typeof e=="function"?e(t):e,Ar=async(t,e)=>{const r=await ue(e,t.TOKEN),i=await ue(e,t.USERNAME),s=await ue(e,t.PASSWORD),o=await ue(e,t.HEADERS),a=Object.entries({Accept:"application/json",...o,...e.headers}).filter(([n,d])=>Ye(d)).reduce((n,[d,c])=>({...n,[d]:String(c)}),{});if(_e(r)&&(a.Authorization=`Bearer ${r}`),_e(i)&&_e(s)){const n=Pr(`${i}:${s}`);a.Authorization=`Basic ${n}`}return e.body&&(e.mediaType?a["Content-Type"]=e.mediaType:Qe(e.body)?a["Content-Type"]=e.body.type||"application/octet-stream":se(e.body)?a["Content-Type"]="text/plain":Pt(e.body)||(a["Content-Type"]="application/json")),new Headers(a)},xr=t=>{var e;if(t.body)return(e=t.mediaType)!=null&&e.includes("/json")?JSON.stringify(t.body):se(t.body)||Qe(t.body)||Pt(t.body)?t.body:JSON.stringify(t.body)},Br=async(t,e,r,i,s,o,a)=>{const n=new AbortController,d={headers:o,body:i??s,method:e.method,signal:n.signal};return t.WITH_CREDENTIALS&&(d.credentials=t.CREDENTIALS),a(()=>n.abort()),fetch(r,d)},kr=(t,e)=>{if(e){const r=t.headers.get(e);if(se(r))return r}},Vr=async t=>{if(t.status!==204)try{const e=t.headers.get("Content-Type");if(e)return e.toLowerCase().startsWith("application/json")?await t.json():await t.text()}catch(e){console.error(e)}},Dr=(t,e)=>{const i={400:"Bad Request",401:"Unauthorized",403:"Forbidden",404:"Not Found",500:"Internal Server Error",502:"Bad Gateway",503:"Service Unavailable",...t.errors}[e.status];if(e.status===503){window.location.assign(We);return}if(i)throw new Oe(t,e,i);if(!e.ok)throw new Oe(t,e,"Generic Error")},$r=(t,e)=>new Or(async(r,i,s)=>{try{const o=jr(t,e),a=Nr(e),n=xr(e),d=await Ar(t,e);if(!s.isCancelled){const c=await Br(t,e,o,n,a,d,s),y=await Vr(c),g=kr(c,e.responseHeader),b={url:o,ok:c.ok,status:c.status,statusText:c.statusText,body:g??y};Dr(e,b),r(b.body)}}catch(o){o instanceof Oe&&o.status===401&&!o.url.includes("/users/current")&&!o.url.includes("/users/signin")&&(window.location.href="/connexion"),o instanceof Error&&(o.message==="Failed to fetch"||o.message.includes("NetworkError"))?console.error(o):i(o)}});let Hr=class extends Cr{constructor(e){super(e)}request(e){return $r(this.config,e)}};class Lr{constructor(e){this.httpRequest=e}getBookingsPro(e=1,r,i,s,o,a,n,d,c,y="forbid"){return this.httpRequest.request({method:"GET",url:"/bookings/pro",query:{page:e,venueId:r,offerId:i,eventDate:s,bookingStatusFilter:o,bookingPeriodBeginningDate:a,bookingPeriodEndingDate:n,offerType:d,exportType:c,extra:y},errors:{403:"Forbidden",422:"Unprocessable Entity"}})}getUserHasBookings(){return this.httpRequest.request({method:"GET",url:"/bookings/pro/userHasBookings",errors:{403:"Forbidden",422:"Unprocessable Entity"}})}getCollectiveBookingsPro(e=1,r,i,s,o,a,n="forbid"){return this.httpRequest.request({method:"GET",url:"/collective/bookings/pro",query:{page:e,venueId:r,eventDate:i,bookingStatusFilter:s,bookingPeriodBeginningDate:o,bookingPeriodEndingDate:a,extra:n},errors:{403:"Forbidden",422:"Unprocessable Entity"}})}getUserHasCollectiveBookings(){return this.httpRequest.request({method:"GET",url:"/collective/bookings/pro/userHasBookings",errors:{403:"Forbidden",422:"Unprocessable Entity"}})}getCollectiveBookingById(e){return this.httpRequest.request({method:"GET",url:"/collective/bookings/{booking_id}",path:{booking_id:e},errors:{403:"Forbidden",422:"Unprocessable Entity"}})}listEducationalDomains(){return this.httpRequest.request({method:"GET",url:"/collective/educational-domains",errors:{403:"Forbidden",422:"Unprocessable Entity"}})}getCollectiveOffers(e,r,i,s,o,a,n,d,c,y){return this.httpRequest.request({method:"GET",url:"/collective/offers",query:{nameOrIsbn:e,offererId:r,status:i,venueId:s,categoryId:o,creationMode:a,periodBeginningDate:n,periodEndingDate:d,collectiveOfferType:c,format:y},errors:{403:"Forbidden",422:"Unprocessable Entity"}})}createCollectiveOffer(e){return this.httpRequest.request({method:"POST",url:"/collective/offers",body:e,mediaType:"application/json",errors:{403:"Forbidden",422:"Unprocessable Entity"}})}createCollectiveOfferTemplate(e){return this.httpRequest.request({method:"POST",url:"/collective/offers-template",body:e,mediaType:"application/json",errors:{403:"Forbidden",422:"Unprocessable Entity"}})}patchCollectiveOffersTemplateActiveStatus(e){return this.httpRequest.request({method:"PATCH",url:"/collective/offers-template/active-status",body:e,mediaType:"application/json",errors:{403:"Forbidden",422:"Unprocessable Entity"}})}getCollectiveOfferRequest(e){return this.httpRequest.request({method:"GET",url:"/collective/offers-template/request/{request_id}",path:{request_id:e},errors:{403:"Forbidden",422:"Unprocessable Entity"}})}getCollectiveOfferTemplate(e){return this.httpRequest.request({method:"GET",url:"/collective/offers-template/{offer_id}",path:{offer_id:e},errors:{403:"Forbidden",422:"Unprocessable Entity"}})}editCollectiveOfferTemplate(e,r){return this.httpRequest.request({method:"PATCH",url:"/collective/offers-template/{offer_id}",path:{offer_id:e},body:r,mediaType:"application/json",errors:{403:"Forbidden",422:"Unprocessable Entity"}})}createCollectiveOfferTemplateFromCollectiveOffer(e,r){return this.httpRequest.request({method:"POST",url:"/collective/offers-template/{offer_id}/",path:{offer_id:e},body:r,mediaType:"application/json",errors:{400:"Bad Request",403:"Forbidden",404:"Not Found",422:"Unprocessable Entity"}})}deleteOfferTemplateImage(e){return this.httpRequest.request({method:"DELETE",url:"/collective/offers-template/{offer_id}/image",path:{offer_id:e},errors:{403:"Forbidden",422:"Unprocessable Entity"}})}attachOfferTemplateImage(e,r){return this.httpRequest.request({method:"POST",url:"/collective/offers-template/{offer_id}/image",path:{offer_id:e},formData:r,mediaType:"multipart/form-data",errors:{403:"Forbidden",422:"Unprocessable Entity"}})}patchCollectiveOfferTemplatePublication(e){return this.httpRequest.request({method:"PATCH",url:"/collective/offers-template/{offer_id}/publish",path:{offer_id:e},errors:{403:"Forbidden",404:"Not Found",422:"Unprocessable Entity"}})}patchCollectiveOffersActiveStatus(e){return this.httpRequest.request({method:"PATCH",url:"/collective/offers/active-status",body:e,mediaType:"application/json",errors:{403:"Forbidden",422:"Unprocessable Entity"}})}patchAllCollectiveOffersActiveStatus(e){return this.httpRequest.request({method:"PATCH",url:"/collective/offers/all-active-status",body:e,mediaType:"application/json",errors:{403:"Forbidden",422:"Unprocessable Entity"}})}getAutocompleteEducationalRedactorsForUai(e,r){return this.httpRequest.request({method:"GET",url:"/collective/offers/redactors",query:{uai:e,candidate:r},errors:{403:"Forbidden",422:"Unprocessable Entity"}})}getCollectiveOffer(e){return this.httpRequest.request({method:"GET",url:"/collective/offers/{offer_id}",path:{offer_id:e},errors:{403:"Forbidden",422:"Unprocessable Entity"}})}editCollectiveOffer(e,r){return this.httpRequest.request({method:"PATCH",url:"/collective/offers/{offer_id}",path:{offer_id:e},body:r,mediaType:"application/json",errors:{403:"Forbidden",422:"Unprocessable Entity"}})}cancelCollectiveOfferBooking(e){return this.httpRequest.request({method:"PATCH",url:"/collective/offers/{offer_id}/cancel_booking",path:{offer_id:e},errors:{400:"Bad Request",403:"Forbidden",404:"Not Found",422:"Unprocessable Entity"}})}duplicateCollectiveOffer(e){return this.httpRequest.request({method:"POST",url:"/collective/offers/{offer_id}/duplicate",path:{offer_id:e},errors:{403:"Forbidden",422:"Unprocessable Entity"}})}patchCollectiveOffersEducationalInstitution(e,r){return this.httpRequest.request({method:"PATCH",url:"/collective/offers/{offer_id}/educational_institution",path:{offer_id:e},body:r,mediaType:"application/json",errors:{403:"Forbidden",404:"Not Found",422:"Unprocessable Entity"}})}deleteOfferImage(e){return this.httpRequest.request({method:"DELETE",url:"/collective/offers/{offer_id}/image",path:{offer_id:e},errors:{403:"Forbidden",422:"Unprocessable Entity"}})}attachOfferImage(e,r){return this.httpRequest.request({method:"POST",url:"/collective/offers/{offer_id}/image",path:{offer_id:e},formData:r,mediaType:"multipart/form-data",errors:{403:"Forbidden",422:"Unprocessable Entity"}})}patchCollectiveOfferPublication(e){return this.httpRequest.request({method:"PATCH",url:"/collective/offers/{offer_id}/publish",path:{offer_id:e},errors:{403:"Forbidden",404:"Not Found",422:"Unprocessable Entity"}})}createCollectiveStock(e){return this.httpRequest.request({method:"POST",url:"/collective/stocks",body:e,mediaType:"application/json",errors:{403:"Forbidden",422:"Unprocessable Entity"}})}editCollectiveStock(e,r){return this.httpRequest.request({method:"PATCH",url:"/collective/stocks/{collective_stock_id}",path:{collective_stock_id:e},body:r,mediaType:"application/json",errors:{400:"Bad Request",401:"Unauthorized",403:"Forbidden",404:"Not Found",422:"Unprocessable Entity"}})}getEducationalPartner(e){return this.httpRequest.request({method:"GET",url:"/cultural-partner/{siret}",path:{siret:e},errors:{401:"Unauthorized",403:"Forbidden",404:"Not Found",422:"Unprocessable Entity"}})}getEducationalPartners(){return this.httpRequest.request({method:"GET",url:"/cultural-partners",errors:{401:"Unauthorized",403:"Forbidden",422:"Unprocessable Entity"}})}getEducationalInstitutions(e=1e3,r=1){return this.httpRequest.request({method:"GET",url:"/educational_institutions",query:{perPageLimit:e,page:r},errors:{401:"Unauthorized",403:"Forbidden",422:"Unprocessable Entity"}})}listFeatures(){return this.httpRequest.request({method:"GET",url:"/features",errors:{403:"Forbidden",422:"Unprocessable Entity"}})}getInvoices(e,r,i){return this.httpRequest.request({method:"GET",url:"/finance/invoices",query:{periodBeginningDate:e,periodEndingDate:r,reimbursementPointId:i},errors:{403:"Forbidden",422:"Unprocessable Entity"}})}getReimbursementPoints(){return this.httpRequest.request({method:"GET",url:"/finance/reimbursement-points",errors:{403:"Forbidden",422:"Unprocessable Entity"}})}getNationalPrograms(){return this.httpRequest.request({method:"GET",url:"/national-programs",errors:{403:"Forbidden",422:"Unprocessable Entity"}})}createOfferer(e){return this.httpRequest.request({method:"POST",url:"/offerers",body:e,mediaType:"application/json",errors:{403:"Forbidden",422:"Unprocessable Entity"}})}deleteApiKey(e){return this.httpRequest.request({method:"DELETE",url:"/offerers/api_keys/{api_key_prefix}",path:{api_key_prefix:e},errors:{403:"Forbidden",422:"Unprocessable Entity"}})}listEducationalOfferers(e){return this.httpRequest.request({method:"GET",url:"/offerers/educational",query:{offerer_id:e},errors:{403:"Forbidden",422:"Unprocessable Entity"}})}listOfferersNames(e,r,i){return this.httpRequest.request({method:"GET",url:"/offerers/names",query:{validated:e,validated_for_user:r,offerer_id:i},errors:{403:"Forbidden",422:"Unprocessable Entity"}})}saveNewOnboardingData(e){return this.httpRequest.request({method:"POST",url:"/offerers/new",body:e,mediaType:"application/json",errors:{403:"Forbidden",422:"Unprocessable Entity"}})}getOfferer(e){return this.httpRequest.request({method:"GET",url:"/offerers/{offerer_id}",path:{offerer_id:e},errors:{403:"Forbidden",422:"Unprocessable Entity"}})}generateApiKeyRoute(e){return this.httpRequest.request({method:"POST",url:"/offerers/{offerer_id}/api_keys",path:{offerer_id:e},errors:{403:"Forbidden",422:"Unprocessable Entity"}})}getOffererBankAccountsAndAttachedVenues(e){return this.httpRequest.request({method:"GET",url:"/offerers/{offerer_id}/bank-accounts",path:{offerer_id:e},errors:{403:"Forbidden",422:"Unprocessable Entity"}})}linkVenueToBankAccount(e,r,i){return this.httpRequest.request({method:"PATCH",url:"/offerers/{offerer_id}/bank-accounts/{bank_account_id}",path:{offerer_id:e,bank_account_id:r},body:i,mediaType:"application/json",errors:{403:"Forbidden",422:"Unprocessable Entity"}})}getOffererStatsDashboardUrl(e){return this.httpRequest.request({method:"GET",url:"/offerers/{offerer_id}/dashboard",path:{offerer_id:e},errors:{403:"Forbidden",422:"Unprocessable Entity"}})}canOffererCreateEducationalOffer(e){return this.httpRequest.request({method:"GET",url:"/offerers/{offerer_id}/eac-eligibility",path:{offerer_id:e},errors:{403:"Forbidden",422:"Unprocessable Entity"}})}inviteMember(e,r){return this.httpRequest.request({method:"POST",url:"/offerers/{offerer_id}/invite",path:{offerer_id:e},body:r,mediaType:"application/json",errors:{403:"Forbidden",422:"Unprocessable Entity"}})}getOffererMembers(e){return this.httpRequest.request({method:"GET",url:"/offerers/{offerer_id}/members",path:{offerer_id:e},errors:{403:"Forbidden",422:"Unprocessable Entity"}})}getAvailableReimbursementPoints(e){return this.httpRequest.request({method:"GET",url:"/offerers/{offerer_id}/reimbursement-points",path:{offerer_id:e},errors:{403:"Forbidden",422:"Unprocessable Entity"}})}getOffererStats(e){return this.httpRequest.request({method:"GET",url:"/offerers/{offerer_id}/stats",path:{offerer_id:e},errors:{403:"Forbidden",422:"Unprocessable Entity"}})}getOffererV2Stats(e){return this.httpRequest.request({method:"GET",url:"/offerers/{offerer_id}/v2/stats",path:{offerer_id:e},errors:{403:"Forbidden",422:"Unprocessable Entity"}})}listOffers(e,r,i,s,o,a,n,d,c){return this.httpRequest.request({method:"GET",url:"/offers",query:{nameOrIsbn:e,offererId:r,status:i,venueId:s,categoryId:o,creationMode:a,periodBeginningDate:n,periodEndingDate:d,collectiveOfferType:c},errors:{403:"Forbidden",422:"Unprocessable Entity"}})}postOffer(e){return this.httpRequest.request({method:"POST",url:"/offers",body:e,mediaType:"application/json",errors:{403:"Forbidden",422:"Unprocessable Entity"}})}patchOffersActiveStatus(e){return this.httpRequest.request({method:"PATCH",url:"/offers/active-status",body:e,mediaType:"application/json",errors:{403:"Forbidden",422:"Unprocessable Entity"}})}patchAllOffersActiveStatus(e){return this.httpRequest.request({method:"PATCH",url:"/offers/all-active-status",body:e,mediaType:"application/json",errors:{403:"Forbidden",422:"Unprocessable Entity"}})}getCategories(){return this.httpRequest.request({method:"GET",url:"/offers/categories",errors:{403:"Forbidden",422:"Unprocessable Entity"}})}deleteDraftOffers(e){return this.httpRequest.request({method:"POST",url:"/offers/delete-draft",body:e,mediaType:"application/json",errors:{403:"Forbidden",422:"Unprocessable Entity"}})}getMusicTypes(){return this.httpRequest.request({method:"GET",url:"/offers/music-types",errors:{403:"Forbidden",422:"Unprocessable Entity"}})}patchPublishOffer(e){return this.httpRequest.request({method:"PATCH",url:"/offers/publish",body:e,mediaType:"application/json",errors:{403:"Forbidden",404:"Not Found",422:"Unprocessable Entity"}})}createThumbnail(e){return this.httpRequest.request({method:"POST",url:"/offers/thumbnails/",formData:e,mediaType:"multipart/form-data",errors:{403:"Forbidden",422:"Unprocessable Entity"}})}deleteThumbnail(e){return this.httpRequest.request({method:"DELETE",url:"/offers/thumbnails/{offer_id}",path:{offer_id:e},errors:{403:"Forbidden",422:"Unprocessable Entity"}})}getOffer(e){return this.httpRequest.request({method:"GET",url:"/offers/{offer_id}",path:{offer_id:e},errors:{403:"Forbidden",422:"Unprocessable Entity"}})}patchOffer(e,r){return this.httpRequest.request({method:"PATCH",url:"/offers/{offer_id}",path:{offer_id:e},body:r,mediaType:"application/json",errors:{403:"Forbidden",422:"Unprocessable Entity"}})}postPriceCategories(e,r){return this.httpRequest.request({method:"POST",url:"/offers/{offer_id}/price_categories",path:{offer_id:e},body:r,mediaType:"application/json",errors:{403:"Forbidden",422:"Unprocessable Entity"}})}deletePriceCategory(e,r){return this.httpRequest.request({method:"DELETE",url:"/offers/{offer_id}/price_categories/{price_category_id}",path:{offer_id:e,price_category_id:r},errors:{403:"Forbidden",422:"Unprocessable Entity"}})}getStocksStats(e){return this.httpRequest.request({method:"GET",url:"/offers/{offer_id}/stocks-stats",path:{offer_id:e},errors:{403:"Forbidden",422:"Unprocessable Entity"}})}getStocks(e,r,i,s,o,a=!1,n=1,d=20){return this.httpRequest.request({method:"GET",url:"/offers/{offer_id}/stocks/",path:{offer_id:e},query:{date:r,time:i,price_category_id:s,order_by:o,order_by_desc:a,page:n,stocks_limit_per_page:d},errors:{403:"Forbidden",422:"Unprocessable Entity"}})}deleteAllFilteredStocks(e,r){return this.httpRequest.request({method:"POST",url:"/offers/{offer_id}/stocks/all-delete",path:{offer_id:e},body:r,mediaType:"application/json",errors:{403:"Forbidden",422:"Unprocessable Entity"}})}deleteStocks(e,r){return this.httpRequest.request({method:"POST",url:"/offers/{offer_id}/stocks/delete",path:{offer_id:e},body:r,mediaType:"application/json",errors:{403:"Forbidden",422:"Unprocessable Entity"}})}getReimbursementsCsv(e,r,i){return this.httpRequest.request({method:"GET",url:"/reimbursements/csv",query:{venueId:e,reimbursementPeriodBeginningDate:r,reimbursementPeriodEndingDate:i},errors:{403:"Forbidden",422:"Unprocessable Entity"}})}getSirenInfo(e){return this.httpRequest.request({method:"GET",url:"/sirene/siren/{siren}",path:{siren:e},errors:{403:"Forbidden",422:"Unprocessable Entity"}})}getSiretInfo(e){return this.httpRequest.request({method:"GET",url:"/sirene/siret/{siret}",path:{siret:e},errors:{403:"Forbidden",422:"Unprocessable Entity"}})}upsertStocks(e){return this.httpRequest.request({method:"POST",url:"/stocks/bulk",body:e,mediaType:"application/json",errors:{403:"Forbidden",422:"Unprocessable Entity"}})}deleteStock(e){return this.httpRequest.request({method:"DELETE",url:"/stocks/{stock_id}",path:{stock_id:e},errors:{403:"Forbidden",422:"Unprocessable Entity"}})}cookiesConsent(e){return this.httpRequest.request({method:"POST",url:"/users/cookies",body:e,mediaType:"application/json",errors:{400:"Bad Request",403:"Forbidden",422:"Unprocessable Entity"}})}getProfile(){return this.httpRequest.request({method:"GET",url:"/users/current",errors:{403:"Forbidden",422:"Unprocessable Entity"}})}postUserEmail(e){return this.httpRequest.request({method:"POST",url:"/users/email",body:e,mediaType:"application/json",errors:{403:"Forbidden",422:"Unprocessable Entity"}})}getUserEmailPendingValidation(){return this.httpRequest.request({method:"GET",url:"/users/email_pending_validation",errors:{403:"Forbidden",422:"Unprocessable Entity"}})}patchUserIdentity(e){return this.httpRequest.request({method:"PATCH",url:"/users/identity",body:e,mediaType:"application/json",errors:{403:"Forbidden",422:"Unprocessable Entity"}})}postNewPassword(e){return this.httpRequest.request({method:"POST",url:"/users/new-password",body:e,mediaType:"application/json",errors:{400:"Bad Request",403:"Forbidden",422:"Unprocessable Entity"}})}postChangePassword(e){return this.httpRequest.request({method:"POST",url:"/users/password",body:e,mediaType:"application/json",errors:{400:"Bad Request",403:"Forbidden",422:"Unprocessable Entity"}})}patchUserPhone(e){return this.httpRequest.request({method:"PATCH",url:"/users/phone",body:e,mediaType:"application/json",errors:{403:"Forbidden",422:"Unprocessable Entity"}})}postProFlags(e){return this.httpRequest.request({method:"POST",url:"/users/pro_flags",body:e,mediaType:"application/json",errors:{400:"Bad Request",403:"Forbidden",422:"Unprocessable Entity"}})}resetPassword(e){return this.httpRequest.request({method:"POST",url:"/users/reset-password",body:e,mediaType:"application/json",errors:{403:"Forbidden",422:"Unprocessable Entity"}})}patchProUserRgsSeen(){return this.httpRequest.request({method:"PATCH",url:"/users/rgs-seen",errors:{403:"Forbidden",422:"Unprocessable Entity"}})}signin(e){return this.httpRequest.request({method:"POST",url:"/users/signin",body:e,mediaType:"application/json",errors:{403:"Forbidden",422:"Unprocessable Entity"}})}signout(){return this.httpRequest.request({method:"GET",url:"/users/signout",errors:{403:"Forbidden",422:"Unprocessable Entity"}})}checkActivationTokenExists(e){return this.httpRequest.request({method:"GET",url:"/users/token/{token}",path:{token:e},errors:{403:"Forbidden",404:"Not Found",422:"Unprocessable Entity"}})}patchUserTutoSeen(){return this.httpRequest.request({method:"PATCH",url:"/users/tuto-seen",errors:{403:"Forbidden",422:"Unprocessable Entity"}})}patchValidateEmail(e){return this.httpRequest.request({method:"PATCH",url:"/users/validate_email",body:e,mediaType:"application/json",errors:{403:"Forbidden",422:"Unprocessable Entity"}})}signupProV2(e){return this.httpRequest.request({method:"POST",url:"/v2/users/signup/pro",body:e,mediaType:"application/json",errors:{403:"Forbidden",422:"Unprocessable Entity"}})}validateUser(e){return this.httpRequest.request({method:"PATCH",url:"/validate/user/{token}",path:{token:e},errors:{403:"Forbidden",422:"Unprocessable Entity"}})}fetchVenueLabels(){return this.httpRequest.request({method:"GET",url:"/venue-labels",errors:{403:"Forbidden",422:"Unprocessable Entity"}})}getVenueTypes(){return this.httpRequest.request({method:"GET",url:"/venue-types",errors:{403:"Forbidden",422:"Unprocessable Entity"}})}listVenueProviders(e){return this.httpRequest.request({method:"GET",url:"/venueProviders",query:{venueId:e},errors:{403:"Forbidden",422:"Unprocessable Entity"}})}createVenueProvider(e){return this.httpRequest.request({method:"POST",url:"/venueProviders",body:e,mediaType:"application/json",errors:{403:"Forbidden",422:"Unprocessable Entity"}})}updateVenueProvider(e){return this.httpRequest.request({method:"PUT",url:"/venueProviders",body:e,mediaType:"application/json",errors:{403:"Forbidden",422:"Unprocessable Entity"}})}deleteVenueProvider(e){return this.httpRequest.request({method:"DELETE",url:"/venueProviders/{venue_provider_id}",path:{venue_provider_id:e},errors:{403:"Forbidden",422:"Unprocessable Entity"}})}getVenues(e,r,i){return this.httpRequest.request({method:"GET",url:"/venues",query:{validated:e,activeOfferersOnly:r,offererId:i},errors:{403:"Forbidden",422:"Unprocessable Entity"}})}postCreateVenue(e){return this.httpRequest.request({method:"POST",url:"/venues",body:e,mediaType:"application/json",errors:{403:"Forbidden",422:"Unprocessable Entity"}})}getVenuesEducationalStatuses(){return this.httpRequest.request({method:"GET",url:"/venues-educational-statuses",errors:{403:"Forbidden",422:"Unprocessable Entity"}})}getVenuesOfOffererFromSiret(e){return this.httpRequest.request({method:"GET",url:"/venues/siret/{siret}",path:{siret:e},errors:{403:"Forbidden",422:"Unprocessable Entity"}})}getVenue(e){return this.httpRequest.request({method:"GET",url:"/venues/{venue_id}",path:{venue_id:e},errors:{403:"Forbidden",422:"Unprocessable Entity"}})}editVenue(e,r){return this.httpRequest.request({method:"PATCH",url:"/venues/{venue_id}",path:{venue_id:e},body:r,mediaType:"application/json",errors:{403:"Forbidden",422:"Unprocessable Entity"}})}deleteVenueBanner(e){return this.httpRequest.request({method:"DELETE",url:"/venues/{venue_id}/banner",path:{venue_id:e},errors:{403:"Forbidden",422:"Unprocessable Entity"}})}getVenueCollectiveData(e){return this.httpRequest.request({method:"GET",url:"/venues/{venue_id}/collective-data",path:{venue_id:e},errors:{403:"Forbidden",422:"Unprocessable Entity"}})}editVenueCollectiveData(e,r){return this.httpRequest.request({method:"PATCH",url:"/venues/{venue_id}/collective-data",path:{venue_id:e},body:r,mediaType:"application/json",errors:{403:"Forbidden",422:"Unprocessable Entity"}})}getVenueStatsDashboardUrl(e){return this.httpRequest.request({method:"GET",url:"/venues/{venue_id}/dashboard",path:{venue_id:e},errors:{403:"Forbidden",422:"Unprocessable Entity"}})}linkVenueToPricingPoint(e,r){return this.httpRequest.request({method:"POST",url:"/venues/{venue_id}/pricing-point",path:{venue_id:e},body:r,mediaType:"application/json",errors:{403:"Forbidden",422:"Unprocessable Entity"}})}getVenueStats(e){return this.httpRequest.request({method:"GET",url:"/venues/{venue_id}/stats",path:{venue_id:e},errors:{403:"Forbidden",422:"Unprocessable Entity"}})}}class Gr{constructor(e,r=Hr){this.request=new r({BASE:(e==null?void 0:e.BASE)??"http://localhost:5001",VERSION:(e==null?void 0:e.VERSION)??"1",WITH_CREDENTIALS:(e==null?void 0:e.WITH_CREDENTIALS)??!1,CREDENTIALS:(e==null?void 0:e.CREDENTIALS)??"include",TOKEN:e==null?void 0:e.TOKEN,USERNAME:e==null?void 0:e.USERNAME,PASSWORD:e==null?void 0:e.PASSWORD,HEADERS:e==null?void 0:e.HEADERS,ENCODE_PATH:e==null?void 0:e.ENCODE_PATH}),this.default=new Lr(this.request)}}class Mr{constructor(e){this.config=e}}class Pe extends Error{constructor(e,r,i){super(i),this.name="ApiError",this.url=r.url,this.status=r.status,this.statusText=r.statusText,this.body=r.body,this.request=e}}class Wr extends Error{constructor(e){super(e),this.name="CancelError"}get isCancelled(){return!0}}var S,U,q,A,$,z,x;class zr{constructor(e){f(this,S,void 0);f(this,U,void 0);f(this,q,void 0);f(this,A,void 0);f(this,$,void 0);f(this,z,void 0);f(this,x,void 0);p(this,S,!1),p(this,U,!1),p(this,q,!1),p(this,A,[]),p(this,$,new Promise((r,i)=>{p(this,z,r),p(this,x,i);const s=n=>{u(this,S)||u(this,U)||u(this,q)||(p(this,S,!0),u(this,z)&&u(this,z).call(this,n))},o=n=>{u(this,S)||u(this,U)||u(this,q)||(p(this,U,!0),u(this,x)&&u(this,x).call(this,n))},a=n=>{u(this,S)||u(this,U)||u(this,q)||u(this,A).push(n)};return Object.defineProperty(a,"isResolved",{get:()=>u(this,S)}),Object.defineProperty(a,"isRejected",{get:()=>u(this,U)}),Object.defineProperty(a,"isCancelled",{get:()=>u(this,q)}),e(s,o,a)}))}get[Symbol.toStringTag](){return"Cancellable Promise"}then(e,r){return u(this,$).then(e,r)}catch(e){return u(this,$).catch(e)}finally(e){return u(this,$).finally(e)}cancel(){if(!(u(this,S)||u(this,U)||u(this,q))){if(p(this,q,!0),u(this,A).length)try{for(const e of u(this,A))e()}catch(e){console.warn("Cancellation threw an error",e);return}u(this,A).length=0,u(this,x)&&u(this,x).call(this,new Wr("Request aborted"))}}get isCancelled(){return u(this,q)}}S=new WeakMap,U=new WeakMap,q=new WeakMap,A=new WeakMap,$=new WeakMap,z=new WeakMap,x=new WeakMap;const Xe=t=>t!=null,oe=t=>typeof t=="string",Te=t=>oe(t)&&t!=="",Ze=t=>typeof t=="object"&&typeof t.type=="string"&&typeof t.stream=="function"&&typeof t.arrayBuffer=="function"&&typeof t.constructor=="function"&&typeof t.constructor.name=="string"&&/^(Blob|File)$/.test(t.constructor.name)&&/^(Blob|File)$/.test(t[Symbol.toStringTag]),It=t=>t instanceof FormData,Jr=t=>{try{return btoa(t)}catch{return Buffer.from(t).toString("base64")}},Kr=t=>{const e=[],r=(s,o)=>{e.push(`${encodeURIComponent(s)}=${encodeURIComponent(String(o))}`)},i=(s,o)=>{Xe(o)&&(Array.isArray(o)?o.forEach(a=>{i(s,a)}):typeof o=="object"?Object.entries(o).forEach(([a,n])=>{i(`${s}[${a}]`,n)}):r(s,o))};return Object.entries(t).forEach(([s,o])=>{i(s,o)}),e.length>0?`?${e.join("&")}`:""},Yr=(t,e)=>{const r=t.ENCODE_PATH||encodeURI,i=e.url.replace("{api-version}",t.VERSION).replace(/{(.*?)}/g,(o,a)=>{var n;return(n=e.path)!=null&&n.hasOwnProperty(a)?r(String(e.path[a])):o}),s=`${t.BASE}${i}`;return e.query?`${s}${Kr(e.query)}`:s},Qr=t=>{if(t.formData){const e=new FormData,r=(i,s)=>{oe(s)||Ze(s)?e.append(i,s):e.append(i,JSON.stringify(s))};return Object.entries(t.formData).filter(([i,s])=>Xe(s)).forEach(([i,s])=>{Array.isArray(s)?s.forEach(o=>r(i,o)):r(i,s)}),e}},de=async(t,e)=>typeof e=="function"?e(t):e,Xr=async(t,e)=>{const r=await de(e,t.TOKEN),i=await de(e,t.USERNAME),s=await de(e,t.PASSWORD),o=await de(e,t.HEADERS),a=Object.entries({Accept:"application/json",...o,...e.headers}).filter(([n,d])=>Xe(d)).reduce((n,[d,c])=>({...n,[d]:String(c)}),{});if(Te(r)&&(a.Authorization=`Bearer ${r}`),Te(i)&&Te(s)){const n=Jr(`${i}:${s}`);a.Authorization=`Basic ${n}`}return e.body&&(e.mediaType?a["Content-Type"]=e.mediaType:Ze(e.body)?a["Content-Type"]=e.body.type||"application/octet-stream":oe(e.body)?a["Content-Type"]="text/plain":It(e.body)||(a["Content-Type"]="application/json")),new Headers(a)},Zr=t=>{var e;if(t.body)return(e=t.mediaType)!=null&&e.includes("/json")?JSON.stringify(t.body):oe(t.body)||Ze(t.body)||It(t.body)?t.body:JSON.stringify(t.body)},es=async(t,e,r,i,s,o,a)=>{const n=new AbortController,d={headers:o,body:i??s,method:e.method,signal:n.signal};return t.WITH_CREDENTIALS&&(d.credentials=t.CREDENTIALS),a(()=>n.abort()),fetch(r,d)},ts=(t,e)=>{if(e){const r=t.headers.get(e);if(oe(r))return r}},rs=async t=>{if(t.status!==204)try{const e=t.headers.get("Content-Type");if(e)return e.toLowerCase().startsWith("application/json")?await t.json():await t.text()}catch(e){console.error(e)}},ss=(t,e)=>{const i={400:"Bad Request",401:"Unauthorized",403:"Forbidden",404:"Not Found",500:"Internal Server Error",502:"Bad Gateway",503:"Service Unavailable",...t.errors}[e.status];if(e.status===503){window.location.assign(We);return}if(i)throw new Pe(t,e,i);if(!e.ok)throw new Pe(t,e,"Generic Error")},os=(t,e)=>new zr(async(r,i,s)=>{try{const o=Yr(t,e),a=Qr(e),n=Zr(e),d=await Xr(t,e);if(!s.isCancelled){const c=await es(t,e,o,n,a,d,s),y=await rs(c),g=ts(c,e.responseHeader),b={url:o,ok:c.ok,status:c.status,statusText:c.statusText,body:g??y};ss(e,b),r(b.body)}}catch(o){o instanceof Pe&&o.status===401&&!o.url.includes("/users/current")&&!o.url.includes("/users/signin")&&(window.location.href="/connexion"),o instanceof Error&&(o.message==="Failed to fetch"||o.message.includes("NetworkError"))?console.error(o):i(o)}});class is extends Mr{constructor(e){super(e)}request(e){return os(this.config,e)}}class as{constructor(e){this.httpRequest=e}cancelCollectiveBooking(e){return this.httpRequest.request({method:"PATCH",url:"/v2/collective/bookings/{booking_id}",path:{booking_id:e},errors:{401:"Authentification nécessaire",422:"Unprocessable Entity"}})}listCategories(){return this.httpRequest.request({method:"GET",url:"/v2/collective/categories",errors:{401:"Authentification nécessaire",422:"Unprocessable Entity"}})}listEducationalDomains(){return this.httpRequest.request({method:"GET",url:"/v2/collective/educational-domains",errors:{401:"Authentification nécessaire",422:"Unprocessable Entity"}})}listEducationalInstitutions(e,r,i,s,o,a,n=20){return this.httpRequest.request({method:"GET",url:"/v2/collective/educational-institutions/",query:{id:e,name:r,institutionType:i,city:s,postalCode:o,uai:a,limit:n},errors:{400:"Requête malformée",401:"Authentification nécessaire",422:"Unprocessable Entity"}})}getNationalPrograms(){return this.httpRequest.request({method:"GET",url:"/v2/collective/national-programs/",errors:{401:"Authentification nécessaire",403:"Vous n'avez pas les droits nécessaires pour voir ces informations",422:"Unprocessable Entity"}})}getOffererVenues(e){return this.httpRequest.request({method:"GET",url:"/v2/collective/offerer_venues",query:{siren:e},errors:{401:"Authentification nécessaire",422:"Unprocessable Entity"}})}getCollectiveOffersPublic(e,r,i,s){return this.httpRequest.request({method:"GET",url:"/v2/collective/offers/",query:{status:e,venueId:r,periodBeginningDate:i,periodEndingDate:s},errors:{401:"Authentification nécessaire",403:"Vous n'avez pas les droits nécessaires pour voir cette offre collective",404:"L'offre collective n'existe pas",422:"Unprocessable Entity"}})}postCollectiveOfferPublic(e){return this.httpRequest.request({method:"POST",url:"/v2/collective/offers/",body:e,mediaType:"application/json",errors:{400:"Requête malformée",401:"Authentification nécessaire",403:"Non éligible pour les offres collectives",404:"L'une des resources pour la création de l'offre n'a pas été trouvée",422:"Unprocessable Entity"}})}getOffersFormats(){return this.httpRequest.request({method:"GET",url:"/v2/collective/offers/formats",errors:{401:"Authentification nécessaire",403:"Vous n'avez pas les droits nécessaires pour voir cette offre collective",404:"L'offre collective n'existe pas",422:"Unprocessable Entity"}})}getCollectiveOfferPublic(e){return this.httpRequest.request({method:"GET",url:"/v2/collective/offers/{offer_id}",path:{offer_id:e},errors:{401:"Authentification nécessaire",403:"Vous n'avez pas les droits nécessaires pour voir cette offre collective",404:"L'offre collective n'existe pas",422:"Unprocessable Entity"}})}patchCollectiveOfferPublic(e,r){return this.httpRequest.request({method:"PATCH",url:"/v2/collective/offers/{offer_id}",path:{offer_id:e},body:r,mediaType:"application/json",errors:{400:"Requête malformée",401:"Authentification nécessaire",403:"Vous n'avez pas les droits nécessaires pour éditer cette offre collective",404:"L'une des resources pour la création de l'offre n'a pas été trouvée",422:"Cetains champs ne peuvent pas être édités selon l'état de l'offre"}})}listStudentsLevels(){return this.httpRequest.request({method:"GET",url:"/v2/collective/student-levels",errors:{401:"Authentification nécessaire",422:"Unprocessable Entity"}})}listSubcategories(){return this.httpRequest.request({method:"GET",url:"/v2/collective/subcategories",errors:{401:"Authentification nécessaire",422:"Unprocessable Entity"}})}listVenues(){return this.httpRequest.request({method:"GET",url:"/v2/collective/venues",errors:{401:"Authentification nécessaire",422:"Unprocessable Entity"}})}}class ns{constructor(e){this.httpRequest=e}patchCancelBookingByToken(e){return this.httpRequest.request({method:"PATCH",url:"/v2/bookings/cancel/token/{token}",path:{token:e},errors:{401:"Authentification nécessaire",403:"Vous n'avez pas les droits nécessaires pour annuler cette contremarque ou la réservation a déjà été validée",404:"La contremarque n'existe pas",410:"La contremarque a déjà été annulée",422:"Unprocessable Entity"}})}patchBookingKeepByToken(e){return this.httpRequest.request({method:"PATCH",url:"/v2/bookings/keep/token/{token}",path:{token:e},errors:{401:"Authentification nécessaire",403:"Vous n'avez pas les droits nécessaires pour voir cette contremarque",404:"La contremarque n'existe pas",410:"La requête est refusée car la contremarque n'a pas encore été validée, a été annulée, ou son remboursement a été initié",422:"Unprocessable Entity"}})}getBookingByTokenV2(e){return this.httpRequest.request({method:"GET",url:"/v2/bookings/token/{token}",path:{token:e},errors:{401:"Authentification nécessaire",403:"Vous n'avez pas les droits nécessaires pour voir cette contremarque",404:"La contremarque n'existe pas",410:`Cette contremarque a été validée.
        En l’invalidant vous indiquez qu’elle n’a pas été utilisée et vous ne serez pas remboursé.`,422:"Unprocessable Entity"}})}patchBookingUseByToken(e){return this.httpRequest.request({method:"PATCH",url:"/v2/bookings/use/token/{token}",path:{token:e},errors:{401:"Authentification nécessaire",403:"Vous n'avez pas les droits nécessaires pour voir cette contremarque",404:"La contremarque n'existe pas",410:`Cette contremarque a été validée.
        En l’invalidant vous indiquez qu’elle n’a pas été utilisée et vous ne serez pas remboursé.`,422:"Unprocessable Entity"}})}}class ls{constructor(e,r=is){this.request=new r({BASE:(e==null?void 0:e.BASE)??"http://localhost:5001",VERSION:(e==null?void 0:e.VERSION)??"2",WITH_CREDENTIALS:(e==null?void 0:e.WITH_CREDENTIALS)??!1,CREDENTIALS:(e==null?void 0:e.CREDENTIALS)??"include",TOKEN:e==null?void 0:e.TOKEN,USERNAME:e==null?void 0:e.USERNAME,PASSWORD:e==null?void 0:e.PASSWORD,HEADERS:e==null?void 0:e.HEADERS,ENCODE_PATH:e==null?void 0:e.ENCODE_PATH}),this.apiOffresCollectives=new as(this.request),this.dPrCiEApiContremarque=new ns(this.request)}}const us=new URLSearchParams(window.location.search),ds=us.get("token"),jt={BASE:Ft,VERSION:"1",WITH_CREDENTIALS:!0,CREDENTIALS:"include"},cs={BASE:Ft,VERSION:"1",WITH_CREDENTIALS:!1,CREDENTIALS:"omit",TOKEN:ds??""},it=new Gr(jt).default;new ls(jt).dPrCiEApiContremarque;new Ur(cs).default;const ps={list:[]},Nt=Rt({name:"features",initialState:ps,reducers:{updateFeatures:(t,e)=>{t.list=e.payload}}});Nt.reducer;const{updateFeatures:at}=Nt.actions,hs={currentUser:null},At=Rt({name:"user",initialState:hs,reducers:{updateUser:(t,e)=>{t.currentUser=e.payload}}});At.reducer;const{updateUser:nt}=At.actions,Ie=({message:t="Chargement en cours",className:e})=>{const[r,i]=m.useState(3),[s,o]=m.useState(null);return m.useEffect(()=>{s&&window.clearInterval(s);const a=window.setInterval(()=>{i(n=>n%3+1)},500);return o(a),()=>{window.clearInterval(a)}},[]),l.jsxs("div",{className:fe("loading-spinner",e),"data-testid":"spinner",children:[l.jsx(ze,{src:Mt,alt:"",className:"loading-spinner-icon"}),l.jsx("div",{className:"content","data-dots":Array(r).fill(".").join(""),children:t})]})};try{Ie.displayName="Spinner",Ie.__docgenInfo={description:"",displayName:"Spinner",props:{message:{defaultValue:{value:"Chargement en cours"},description:"",name:"message",required:!1,type:{name:"string"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}}}}}catch{}const je=({children:t,isAdageIframe:e=!1})=>{const r=Gt(),[i,s]=m.useState(!1);return m.useEffect(()=>{const o=async()=>{if(!e)try{const d=await it.getProfile();r(nt(d))}catch{r(nt(null))}},a=async()=>{try{const d=await it.listFeatures();r(at(d))}catch{r(at([]))}};(async()=>{await Promise.all([o(),a()]),s(!0)})()},[e,r]),i?t:l.jsx("main",{id:"content",className:"spinner-container",children:l.jsx(Ie,{})})};try{je.displayName="StoreProvider",je.__docgenInfo={description:"",displayName:"StoreProvider",props:{isAdageIframe:{defaultValue:{value:"false"},description:"",name:"isAdageIframe",required:!1,type:{name:"boolean"}}}}}catch{}const ms=""+new URL("offer-home-shell-0XuNO5pr.png",import.meta.url).href,fs=""+new URL("offer-shell-NTSb2-4f.png",import.meta.url).href,lt={"image-preview-shell":"_image-preview-shell_1xnl4_1","image-preview-home-preview":"_image-preview-home-preview_1xnl4_6"},Re={"image-preview-shell":"_image-preview-shell_glg9w_1","image-preview-blur-offer-preview":"_image-preview-blur-offer-preview_glg9w_7","image-preview-offer-preview":"_image-preview-offer-preview_glg9w_16"},J=({imageUrl:t})=>l.jsxs(Ct,{children:[l.jsxs(ce,{title:"Page d’accueil",children:[l.jsx("img",{alt:"",className:lt["image-preview-shell"],src:ms}),l.jsx("img",{"data-testid":"app-preview-offer-img-home",alt:"",className:lt["image-preview-home-preview"],src:t})]}),l.jsxs(ce,{title:"Détails de l’offre",children:[l.jsx("img",{alt:"",className:Re["image-preview-blur-offer-preview"],src:t}),l.jsx("img",{alt:"",className:Re["image-preview-shell"],src:fs}),l.jsx("img",{"data-testid":"app-preview-offer-img",alt:"",className:Re["image-preview-offer-preview"],src:t})]})]});try{J.displayName="AppPreviewOffer",J.__docgenInfo={description:"",displayName:"AppPreviewOffer",props:{imageUrl:{defaultValue:null,description:"",name:"imageUrl",required:!0,type:{name:"string"}}}}}catch{}const ys=""+new URL("venue-home-shell-oOWagqMM.png",import.meta.url).href,bs=""+new URL("venue-shell-Y2dRTB5B.png",import.meta.url).href,ut={"image-preview-shell":"_image-preview-shell_3dbf9_1","image-preview-home-preview":"_image-preview-home-preview_3dbf9_6"},Fe={"image-preview-shell":"_image-preview-shell_gbu12_1","image-preview-blur-venue-preview":"_image-preview-blur-venue-preview_gbu12_7","image-preview-venue-preview":"_image-preview-venue-preview_gbu12_16"},pe=({imageUrl:t})=>{const e=wt(),r=m.useCallback(()=>{e.error("Une erreur est survenue. Merci de réessayer plus tard")},[e]);return l.jsxs(Ct,{children:[l.jsxs(ce,{title:"Page d’accueil",children:[l.jsx("img",{alt:"",className:ut["image-preview-shell"],src:ys}),l.jsx("img",{"data-testid":"app-preview-venue-img-home",alt:"",className:ut["image-preview-home-preview"],onError:r,src:t})]}),l.jsxs(ce,{title:"Page Lieu",children:[l.jsx("img",{alt:"",className:Fe["image-preview-blur-venue-preview"],src:t}),l.jsx("img",{alt:"",className:Fe["image-preview-shell"],src:bs}),l.jsx("img",{"data-testid":"app-preview-venue-img",alt:"",className:Fe["image-preview-venue-preview"],src:t})]})]})};try{pe.displayName="AppPreviewVenue",pe.__docgenInfo={description:"",displayName:"AppPreviewVenue",props:{imageUrl:{defaultValue:null,description:"",name:"imageUrl",required:!0,type:{name:"string"}}}}}catch{}var h=(t=>(t.OFFER="offer",t.OFFER_COLLECTIVE="offer_collective",t.VENUE="venue",t))(h||{});const gs="_container_uuguy_2",Es="_header_uuguy_8",vs="_subtitle_uuguy_17",qs="_actions_uuguy_23",_s="_button_uuguy_28",Se={container:gs,header:Es,subtitle:vs,actions:qs,button:_s},Ne=({mode:t,hideModal:e,imageUrl:r})=>{const i={[h.VENUE]:pe,[h.OFFER]:J,[h.OFFER_COLLECTIVE]:J}[t];return l.jsx(Ut,{hasCloseButton:!0,labelledBy:"Ajouter une image",onDismiss:e,children:l.jsxs("div",{className:Se.container,children:[l.jsx("header",{children:l.jsx("h1",{className:Se.header,children:"Ajouter une image"})}),l.jsx("div",{className:Se.subtitle,children:"Prévisualisation de votre image dans l’application pass Culture"}),l.jsx(i,{imageUrl:r})]})})};try{Ne.displayName="ModalAppPreview",Ne.__docgenInfo={description:"",displayName:"ModalAppPreview",props:{hideModal:{defaultValue:null,description:"",name:"hideModal",required:!0,type:{name:"() => void"}},mode:{defaultValue:null,description:"",name:"mode",required:!0,type:{name:"enum",value:[{value:'"offer"'},{value:'"offer_collective"'},{value:'"venue"'}]}},imageUrl:{defaultValue:null,description:"",name:"imageUrl",required:!0,type:{name:"string"}}}}}catch{}const Ae=({imageUrl:t,mode:e})=>{const[r,i]=m.useState(!1);return l.jsxs(l.Fragment,{children:[l.jsx(ee,{onClick:()=>i(!0),variant:te.TERNARY,icon:Wt,children:"Prévisualiser"}),r&&t&&l.jsx(Ne,{mode:e,imageUrl:t,hideModal:()=>i(!1)})]})};try{Ae.displayName="ButtonAppPreview",Ae.__docgenInfo={description:"",displayName:"ButtonAppPreview",props:{mode:{defaultValue:null,description:"",name:"mode",required:!0,type:{name:"enum",value:[{value:'"offer"'},{value:'"offer_collective"'},{value:'"venue"'}]}},imageUrl:{defaultValue:null,description:"",name:"imageUrl",required:!0,type:{name:"string"}}}}}catch{}const Ts={"button-image-delete-icon":"_button-image-delete-icon_ooh4c_1"},xe=({isLoading:t,onConfirm:e,onDismiss:r})=>l.jsx(Xt,{cancelText:"Retour",confirmText:"Supprimer",icon:Zt,isLoading:t,onCancel:r,onConfirm:e,title:"Supprimer l’image",children:"Souhaitez-vous vraiment supprimer cette image ?"});try{xe.displayName="ModalImageDelete",xe.__docgenInfo={description:"",displayName:"ModalImageDelete",props:{isLoading:{defaultValue:null,description:"",name:"isLoading",required:!0,type:{name:"boolean"}},onConfirm:{defaultValue:null,description:"",name:"onConfirm",required:!0,type:{name:"() => void"}},onDismiss:{defaultValue:null,description:"",name:"onDismiss",required:!0,type:{name:"() => void"}}}}}catch{}const Be=({onImageDelete:t})=>{const[e,r]=m.useState(!1),[i,s]=m.useState(!1),o=()=>{s(!0),t()};return l.jsxs(l.Fragment,{children:[l.jsxs(ee,{onClick:()=>r(!0),variant:te.TERNARY,children:[l.jsx(ze,{alt:"",className:Ts["button-image-delete-icon"],src:Qt}),"Supprimer"]}),e&&l.jsx(xe,{isLoading:i,onConfirm:o,onDismiss:()=>r(!1)})]})};try{Be.displayName="ButtonImageDelete",Be.__docgenInfo={description:"",displayName:"ButtonImageDelete",props:{onImageDelete:{defaultValue:null,description:"",name:"onImageDelete",required:!0,type:{name:"() => void"}}}}}catch{}const Rs="_label_1mxf3_23",Fs="_icon_1mxf3_36",Y={"button-image-add":"_button-image-add_1mxf3_2","add-image-venue":"_add-image-venue_1mxf3_15","add-image-offer":"_add-image-offer_1mxf3_19",label:Rs,"image-upload-button-label":"_image-upload-button-label_1mxf3_29",icon:Fs},ke=({onClick:t,mode:e})=>l.jsxs("button",{className:fe(Y["button-image-add"],{[Y["add-image-venue"]]:e===h.VENUE,[Y["add-image-offer"]]:e===h.OFFER||e===h.OFFER_COLLECTIVE}),onClick:t,type:"button",children:[l.jsx(ze,{src:zt,alt:"",className:Y.icon}),l.jsx("span",{className:Y.label,children:"Ajouter une image"})]});try{ke.displayName="ButtonImageAdd",ke.__docgenInfo={description:"",displayName:"ButtonImageAdd",props:{onClick:{defaultValue:null,description:"",name:"onClick",required:!0,type:{name:"() => void"}},mode:{defaultValue:null,description:"",name:"mode",required:!0,type:{name:"enum",value:[{value:'"offer"'},{value:'"offer_collective"'},{value:'"venue"'}]}}}}}catch{}const Ss=async(t,e="image.jpg")=>{const i=await(await fetch(t)).blob();return new File([i],e,{type:i.type})},he=(t,e)=>t+e/2,Us=t=>1/t,xt={[h.OFFER]:{maxSize:1e7,minWidth:400,types:["image/png","image/jpeg"],minHeight:600},[h.OFFER_COLLECTIVE]:{maxSize:1e7,minWidth:400,types:["image/png","image/jpeg"],minHeight:600},[h.VENUE]:{maxSize:1e7,minWidth:600,types:["image/png","image/jpeg"],minHeight:400}},Cs=t=>{const[e,r]=m.useState(0),[i,s]=m.useState(0);return m.useEffect(()=>{ir(t).then(o=>{o&&(r(o.width),s(o.height))})},[]),{width:e,height:i}},L={"modal-image-crop":"_modal-image-crop_11rti_2","modal-image-crop-form":"_modal-image-crop-form_11rti_13","modal-image-crop-header":"_modal-image-crop-header_11rti_19","modal-image-crop-right":"_modal-image-crop-right_11rti_27","modal-image-crop-credit":"_modal-image-crop-credit_11rti_33","modal-image-crop-footer":"_modal-image-crop-footer_11rti_39"},ws=({originalDimensions:t,orientation:e})=>e==="landscape"?{width:Math.floor(Math.min(t.width,t.height/2*3)),height:Math.floor(Math.min(t.height,t.width/3*2))}:{width:Math.floor(Math.min(t.width,t.height/3*2)),height:Math.floor(Math.min(t.height,t.width/2*3))},Ve=({onReplaceImage:t,image:e,credit:r,onSetCredit:i,onEditedImageSave:s,saveInitialPosition:o,initialPosition:a,initialScale:n,mode:d,submitButtonText:c})=>{const{width:y,height:g}=Cs(e),b=m.useRef(null),ye=wt(),ie=xt[d].minWidth,{width:be}=ws({originalDimensions:{width:y,height:g},orientation:d===h.VENUE?"landscape":"portrait"}),B=Math.min(4,(be-10)/ie),C={[h.OFFER]:384,[h.OFFER_COLLECTIVE]:384,[h.VENUE]:244}[d],ge={[h.OFFER]:{canvasHeight:C,canvasWidth:C*6/9,cropBorderColor:"#FFF",cropBorderHeight:50,cropBorderWidth:105,maxScale:B},[h.OFFER_COLLECTIVE]:{canvasHeight:C,canvasWidth:C*6/9,cropBorderColor:"#FFF",cropBorderHeight:50,cropBorderWidth:105,maxScale:B},[h.VENUE]:{canvasHeight:C,canvasWidth:C*3/2,cropBorderColor:"#FFF",cropBorderHeight:40,cropBorderWidth:100,maxScale:B}}[d],K=tr({initialValues:{credit:r||"",scale:n||1},onSubmit:H=>{try{if(b.current){const ae=b.current.getImage(),k=b.current.getCroppingRect();o({x:he(k.x,k.width),y:he(k.y,k.height)}),s(ae.toDataURL(),k)}i(H.credit)}catch{ye.error("Une erreur est survenue. Merci de réessayer plus tard")}}});return l.jsx("section",{className:L["modal-image-crop"],children:l.jsx(rr,{value:K,children:l.jsxs(sr,{onSubmit:K.handleSubmit,children:[l.jsxs("div",{className:L["modal-image-crop-form"],children:[l.jsx("header",{children:l.jsx("h1",{className:L["modal-image-crop-header"],children:"Ajouter une image"})}),l.jsx("p",{className:L["modal-image-crop-right"],children:"En utilisant ce contenu, je certifie que je suis propriétaire ou que je dispose des autorisations nécessaires pour l’utilisation de celui-ci."}),l.jsx(or,{...ge,image:e,initialPosition:a,ref:b}),l.jsx(Yt,{countCharacters:!0,className:L["modal-image-crop-credit"],label:"Crédit de l’image",maxLength:255,name:"credit",placeholder:"Photographe...",required:!1,type:"text"})]}),l.jsx(Kt,{}),l.jsxs("footer",{className:L["modal-image-crop-footer"],children:[l.jsx(ee,{icon:Jt,onClick:t,variant:te.TERNARY,children:"Remplacer l’image"}),l.jsx(St,{children:c})]})]})})})};try{Ve.displayName="ModalImageCrop",Ve.__docgenInfo={description:"",displayName:"ModalImageCrop",props:{image:{defaultValue:null,description:"",name:"image",required:!0,type:{name:"File"}},credit:{defaultValue:null,description:"",name:"credit",required:!0,type:{name:"string"}},onSetCredit:{defaultValue:null,description:"",name:"onSetCredit",required:!0,type:{name:"(credit: string) => void"}},onReplaceImage:{defaultValue:null,description:"",name:"onReplaceImage",required:!0,type:{name:"() => void"}},initialPosition:{defaultValue:null,description:"",name:"initialPosition",required:!1,type:{name:"Position"}},initialScale:{defaultValue:null,description:"",name:"initialScale",required:!1,type:{name:"number"}},saveInitialPosition:{defaultValue:null,description:"",name:"saveInitialPosition",required:!0,type:{name:"(position: Position) => void"}},onEditedImageSave:{defaultValue:null,description:"",name:"onEditedImageSave",required:!0,type:{name:"(dataUrl: string, croppedRect: CroppedRect) => void"}},mode:{defaultValue:null,description:"",name:"mode",required:!0,type:{name:"enum",value:[{value:'"offer"'},{value:'"offer_collective"'},{value:'"venue"'}]}},submitButtonText:{defaultValue:null,description:"",name:"submitButtonText",required:!0,type:{name:"string"}}}}}catch{}const Os=({constraints:t})=>lr().shape(t.reduce((e,r)=>({...e,[r.id]:ur().test({message:r.description,test:(i,s)=>r.asyncValidator(s.parent.image)})}),{})),De=({onSubmit:t,mode:e})=>{const[r,i]=m.useState([]),s=xt[e],o=[ne.formats(s.types),ne.size(s.maxSize),ne.width(s.minWidth),ne.height(s.minHeight)],a=Os({constraints:o}),n=d=>{const c=d.currentTarget.files&&d.currentTarget.files[0]||null;c&&a.validate({image:c},{abortEarly:!1}).then(()=>t({image:c})).catch(y=>i(y.inner.map(g=>g.path||"unknown")))};return l.jsxs("form",{onSubmit:d=>d.preventDefault(),children:[l.jsx(nr,{label:"Importer une image depuis l’ordinateur",fileTypes:["image/png","image/jpeg"],isValid:r.length===0,onChange:n}),l.jsx(ar,{constraints:o,failingConstraints:r})]})};try{De.displayName="ImageUploadBrowserForm",De.__docgenInfo={description:"",displayName:"ImageUploadBrowserForm",props:{onSubmit:{defaultValue:null,description:"",name:"onSubmit",required:!0,type:{name:"(values: ImageUploadBrowserFormValues) => void"}},mode:{defaultValue:null,description:"",name:"mode",required:!0,type:{name:"enum",value:[{value:'"offer"'},{value:'"offer_collective"'},{value:'"venue"'}]}}}}}catch{}const Ps="_header_gcnvk_13",dt={"modal-upload-browser":"_modal-upload-browser_gcnvk_2",header:Ps,"horizontal-rule":"_horizontal-rule_gcnvk_19"},$e=({onImageClientUpload:t,mode:e})=>{const r={[h.OFFER]:"portrait",[h.OFFER_COLLECTIVE]:"portrait",[h.VENUE]:"landscape"}[e];return l.jsxs("section",{className:dt["modal-upload-browser"],children:[l.jsx("header",{children:l.jsx("h1",{className:dt.header,children:"Ajouter une image"})}),l.jsx(dr,{orientation:r}),l.jsx(De,{onSubmit:t,mode:e})]})};try{$e.displayName="ModalImageUploadBrowser",$e.__docgenInfo={description:"",displayName:"ModalImageUploadBrowser",props:{onImageClientUpload:{defaultValue:null,description:"",name:"onImageClientUpload",required:!0,type:{name:"(values: ImageUploadBrowserFormValues) => void"}},mode:{defaultValue:null,description:"",name:"mode",required:!0,type:{name:"enum",value:[{value:'"offer"'},{value:'"offer_collective"'},{value:'"venue"'}]}}}}}catch{}const Is="_container_4bsmh_2",js="_header_4bsmh_8",Ns="_subtitle_4bsmh_17",As="_actions_4bsmh_23",xs="_button_4bsmh_29",G={container:Is,header:js,subtitle:Ns,actions:As,button:xs},He=({imageUrl:t,isUploading:e,onGoBack:r,onUploadImage:i,mode:s})=>{const o={[h.VENUE]:pe,[h.OFFER]:J,[h.OFFER_COLLECTIVE]:J}[s];return l.jsxs("div",{className:G.container,children:[l.jsx("header",{children:l.jsx("h1",{className:G.header,children:"Ajouter une image"})}),l.jsx("div",{className:G.subtitle,children:"Prévisualisation de votre image dans l’application pass Culture"}),l.jsx(o,{imageUrl:t}),l.jsxs("div",{className:G.actions,children:[l.jsx(ee,{className:G.button,onClick:r,title:"Retour",type:"button",variant:te.SECONDARY,children:"Retour"}),l.jsx(St,{className:G.button,disabled:!1,isLoading:!!e,onClick:i})]})]})};try{He.displayName="ModalImageUploadConfirm",He.__docgenInfo={description:"",displayName:"ModalImageUploadConfirm",props:{imageUrl:{defaultValue:null,description:"",name:"imageUrl",required:!0,type:{name:"string"}},mode:{defaultValue:null,description:"",name:"mode",required:!0,type:{name:"enum",value:[{value:'"offer"'},{value:'"offer_collective"'},{value:'"venue"'}]}},isUploading:{defaultValue:null,description:"",name:"isUploading",required:!0,type:{name:"boolean"}},onGoBack:{defaultValue:null,description:"",name:"onGoBack",required:!0,type:{name:"() => void"}},onUploadImage:{defaultValue:null,description:"",name:"onUploadImage",required:!0,type:{name:"() => void"}}}}}catch{}const Le=({mode:t,onDismiss:e,onImageUpload:r,initialValues:i={}})=>{const[s,o]=m.useState(!1),{imageUrl:a,originalImageUrl:n,credit:d,cropParams:c}=i,[y,g]=m.useState();m.useEffect(()=>{async function w(ve){g(await Ss(ve))}const O=n||a;O&&w(O),o(!0)},[]);const[b,ye]=m.useState(d||""),[ie,be]=m.useState(),[B,C]=m.useState(""),[ge,tt]=m.useState(!1),{xCropPercent:Ee,yCropPercent:K,heightCropPercent:H,widthCropPercent:ae}=c||{},[k,Vt]=m.useState({x:Ee&&ae?he(Ee,ae):.5,y:K&&H?he(K,H):.5}),Dt=()=>{C("")},$t=w=>{g(w.image||void 0)},Ht=()=>{g(void 0)},rt=(w,O,ve)=>{w===void 0||O===void 0||(r({imageFile:O,imageCroppedDataUrl:ve,cropParams:w,credit:b}),e(),tt(!1))},st=t!==h.OFFER_COLLECTIVE,Lt=(w,O)=>{be(O),C(w),st||rt(O,y,w)};return s?l.jsx(Ut,{hasCloseButton:!0,labelledBy:"Ajouter une image",onDismiss:e,children:y?!ie||!B?l.jsx(Ve,{credit:b,image:y,initialPosition:k,initialScale:H?Us(H):1,onEditedImageSave:Lt,onReplaceImage:Ht,onSetCredit:ye,saveInitialPosition:Vt,mode:t,submitButtonText:st?"Suivant":"Enregistrer"}):l.jsx(He,{isUploading:ge,onGoBack:Dt,onUploadImage:()=>rt(ie,y,B),imageUrl:B,mode:t}):l.jsx($e,{onImageClientUpload:$t,mode:t})}):null};try{Le.displayName="ModalImageEdit",Le.__docgenInfo={description:"",displayName:"ModalImageEdit",props:{mode:{defaultValue:null,description:"",name:"mode",required:!0,type:{name:"enum",value:[{value:'"offer"'},{value:'"offer_collective"'},{value:'"venue"'}]}},onDismiss:{defaultValue:null,description:"",name:"onDismiss",required:!0,type:{name:"() => void"}},onImageUpload:{defaultValue:null,description:"",name:"onImageUpload",required:!0,type:{name:"(values: OnImageUploadArgs) => void"}},initialValues:{defaultValue:{value:"{}"},description:"",name:"initialValues",required:!1,type:{name:"UploadImageValues"}}}}}catch{}const me=({mode:t,initialValues:e={},onImageUpload:r,onClickButtonImage:i})=>{const[s,o]=m.useState(!1),{imageUrl:a,originalImageUrl:n}=e,d=()=>{i&&i(),o(!0)};return l.jsxs(l.Fragment,{children:[a||n?l.jsx(ee,{onClick:d,variant:te.TERNARY,alt:"Modifier l’image",icon:er,children:"Modifier"}):l.jsx(ke,{mode:t,onClick:d}),s&&l.jsx(Le,{mode:t,onDismiss:()=>o(!1),onImageUpload:r,initialValues:e})]})};try{me.displayName="ButtonImageEdit",me.__docgenInfo={description:"",displayName:"ButtonImageEdit",props:{onImageUpload:{defaultValue:null,description:"",name:"onImageUpload",required:!0,type:{name:"(values: OnImageUploadArgs) => void"}},initialValues:{defaultValue:{value:"{}"},description:"",name:"initialValues",required:!1,type:{name:"UploadImageValues"}},mode:{defaultValue:null,description:"",name:"mode",required:!0,type:{name:"enum",value:[{value:'"offer"'},{value:'"offer_collective"'},{value:'"venue"'}]}},onClickButtonImage:{defaultValue:null,description:"",name:"onClickButtonImage",required:!1,type:{name:"(() => void)"}}}}}catch{}const Ue={"image-preview":"_image-preview_806us_1","preview-venue":"_preview-venue_806us_7","preview-offer":"_preview-offer_806us_11"},Ge=({imageUrl:t,alt:e,mode:r})=>l.jsx("img",{alt:e,className:fe(Ue["image-preview"],{[Ue["preview-venue"]]:r===h.VENUE,[Ue["preview-offer"]]:r===h.OFFER||r===h.OFFER_COLLECTIVE}),src:t});try{Ge.displayName="ImagePreview",Ge.__docgenInfo={description:"",displayName:"ImagePreview",props:{imageUrl:{defaultValue:null,description:"",name:"imageUrl",required:!0,type:{name:"string"}},alt:{defaultValue:null,description:"",name:"alt",required:!0,type:{name:"string"}},mode:{defaultValue:null,description:"",name:"mode",required:!0,type:{name:"enum",value:[{value:'"offer"'},{value:'"offer_collective"'},{value:'"venue"'}]}}}}}catch{}const Ce={"explanatory-text":"_explanatory-text_pfqdv_1","image-uploader-image-container":"_image-uploader-image-container_pfqdv_5","image-uploader-actions-container":"_image-uploader-actions-container_pfqdv_9","actions-wrapper":"_actions-wrapper_pfqdv_16"},Me=({className:t,onImageUpload:e,onImageDelete:r,initialValues:i={},mode:s,onClickButtonImageAdd:o,hideActionButtons:a=!1})=>{const{imageUrl:n,originalImageUrl:d,credit:c,cropParams:y}=i;return l.jsx("div",{className:fe(t,Ce["image-uploader-image-container"]),children:n&&d?l.jsxs(l.Fragment,{children:[l.jsx(Ge,{mode:s,imageUrl:n,alt:"Prévisualisation de l’image"}),!a&&l.jsx("div",{className:Ce["image-uploader-actions-container"],children:l.jsxs("div",{className:Ce["actions-wrapper"],children:[l.jsx(me,{mode:s,initialValues:{originalImageUrl:d,imageUrl:n,credit:c,cropParams:y},onImageUpload:e,onClickButtonImage:o}),s!==h.OFFER_COLLECTIVE&&l.jsx(Ae,{imageUrl:n,mode:s}),l.jsx(Be,{onImageDelete:r})]})})]}):l.jsx(me,{mode:s,onImageUpload:e,onClickButtonImage:o})})},Bt=Me;try{Me.displayName="ImageUploader",Me.__docgenInfo={description:"",displayName:"ImageUploader",props:{className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},onImageUpload:{defaultValue:null,description:"",name:"onImageUpload",required:!0,type:{name:"(values: OnImageUploadArgs) => void"}},onImageDelete:{defaultValue:null,description:"",name:"onImageDelete",required:!0,type:{name:"() => void"}},initialValues:{defaultValue:{value:"{}"},description:"",name:"initialValues",required:!1,type:{name:"UploadImageValues"}},mode:{defaultValue:null,description:"",name:"mode",required:!0,type:{name:"enum",value:[{value:'"offer"'},{value:'"offer_collective"'},{value:'"venue"'}]}},onClickButtonImageAdd:{defaultValue:null,description:"",name:"onClickButtonImageAdd",required:!1,type:{name:"(() => void)"}},hideActionButtons:{defaultValue:{value:"false"},description:"",name:"hideActionButtons",required:!1,type:{name:"boolean"}}}}}catch{}const ct=""+new URL("sample-image-landscape-eBpjwR3E.jpg",import.meta.url).href,pt=""+new URL("sample-image-portrait-DqK7CIsS.jpg",import.meta.url).href,Xo={title:"components/ImageUploader",component:Bt},et=t=>l.jsx(je,{children:l.jsx(Bt,{...t})}),kt={initialValues:{originalImageUrl:pt,imageUrl:pt,credit:"John Do",cropParams:{xCropPercent:0,yCropPercent:0,heightCropPercent:1,widthCropPercent:1}},mode:h.OFFER,onImageDelete:()=>{alert("onDelete have been called.")},onImageUpload:()=>{alert("onImageUpload have been called.")}},Q=et.bind({});Q.args={...kt};const X=et.bind({});X.args={...kt,initialValues:{imageUrl:ct,originalImageUrl:ct},mode:h.VENUE};const Z=et.bind({});Z.args={mode:h.OFFER};var ft,yt,bt;Q.parameters={...Q.parameters,docs:{...(ft=Q.parameters)==null?void 0:ft.docs,source:{originalSource:`props => <StoreProvider>
    <ImageUploader {...props} />
  </StoreProvider>`,...(bt=(yt=Q.parameters)==null?void 0:yt.docs)==null?void 0:bt.source}}};var gt,Et,vt;X.parameters={...X.parameters,docs:{...(gt=X.parameters)==null?void 0:gt.docs,source:{originalSource:`props => <StoreProvider>
    <ImageUploader {...props} />
  </StoreProvider>`,...(vt=(Et=X.parameters)==null?void 0:Et.docs)==null?void 0:vt.source}}};var qt,_t,Tt;Z.parameters={...Z.parameters,docs:{...(qt=Z.parameters)==null?void 0:qt.docs,source:{originalSource:`props => <StoreProvider>
    <ImageUploader {...props} />
  </StoreProvider>`,...(Tt=(_t=Z.parameters)==null?void 0:_t.docs)==null?void 0:Tt.source}}};const Zo=["WithImageOffer","WithImageVenue","WithoutImage"];export{Q as WithImageOffer,X as WithImageVenue,Z as WithoutImage,Zo as __namedExportsOrder,Xo as default};
