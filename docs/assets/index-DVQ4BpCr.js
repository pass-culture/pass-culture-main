import{r as n,a as B}from"./index-BwDkhjyp.js";import{a as H}from"./index-CReuRBEY.js";import{N as W,s as G,a as X,b as M,u as j,c as Y,d as F,D as q,e as J,R as Q,f as Z}from"./index-ZWEForty.js";/**
 * React Router DOM v6.25.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _(){return _=Object.assign?Object.assign.bind():function(e){for(var a=1;a<arguments.length;a++){var t=arguments[a];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},_.apply(this,arguments)}function $(e,a){if(e==null)return{};var t={},r=Object.keys(e),i,o;for(o=0;o<r.length;o++)i=r[o],!(a.indexOf(i)>=0)&&(t[i]=e[i]);return t}function ee(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function te(e,a){return e.button===0&&(!a||a==="_self")&&!ee(e)}function U(e){return e===void 0&&(e=""),new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((a,t)=>{let r=e[t];return a.concat(Array.isArray(r)?r.map(i=>[t,i]):[[t,r]])},[]))}function ne(e,a){let t=U(e);return a&&a.forEach((r,i)=>{t.has(i)||a.getAll(i).forEach(o=>{t.append(i,o)})}),t}const re=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","unstable_viewTransition"],ae="6";try{window.__reactRouterVersion=ae}catch{}const ie=n.createContext({isTransitioning:!1}),se=n.createContext(new Map),oe="startTransition",k=B[oe],le="flushSync",A=H[le];function ce(e){k?k(e):e()}function C(e){A?A(e):e()}class ue{constructor(){this.status="pending",this.promise=new Promise((a,t)=>{this.resolve=r=>{this.status==="pending"&&(this.status="resolved",a(r))},this.reject=r=>{this.status==="pending"&&(this.status="rejected",t(r))}})}}function ge(e){let{fallbackElement:a,router:t,future:r}=e,[i,o]=n.useState(t.state),[u,d]=n.useState(),[f,s]=n.useState({isTransitioning:!1}),[c,m]=n.useState(),[h,y]=n.useState(),[S,P]=n.useState(),L=n.useRef(new Map),{v7_startTransition:x}=r||{},E=n.useCallback(l=>{x?ce(l):l()},[x]),v=n.useCallback((l,g)=>{let{deletedFetchers:p,unstable_flushSync:O,unstable_viewTransitionOpts:R}=g;p.forEach(T=>L.current.delete(T)),l.fetchers.forEach((T,z)=>{T.data!==void 0&&L.current.set(z,T.data)});let K=t.window==null||t.window.document==null||typeof t.window.document.startViewTransition!="function";if(!R||K){O?C(()=>o(l)):E(()=>o(l));return}if(O){C(()=>{h&&(c&&c.resolve(),h.skipTransition()),s({isTransitioning:!0,flushSync:!0,currentLocation:R.currentLocation,nextLocation:R.nextLocation})});let T=t.window.document.startViewTransition(()=>{C(()=>o(l))});T.finished.finally(()=>{C(()=>{m(void 0),y(void 0),d(void 0),s({isTransitioning:!1})})}),C(()=>y(T));return}h?(c&&c.resolve(),h.skipTransition(),P({state:l,currentLocation:R.currentLocation,nextLocation:R.nextLocation})):(d(l),s({isTransitioning:!0,flushSync:!1,currentLocation:R.currentLocation,nextLocation:R.nextLocation}))},[t.window,h,c,L,E]);n.useLayoutEffect(()=>t.subscribe(v),[t,v]),n.useEffect(()=>{f.isTransitioning&&!f.flushSync&&m(new ue)},[f]),n.useEffect(()=>{if(c&&u&&t.window){let l=u,g=c.promise,p=t.window.document.startViewTransition(async()=>{E(()=>o(l)),await g});p.finished.finally(()=>{m(void 0),y(void 0),d(void 0),s({isTransitioning:!1})}),y(p)}},[E,u,c,t.window]),n.useEffect(()=>{c&&u&&i.location.key===u.location.key&&c.resolve()},[c,h,i.location,u]),n.useEffect(()=>{!f.isTransitioning&&S&&(d(S.state),s({isTransitioning:!0,flushSync:!1,currentLocation:S.currentLocation,nextLocation:S.nextLocation}),P(void 0))},[f.isTransitioning,S]),n.useEffect(()=>{},[]);let w=n.useMemo(()=>({createHref:t.createHref,encodeLocation:t.encodeLocation,go:l=>t.navigate(l),push:(l,g,p)=>t.navigate(l,{state:g,preventScrollReset:p==null?void 0:p.preventScrollReset}),replace:(l,g,p)=>t.navigate(l,{replace:!0,state:g,preventScrollReset:p==null?void 0:p.preventScrollReset})}),[t]),b=t.basename||"/",I=n.useMemo(()=>({router:t,navigator:w,static:!1,basename:b}),[t,w,b]),N=n.useMemo(()=>({v7_relativeSplatPath:t.future.v7_relativeSplatPath}),[t.future.v7_relativeSplatPath]);return n.createElement(n.Fragment,null,n.createElement(q.Provider,{value:I},n.createElement(J.Provider,{value:i},n.createElement(se.Provider,{value:L.current},n.createElement(ie.Provider,{value:f},n.createElement(Q,{basename:b,location:i.location,navigationType:i.historyAction,navigator:w,future:N},i.initialized||t.future.v7_partialHydration?n.createElement(fe,{routes:t.routes,future:t.future,state:i}):a))))),null)}const fe=n.memo(de);function de(e){let{routes:a,future:t,state:r}=e;return Z(a,void 0,r,t)}const he=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",ve=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Re=n.forwardRef(function(a,t){let{onClick:r,relative:i,reloadDocument:o,replace:u,state:d,target:f,to:s,preventScrollReset:c,unstable_viewTransition:m}=a,h=$(a,re),{basename:y}=n.useContext(W),S,P=!1;if(typeof s=="string"&&ve.test(s)&&(S=s,he))try{let v=new URL(window.location.href),w=s.startsWith("//")?new URL(v.protocol+s):new URL(s),b=G(w.pathname,y);w.origin===v.origin&&b!=null?s=b+w.search+w.hash:P=!0}catch{}let L=X(s,{relative:i}),x=pe(s,{replace:u,state:d,target:f,preventScrollReset:c,relative:i,unstable_viewTransition:m});function E(v){r&&r(v),v.defaultPrevented||x(v)}return n.createElement("a",_({},h,{href:S||L,onClick:P||o?r:E,ref:t,target:f}))});var V;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(V||(V={}));var D;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(D||(D={}));function pe(e,a){let{target:t,replace:r,state:i,preventScrollReset:o,relative:u,unstable_viewTransition:d}=a===void 0?{}:a,f=M(),s=j(),c=Y(e,{relative:u});return n.useCallback(m=>{if(te(m,t)){m.preventDefault();let h=r!==void 0?r:F(s)===F(c);f(e,{replace:h,state:i,preventScrollReset:o,relative:u,unstable_viewTransition:d})}},[s,f,c,r,i,t,e,o,u,d])}function Te(e){let a=n.useRef(U(e)),t=n.useRef(!1),r=j(),i=n.useMemo(()=>ne(r.search,t.current?null:a.current),[r.search]),o=M(),u=n.useCallback((d,f)=>{const s=U(typeof d=="function"?d(i):d);t.current=!0,o("?"+s,f)},[o,i]);return[i,u]}export{Re as L,ge as R,Te as u};
