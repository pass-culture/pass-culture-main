import{j as e}from"./jsx-runtime-CfatFE5O.js";import{c as X}from"./index-DeARc5FM.js";import{f as Ae,a as ke,b as Te}from"./full-download-Bn7ZNuy8.js";import{B as x}from"./Button-gdY3XgLr.js";import{B as F}from"./types-DjX_gQD6.js";import{T as W,D as Ue,C as Ne}from"./DialogBuilder-01B5EA1O.js";import{a as Fe,I as D}from"./ImagePreviewsWrapper-DBflTNpu.js";import{r as s}from"./index-ClcD9ViR.js";import{u as de}from"./useNotification-BF4K81YN.js";import{f as Re}from"./full-trash-CEfIUI4M.js";import{S as Se}from"./SvgIcon-CUWb-Ez8.js";import{C as We}from"./ConfirmDialog-DClPnLqx.js";import{s as $e}from"./stroke-trash-Cc_5v2lW.js";import{f as He}from"./full-edit-CxAaM2Fv.js";import{b as ze,c as Ge,d as Ye}from"./formik.esm-DyanDbCL.js";import{u as me}from"./firebase-FlnIn3sb.js";import{E as ce}from"./constants-Du1feJUB.js";import{g as Ke,i as q,C as Je}from"./imageConstraints-BnvuBHgF.js";import{I as Ze}from"./ImageEditor-BuOPHNnE.js";import{D as Xe}from"./Divider-bbQmKmcS.js";import{T as Qe}from"./TextInput-DgaPBPOC.js";import{I as ea}from"./ImagePreferredOrientation-SIe0_GrL.js";import{B as aa}from"./BaseFileInput-Cpn0oaXu.js";import{c as ra,b as ia}from"./index.esm-BSKwNcyF.js";import"./_commonjsHelpers-Cpj98o6Y.js";import"./stroke-pass-CALgybTM.js";import"./Tooltip-BtSK6bim.js";import"./Button.module-CvOOzViS.js";import"./index-C5qMX-66.js";import"./index-MhaI5ydX.js";import"./tslib.es6-De9GV7Vy.js";import"./stroke-close-DnlFsd1c.js";import"./reducer-CViW3jT2.js";import"./stroke-error-DSZD431a.js";import"./Dialog-C3u-Spg3.js";import"./config-BdqymTTq.js";import"./index-C3LhMar3.js";import"./FieldError-DblMbt5C.js";import"./index-Chjiymov.js";import"./Slider-DiwLrWMg.js";import"./BaseInput-zpkrYXWy.js";import"./FieldLayout-Bb7bwNUY.js";import"./full-clear-Q4kCtSRL.js";import"./full-close-5Oxr7nnd.js";import"./full-help-blUMxBcv.js";import"./FieldLayoutCharacterCount-DooUcf1c.js";const ge=""+new URL("sample-image-landscape-B4GmPBHc.jpg",import.meta.url).href,fe=""+new URL("sample-image-portrait-OorsIixL.jpg",import.meta.url).href;var t=(a=>(a.OFFER="offer",a.OFFER_COLLECTIVE="offer_collective",a.VENUE="venue",a))(t||{});const ta=""+new URL("offer-home-shell-DRe407mm.png",import.meta.url).href,oa=""+new URL("offer-shell-1NJvb7h9.png",import.meta.url).href,_e={"image-preview-shell":"_image-preview-shell_6f0sl_1","image-preview-home-preview":"_image-preview-home-preview_6f0sl_6"},K={"image-preview-shell":"_image-preview-shell_1jfa7_1","image-preview-blur-offer-preview":"_image-preview-blur-offer-preview_1jfa7_7","image-preview-offer-preview":"_image-preview-offer-preview_1jfa7_16"},R=({imageUrl:a})=>e.jsxs(Fe,{children:[e.jsxs(D,{title:"Page d’accueil",children:[e.jsx("img",{alt:"",className:_e["image-preview-shell"],src:ta,role:"presentation"}),e.jsx("img",{"data-testid":"app-preview-offer-img-home",alt:"",className:_e["image-preview-home-preview"],src:a,role:"presentation"})]}),e.jsxs(D,{title:"Détails de l’offre",children:[e.jsx("img",{alt:"",className:K["image-preview-blur-offer-preview"],src:a,role:"presentation"}),e.jsx("img",{alt:"",className:K["image-preview-shell"],src:oa,role:"presentation"}),e.jsx("img",{"data-testid":"app-preview-offer-img",alt:"",className:K["image-preview-offer-preview"],src:a,role:"presentation"})]})]});try{R.displayName="AppPreviewOffer",R.__docgenInfo={description:"",displayName:"AppPreviewOffer",props:{imageUrl:{defaultValue:null,description:"",name:"imageUrl",required:!0,type:{name:"string"}}}}}catch{}const na=""+new URL("venue-home-shell-Cg5ZqCow.png",import.meta.url).href,la=""+new URL("venue-shell-BjZ1FMHk.png",import.meta.url).href,ve={"image-preview-shell":"_image-preview-shell_1mxin_1","image-preview-home-preview":"_image-preview-home-preview_1mxin_6"},J={"image-preview-shell":"_image-preview-shell_kof9t_1","image-preview-blur-venue-preview":"_image-preview-blur-venue-preview_kof9t_7","image-preview-venue-preview":"_image-preview-venue-preview_kof9t_16"},A=({imageUrl:a})=>{const r=de(),i=s.useCallback(()=>{r.error("Une erreur est survenue. Merci de réessayer plus tard")},[r]);return e.jsxs(Fe,{children:[e.jsxs(D,{title:"Page d’accueil",children:[e.jsx("img",{alt:"",className:ve["image-preview-shell"],src:na,role:"presentation"}),e.jsx("img",{"data-testid":"app-preview-venue-img-home",alt:"",className:ve["image-preview-home-preview"],onError:i,src:a,role:"presentation"})]}),e.jsxs(D,{title:"Page Lieu",children:[e.jsx("img",{alt:"",className:J["image-preview-blur-venue-preview"],src:a,role:"presentation"}),e.jsx("img",{alt:"",className:J["image-preview-shell"],src:la,role:"presentation"}),e.jsx("img",{"data-testid":"app-preview-venue-img",alt:"",className:J["image-preview-venue-preview"],src:a,role:"presentation"})]})]})};try{A.displayName="AppPreviewVenue",A.__docgenInfo={description:"",displayName:"AppPreviewVenue",props:{imageUrl:{defaultValue:null,description:"",name:"imageUrl",required:!0,type:{name:"string"}}}}}catch{}const sa="_container_1hnrw_1",da="_header_1hnrw_7",ma="_subtitle_1hnrw_14",ca="_actions_1hnrw_19",pa="_button_1hnrw_24",Z={container:sa,header:da,subtitle:ma,actions:ca,button:pa},Q=({mode:a,imageUrl:r})=>{const i={[t.VENUE]:A,[t.OFFER]:R,[t.OFFER_COLLECTIVE]:R}[a];return e.jsxs("div",{className:Z.container,children:[e.jsx(W,{asChild:!0,children:e.jsx("h1",{className:Z.header,children:"Ajouter une image"})}),e.jsx("div",{className:Z.subtitle,children:"Prévisualisation de votre image dans l’application pass Culture"}),e.jsx(i,{imageUrl:r})]})};try{Q.displayName="ModalAppPreview",Q.__docgenInfo={description:"",displayName:"ModalAppPreview",props:{mode:{defaultValue:null,description:"",name:"mode",required:!0,type:{name:"enum",value:[{value:'"offer"'},{value:'"offer_collective"'},{value:'"venue"'}]}},imageUrl:{defaultValue:null,description:"",name:"imageUrl",required:!0,type:{name:"string"}}}}}catch{}const ee=({imageUrl:a,mode:r})=>e.jsx(e.Fragment,{children:e.jsx(Ue,{trigger:e.jsx(x,{variant:F.TERNARY,icon:Ae,children:"Prévisualiser"}),children:a&&e.jsx(Q,{mode:r,imageUrl:a})})});try{ee.displayName="ButtonAppPreview",ee.__docgenInfo={description:"",displayName:"ButtonAppPreview",props:{mode:{defaultValue:null,description:"",name:"mode",required:!0,type:{name:"enum",value:[{value:'"offer"'},{value:'"offer_collective"'},{value:'"venue"'}]}},imageUrl:{defaultValue:null,description:"",name:"imageUrl",required:!0,type:{name:"string"}}}}}catch{}const ua={"button-image-delete-icon":"_button-image-delete-icon_ooh4c_1"},ae=({isLoading:a,onConfirm:r,onDismiss:i,isDialogOpen:n,trigger:o})=>e.jsx(We,{cancelText:"Retour",confirmText:"Supprimer",icon:$e,isLoading:a,onCancel:i,onConfirm:r,title:"Supprimer l’image",open:n,trigger:o,children:"Souhaitez-vous vraiment supprimer cette image ?"});try{ae.displayName="ModalImageDelete",ae.__docgenInfo={description:"",displayName:"ModalImageDelete",props:{isLoading:{defaultValue:null,description:"",name:"isLoading",required:!0,type:{name:"boolean"}},onConfirm:{defaultValue:null,description:"",name:"onConfirm",required:!0,type:{name:"() => void"}},onDismiss:{defaultValue:null,description:"",name:"onDismiss",required:!0,type:{name:"() => void"}},isDialogOpen:{defaultValue:null,description:"",name:"isDialogOpen",required:!0,type:{name:"boolean"}},trigger:{defaultValue:null,description:"",name:"trigger",required:!0,type:{name:"ReactNode"}}}}}catch{}const re=({onImageDelete:a})=>{const[r,i]=s.useState(!1),[n,o]=s.useState(!1),d=()=>{o(!0),a()};return e.jsx(ae,{isLoading:n,onConfirm:d,onDismiss:()=>i(!1),isDialogOpen:r,trigger:e.jsxs(x,{onClick:()=>i(!0),variant:F.TERNARY,children:[e.jsx(Se,{alt:"",className:ua["button-image-delete-icon"],src:Re}),"Supprimer"]})})};try{re.displayName="ButtonImageDelete",re.__docgenInfo={description:"",displayName:"ButtonImageDelete",props:{onImageDelete:{defaultValue:null,description:"",name:"onImageDelete",required:!0,type:{name:"() => void"}}}}}catch{}const ga="_label_56f2i_22",fa="_icon_56f2i_35",P={"button-image-add":"_button-image-add_56f2i_1","add-image-venue":"_add-image-venue_56f2i_14","add-image-offer":"_add-image-offer_56f2i_18",label:ga,"image-upload-button-label":"_image-upload-button-label_56f2i_28",icon:fa},_a=async(a,r="image.jpg")=>{const n=await(await fetch(a)).blob();return new File([n],r,{type:n.type})},k=(a,r)=>a+r/2,va=a=>1/a,ha=a=>{const[r,i]=s.useState(0),[n,o]=s.useState(0);return s.useEffect(()=>{(async()=>{const l=await Ke(a);l&&(i(l.width),o(l.height))})()},[a]),{width:r,height:n}},Pe={[t.OFFER]:{maxSize:1e7,minWidth:400,types:["image/png","image/jpeg"],minHeight:600},[t.OFFER_COLLECTIVE]:{maxSize:1e7,minWidth:400,types:["image/png","image/jpeg"],minHeight:600},[t.VENUE]:{maxSize:1e7,minWidth:600,types:["image/png","image/jpeg"],minHeight:400}},Ia=({originalDimensions:a,orientation:r})=>r==="landscape"?{width:Math.floor(Math.min(a.width,a.height/2*3)),height:Math.floor(Math.min(a.height,a.width/3*2))}:{width:Math.floor(Math.min(a.width,a.height/3*2)),height:Math.floor(Math.min(a.height,a.width/2*3))},E={"modal-image-crop":"_modal-image-crop_1gcpb_1","modal-image-crop-editor":"_modal-image-crop-editor_1gcpb_12","modal-image-crop-actions":"_modal-image-crop-actions_1gcpb_17","modal-image-crop-form":"_modal-image-crop-form_1gcpb_24","modal-image-crop-header":"_modal-image-crop-header_1gcpb_30","modal-image-crop-right":"_modal-image-crop-right_1gcpb_36","modal-image-crop-credit":"_modal-image-crop-credit_1gcpb_42","modal-image-crop-footer":"_modal-image-crop-footer_1gcpb_48"},ie=({onReplaceImage:a,onImageDelete:r,image:i,credit:n,onSetCredit:o,onEditedImageSave:d,saveInitialPosition:l,initialPosition:u,initialScale:m,mode:g,showPreviewInModal:f})=>{const{logEvent:c}=me(),{width:_,height:h}=ha(i),p=s.useRef(null),I=de(),S=Pe[g].minWidth,{width:C}=Ia({originalDimensions:{width:_,height:h},orientation:g===t.VENUE?"landscape":"portrait"}),b=Math.min(4,(C-10)/S),y={[t.OFFER]:384,[t.OFFER_COLLECTIVE]:384,[t.VENUE]:244}[g],$={[t.OFFER]:{canvasHeight:y,canvasWidth:y*2/3,cropBorderColor:"#FFF",cropBorderHeight:50,cropBorderWidth:105,maxScale:b},[t.OFFER_COLLECTIVE]:{canvasHeight:y,canvasWidth:y*2/3,cropBorderColor:"#FFF",cropBorderHeight:50,cropBorderWidth:105,maxScale:b},[t.VENUE]:{canvasHeight:y,canvasWidth:y*3/2,cropBorderColor:"#FFF",cropBorderHeight:40,cropBorderWidth:100,maxScale:b}}[g],j=ze({initialValues:{credit:n||"",scale:m||1},onSubmit:O=>{try{if(p.current){const G=p.current.getImage(),V=p.current.getCroppingRect();l({x:k(V.x,V.width),y:k(V.y,V.height)}),d(G.toDataURL(),V)}o(O.credit)}catch{I.error("Une erreur est survenue. Merci de réessayer plus tard")}}});return e.jsx("section",{className:E["modal-image-crop"],children:e.jsx(Ge,{value:j,children:e.jsxs(Ye,{onSubmit:j.handleSubmit,children:[e.jsxs("div",{className:E["modal-image-crop-form"],children:[e.jsx(W,{asChild:!0,children:e.jsx("h1",{className:E["modal-image-crop-header"],children:"Modifier une image"})}),e.jsx("p",{className:E["modal-image-crop-right"],children:"En utilisant ce contenu, je certifie que je suis propriétaire ou que je dispose des autorisations nécessaires pour l’utilisation de celui-ci."}),e.jsxs("div",{className:E["modal-image-crop-editor"],children:[e.jsx(Ze,{...$,image:i,initialPosition:u,ref:p}),e.jsxs("div",{className:E["modal-image-crop-actions"],children:[e.jsx(x,{icon:ke,onClick:a,variant:F.TERNARY,children:"Remplacer l’image"}),e.jsx(Ne,{asChild:!0,children:e.jsx(x,{icon:Re,onClick:r,variant:F.TERNARY,children:"Supprimer l’image"})})]})]}),e.jsx(Qe,{countCharacters:!0,className:E["modal-image-crop-credit"],label:"Crédit de l’image",maxLength:255,name:"credit",required:!1,type:"text",isOptional:!0})]}),e.jsx(Xe,{}),e.jsx("div",{className:E["modal-image-crop-footer"],children:e.jsx(x,{type:"submit",onClick:()=>{c(ce.CLICKED_ADD_IMAGE,{imageCreationStage:"reframe image"})},children:f?"Suivant":"Enregistrer"})})]})})})};try{ie.displayName="ModalImageCrop",ie.__docgenInfo={description:"",displayName:"ModalImageCrop",props:{image:{defaultValue:null,description:"",name:"image",required:!0,type:{name:"File"}},credit:{defaultValue:null,description:"",name:"credit",required:!0,type:{name:"string"}},onSetCredit:{defaultValue:null,description:"",name:"onSetCredit",required:!0,type:{name:"(credit: string) => void"}},onReplaceImage:{defaultValue:null,description:"",name:"onReplaceImage",required:!0,type:{name:"() => void"}},onImageDelete:{defaultValue:null,description:"",name:"onImageDelete",required:!0,type:{name:"() => void"}},initialPosition:{defaultValue:null,description:"",name:"initialPosition",required:!1,type:{name:"Position"}},initialScale:{defaultValue:null,description:"",name:"initialScale",required:!1,type:{name:"number"}},saveInitialPosition:{defaultValue:null,description:"",name:"saveInitialPosition",required:!0,type:{name:"(position: Position) => void"}},onEditedImageSave:{defaultValue:null,description:"",name:"onEditedImageSave",required:!0,type:{name:"(dataUrl: string, croppedRect: CroppedRect) => void"}},mode:{defaultValue:null,description:"",name:"mode",required:!0,type:{name:"enum",value:[{value:'"offer"'},{value:'"offer_collective"'},{value:'"venue"'}]}},showPreviewInModal:{defaultValue:null,description:"",name:"showPreviewInModal",required:!0,type:{name:"boolean"}}}}}catch{}const ya=({constraints:a})=>ra().shape(a.reduce((r,i)=>({...r,[i.id]:ia().test({message:i.description,test:(n,o)=>i.asyncValidator(o.parent.image)})}),{})),te=({onSubmit:a,mode:r,isReady:i})=>{const{logEvent:n}=me(),[o,d]=s.useState([]),l=Pe[r],u="preferred-orientation-caption",m="constraint-check",f={[t.OFFER]:"portrait",[t.OFFER_COLLECTIVE]:"portrait",[t.VENUE]:"landscape"}[r],c=[q.formats(l.types),q.size(l.maxSize),q.width(l.minWidth),q.height(l.minHeight)],_=ya({constraints:c}),h=async p=>{const I=p.currentTarget.files&&p.currentTarget.files.length>0?p.currentTarget.files[0]:null;if(I)try{await _.validate({image:I},{abortEarly:!1}),a({image:I}),n(ce.CLICKED_ADD_IMAGE,{imageCreationStage:"import image"})}catch(S){d(S.inner.map(C=>C.path||"unknown"))}};return e.jsxs("form",{onSubmit:p=>p.preventDefault(),children:[e.jsx(ea,{id:u,orientation:f}),e.jsx(aa,{isDisabled:!i,label:"Importer une image depuis l’ordinateur",fileTypes:["image/png","image/jpeg"],isValid:o.length===0,onChange:h,ariaDescribedBy:`${u} ${m}`}),e.jsx(Je,{id:m,constraints:c,failingConstraints:o})]})};try{te.displayName="ImageUploadBrowserForm",te.__docgenInfo={description:"",displayName:"ImageUploadBrowserForm",props:{onSubmit:{defaultValue:null,description:"",name:"onSubmit",required:!0,type:{name:"(values: ImageUploadBrowserFormValues) => void"}},mode:{defaultValue:null,description:"",name:"mode",required:!0,type:{name:"enum",value:[{value:'"offer"'},{value:'"offer_collective"'},{value:'"venue"'}]}},isReady:{defaultValue:null,description:"",name:"isReady",required:!0,type:{name:"boolean"}}}}}catch{}const wa="_header_tjlbo_12",he={"modal-upload-browser":"_modal-upload-browser_tjlbo_1",header:wa,"horizontal-rule":"_horizontal-rule_tjlbo_17"},oe=({onImageClientUpload:a,mode:r,isReady:i})=>e.jsxs("section",{className:he["modal-upload-browser"],children:[e.jsx(W,{asChild:!0,children:e.jsx("h1",{className:he.header,children:"Ajouter une image"})}),e.jsx(te,{isReady:i,onSubmit:a,mode:r})]});try{oe.displayName="ModalImageUploadBrowser",oe.__docgenInfo={description:"",displayName:"ModalImageUploadBrowser",props:{onImageClientUpload:{defaultValue:null,description:"",name:"onImageClientUpload",required:!0,type:{name:"(values: ImageUploadBrowserFormValues) => void"}},mode:{defaultValue:null,description:"",name:"mode",required:!0,type:{name:"enum",value:[{value:'"offer"'},{value:'"offer_collective"'},{value:'"venue"'}]}},isReady:{defaultValue:null,description:"",name:"isReady",required:!0,type:{name:"boolean"}}}}}catch{}const Ea="_container_1v41j_1",xa="_header_1v41j_7",Ca="_subtitle_1v41j_14",ja="_actions_1v41j_19",Va="_button_1v41j_25",U={container:Ea,header:xa,subtitle:Ca,actions:ja,button:Va},ne=({imageUrl:a,isUploading:r,onGoBack:i,onUploadImage:n,mode:o})=>{const{logEvent:d}=me(),l={[t.VENUE]:A,[t.OFFER]:R,[t.OFFER_COLLECTIVE]:R}[o];return e.jsxs("div",{className:U.container,children:[e.jsx(W,{asChild:!0,children:e.jsx("h1",{className:U.header,children:"Modifier une image"})}),e.jsx("div",{className:U.subtitle,children:"Prévisualisation de votre image dans l’application pass Culture"}),e.jsx(l,{imageUrl:a}),e.jsxs("div",{className:U.actions,children:[e.jsx(x,{className:U.button,onClick:i,variant:F.SECONDARY,children:"Retour"}),e.jsx(Ne,{asChild:!0,children:e.jsx(x,{type:"submit",className:U.button,disabled:!1,isLoading:!!r,onClick:()=>{d(ce.CLICKED_ADD_IMAGE,{imageCreationStage:"save image"}),n()},children:"Enregistrer"})})]})]})};try{ne.displayName="ModalImageUploadConfirm",ne.__docgenInfo={description:"",displayName:"ModalImageUploadConfirm",props:{imageUrl:{defaultValue:null,description:"",name:"imageUrl",required:!0,type:{name:"string"}},mode:{defaultValue:null,description:"",name:"mode",required:!0,type:{name:"enum",value:[{value:'"offer"'},{value:'"offer_collective"'},{value:'"venue"'}]}},isUploading:{defaultValue:null,description:"",name:"isUploading",required:!0,type:{name:"boolean"}},onGoBack:{defaultValue:null,description:"",name:"onGoBack",required:!0,type:{name:"() => void"}},onUploadImage:{defaultValue:null,description:"",name:"onUploadImage",required:!0,type:{name:"() => void"}}}}}catch{}const le=({mode:a,onImageUpload:r,onImageDelete:i,initialValues:n={}})=>{const o=de(),[d,l]=s.useState(!1),{imageUrl:u,originalImageUrl:m,credit:g,cropParams:f}=n,[c,_]=s.useState();s.useEffect(()=>{async function v(Y){try{_(await _a(Y))}catch{o.error("Erreur lors de la récupération de votre image.")}}const w=m||u;w&&v(w),l(!0)},[]);const[h,p]=s.useState(g||""),[I,S]=s.useState(),[C,b]=s.useState(""),[y,$]=s.useState(!1),{xCropPercent:H,yCropPercent:z,heightCropPercent:j,widthCropPercent:O}=f||{},[G,V]=s.useState({x:H&&O?k(H,O):.5,y:z&&j?k(z,j):.5}),qe=()=>{b("")},Be=v=>{_(v.image||void 0)},Me=()=>{_(void 0)},Le=()=>{!u&&!m?_(void 0):i==null||i()},pe=(v,w,Y)=>{v===void 0||w===void 0||(r({imageFile:w,imageCroppedDataUrl:Y,cropParams:v,credit:h}),$(!1))},ue=a!==t.OFFER_COLLECTIVE,De=(v,w)=>{S(w),b(v),ue||pe(w,c,v)};return c?!I||!C?e.jsx(ie,{credit:h,image:c,initialPosition:G,initialScale:j?va(j):1,onEditedImageSave:De,onReplaceImage:Me,onImageDelete:Le,onSetCredit:p,saveInitialPosition:V,mode:a,showPreviewInModal:ue}):e.jsx(ne,{isUploading:y,onGoBack:qe,onUploadImage:()=>pe(I,c,C),imageUrl:C,mode:a}):e.jsx(oe,{onImageClientUpload:Be,mode:a,isReady:d})};try{le.displayName="ModalImageEdit",le.__docgenInfo={description:"",displayName:"ModalImageEdit",props:{mode:{defaultValue:null,description:"",name:"mode",required:!0,type:{name:"enum",value:[{value:'"offer"'},{value:'"offer_collective"'},{value:'"venue"'}]}},onImageUpload:{defaultValue:null,description:"",name:"onImageUpload",required:!0,type:{name:"(values: OnImageUploadArgs) => void"}},onImageDelete:{defaultValue:null,description:"",name:"onImageDelete",required:!1,type:{name:"(() => void)"}},initialValues:{defaultValue:{value:"{}"},description:"",name:"initialValues",required:!1,type:{name:"UploadImageValues"}}}}}catch{}const T=({mode:a,initialValues:r={},onImageUpload:i,onImageDelete:n,onClickButtonImage:o,children:d,disableForm:l})=>{const{imageUrl:u,originalImageUrl:m}=r,[g,f]=s.useState(!1),c=()=>{o&&o()},_=()=>{n()};function h(p){i(p),f(!1)}return e.jsx(e.Fragment,{children:e.jsx(Ue,{onOpenChange:f,open:g,trigger:u||m?e.jsx(x,{onClick:c,variant:F.TERNARY,"aria-label":"Modifier l’image",icon:He,children:d??"Modifier"}):e.jsx("button",{className:X(P["button-image-add"],{[P["add-image-venue"]]:a===t.VENUE,[P["add-image-offer"]]:a===t.OFFER||a===t.OFFER_COLLECTIVE}),onClick:c,type:"button",disabled:l,children:e.jsxs(e.Fragment,{children:[e.jsx(Se,{src:Te,alt:"",className:P.icon}),e.jsx("span",{className:P.label,children:"Ajouter une image"})]})}),children:e.jsx(le,{mode:a,onImageUpload:h,onImageDelete:_,initialValues:r})})})};try{T.displayName="ButtonImageEdit",T.__docgenInfo={description:"",displayName:"ButtonImageEdit",props:{onImageUpload:{defaultValue:null,description:"",name:"onImageUpload",required:!0,type:{name:"(values: OnImageUploadArgs) => void"}},onImageDelete:{defaultValue:null,description:"",name:"onImageDelete",required:!0,type:{name:"() => void"}},initialValues:{defaultValue:{value:"{}"},description:"",name:"initialValues",required:!1,type:{name:"UploadImageValues"}},mode:{defaultValue:null,description:"",name:"mode",required:!0,type:{name:"enum",value:[{value:'"offer"'},{value:'"offer_collective"'},{value:'"venue"'}]}},onClickButtonImage:{defaultValue:null,description:"",name:"onClickButtonImage",required:!1,type:{name:"(() => void)"}},disableForm:{defaultValue:null,description:"",name:"disableForm",required:!1,type:{name:"boolean"}}}}}catch{}const N={"explanatory-text":"_explanatory-text_kfv4w_1","image-uploader-image-container":"_image-uploader-image-container_kfv4w_5","image-uploader-actions-container":"_image-uploader-actions-container_kfv4w_10","actions-wrapper":"_actions-wrapper_kfv4w_17","image-preview":"_image-preview_kfv4w_25","preview-venue":"_preview-venue_kfv4w_31","preview-offer":"_preview-offer_kfv4w_41"},se=({className:a,onImageUpload:r,onImageDelete:i,initialValues:n={},mode:o,onClickButtonImageAdd:d,hideActionButtons:l=!1,disableForm:u=!1})=>{const{imageUrl:m,originalImageUrl:g,credit:f,cropParams:c}=n;return e.jsx("div",{className:X(N["image-uploader-image-container"],a),children:m&&g?e.jsxs(e.Fragment,{children:[e.jsx("img",{alt:"Prévisualisation de l’image","data-testid":"image-preview",className:X(N["image-preview"],{[N["preview-venue"]]:o===t.VENUE,[N["preview-offer"]]:o===t.OFFER||o===t.OFFER_COLLECTIVE}),src:m}),!l&&e.jsx("div",{className:N["image-uploader-actions-container"],children:e.jsxs("div",{className:N["actions-wrapper"],children:[e.jsx(T,{mode:o,initialValues:{originalImageUrl:g,imageUrl:m,credit:f,cropParams:c},onImageUpload:r,onImageDelete:i,onClickButtonImage:d,disableForm:u}),o!==t.OFFER_COLLECTIVE&&e.jsx(ee,{imageUrl:m,mode:o}),e.jsx(re,{onImageDelete:i})]})})]}):e.jsx(T,{mode:o,onImageUpload:r,onImageDelete:i,onClickButtonImage:d,disableForm:u})})};try{se.displayName="ImageUploader",se.__docgenInfo={description:"",displayName:"ImageUploader",props:{className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},onImageUpload:{defaultValue:null,description:"",name:"onImageUpload",required:!0,type:{name:"(values: OnImageUploadArgs) => void"}},onImageDelete:{defaultValue:null,description:"",name:"onImageDelete",required:!0,type:{name:"() => void"}},initialValues:{defaultValue:{value:"{}"},description:"",name:"initialValues",required:!1,type:{name:"UploadImageValues"}},mode:{defaultValue:null,description:"",name:"mode",required:!0,type:{name:"enum",value:[{value:'"offer"'},{value:'"offer_collective"'},{value:'"venue"'}]}},onClickButtonImageAdd:{defaultValue:null,description:"",name:"onClickButtonImageAdd",required:!1,type:{name:"(() => void)"}},hideActionButtons:{defaultValue:{value:"false"},description:"",name:"hideActionButtons",required:!1,type:{name:"boolean"}},disableForm:{defaultValue:{value:"false"},description:"",name:"disableForm",required:!1,type:{name:"boolean"}}}}}catch{}const Ir={title:"components/ImageUploader/ImageUploader",component:se},Oe={initialValues:{originalImageUrl:fe,imageUrl:fe,credit:"John Do",cropParams:{xCropPercent:0,yCropPercent:0,heightCropPercent:1,widthCropPercent:1}},mode:t.OFFER,onImageDelete:()=>{alert("onDelete have been called.")},onImageUpload:()=>{alert("onImageUpload have been called.")}},B={args:{...Oe}},M={args:{...Oe,initialValues:{imageUrl:ge,originalImageUrl:ge},mode:t.VENUE}},L={args:{mode:t.OFFER}};var Ie,ye,we;B.parameters={...B.parameters,docs:{...(Ie=B.parameters)==null?void 0:Ie.docs,source:{originalSource:`{
  args: {
    ...props
  }
}`,...(we=(ye=B.parameters)==null?void 0:ye.docs)==null?void 0:we.source}}};var Ee,xe,Ce;M.parameters={...M.parameters,docs:{...(Ee=M.parameters)==null?void 0:Ee.docs,source:{originalSource:`{
  args: {
    ...props,
    initialValues: {
      imageUrl: sampleImageLandscape,
      originalImageUrl: sampleImageLandscape
    },
    mode: UploaderModeEnum.VENUE
  }
}`,...(Ce=(xe=M.parameters)==null?void 0:xe.docs)==null?void 0:Ce.source}}};var je,Ve,be;L.parameters={...L.parameters,docs:{...(je=L.parameters)==null?void 0:je.docs,source:{originalSource:`{
  args: {
    mode: UploaderModeEnum.OFFER
  }
}`,...(be=(Ve=L.parameters)==null?void 0:Ve.docs)==null?void 0:be.source}}};const yr=["WithImageOffer","WithImageVenue","WithoutImage"];export{B as WithImageOffer,M as WithImageVenue,L as WithoutImage,yr as __namedExportsOrder,Ir as default};
