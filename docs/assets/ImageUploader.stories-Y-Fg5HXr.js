var ot=(t,e,r)=>{if(!e.has(t))throw TypeError("Cannot "+r)};var u=(t,e,r)=>(ot(t,e,"read from private field"),r?r.call(t):e.get(t)),f=(t,e,r)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,r)},p=(t,e,r,s)=>(ot(t,e,"write to private field"),s?s.call(t,r):e.set(t,r),r);import{j as l}from"./jsx-runtime-iXOPPpZ7.js";import{r as m}from"./index-7OBYoplD.js";import{c as Rt,u as Gt}from"./reducer-ZpzU-k3-.js";import{U as We,A as St}from"./config-KjRYmNhP.js";import"./VenuePhysicalLocation-v2PyZzNX.js";import{c as fe}from"./index-XNbs-YUW.js";import{s as Mt}from"./stroke-pass-84wyy11D.js";import{S as ze}from"./SvgIcon-UUSKXfrA.js";import{f as Wt,s as zt,a as Jt}from"./full-download-fPe7ZvD3.js";import{D as Kt}from"./Divider-f9FLuLUl.js";import{S as Ft}from"./SubmitButton-oROMwTyj.js";import{B as ee}from"./ButtonLink-5dBkUYf6.js";import{B as te}from"./Button-WmDsAMwb.js";import{T as Yt}from"./Thumb-z_ERTvKg.js";import"./stroke-offer-IDmBYzSD.js";import"./Banner-lPPtSnLj.js";import"./InfoBox-Vzq8Ezel.js";import{D as Ut}from"./DialogBox-XHxsuEBt.js";import{a as Ct,I as ce}from"./ImagePreviewsWrapper-245mf2uo.js";import{u as wt}from"./useNotification-mIo4nDjH.js";import{f as Qt}from"./full-trash-A0u8oE8D.js";import{C as Xt}from"./ConfirmDialog-r64Jv_12.js";import{s as Zt}from"./stroke-trash-pW9H4mMs.js";import{f as er}from"./full-edit--NrgCQQr.js";import{u as tr,F as rr,a as sr}from"./formik.esm-y2tUiI7x.js";import{I as or}from"./ImageEditor-XFmaQkHd.js";import{g as ir,i as ne,C as ar}from"./imageConstraints-sSqNmFBA.js";import{B as nr}from"./BaseFileInput-zNhI3l8i.js";import{c as lr,a as ur}from"./index.esm-Fq04sIRF.js";import{P as dr}from"./PreferredOrientation-oLVbqnsC.js";import"./_commonjsHelpers-4gQjN7DL.js";import"./index-gbqf4HAD.js";import"./index-NZh7eYUr.js";import"./Button.module-fn58QZwY.js";import"./Tooltip-eetddggC.js";import"./useTooltipProps-Xf9SOXrU.js";import"./full-next-6FYpialQ.js";import"./BaseRadio-xu3uA8eL.js";import"./FieldError-_oiQB8Lp.js";import"./stroke-error-U5wg3Vd5.js";import"./FieldSuccess-KBPQwpG2.js";import"./stroke-valid-qcZpl8lN.js";import"./full-clear-0L2gsxg_.js";import"./index-VFMbf6KQ.js";import"./SelectInput-jQXa9fZk.js";import"./stroke-down-4xbrRvHV.js";import"./BaseCheckbox-RovcbSrG.js";import"./typeof-Q9eVcF_1.js";import"./BaseInput-pWPiF78D.js";import"./shadow-tips-help-vs0tLBP5.js";import"./shadow-tips-warning-og_aO0Ug.js";import"./stroke-close-KQNU-49n.js";import"./LinkNodes-xoscl8qx.js";import"./full-link-GGegv9yK.js";import"./tslib.es6-OTA_Hx-d.js";import"./Dialog-jm0368VU.js";import"./Slider-D-_UhTzL.js";let cr=class{constructor(e){this.config=e}},we=class extends Error{constructor(e,r,s){super(s),this.name="ApiError",this.url=r.url,this.status=r.status,this.statusText=r.statusText,this.body=r.body,this.request=e}},pr=class extends Error{constructor(e){super(e),this.name="CancelError"}get isCancelled(){return!0}};var _,T,E,I,D,M,P,ht;let hr=(ht=class{constructor(e){f(this,_,void 0);f(this,T,void 0);f(this,E,void 0);f(this,I,void 0);f(this,D,void 0);f(this,M,void 0);f(this,P,void 0);p(this,_,!1),p(this,T,!1),p(this,E,!1),p(this,I,[]),p(this,D,new Promise((r,s)=>{p(this,M,r),p(this,P,s);const o=n=>{u(this,_)||u(this,T)||u(this,E)||(p(this,_,!0),u(this,M)&&u(this,M).call(this,n))},i=n=>{u(this,_)||u(this,T)||u(this,E)||(p(this,T,!0),u(this,P)&&u(this,P).call(this,n))},a=n=>{u(this,_)||u(this,T)||u(this,E)||u(this,I).push(n)};return Object.defineProperty(a,"isResolved",{get:()=>u(this,_)}),Object.defineProperty(a,"isRejected",{get:()=>u(this,T)}),Object.defineProperty(a,"isCancelled",{get:()=>u(this,E)}),e(o,i,a)}))}get[Symbol.toStringTag](){return"Cancellable Promise"}then(e,r){return u(this,D).then(e,r)}catch(e){return u(this,D).catch(e)}finally(e){return u(this,D).finally(e)}cancel(){if(!(u(this,_)||u(this,T)||u(this,E))){if(p(this,E,!0),u(this,I).length)try{for(const e of u(this,I))e()}catch(e){console.warn("Cancellation threw an error",e);return}u(this,I).length=0,u(this,P)&&u(this,P).call(this,new pr("Request aborted"))}}get isCancelled(){return u(this,E)}},_=new WeakMap,T=new WeakMap,E=new WeakMap,I=new WeakMap,D=new WeakMap,M=new WeakMap,P=new WeakMap,ht);const Je=t=>t!=null,re=t=>typeof t=="string",qe=t=>re(t)&&t!=="",Ke=t=>typeof t=="object"&&typeof t.type=="string"&&typeof t.stream=="function"&&typeof t.arrayBuffer=="function"&&typeof t.constructor=="function"&&typeof t.constructor.name=="string"&&/^(Blob|File)$/.test(t.constructor.name)&&/^(Blob|File)$/.test(t[Symbol.toStringTag]),Ot=t=>t instanceof FormData,mr=t=>{try{return btoa(t)}catch{return Buffer.from(t).toString("base64")}},fr=t=>{const e=[],r=(o,i)=>{e.push(`${encodeURIComponent(o)}=${encodeURIComponent(String(i))}`)},s=(o,i)=>{Je(i)&&(Array.isArray(i)?i.forEach(a=>{s(o,a)}):typeof i=="object"?Object.entries(i).forEach(([a,n])=>{s(`${o}[${a}]`,n)}):r(o,i))};return Object.entries(t).forEach(([o,i])=>{s(o,i)}),e.length>0?`?${e.join("&")}`:""},yr=(t,e)=>{const r=t.ENCODE_PATH||encodeURI,s=e.url.replace("{api-version}",t.VERSION).replace(/{(.*?)}/g,(i,a)=>{var n;return(n=e.path)!=null&&n.hasOwnProperty(a)?r(String(e.path[a])):i}),o=`${t.BASE}${s}`;return e.query?`${o}${fr(e.query)}`:o},br=t=>{if(t.formData){const e=new FormData,r=(s,o)=>{re(o)||Ke(o)?e.append(s,o):e.append(s,JSON.stringify(o))};return Object.entries(t.formData).filter(([s,o])=>Je(o)).forEach(([s,o])=>{Array.isArray(o)?o.forEach(i=>r(s,i)):r(s,o)}),e}},le=async(t,e)=>typeof e=="function"?e(t):e,gr=async(t,e)=>{const r=await le(e,t.TOKEN),s=await le(e,t.USERNAME),o=await le(e,t.PASSWORD),i=await le(e,t.HEADERS),a=Object.entries({Accept:"application/json",...i,...e.headers}).filter(([n,d])=>Je(d)).reduce((n,[d,c])=>({...n,[d]:String(c)}),{});if(qe(r)&&(a.Authorization=`Bearer ${r}`),qe(s)&&qe(o)){const n=mr(`${s}:${o}`);a.Authorization=`Basic ${n}`}return e.body&&(e.mediaType?a["Content-Type"]=e.mediaType:Ke(e.body)?a["Content-Type"]=e.body.type||"application/octet-stream":re(e.body)?a["Content-Type"]="text/plain":Ot(e.body)||(a["Content-Type"]="application/json")),new Headers(a)},Er=t=>{var e;if(t.body)return(e=t.mediaType)!=null&&e.includes("/json")?JSON.stringify(t.body):re(t.body)||Ke(t.body)||Ot(t.body)?t.body:JSON.stringify(t.body)},vr=(t,e,r,s,o,i,a)=>{const n=new AbortController,d={headers:i,body:s??o,method:e.method,signal:n.signal};return t.WITH_CREDENTIALS&&(d.credentials=t.CREDENTIALS),a(()=>n.abort()),fetch(r,d)},qr=(t,e)=>{if(e){const r=t.headers.get(e);if(re(r))return r}},_r=async t=>{if(t.status!==204)try{const e=t.headers.get("Content-Type");if(e)return e.toLowerCase().startsWith("application/json")?await t.json():await t.text()}catch(e){console.error(e)}},Tr=(t,e)=>{const s={400:"Bad Request",401:"Unauthorized",403:"Forbidden",404:"Not Found",500:"Internal Server Error",502:"Bad Gateway",503:"Service Unavailable",...t.errors}[e.status];if(e.status===503){window.location.assign(We);return}if(s)throw new we(t,e,s);if(!e.ok)throw new we(t,e,"Generic Error")},Rr=(t,e)=>new hr(async(r,s,o)=>{try{const i=yr(t,e),a=br(e),n=Er(e),d=await gr(t,e);if(!o.isCancelled){const c=await vr(t,e,i,n,a,d,o),y=await _r(c),g=qr(c,e.responseHeader),b={url:i,ok:c.ok,status:c.status,statusText:c.statusText,body:g??y};Tr(e,b),r(b.body)}}catch(i){i instanceof we&&i.status===401&&!i.url.includes("/users/current")&&!i.url.includes("/users/signin")&&(window.location.href="/connexion"),s(i)}});let Sr=class extends cr{constructor(e){super(e)}request(e){return Rr(this.config,e)}},Fr=class{constructor(e){this.httpRequest=e}authenticate(){return this.httpRequest.request({method:"GET",url:"/adage-iframe/authenticate",errors:{403:"Forbidden",422:"Unprocessable Entity"}})}getAcademies(){return this.httpRequest.request({method:"GET",url:"/adage-iframe/collective/academies",errors:{403:"Forbidden",422:"Unprocessable Entity"}})}bookCollectiveOffer(e){return this.httpRequest.request({method:"POST",url:"/adage-iframe/collective/bookings",body:e,mediaType:"application/json",errors:{400:"Bad Request",403:"Forbidden",422:"Unprocessable Entity"}})}getCollectiveFavorites(){return this.httpRequest.request({method:"GET",url:"/adage-iframe/collective/favorites",errors:{403:"Forbidden",422:"Unprocessable Entity"}})}getEducationalInstitutionWithBudget(){return this.httpRequest.request({method:"GET",url:"/adage-iframe/collective/institution",errors:{403:"Forbidden",422:"Unprocessable Entity"}})}deleteFavoriteForCollectiveOffer(e){return this.httpRequest.request({method:"DELETE",url:"/adage-iframe/collective/offer/{offer_id}/favorites",path:{offer_id:e},errors:{403:"Forbidden",422:"Unprocessable Entity"}})}getCollectiveOfferTemplate(e){return this.httpRequest.request({method:"GET",url:"/adage-iframe/collective/offers-template/{offer_id}",path:{offer_id:e},errors:{403:"Forbidden",404:"Not Found",422:"Unprocessable Entity"}})}createCollectiveRequest(e,r){return this.httpRequest.request({method:"POST",url:"/adage-iframe/collective/offers-template/{offer_id}/request",path:{offer_id:e},body:r,mediaType:"application/json",errors:{403:"Forbidden",404:"Not Found",422:"Unprocessable Entity"}})}getCollectiveOffersForMyInstitution(){return this.httpRequest.request({method:"GET",url:"/adage-iframe/collective/offers/my_institution",errors:{403:"Forbidden",422:"Unprocessable Entity"}})}getCollectiveOffer(e){return this.httpRequest.request({method:"GET",url:"/adage-iframe/collective/offers/{offer_id}",path:{offer_id:e},errors:{403:"Forbidden",404:"Not Found",422:"Unprocessable Entity"}})}postCollectiveOfferFavorites(e){return this.httpRequest.request({method:"POST",url:"/adage-iframe/collective/offers/{offer_id}/favorites",path:{offer_id:e},errors:{403:"Forbidden",422:"Unprocessable Entity"}})}deleteFavoriteForCollectiveOfferTemplate(e){return this.httpRequest.request({method:"DELETE",url:"/adage-iframe/collective/template/{offer_template_id}/favorites",path:{offer_template_id:e},errors:{403:"Forbidden",422:"Unprocessable Entity"}})}postCollectiveTemplateFavorites(e){return this.httpRequest.request({method:"POST",url:"/adage-iframe/collective/templates/{offer_id}/favorites",path:{offer_id:e},errors:{403:"Forbidden",422:"Unprocessable Entity"}})}listFeatures(){return this.httpRequest.request({method:"GET",url:"/adage-iframe/features",errors:{403:"Forbidden",404:"Not Found",422:"Unprocessable Entity"}})}logBookingModalButtonClick(e){return this.httpRequest.request({method:"POST",url:"/adage-iframe/logs/booking-modal-button",body:e,mediaType:"application/json",errors:{403:"Forbidden",404:"Not Found",422:"Unprocessable Entity"}})}logCatalogView(e){return this.httpRequest.request({method:"POST",url:"/adage-iframe/logs/catalog-view",body:e,mediaType:"application/json",errors:{403:"Forbidden",404:"Not Found",422:"Unprocessable Entity"}})}logConsultPlaylistElement(e){return this.httpRequest.request({method:"POST",url:"/adage-iframe/logs/consult-playlist-element",body:e,mediaType:"application/json",errors:{403:"Forbidden",404:"Not Found",422:"Unprocessable Entity"}})}logContactModalButtonClick(e){return this.httpRequest.request({method:"POST",url:"/adage-iframe/logs/contact-modal-button",body:e,mediaType:"application/json",errors:{403:"Forbidden",404:"Not Found",422:"Unprocessable Entity"}})}logFavOfferButtonClick(e){return this.httpRequest.request({method:"POST",url:"/adage-iframe/logs/fav-offer/",body:e,mediaType:"application/json",errors:{403:"Forbidden",404:"Not Found",422:"Unprocessable Entity"}})}logHasSeenWholePlaylist(e){return this.httpRequest.request({method:"POST",url:"/adage-iframe/logs/has-seen-whole-playlist/",body:e,mediaType:"application/json",errors:{403:"Forbidden",404:"Not Found",422:"Unprocessable Entity"}})}logHeaderLinkClick(e){return this.httpRequest.request({method:"POST",url:"/adage-iframe/logs/header-link-click/",body:e,mediaType:"application/json",errors:{403:"Forbidden",404:"Not Found",422:"Unprocessable Entity"}})}logOfferDetailsButtonClick(e){return this.httpRequest.request({method:"POST",url:"/adage-iframe/logs/offer-detail",body:e,mediaType:"application/json",errors:{403:"Forbidden",404:"Not Found",422:"Unprocessable Entity"}})}logOfferTemplateDetailsButtonClick(e){return this.httpRequest.request({method:"POST",url:"/adage-iframe/logs/offer-template-detail",body:e,mediaType:"application/json",errors:{403:"Forbidden",404:"Not Found",422:"Unprocessable Entity"}})}logHasSeenAllPlaylist(e){return this.httpRequest.request({method:"POST",url:"/adage-iframe/logs/playlist",body:e,mediaType:"application/json",errors:{403:"Forbidden",404:"Not Found",422:"Unprocessable Entity"}})}logRequestFormPopinDismiss(e){return this.httpRequest.request({method:"POST",url:"/adage-iframe/logs/request-popin-dismiss",body:e,mediaType:"application/json",errors:{403:"Forbidden",404:"Not Found",422:"Unprocessable Entity"}})}logOpenSatisfactionSurvey(e){return this.httpRequest.request({method:"POST",url:"/adage-iframe/logs/sat-survey",body:e,mediaType:"application/json",errors:{403:"Forbidden",404:"Not Found",422:"Unprocessable Entity"}})}logSearchButtonClick(e){return this.httpRequest.request({method:"POST",url:"/adage-iframe/logs/search-button",body:e,mediaType:"application/json",errors:{403:"Forbidden",404:"Not Found",422:"Unprocessable Entity"}})}logSearchShowMore(e){return this.httpRequest.request({method:"POST",url:"/adage-iframe/logs/search-show-more",body:e,mediaType:"application/json",errors:{403:"Forbidden",404:"Not Found",422:"Unprocessable Entity"}})}logTrackingAutocompleteSuggestionClick(e){return this.httpRequest.request({method:"POST",url:"/adage-iframe/logs/tracking-autocompletion",body:e,mediaType:"application/json",errors:{403:"Forbidden",404:"Not Found",422:"Unprocessable Entity"}})}logTrackingCtaShare(e){return this.httpRequest.request({method:"POST",url:"/adage-iframe/logs/tracking-cta-share",body:e,mediaType:"application/json",errors:{403:"Forbidden",404:"Not Found",422:"Unprocessable Entity"}})}logTrackingFilter(e){return this.httpRequest.request({method:"POST",url:"/adage-iframe/logs/tracking-filter",body:e,mediaType:"application/json",errors:{403:"Forbidden",404:"Not Found",422:"Unprocessable Entity"}})}logTrackingMap(e){return this.httpRequest.request({method:"POST",url:"/adage-iframe/logs/tracking-map",body:e,mediaType:"application/json",errors:{403:"Forbidden",404:"Not Found",422:"Unprocessable Entity"}})}getEducationalOffersCategories(){return this.httpRequest.request({method:"GET",url:"/adage-iframe/offers/categories",errors:{403:"Forbidden",422:"Unprocessable Entity"}})}getEducationalOffersFormats(){return this.httpRequest.request({method:"GET",url:"/adage-iframe/offers/formats",errors:{403:"Forbidden",422:"Unprocessable Entity"}})}getClassroomPlaylist(){return this.httpRequest.request({method:"GET",url:"/adage-iframe/playlists/classroom",errors:{403:"Forbidden",422:"Unprocessable Entity"}})}getLocalOfferersPlaylist(){return this.httpRequest.request({method:"GET",url:"/adage-iframe/playlists/local-offerers",errors:{403:"Forbidden",422:"Unprocessable Entity"}})}newTemplateOffersPlaylist(){return this.httpRequest.request({method:"GET",url:"/adage-iframe/playlists/new_template_offers",errors:{403:"Forbidden",404:"Not Found",422:"Unprocessable Entity"}})}saveRedactorPreferences(e){return this.httpRequest.request({method:"POST",url:"/adage-iframe/redactor/preferences",body:e,mediaType:"application/json",errors:{403:"Forbidden",422:"Unprocessable Entity"}})}createAdageJwtFakeToken(){return this.httpRequest.request({method:"GET",url:"/adage-iframe/testing/token",errors:{403:"Forbidden",404:"Not Found",422:"Unprocessable Entity"}})}getVenueBySiret(e,r=!1){return this.httpRequest.request({method:"GET",url:"/adage-iframe/venues/siret/{siret}",path:{siret:e},query:{getRelative:r},errors:{403:"Forbidden",422:"Unprocessable Entity"}})}getVenueById(e,r=!1){return this.httpRequest.request({method:"GET",url:"/adage-iframe/venues/{venue_id}",path:{venue_id:e},query:{getRelative:r},errors:{403:"Forbidden",422:"Unprocessable Entity"}})}};class Ur{constructor(e,r=Sr){this.request=new r({BASE:(e==null?void 0:e.BASE)??"http://localhost:5001",VERSION:(e==null?void 0:e.VERSION)??"0.1.0",WITH_CREDENTIALS:(e==null?void 0:e.WITH_CREDENTIALS)??!1,CREDENTIALS:(e==null?void 0:e.CREDENTIALS)??"include",TOKEN:e==null?void 0:e.TOKEN,USERNAME:e==null?void 0:e.USERNAME,PASSWORD:e==null?void 0:e.PASSWORD,HEADERS:e==null?void 0:e.HEADERS,ENCODE_PATH:e==null?void 0:e.ENCODE_PATH}),this.default=new Fr(this.request)}}let Cr=class{constructor(e){this.config=e}},Oe=class extends Error{constructor(e,r,s){super(s),this.name="ApiError",this.url=r.url,this.status=r.status,this.statusText=r.statusText,this.body=r.body,this.request=e}},wr=class extends Error{constructor(e){super(e),this.name="CancelError"}get isCancelled(){return!0}};var R,S,v,j,V,W,A,mt;let Or=(mt=class{constructor(e){f(this,R,void 0);f(this,S,void 0);f(this,v,void 0);f(this,j,void 0);f(this,V,void 0);f(this,W,void 0);f(this,A,void 0);p(this,R,!1),p(this,S,!1),p(this,v,!1),p(this,j,[]),p(this,V,new Promise((r,s)=>{p(this,W,r),p(this,A,s);const o=n=>{u(this,R)||u(this,S)||u(this,v)||(p(this,R,!0),u(this,W)&&u(this,W).call(this,n))},i=n=>{u(this,R)||u(this,S)||u(this,v)||(p(this,S,!0),u(this,A)&&u(this,A).call(this,n))},a=n=>{u(this,R)||u(this,S)||u(this,v)||u(this,j).push(n)};return Object.defineProperty(a,"isResolved",{get:()=>u(this,R)}),Object.defineProperty(a,"isRejected",{get:()=>u(this,S)}),Object.defineProperty(a,"isCancelled",{get:()=>u(this,v)}),e(o,i,a)}))}get[Symbol.toStringTag](){return"Cancellable Promise"}then(e,r){return u(this,V).then(e,r)}catch(e){return u(this,V).catch(e)}finally(e){return u(this,V).finally(e)}cancel(){if(!(u(this,R)||u(this,S)||u(this,v))){if(p(this,v,!0),u(this,j).length)try{for(const e of u(this,j))e()}catch(e){console.warn("Cancellation threw an error",e);return}u(this,j).length=0,u(this,A)&&u(this,A).call(this,new wr("Request aborted"))}}get isCancelled(){return u(this,v)}},R=new WeakMap,S=new WeakMap,v=new WeakMap,j=new WeakMap,V=new WeakMap,W=new WeakMap,A=new WeakMap,mt);const Ye=t=>t!=null,se=t=>typeof t=="string",_e=t=>se(t)&&t!=="",Qe=t=>typeof t=="object"&&typeof t.type=="string"&&typeof t.stream=="function"&&typeof t.arrayBuffer=="function"&&typeof t.constructor=="function"&&typeof t.constructor.name=="string"&&/^(Blob|File)$/.test(t.constructor.name)&&/^(Blob|File)$/.test(t[Symbol.toStringTag]),It=t=>t instanceof FormData,Ir=t=>{try{return btoa(t)}catch{return Buffer.from(t).toString("base64")}},Pr=t=>{const e=[],r=(o,i)=>{e.push(`${encodeURIComponent(o)}=${encodeURIComponent(String(i))}`)},s=(o,i)=>{Ye(i)&&(Array.isArray(i)?i.forEach(a=>{s(o,a)}):typeof i=="object"?Object.entries(i).forEach(([a,n])=>{s(`${o}[${a}]`,n)}):r(o,i))};return Object.entries(t).forEach(([o,i])=>{s(o,i)}),e.length>0?`?${e.join("&")}`:""},jr=(t,e)=>{const r=t.ENCODE_PATH||encodeURI,s=e.url.replace("{api-version}",t.VERSION).replace(/{(.*?)}/g,(i,a)=>{var n;return(n=e.path)!=null&&n.hasOwnProperty(a)?r(String(e.path[a])):i}),o=`${t.BASE}${s}`;return e.query?`${o}${Pr(e.query)}`:o},Ar=t=>{if(t.formData){const e=new FormData,r=(s,o)=>{se(o)||Qe(o)?e.append(s,o):e.append(s,JSON.stringify(o))};return Object.entries(t.formData).filter(([s,o])=>Ye(o)).forEach(([s,o])=>{Array.isArray(o)?o.forEach(i=>r(s,i)):r(s,o)}),e}},ue=async(t,e)=>typeof e=="function"?e(t):e,Nr=async(t,e)=>{const r=await ue(e,t.TOKEN),s=await ue(e,t.USERNAME),o=await ue(e,t.PASSWORD),i=await ue(e,t.HEADERS),a=Object.entries({Accept:"application/json",...i,...e.headers}).filter(([n,d])=>Ye(d)).reduce((n,[d,c])=>({...n,[d]:String(c)}),{});if(_e(r)&&(a.Authorization=`Bearer ${r}`),_e(s)&&_e(o)){const n=Ir(`${s}:${o}`);a.Authorization=`Basic ${n}`}return e.body&&(e.mediaType?a["Content-Type"]=e.mediaType:Qe(e.body)?a["Content-Type"]=e.body.type||"application/octet-stream":se(e.body)?a["Content-Type"]="text/plain":It(e.body)||(a["Content-Type"]="application/json")),new Headers(a)},xr=t=>{var e;if(t.body)return(e=t.mediaType)!=null&&e.includes("/json")?JSON.stringify(t.body):se(t.body)||Qe(t.body)||It(t.body)?t.body:JSON.stringify(t.body)},kr=(t,e,r,s,o,i,a)=>{const n=new AbortController,d={headers:i,body:s??o,method:e.method,signal:n.signal};return t.WITH_CREDENTIALS&&(d.credentials=t.CREDENTIALS),a(()=>n.abort()),fetch(r,d)},Br=(t,e)=>{if(e){const r=t.headers.get(e);if(se(r))return r}},Dr=async t=>{if(t.status!==204)try{const e=t.headers.get("Content-Type");if(e)return e.toLowerCase().startsWith("application/json")?await t.json():await t.text()}catch(e){console.error(e)}},Vr=(t,e)=>{const s={400:"Bad Request",401:"Unauthorized",403:"Forbidden",404:"Not Found",500:"Internal Server Error",502:"Bad Gateway",503:"Service Unavailable",...t.errors}[e.status];if(e.status===503){window.location.assign(We);return}if(s)throw new Oe(t,e,s);if(!e.ok)throw new Oe(t,e,"Generic Error")},$r=(t,e)=>new Or(async(r,s,o)=>{try{const i=jr(t,e),a=Ar(e),n=xr(e),d=await Nr(t,e);if(!o.isCancelled){const c=await kr(t,e,i,n,a,d,o),y=await Dr(c),g=Br(c,e.responseHeader),b={url:i,ok:c.ok,status:c.status,statusText:c.statusText,body:g??y};Vr(e,b),r(b.body)}}catch(i){i instanceof Oe&&i.status===401&&!i.url.includes("/users/current")&&!i.url.includes("/users/signin")&&(window.location.href="/connexion"),s(i)}});let Hr=class extends Cr{constructor(e){super(e)}request(e){return $r(this.config,e)}};class Lr{constructor(e){this.httpRequest=e}getBookingsPro(e=1,r,s,o,i,a,n,d,c,y="forbid"){return this.httpRequest.request({method:"GET",url:"/bookings/pro",query:{page:e,venueId:r,offerId:s,eventDate:o,bookingStatusFilter:i,bookingPeriodBeginningDate:a,bookingPeriodEndingDate:n,offerType:d,exportType:c,extra:y},errors:{403:"Forbidden",422:"Unprocessable Entity"}})}getUserHasBookings(){return this.httpRequest.request({method:"GET",url:"/bookings/pro/userHasBookings",errors:{403:"Forbidden",422:"Unprocessable Entity"}})}getCollectiveBookingsPro(e=1,r,s,o,i,a,n="forbid"){return this.httpRequest.request({method:"GET",url:"/collective/bookings/pro",query:{page:e,venueId:r,eventDate:s,bookingStatusFilter:o,bookingPeriodBeginningDate:i,bookingPeriodEndingDate:a,extra:n},errors:{403:"Forbidden",422:"Unprocessable Entity"}})}getUserHasCollectiveBookings(){return this.httpRequest.request({method:"GET",url:"/collective/bookings/pro/userHasBookings",errors:{403:"Forbidden",422:"Unprocessable Entity"}})}getCollectiveBookingById(e){return this.httpRequest.request({method:"GET",url:"/collective/bookings/{booking_id}",path:{booking_id:e},errors:{403:"Forbidden",422:"Unprocessable Entity"}})}listEducationalDomains(){return this.httpRequest.request({method:"GET",url:"/collective/educational-domains",errors:{403:"Forbidden",422:"Unprocessable Entity"}})}getCollectiveOffers(e,r,s,o,i,a,n,d,c,y){return this.httpRequest.request({method:"GET",url:"/collective/offers",query:{nameOrIsbn:e,offererId:r,status:s,venueId:o,categoryId:i,creationMode:a,periodBeginningDate:n,periodEndingDate:d,collectiveOfferType:c,format:y},errors:{403:"Forbidden",422:"Unprocessable Entity"}})}createCollectiveOffer(e){return this.httpRequest.request({method:"POST",url:"/collective/offers",body:e,mediaType:"application/json",errors:{403:"Forbidden",422:"Unprocessable Entity"}})}createCollectiveOfferTemplate(e){return this.httpRequest.request({method:"POST",url:"/collective/offers-template",body:e,mediaType:"application/json",errors:{403:"Forbidden",422:"Unprocessable Entity"}})}patchCollectiveOffersTemplateActiveStatus(e){return this.httpRequest.request({method:"PATCH",url:"/collective/offers-template/active-status",body:e,mediaType:"application/json",errors:{403:"Forbidden",422:"Unprocessable Entity"}})}getCollectiveOfferRequest(e){return this.httpRequest.request({method:"GET",url:"/collective/offers-template/request/{request_id}",path:{request_id:e},errors:{403:"Forbidden",422:"Unprocessable Entity"}})}getCollectiveOfferTemplate(e){return this.httpRequest.request({method:"GET",url:"/collective/offers-template/{offer_id}",path:{offer_id:e},errors:{403:"Forbidden",422:"Unprocessable Entity"}})}editCollectiveOfferTemplate(e,r){return this.httpRequest.request({method:"PATCH",url:"/collective/offers-template/{offer_id}",path:{offer_id:e},body:r,mediaType:"application/json",errors:{403:"Forbidden",422:"Unprocessable Entity"}})}createCollectiveOfferTemplateFromCollectiveOffer(e,r){return this.httpRequest.request({method:"POST",url:"/collective/offers-template/{offer_id}/",path:{offer_id:e},body:r,mediaType:"application/json",errors:{400:"Bad Request",403:"Forbidden",404:"Not Found",422:"Unprocessable Entity"}})}deleteOfferTemplateImage(e){return this.httpRequest.request({method:"DELETE",url:"/collective/offers-template/{offer_id}/image",path:{offer_id:e},errors:{403:"Forbidden",422:"Unprocessable Entity"}})}attachOfferTemplateImage(e,r){return this.httpRequest.request({method:"POST",url:"/collective/offers-template/{offer_id}/image",path:{offer_id:e},formData:r,mediaType:"multipart/form-data",errors:{403:"Forbidden",422:"Unprocessable Entity"}})}patchCollectiveOfferTemplatePublication(e){return this.httpRequest.request({method:"PATCH",url:"/collective/offers-template/{offer_id}/publish",path:{offer_id:e},errors:{403:"Forbidden",404:"Not Found",422:"Unprocessable Entity"}})}patchCollectiveOffersActiveStatus(e){return this.httpRequest.request({method:"PATCH",url:"/collective/offers/active-status",body:e,mediaType:"application/json",errors:{403:"Forbidden",422:"Unprocessable Entity"}})}patchAllCollectiveOffersActiveStatus(e){return this.httpRequest.request({method:"PATCH",url:"/collective/offers/all-active-status",body:e,mediaType:"application/json",errors:{403:"Forbidden",422:"Unprocessable Entity"}})}getAutocompleteEducationalRedactorsForUai(e,r){return this.httpRequest.request({method:"GET",url:"/collective/offers/redactors",query:{uai:e,candidate:r},errors:{403:"Forbidden",422:"Unprocessable Entity"}})}getCollectiveOffer(e){return this.httpRequest.request({method:"GET",url:"/collective/offers/{offer_id}",path:{offer_id:e},errors:{403:"Forbidden",422:"Unprocessable Entity"}})}editCollectiveOffer(e,r){return this.httpRequest.request({method:"PATCH",url:"/collective/offers/{offer_id}",path:{offer_id:e},body:r,mediaType:"application/json",errors:{403:"Forbidden",422:"Unprocessable Entity"}})}cancelCollectiveOfferBooking(e){return this.httpRequest.request({method:"PATCH",url:"/collective/offers/{offer_id}/cancel_booking",path:{offer_id:e},errors:{400:"Bad Request",403:"Forbidden",404:"Not Found",422:"Unprocessable Entity"}})}duplicateCollectiveOffer(e){return this.httpRequest.request({method:"POST",url:"/collective/offers/{offer_id}/duplicate",path:{offer_id:e},errors:{403:"Forbidden",422:"Unprocessable Entity"}})}patchCollectiveOffersEducationalInstitution(e,r){return this.httpRequest.request({method:"PATCH",url:"/collective/offers/{offer_id}/educational_institution",path:{offer_id:e},body:r,mediaType:"application/json",errors:{403:"Forbidden",404:"Not Found",422:"Unprocessable Entity"}})}deleteOfferImage(e){return this.httpRequest.request({method:"DELETE",url:"/collective/offers/{offer_id}/image",path:{offer_id:e},errors:{403:"Forbidden",422:"Unprocessable Entity"}})}attachOfferImage(e,r){return this.httpRequest.request({method:"POST",url:"/collective/offers/{offer_id}/image",path:{offer_id:e},formData:r,mediaType:"multipart/form-data",errors:{403:"Forbidden",422:"Unprocessable Entity"}})}patchCollectiveOfferPublication(e){return this.httpRequest.request({method:"PATCH",url:"/collective/offers/{offer_id}/publish",path:{offer_id:e},errors:{403:"Forbidden",404:"Not Found",422:"Unprocessable Entity"}})}createCollectiveStock(e){return this.httpRequest.request({method:"POST",url:"/collective/stocks",body:e,mediaType:"application/json",errors:{403:"Forbidden",422:"Unprocessable Entity"}})}editCollectiveStock(e,r){return this.httpRequest.request({method:"PATCH",url:"/collective/stocks/{collective_stock_id}",path:{collective_stock_id:e},body:r,mediaType:"application/json",errors:{400:"Bad Request",401:"Unauthorized",403:"Forbidden",404:"Not Found",422:"Unprocessable Entity"}})}getEducationalPartner(e){return this.httpRequest.request({method:"GET",url:"/cultural-partner/{siret}",path:{siret:e},errors:{401:"Unauthorized",403:"Forbidden",404:"Not Found",422:"Unprocessable Entity"}})}getEducationalPartners(){return this.httpRequest.request({method:"GET",url:"/cultural-partners",errors:{401:"Unauthorized",403:"Forbidden",422:"Unprocessable Entity"}})}getEducationalInstitutions(e=1e3,r=1){return this.httpRequest.request({method:"GET",url:"/educational_institutions",query:{perPageLimit:e,page:r},errors:{401:"Unauthorized",403:"Forbidden",422:"Unprocessable Entity"}})}listFeatures(){return this.httpRequest.request({method:"GET",url:"/features",errors:{403:"Forbidden",422:"Unprocessable Entity"}})}getBankAccounts(){return this.httpRequest.request({method:"GET",url:"/finance/bank-accounts",errors:{403:"Forbidden",422:"Unprocessable Entity"}})}getInvoices(e,r,s){return this.httpRequest.request({method:"GET",url:"/finance/invoices",query:{periodBeginningDate:e,periodEndingDate:r,reimbursementPointId:s},errors:{403:"Forbidden",422:"Unprocessable Entity"}})}getReimbursementPoints(){return this.httpRequest.request({method:"GET",url:"/finance/reimbursement-points",errors:{403:"Forbidden",422:"Unprocessable Entity"}})}getNationalPrograms(){return this.httpRequest.request({method:"GET",url:"/national-programs",errors:{403:"Forbidden",422:"Unprocessable Entity"}})}createOfferer(e){return this.httpRequest.request({method:"POST",url:"/offerers",body:e,mediaType:"application/json",errors:{403:"Forbidden",422:"Unprocessable Entity"}})}deleteApiKey(e){return this.httpRequest.request({method:"DELETE",url:"/offerers/api_keys/{api_key_prefix}",path:{api_key_prefix:e},errors:{403:"Forbidden",422:"Unprocessable Entity"}})}listEducationalOfferers(e){return this.httpRequest.request({method:"GET",url:"/offerers/educational",query:{offerer_id:e},errors:{403:"Forbidden",422:"Unprocessable Entity"}})}listOfferersNames(e,r,s){return this.httpRequest.request({method:"GET",url:"/offerers/names",query:{validated:e,validated_for_user:r,offerer_id:s},errors:{403:"Forbidden",422:"Unprocessable Entity"}})}saveNewOnboardingData(e){return this.httpRequest.request({method:"POST",url:"/offerers/new",body:e,mediaType:"application/json",errors:{403:"Forbidden",422:"Unprocessable Entity"}})}getOfferer(e){return this.httpRequest.request({method:"GET",url:"/offerers/{offerer_id}",path:{offerer_id:e},errors:{403:"Forbidden",422:"Unprocessable Entity"}})}generateApiKeyRoute(e){return this.httpRequest.request({method:"POST",url:"/offerers/{offerer_id}/api_keys",path:{offerer_id:e},errors:{403:"Forbidden",422:"Unprocessable Entity"}})}getOffererBankAccountsAndAttachedVenues(e){return this.httpRequest.request({method:"GET",url:"/offerers/{offerer_id}/bank-accounts",path:{offerer_id:e},errors:{403:"Forbidden",422:"Unprocessable Entity"}})}linkVenueToBankAccount(e,r,s){return this.httpRequest.request({method:"PATCH",url:"/offerers/{offerer_id}/bank-accounts/{bank_account_id}",path:{offerer_id:e,bank_account_id:r},body:s,mediaType:"application/json",errors:{403:"Forbidden",422:"Unprocessable Entity"}})}getOffererStatsDashboardUrl(e){return this.httpRequest.request({method:"GET",url:"/offerers/{offerer_id}/dashboard",path:{offerer_id:e},errors:{403:"Forbidden",422:"Unprocessable Entity"}})}canOffererCreateEducationalOffer(e){return this.httpRequest.request({method:"GET",url:"/offerers/{offerer_id}/eac-eligibility",path:{offerer_id:e},errors:{403:"Forbidden",422:"Unprocessable Entity"}})}inviteMember(e,r){return this.httpRequest.request({method:"POST",url:"/offerers/{offerer_id}/invite",path:{offerer_id:e},body:r,mediaType:"application/json",errors:{403:"Forbidden",422:"Unprocessable Entity"}})}getOffererMembers(e){return this.httpRequest.request({method:"GET",url:"/offerers/{offerer_id}/members",path:{offerer_id:e},errors:{403:"Forbidden",422:"Unprocessable Entity"}})}getAvailableReimbursementPoints(e){return this.httpRequest.request({method:"GET",url:"/offerers/{offerer_id}/reimbursement-points",path:{offerer_id:e},errors:{403:"Forbidden",422:"Unprocessable Entity"}})}getOffererStats(e){return this.httpRequest.request({method:"GET",url:"/offerers/{offerer_id}/stats",path:{offerer_id:e},errors:{403:"Forbidden",422:"Unprocessable Entity"}})}getOffererV2Stats(e){return this.httpRequest.request({method:"GET",url:"/offerers/{offerer_id}/v2/stats",path:{offerer_id:e},errors:{403:"Forbidden",422:"Unprocessable Entity"}})}listOffers(e,r,s,o,i,a,n,d,c){return this.httpRequest.request({method:"GET",url:"/offers",query:{nameOrIsbn:e,offererId:r,status:s,venueId:o,categoryId:i,creationMode:a,periodBeginningDate:n,periodEndingDate:d,collectiveOfferType:c},errors:{403:"Forbidden",422:"Unprocessable Entity"}})}postOffer(e){return this.httpRequest.request({method:"POST",url:"/offers",body:e,mediaType:"application/json",errors:{403:"Forbidden",422:"Unprocessable Entity"}})}patchOffersActiveStatus(e){return this.httpRequest.request({method:"PATCH",url:"/offers/active-status",body:e,mediaType:"application/json",errors:{403:"Forbidden",422:"Unprocessable Entity"}})}patchAllOffersActiveStatus(e){return this.httpRequest.request({method:"PATCH",url:"/offers/all-active-status",body:e,mediaType:"application/json",errors:{403:"Forbidden",422:"Unprocessable Entity"}})}getCategories(){return this.httpRequest.request({method:"GET",url:"/offers/categories",errors:{403:"Forbidden",422:"Unprocessable Entity"}})}deleteDraftOffers(e){return this.httpRequest.request({method:"POST",url:"/offers/delete-draft",body:e,mediaType:"application/json",errors:{403:"Forbidden",422:"Unprocessable Entity"}})}getAllMusicTypes(){return this.httpRequest.request({method:"GET",url:"/offers/music-types/all",errors:{403:"Forbidden",422:"Unprocessable Entity"}})}getEventMusicTypes(){return this.httpRequest.request({method:"GET",url:"/offers/music-types/event",errors:{403:"Forbidden",422:"Unprocessable Entity"}})}patchPublishOffer(e){return this.httpRequest.request({method:"PATCH",url:"/offers/publish",body:e,mediaType:"application/json",errors:{403:"Forbidden",404:"Not Found",422:"Unprocessable Entity"}})}createThumbnail(e){return this.httpRequest.request({method:"POST",url:"/offers/thumbnails/",formData:e,mediaType:"multipart/form-data",errors:{403:"Forbidden",422:"Unprocessable Entity"}})}deleteThumbnail(e){return this.httpRequest.request({method:"DELETE",url:"/offers/thumbnails/{offer_id}",path:{offer_id:e},errors:{403:"Forbidden",422:"Unprocessable Entity"}})}getOffer(e){return this.httpRequest.request({method:"GET",url:"/offers/{offer_id}",path:{offer_id:e},errors:{403:"Forbidden",422:"Unprocessable Entity"}})}patchOffer(e,r){return this.httpRequest.request({method:"PATCH",url:"/offers/{offer_id}",path:{offer_id:e},body:r,mediaType:"application/json",errors:{403:"Forbidden",422:"Unprocessable Entity"}})}postPriceCategories(e,r){return this.httpRequest.request({method:"POST",url:"/offers/{offer_id}/price_categories",path:{offer_id:e},body:r,mediaType:"application/json",errors:{403:"Forbidden",422:"Unprocessable Entity"}})}deletePriceCategory(e,r){return this.httpRequest.request({method:"DELETE",url:"/offers/{offer_id}/price_categories/{price_category_id}",path:{offer_id:e,price_category_id:r},errors:{403:"Forbidden",422:"Unprocessable Entity"}})}getStocksStats(e){return this.httpRequest.request({method:"GET",url:"/offers/{offer_id}/stocks-stats",path:{offer_id:e},errors:{403:"Forbidden",422:"Unprocessable Entity"}})}getStocks(e,r,s,o,i,a=!1,n=1,d=20){return this.httpRequest.request({method:"GET",url:"/offers/{offer_id}/stocks/",path:{offer_id:e},query:{date:r,time:s,price_category_id:o,order_by:i,order_by_desc:a,page:n,stocks_limit_per_page:d},errors:{403:"Forbidden",422:"Unprocessable Entity"}})}deleteAllFilteredStocks(e,r){return this.httpRequest.request({method:"POST",url:"/offers/{offer_id}/stocks/all-delete",path:{offer_id:e},body:r,mediaType:"application/json",errors:{403:"Forbidden",422:"Unprocessable Entity"}})}deleteStocks(e,r){return this.httpRequest.request({method:"POST",url:"/offers/{offer_id}/stocks/delete",path:{offer_id:e},body:r,mediaType:"application/json",errors:{403:"Forbidden",422:"Unprocessable Entity"}})}getReimbursementsCsv(e,r,s){return this.httpRequest.request({method:"GET",url:"/reimbursements/csv",query:{venueId:e,reimbursementPeriodBeginningDate:r,reimbursementPeriodEndingDate:s},errors:{403:"Forbidden",422:"Unprocessable Entity"}})}getSirenInfo(e){return this.httpRequest.request({method:"GET",url:"/sirene/siren/{siren}",path:{siren:e},errors:{403:"Forbidden",422:"Unprocessable Entity"}})}getSiretInfo(e){return this.httpRequest.request({method:"GET",url:"/sirene/siret/{siret}",path:{siret:e},errors:{403:"Forbidden",422:"Unprocessable Entity"}})}upsertStocks(e){return this.httpRequest.request({method:"POST",url:"/stocks/bulk",body:e,mediaType:"application/json",errors:{403:"Forbidden",422:"Unprocessable Entity"}})}deleteStock(e){return this.httpRequest.request({method:"DELETE",url:"/stocks/{stock_id}",path:{stock_id:e},errors:{403:"Forbidden",422:"Unprocessable Entity"}})}cookiesConsent(e){return this.httpRequest.request({method:"POST",url:"/users/cookies",body:e,mediaType:"application/json",errors:{400:"Bad Request",403:"Forbidden",422:"Unprocessable Entity"}})}getProfile(){return this.httpRequest.request({method:"GET",url:"/users/current",errors:{403:"Forbidden",422:"Unprocessable Entity"}})}postUserEmail(e){return this.httpRequest.request({method:"POST",url:"/users/email",body:e,mediaType:"application/json",errors:{403:"Forbidden",422:"Unprocessable Entity"}})}getUserEmailPendingValidation(){return this.httpRequest.request({method:"GET",url:"/users/email_pending_validation",errors:{403:"Forbidden",422:"Unprocessable Entity"}})}patchUserIdentity(e){return this.httpRequest.request({method:"PATCH",url:"/users/identity",body:e,mediaType:"application/json",errors:{403:"Forbidden",422:"Unprocessable Entity"}})}postNewPassword(e){return this.httpRequest.request({method:"POST",url:"/users/new-password",body:e,mediaType:"application/json",errors:{400:"Bad Request",403:"Forbidden",422:"Unprocessable Entity"}})}postChangePassword(e){return this.httpRequest.request({method:"POST",url:"/users/password",body:e,mediaType:"application/json",errors:{400:"Bad Request",403:"Forbidden",422:"Unprocessable Entity"}})}patchUserPhone(e){return this.httpRequest.request({method:"PATCH",url:"/users/phone",body:e,mediaType:"application/json",errors:{403:"Forbidden",422:"Unprocessable Entity"}})}postProFlags(e){return this.httpRequest.request({method:"POST",url:"/users/pro_flags",body:e,mediaType:"application/json",errors:{400:"Bad Request",403:"Forbidden",422:"Unprocessable Entity"}})}resetPassword(e){return this.httpRequest.request({method:"POST",url:"/users/reset-password",body:e,mediaType:"application/json",errors:{403:"Forbidden",422:"Unprocessable Entity"}})}patchProUserRgsSeen(){return this.httpRequest.request({method:"PATCH",url:"/users/rgs-seen",errors:{403:"Forbidden",422:"Unprocessable Entity"}})}signin(e){return this.httpRequest.request({method:"POST",url:"/users/signin",body:e,mediaType:"application/json",errors:{403:"Forbidden",422:"Unprocessable Entity"}})}signout(){return this.httpRequest.request({method:"GET",url:"/users/signout",errors:{403:"Forbidden",422:"Unprocessable Entity"}})}checkActivationTokenExists(e){return this.httpRequest.request({method:"GET",url:"/users/token/{token}",path:{token:e},errors:{403:"Forbidden",404:"Not Found",422:"Unprocessable Entity"}})}patchUserTutoSeen(){return this.httpRequest.request({method:"PATCH",url:"/users/tuto-seen",errors:{403:"Forbidden",422:"Unprocessable Entity"}})}patchValidateEmail(e){return this.httpRequest.request({method:"PATCH",url:"/users/validate_email",body:e,mediaType:"application/json",errors:{403:"Forbidden",422:"Unprocessable Entity"}})}getInvoicesV2(e,r,s){return this.httpRequest.request({method:"GET",url:"/v2/finance/invoices",query:{periodBeginningDate:e,periodEndingDate:r,bankAccountId:s},errors:{403:"Forbidden",422:"Unprocessable Entity"}})}signupProV2(e){return this.httpRequest.request({method:"POST",url:"/v2/users/signup/pro",body:e,mediaType:"application/json",errors:{403:"Forbidden",422:"Unprocessable Entity"}})}validateUser(e){return this.httpRequest.request({method:"PATCH",url:"/validate/user/{token}",path:{token:e},errors:{403:"Forbidden",422:"Unprocessable Entity"}})}fetchVenueLabels(){return this.httpRequest.request({method:"GET",url:"/venue-labels",errors:{403:"Forbidden",422:"Unprocessable Entity"}})}getVenueTypes(){return this.httpRequest.request({method:"GET",url:"/venue-types",errors:{403:"Forbidden",422:"Unprocessable Entity"}})}listVenueProviders(e){return this.httpRequest.request({method:"GET",url:"/venueProviders",query:{venueId:e},errors:{403:"Forbidden",422:"Unprocessable Entity"}})}createVenueProvider(e){return this.httpRequest.request({method:"POST",url:"/venueProviders",body:e,mediaType:"application/json",errors:{403:"Forbidden",422:"Unprocessable Entity"}})}updateVenueProvider(e){return this.httpRequest.request({method:"PUT",url:"/venueProviders",body:e,mediaType:"application/json",errors:{403:"Forbidden",422:"Unprocessable Entity"}})}deleteVenueProvider(e){return this.httpRequest.request({method:"DELETE",url:"/venueProviders/{venue_provider_id}",path:{venue_provider_id:e},errors:{403:"Forbidden",422:"Unprocessable Entity"}})}getVenues(e,r,s){return this.httpRequest.request({method:"GET",url:"/venues",query:{validated:e,activeOfferersOnly:r,offererId:s},errors:{403:"Forbidden",422:"Unprocessable Entity"}})}postCreateVenue(e){return this.httpRequest.request({method:"POST",url:"/venues",body:e,mediaType:"application/json",errors:{403:"Forbidden",422:"Unprocessable Entity"}})}getVenuesEducationalStatuses(){return this.httpRequest.request({method:"GET",url:"/venues-educational-statuses",errors:{403:"Forbidden",422:"Unprocessable Entity"}})}getVenuesOfOffererFromSiret(e){return this.httpRequest.request({method:"GET",url:"/venues/siret/{siret}",path:{siret:e},errors:{403:"Forbidden",422:"Unprocessable Entity"}})}getVenue(e){return this.httpRequest.request({method:"GET",url:"/venues/{venue_id}",path:{venue_id:e},errors:{403:"Forbidden",422:"Unprocessable Entity"}})}editVenue(e,r){return this.httpRequest.request({method:"PATCH",url:"/venues/{venue_id}",path:{venue_id:e},body:r,mediaType:"application/json",errors:{403:"Forbidden",422:"Unprocessable Entity"}})}deleteVenueBanner(e){return this.httpRequest.request({method:"DELETE",url:"/venues/{venue_id}/banner",path:{venue_id:e},errors:{403:"Forbidden",422:"Unprocessable Entity"}})}getVenueCollectiveData(e){return this.httpRequest.request({method:"GET",url:"/venues/{venue_id}/collective-data",path:{venue_id:e},errors:{403:"Forbidden",422:"Unprocessable Entity"}})}editVenueCollectiveData(e,r){return this.httpRequest.request({method:"PATCH",url:"/venues/{venue_id}/collective-data",path:{venue_id:e},body:r,mediaType:"application/json",errors:{403:"Forbidden",422:"Unprocessable Entity"}})}getVenueStatsDashboardUrl(e){return this.httpRequest.request({method:"GET",url:"/venues/{venue_id}/dashboard",path:{venue_id:e},errors:{403:"Forbidden",422:"Unprocessable Entity"}})}linkVenueToPricingPoint(e,r){return this.httpRequest.request({method:"POST",url:"/venues/{venue_id}/pricing-point",path:{venue_id:e},body:r,mediaType:"application/json",errors:{403:"Forbidden",422:"Unprocessable Entity"}})}getVenueStats(e){return this.httpRequest.request({method:"GET",url:"/venues/{venue_id}/stats",path:{venue_id:e},errors:{403:"Forbidden",422:"Unprocessable Entity"}})}}class Gr{constructor(e,r=Hr){this.request=new r({BASE:(e==null?void 0:e.BASE)??"http://localhost:5001",VERSION:(e==null?void 0:e.VERSION)??"1",WITH_CREDENTIALS:(e==null?void 0:e.WITH_CREDENTIALS)??!1,CREDENTIALS:(e==null?void 0:e.CREDENTIALS)??"include",TOKEN:e==null?void 0:e.TOKEN,USERNAME:e==null?void 0:e.USERNAME,PASSWORD:e==null?void 0:e.PASSWORD,HEADERS:e==null?void 0:e.HEADERS,ENCODE_PATH:e==null?void 0:e.ENCODE_PATH}),this.default=new Lr(this.request)}}class Mr{constructor(e){this.config=e}}class Ie extends Error{constructor(e,r,s){super(s),this.name="ApiError",this.url=r.url,this.status=r.status,this.statusText=r.statusText,this.body=r.body,this.request=e}}class Wr extends Error{constructor(e){super(e),this.name="CancelError"}get isCancelled(){return!0}}var F,U,q,N,$,z,x;class zr{constructor(e){f(this,F,void 0);f(this,U,void 0);f(this,q,void 0);f(this,N,void 0);f(this,$,void 0);f(this,z,void 0);f(this,x,void 0);p(this,F,!1),p(this,U,!1),p(this,q,!1),p(this,N,[]),p(this,$,new Promise((r,s)=>{p(this,z,r),p(this,x,s);const o=n=>{u(this,F)||u(this,U)||u(this,q)||(p(this,F,!0),u(this,z)&&u(this,z).call(this,n))},i=n=>{u(this,F)||u(this,U)||u(this,q)||(p(this,U,!0),u(this,x)&&u(this,x).call(this,n))},a=n=>{u(this,F)||u(this,U)||u(this,q)||u(this,N).push(n)};return Object.defineProperty(a,"isResolved",{get:()=>u(this,F)}),Object.defineProperty(a,"isRejected",{get:()=>u(this,U)}),Object.defineProperty(a,"isCancelled",{get:()=>u(this,q)}),e(o,i,a)}))}get[Symbol.toStringTag](){return"Cancellable Promise"}then(e,r){return u(this,$).then(e,r)}catch(e){return u(this,$).catch(e)}finally(e){return u(this,$).finally(e)}cancel(){if(!(u(this,F)||u(this,U)||u(this,q))){if(p(this,q,!0),u(this,N).length)try{for(const e of u(this,N))e()}catch(e){console.warn("Cancellation threw an error",e);return}u(this,N).length=0,u(this,x)&&u(this,x).call(this,new Wr("Request aborted"))}}get isCancelled(){return u(this,q)}}F=new WeakMap,U=new WeakMap,q=new WeakMap,N=new WeakMap,$=new WeakMap,z=new WeakMap,x=new WeakMap;const Xe=t=>t!=null,oe=t=>typeof t=="string",Te=t=>oe(t)&&t!=="",Ze=t=>typeof t=="object"&&typeof t.type=="string"&&typeof t.stream=="function"&&typeof t.arrayBuffer=="function"&&typeof t.constructor=="function"&&typeof t.constructor.name=="string"&&/^(Blob|File)$/.test(t.constructor.name)&&/^(Blob|File)$/.test(t[Symbol.toStringTag]),Pt=t=>t instanceof FormData,Jr=t=>{try{return btoa(t)}catch{return Buffer.from(t).toString("base64")}},Kr=t=>{const e=[],r=(o,i)=>{e.push(`${encodeURIComponent(o)}=${encodeURIComponent(String(i))}`)},s=(o,i)=>{Xe(i)&&(Array.isArray(i)?i.forEach(a=>{s(o,a)}):typeof i=="object"?Object.entries(i).forEach(([a,n])=>{s(`${o}[${a}]`,n)}):r(o,i))};return Object.entries(t).forEach(([o,i])=>{s(o,i)}),e.length>0?`?${e.join("&")}`:""},Yr=(t,e)=>{const r=t.ENCODE_PATH||encodeURI,s=e.url.replace("{api-version}",t.VERSION).replace(/{(.*?)}/g,(i,a)=>{var n;return(n=e.path)!=null&&n.hasOwnProperty(a)?r(String(e.path[a])):i}),o=`${t.BASE}${s}`;return e.query?`${o}${Kr(e.query)}`:o},Qr=t=>{if(t.formData){const e=new FormData,r=(s,o)=>{oe(o)||Ze(o)?e.append(s,o):e.append(s,JSON.stringify(o))};return Object.entries(t.formData).filter(([s,o])=>Xe(o)).forEach(([s,o])=>{Array.isArray(o)?o.forEach(i=>r(s,i)):r(s,o)}),e}},de=async(t,e)=>typeof e=="function"?e(t):e,Xr=async(t,e)=>{const r=await de(e,t.TOKEN),s=await de(e,t.USERNAME),o=await de(e,t.PASSWORD),i=await de(e,t.HEADERS),a=Object.entries({Accept:"application/json",...i,...e.headers}).filter(([n,d])=>Xe(d)).reduce((n,[d,c])=>({...n,[d]:String(c)}),{});if(Te(r)&&(a.Authorization=`Bearer ${r}`),Te(s)&&Te(o)){const n=Jr(`${s}:${o}`);a.Authorization=`Basic ${n}`}return e.body&&(e.mediaType?a["Content-Type"]=e.mediaType:Ze(e.body)?a["Content-Type"]=e.body.type||"application/octet-stream":oe(e.body)?a["Content-Type"]="text/plain":Pt(e.body)||(a["Content-Type"]="application/json")),new Headers(a)},Zr=t=>{var e;if(t.body)return(e=t.mediaType)!=null&&e.includes("/json")?JSON.stringify(t.body):oe(t.body)||Ze(t.body)||Pt(t.body)?t.body:JSON.stringify(t.body)},es=(t,e,r,s,o,i,a)=>{const n=new AbortController,d={headers:i,body:s??o,method:e.method,signal:n.signal};return t.WITH_CREDENTIALS&&(d.credentials=t.CREDENTIALS),a(()=>n.abort()),fetch(r,d)},ts=(t,e)=>{if(e){const r=t.headers.get(e);if(oe(r))return r}},rs=async t=>{if(t.status!==204)try{const e=t.headers.get("Content-Type");if(e)return e.toLowerCase().startsWith("application/json")?await t.json():await t.text()}catch(e){console.error(e)}},ss=(t,e)=>{const s={400:"Bad Request",401:"Unauthorized",403:"Forbidden",404:"Not Found",500:"Internal Server Error",502:"Bad Gateway",503:"Service Unavailable",...t.errors}[e.status];if(e.status===503){window.location.assign(We);return}if(s)throw new Ie(t,e,s);if(!e.ok)throw new Ie(t,e,"Generic Error")},os=(t,e)=>new zr(async(r,s,o)=>{try{const i=Yr(t,e),a=Qr(e),n=Zr(e),d=await Xr(t,e);if(!o.isCancelled){const c=await es(t,e,i,n,a,d,o),y=await rs(c),g=ts(c,e.responseHeader),b={url:i,ok:c.ok,status:c.status,statusText:c.statusText,body:g??y};ss(e,b),r(b.body)}}catch(i){i instanceof Ie&&i.status===401&&!i.url.includes("/users/current")&&!i.url.includes("/users/signin")&&(window.location.href="/connexion"),s(i)}});class is extends Mr{constructor(e){super(e)}request(e){return os(this.config,e)}}class as{constructor(e){this.httpRequest=e}cancelCollectiveBooking(e){return this.httpRequest.request({method:"PATCH",url:"/v2/collective/bookings/{booking_id}",path:{booking_id:e},errors:{401:"Authentification nécessaire",422:"Unprocessable Entity"}})}listCategories(){return this.httpRequest.request({method:"GET",url:"/v2/collective/categories",errors:{401:"Authentification nécessaire",422:"Unprocessable Entity"}})}listEducationalDomains(){return this.httpRequest.request({method:"GET",url:"/v2/collective/educational-domains",errors:{401:"Authentification nécessaire",422:"Unprocessable Entity"}})}listEducationalInstitutions(e,r,s,o,i,a,n=20){return this.httpRequest.request({method:"GET",url:"/v2/collective/educational-institutions/",query:{id:e,name:r,institutionType:s,city:o,postalCode:i,uai:a,limit:n},errors:{400:"Requête malformée",401:"Authentification nécessaire",422:"Unprocessable Entity"}})}getNationalPrograms(){return this.httpRequest.request({method:"GET",url:"/v2/collective/national-programs/",errors:{401:"Authentification nécessaire",403:"Vous n'avez pas les droits nécessaires pour voir ces informations",422:"Unprocessable Entity"}})}getOffererVenues(e){return this.httpRequest.request({method:"GET",url:"/v2/collective/offerer_venues",query:{siren:e},errors:{401:"Authentification nécessaire",422:"Unprocessable Entity"}})}getCollectiveOffersPublic(e,r,s,o){return this.httpRequest.request({method:"GET",url:"/v2/collective/offers/",query:{status:e,venueId:r,periodBeginningDate:s,periodEndingDate:o},errors:{401:"Authentification nécessaire",403:"Vous n'avez pas les droits nécessaires pour voir cette offre collective",404:"L'offre collective n'existe pas",422:"Unprocessable Entity"}})}postCollectiveOfferPublic(e){return this.httpRequest.request({method:"POST",url:"/v2/collective/offers/",body:e,mediaType:"application/json",errors:{400:"Requête malformée",401:"Authentification nécessaire",403:"Non éligible pour les offres collectives",404:"L'une des resources pour la création de l'offre n'a pas été trouvée",422:"Unprocessable Entity"}})}getOffersFormats(){return this.httpRequest.request({method:"GET",url:"/v2/collective/offers/formats",errors:{401:"Authentification nécessaire",403:"Vous n'avez pas les droits nécessaires pour voir cette offre collective",404:"L'offre collective n'existe pas",422:"Unprocessable Entity"}})}getCollectiveOfferPublic(e){return this.httpRequest.request({method:"GET",url:"/v2/collective/offers/{offer_id}",path:{offer_id:e},errors:{401:"Authentification nécessaire",403:"Vous n'avez pas les droits nécessaires pour voir cette offre collective",404:"L'offre collective n'existe pas",422:"Unprocessable Entity"}})}patchCollectiveOfferPublic(e,r){return this.httpRequest.request({method:"PATCH",url:"/v2/collective/offers/{offer_id}",path:{offer_id:e},body:r,mediaType:"application/json",errors:{400:"Requête malformée",401:"Authentification nécessaire",403:"Vous n'avez pas les droits nécessaires pour éditer cette offre collective",404:"L'une des resources pour la création de l'offre n'a pas été trouvée",422:"Cetains champs ne peuvent pas être édités selon l'état de l'offre"}})}listStudentsLevels(){return this.httpRequest.request({method:"GET",url:"/v2/collective/student-levels",errors:{401:"Authentification nécessaire",422:"Unprocessable Entity"}})}listSubcategories(){return this.httpRequest.request({method:"GET",url:"/v2/collective/subcategories",errors:{401:"Authentification nécessaire",422:"Unprocessable Entity"}})}listVenues(){return this.httpRequest.request({method:"GET",url:"/v2/collective/venues",errors:{401:"Authentification nécessaire",422:"Unprocessable Entity"}})}}class ns{constructor(e){this.httpRequest=e}patchCancelBookingByToken(e){return this.httpRequest.request({method:"PATCH",url:"/v2/bookings/cancel/token/{token}",path:{token:e},errors:{401:"Authentification nécessaire",403:"Vous n'avez pas les droits nécessaires pour annuler cette contremarque ou la réservation a déjà été validée",404:"La contremarque n'existe pas",410:"La contremarque a déjà été annulée",422:"Unprocessable Entity"}})}patchBookingKeepByToken(e){return this.httpRequest.request({method:"PATCH",url:"/v2/bookings/keep/token/{token}",path:{token:e},errors:{401:"Authentification nécessaire",403:"Vous n'avez pas les droits nécessaires pour voir cette contremarque",404:"La contremarque n'existe pas",410:"La requête est refusée car la contremarque n'a pas encore été validée, a été annulée, ou son remboursement a été initié",422:"Unprocessable Entity"}})}getBookingByTokenV2(e){return this.httpRequest.request({method:"GET",url:"/v2/bookings/token/{token}",path:{token:e},errors:{401:"Authentification nécessaire",403:"Vous n'avez pas les droits nécessaires pour voir cette contremarque",404:"La contremarque n'existe pas",410:`Cette contremarque a été validée.
        En l’invalidant vous indiquez qu’elle n’a pas été utilisée et vous ne serez pas remboursé.`,422:"Unprocessable Entity"}})}patchBookingUseByToken(e){return this.httpRequest.request({method:"PATCH",url:"/v2/bookings/use/token/{token}",path:{token:e},errors:{401:"Authentification nécessaire",403:"Vous n'avez pas les droits nécessaires pour voir cette contremarque",404:"La contremarque n'existe pas",410:`Cette contremarque a été validée.
        En l’invalidant vous indiquez qu’elle n’a pas été utilisée et vous ne serez pas remboursé.`,422:"Unprocessable Entity"}})}}class ls{constructor(e,r=is){this.request=new r({BASE:(e==null?void 0:e.BASE)??"http://localhost:5001",VERSION:(e==null?void 0:e.VERSION)??"2",WITH_CREDENTIALS:(e==null?void 0:e.WITH_CREDENTIALS)??!1,CREDENTIALS:(e==null?void 0:e.CREDENTIALS)??"include",TOKEN:e==null?void 0:e.TOKEN,USERNAME:e==null?void 0:e.USERNAME,PASSWORD:e==null?void 0:e.PASSWORD,HEADERS:e==null?void 0:e.HEADERS,ENCODE_PATH:e==null?void 0:e.ENCODE_PATH}),this.apiOffresCollectives=new as(this.request),this.dPrCiEApiContremarque=new ns(this.request)}}const us=new URLSearchParams(window.location.search),ds=us.get("token"),jt={BASE:St,VERSION:"1",WITH_CREDENTIALS:!0,CREDENTIALS:"include"},cs={BASE:St,VERSION:"1",WITH_CREDENTIALS:!1,CREDENTIALS:"omit",TOKEN:ds??""},it=new Gr(jt).default;new ls(jt).dPrCiEApiContremarque;new Ur(cs).default;const ps="homepageSelectedOffererId",hs={list:[]},At=Rt({name:"features",initialState:hs,reducers:{updateFeatures:(t,e)=>{t.list=e.payload,t.lastLoaded=new Date().getTime()}}});At.reducer;const{updateFeatures:at}=At.actions,ms={currentUser:null,selectedOffererId:null},Nt=Rt({name:"user",initialState:ms,reducers:{updateUser:(t,e)=>{t.currentUser=e.payload},updateSelectedOffererId:(t,e)=>{t.selectedOffererId=e.payload}}});Nt.reducer;const{updateUser:nt,updateSelectedOffererId:fs}=Nt.actions,Pe=({message:t="Chargement en cours",className:e})=>{const[r,s]=m.useState(3),[o,i]=m.useState(null);return m.useEffect(()=>{o&&window.clearInterval(o);const a=window.setInterval(()=>{s(n=>n%3+1)},500);return i(a),()=>{window.clearInterval(a)}},[]),l.jsxs("div",{className:fe("loading-spinner",e),"data-testid":"spinner",children:[l.jsx(ze,{src:Mt,alt:"",className:"loading-spinner-icon"}),l.jsx("div",{className:"content","data-dots":Array(r).fill(".").join(""),children:t})]})};try{Pe.displayName="Spinner",Pe.__docgenInfo={description:"",displayName:"Spinner",props:{message:{defaultValue:{value:"Chargement en cours"},description:"",name:"message",required:!1,type:{name:"string"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}}}}}catch{}function ys(){try{const t=window.localStorage,e="__storage_test__";return t.setItem(e,e),t.removeItem(e),!0}catch(t){return t instanceof DOMException&&(t.code===22||t.code===1014||t.name==="QuotaExceededError"||t.name==="NS_ERROR_DOM_QUOTA_REACHED")&&window.localStorage&&window.localStorage.length!==0}}const je=({children:t,isAdageIframe:e=!1})=>{const r=Gt(),[s,o]=m.useState(!1);return m.useEffect(()=>{const i=async()=>{if(!e)try{const d=await it.getProfile();r(nt(d))}catch{r(nt(null))}},a=async()=>{try{const d=await it.listFeatures();r(at(d))}catch{r(at([]))}};(async()=>{if(await Promise.all([i(),a()]),ys()){const d=localStorage.getItem(ps);r(fs(Number(d)))}o(!0)})()},[e,r]),s?t:l.jsx("main",{id:"content",className:"spinner-container",children:l.jsx(Pe,{})})};try{je.displayName="StoreProvider",je.__docgenInfo={description:"",displayName:"StoreProvider",props:{isAdageIframe:{defaultValue:{value:"false"},description:"",name:"isAdageIframe",required:!1,type:{name:"boolean"}}}}}catch{}const bs=""+new URL("offer-home-shell-0XuNO5pr.png",import.meta.url).href,gs=""+new URL("offer-shell-NTSb2-4f.png",import.meta.url).href,lt={"image-preview-shell":"_image-preview-shell_1xnl4_1","image-preview-home-preview":"_image-preview-home-preview_1xnl4_6"},Re={"image-preview-shell":"_image-preview-shell_glg9w_1","image-preview-blur-offer-preview":"_image-preview-blur-offer-preview_glg9w_7","image-preview-offer-preview":"_image-preview-offer-preview_glg9w_16"},J=({imageUrl:t})=>l.jsxs(Ct,{children:[l.jsxs(ce,{title:"Page d’accueil",children:[l.jsx("img",{alt:"",className:lt["image-preview-shell"],src:bs}),l.jsx("img",{"data-testid":"app-preview-offer-img-home",alt:"",className:lt["image-preview-home-preview"],src:t})]}),l.jsxs(ce,{title:"Détails de l’offre",children:[l.jsx("img",{alt:"",className:Re["image-preview-blur-offer-preview"],src:t}),l.jsx("img",{alt:"",className:Re["image-preview-shell"],src:gs}),l.jsx("img",{"data-testid":"app-preview-offer-img",alt:"",className:Re["image-preview-offer-preview"],src:t})]})]});try{J.displayName="AppPreviewOffer",J.__docgenInfo={description:"",displayName:"AppPreviewOffer",props:{imageUrl:{defaultValue:null,description:"",name:"imageUrl",required:!0,type:{name:"string"}}}}}catch{}const Es=""+new URL("venue-home-shell-oOWagqMM.png",import.meta.url).href,vs=""+new URL("venue-shell-Y2dRTB5B.png",import.meta.url).href,ut={"image-preview-shell":"_image-preview-shell_3dbf9_1","image-preview-home-preview":"_image-preview-home-preview_3dbf9_6"},Se={"image-preview-shell":"_image-preview-shell_gbu12_1","image-preview-blur-venue-preview":"_image-preview-blur-venue-preview_gbu12_7","image-preview-venue-preview":"_image-preview-venue-preview_gbu12_16"},pe=({imageUrl:t})=>{const e=wt(),r=m.useCallback(()=>{e.error("Une erreur est survenue. Merci de réessayer plus tard")},[e]);return l.jsxs(Ct,{children:[l.jsxs(ce,{title:"Page d’accueil",children:[l.jsx("img",{alt:"",className:ut["image-preview-shell"],src:Es}),l.jsx("img",{"data-testid":"app-preview-venue-img-home",alt:"",className:ut["image-preview-home-preview"],onError:r,src:t})]}),l.jsxs(ce,{title:"Page Lieu",children:[l.jsx("img",{alt:"",className:Se["image-preview-blur-venue-preview"],src:t}),l.jsx("img",{alt:"",className:Se["image-preview-shell"],src:vs}),l.jsx("img",{"data-testid":"app-preview-venue-img",alt:"",className:Se["image-preview-venue-preview"],src:t})]})]})};try{pe.displayName="AppPreviewVenue",pe.__docgenInfo={description:"",displayName:"AppPreviewVenue",props:{imageUrl:{defaultValue:null,description:"",name:"imageUrl",required:!0,type:{name:"string"}}}}}catch{}var h=(t=>(t.OFFER="offer",t.OFFER_COLLECTIVE="offer_collective",t.VENUE="venue",t))(h||{});const qs="_container_uuguy_2",_s="_header_uuguy_8",Ts="_subtitle_uuguy_17",Rs="_actions_uuguy_23",Ss="_button_uuguy_28",Fe={container:qs,header:_s,subtitle:Ts,actions:Rs,button:Ss},Ae=({mode:t,hideModal:e,imageUrl:r})=>{const s={[h.VENUE]:pe,[h.OFFER]:J,[h.OFFER_COLLECTIVE]:J}[t];return l.jsx(Ut,{hasCloseButton:!0,labelledBy:"Ajouter une image",onDismiss:e,children:l.jsxs("div",{className:Fe.container,children:[l.jsx("header",{children:l.jsx("h1",{className:Fe.header,children:"Ajouter une image"})}),l.jsx("div",{className:Fe.subtitle,children:"Prévisualisation de votre image dans l’application pass Culture"}),l.jsx(s,{imageUrl:r})]})})};try{Ae.displayName="ModalAppPreview",Ae.__docgenInfo={description:"",displayName:"ModalAppPreview",props:{hideModal:{defaultValue:null,description:"",name:"hideModal",required:!0,type:{name:"() => void"}},mode:{defaultValue:null,description:"",name:"mode",required:!0,type:{name:"enum",value:[{value:'"offer"'},{value:'"offer_collective"'},{value:'"venue"'}]}},imageUrl:{defaultValue:null,description:"",name:"imageUrl",required:!0,type:{name:"string"}}}}}catch{}const Ne=({imageUrl:t,mode:e})=>{const[r,s]=m.useState(!1);return l.jsxs(l.Fragment,{children:[l.jsx(te,{onClick:()=>s(!0),variant:ee.TERNARY,icon:Wt,children:"Prévisualiser"}),r&&t&&l.jsx(Ae,{mode:e,imageUrl:t,hideModal:()=>s(!1)})]})};try{Ne.displayName="ButtonAppPreview",Ne.__docgenInfo={description:"",displayName:"ButtonAppPreview",props:{mode:{defaultValue:null,description:"",name:"mode",required:!0,type:{name:"enum",value:[{value:'"offer"'},{value:'"offer_collective"'},{value:'"venue"'}]}},imageUrl:{defaultValue:null,description:"",name:"imageUrl",required:!0,type:{name:"string"}}}}}catch{}const Fs={"button-image-delete-icon":"_button-image-delete-icon_ooh4c_1"},xe=({isLoading:t,onConfirm:e,onDismiss:r})=>l.jsx(Xt,{cancelText:"Retour",confirmText:"Supprimer",icon:Zt,isLoading:t,onCancel:r,onConfirm:e,title:"Supprimer l’image",children:"Souhaitez-vous vraiment supprimer cette image ?"});try{xe.displayName="ModalImageDelete",xe.__docgenInfo={description:"",displayName:"ModalImageDelete",props:{isLoading:{defaultValue:null,description:"",name:"isLoading",required:!0,type:{name:"boolean"}},onConfirm:{defaultValue:null,description:"",name:"onConfirm",required:!0,type:{name:"() => void"}},onDismiss:{defaultValue:null,description:"",name:"onDismiss",required:!0,type:{name:"() => void"}}}}}catch{}const ke=({onImageDelete:t})=>{const[e,r]=m.useState(!1),[s,o]=m.useState(!1),i=()=>{o(!0),t()};return l.jsxs(l.Fragment,{children:[l.jsxs(te,{onClick:()=>r(!0),variant:ee.TERNARY,children:[l.jsx(ze,{alt:"",className:Fs["button-image-delete-icon"],src:Qt}),"Supprimer"]}),e&&l.jsx(xe,{isLoading:s,onConfirm:i,onDismiss:()=>r(!1)})]})};try{ke.displayName="ButtonImageDelete",ke.__docgenInfo={description:"",displayName:"ButtonImageDelete",props:{onImageDelete:{defaultValue:null,description:"",name:"onImageDelete",required:!0,type:{name:"() => void"}}}}}catch{}const Us="_label_1diwk_23",Cs="_icon_1diwk_36",Y={"button-image-add":"_button-image-add_1diwk_2","add-image-venue":"_add-image-venue_1diwk_15","add-image-offer":"_add-image-offer_1diwk_19",label:Us,"image-upload-button-label":"_image-upload-button-label_1diwk_29",icon:Cs},Be=({onClick:t,mode:e})=>l.jsxs("button",{className:fe(Y["button-image-add"],{[Y["add-image-venue"]]:e===h.VENUE,[Y["add-image-offer"]]:e===h.OFFER||e===h.OFFER_COLLECTIVE}),onClick:t,type:"button",children:[l.jsx(ze,{src:zt,alt:"",className:Y.icon}),l.jsx("span",{className:Y.label,children:"Ajouter une image"})]});try{Be.displayName="ButtonImageAdd",Be.__docgenInfo={description:"",displayName:"ButtonImageAdd",props:{onClick:{defaultValue:null,description:"",name:"onClick",required:!0,type:{name:"() => void"}},mode:{defaultValue:null,description:"",name:"mode",required:!0,type:{name:"enum",value:[{value:'"offer"'},{value:'"offer_collective"'},{value:'"venue"'}]}}}}}catch{}const ws=async(t,e="image.jpg")=>{const s=await(await fetch(t)).blob();return new File([s],e,{type:s.type})},he=(t,e)=>t+e/2,Os=t=>1/t,xt={[h.OFFER]:{maxSize:1e7,minWidth:400,types:["image/png","image/jpeg"],minHeight:600},[h.OFFER_COLLECTIVE]:{maxSize:1e7,minWidth:400,types:["image/png","image/jpeg"],minHeight:600},[h.VENUE]:{maxSize:1e7,minWidth:600,types:["image/png","image/jpeg"],minHeight:400}},Is=t=>{const[e,r]=m.useState(0),[s,o]=m.useState(0);return m.useEffect(()=>{ir(t).then(i=>{i&&(r(i.width),o(i.height))})},[]),{width:e,height:s}},L={"modal-image-crop":"_modal-image-crop_11rti_2","modal-image-crop-form":"_modal-image-crop-form_11rti_13","modal-image-crop-header":"_modal-image-crop-header_11rti_19","modal-image-crop-right":"_modal-image-crop-right_11rti_27","modal-image-crop-credit":"_modal-image-crop-credit_11rti_33","modal-image-crop-footer":"_modal-image-crop-footer_11rti_39"},Ps=({originalDimensions:t,orientation:e})=>e==="landscape"?{width:Math.floor(Math.min(t.width,t.height/2*3)),height:Math.floor(Math.min(t.height,t.width/3*2))}:{width:Math.floor(Math.min(t.width,t.height/3*2)),height:Math.floor(Math.min(t.height,t.width/2*3))},De=({onReplaceImage:t,image:e,credit:r,onSetCredit:s,onEditedImageSave:o,saveInitialPosition:i,initialPosition:a,initialScale:n,mode:d,submitButtonText:c})=>{const{width:y,height:g}=Is(e),b=m.useRef(null),ye=wt(),ie=xt[d].minWidth,{width:be}=Ps({originalDimensions:{width:y,height:g},orientation:d===h.VENUE?"landscape":"portrait"}),k=Math.min(4,(be-10)/ie),C={[h.OFFER]:384,[h.OFFER_COLLECTIVE]:384,[h.VENUE]:244}[d],ge={[h.OFFER]:{canvasHeight:C,canvasWidth:C*6/9,cropBorderColor:"#FFF",cropBorderHeight:50,cropBorderWidth:105,maxScale:k},[h.OFFER_COLLECTIVE]:{canvasHeight:C,canvasWidth:C*6/9,cropBorderColor:"#FFF",cropBorderHeight:50,cropBorderWidth:105,maxScale:k},[h.VENUE]:{canvasHeight:C,canvasWidth:C*3/2,cropBorderColor:"#FFF",cropBorderHeight:40,cropBorderWidth:100,maxScale:k}}[d],K=tr({initialValues:{credit:r||"",scale:n||1},onSubmit:H=>{try{if(b.current){const ae=b.current.getImage(),B=b.current.getCroppingRect();i({x:he(B.x,B.width),y:he(B.y,B.height)}),o(ae.toDataURL(),B)}s(H.credit)}catch{ye.error("Une erreur est survenue. Merci de réessayer plus tard")}}});return l.jsx("section",{className:L["modal-image-crop"],children:l.jsx(rr,{value:K,children:l.jsxs(sr,{onSubmit:K.handleSubmit,children:[l.jsxs("div",{className:L["modal-image-crop-form"],children:[l.jsx("header",{children:l.jsx("h1",{className:L["modal-image-crop-header"],children:"Ajouter une image"})}),l.jsx("p",{className:L["modal-image-crop-right"],children:"En utilisant ce contenu, je certifie que je suis propriétaire ou que je dispose des autorisations nécessaires pour l’utilisation de celui-ci."}),l.jsx(or,{...ge,image:e,initialPosition:a,ref:b}),l.jsx(Yt,{countCharacters:!0,className:L["modal-image-crop-credit"],label:"Crédit de l’image",maxLength:255,name:"credit",placeholder:"Photographe...",required:!1,type:"text",isOptional:!0})]}),l.jsx(Kt,{}),l.jsxs("footer",{className:L["modal-image-crop-footer"],children:[l.jsx(te,{icon:Jt,onClick:t,variant:ee.TERNARY,children:"Remplacer l’image"}),l.jsx(Ft,{children:c})]})]})})})};try{De.displayName="ModalImageCrop",De.__docgenInfo={description:"",displayName:"ModalImageCrop",props:{image:{defaultValue:null,description:"",name:"image",required:!0,type:{name:"File"}},credit:{defaultValue:null,description:"",name:"credit",required:!0,type:{name:"string"}},onSetCredit:{defaultValue:null,description:"",name:"onSetCredit",required:!0,type:{name:"(credit: string) => void"}},onReplaceImage:{defaultValue:null,description:"",name:"onReplaceImage",required:!0,type:{name:"() => void"}},initialPosition:{defaultValue:null,description:"",name:"initialPosition",required:!1,type:{name:"Position"}},initialScale:{defaultValue:null,description:"",name:"initialScale",required:!1,type:{name:"number"}},saveInitialPosition:{defaultValue:null,description:"",name:"saveInitialPosition",required:!0,type:{name:"(position: Position) => void"}},onEditedImageSave:{defaultValue:null,description:"",name:"onEditedImageSave",required:!0,type:{name:"(dataUrl: string, croppedRect: CroppedRect) => void"}},mode:{defaultValue:null,description:"",name:"mode",required:!0,type:{name:"enum",value:[{value:'"offer"'},{value:'"offer_collective"'},{value:'"venue"'}]}},submitButtonText:{defaultValue:null,description:"",name:"submitButtonText",required:!0,type:{name:"string"}}}}}catch{}const js=({constraints:t})=>lr().shape(t.reduce((e,r)=>({...e,[r.id]:ur().test({message:r.description,test:(s,o)=>r.asyncValidator(o.parent.image)})}),{})),Ve=({onSubmit:t,mode:e})=>{const[r,s]=m.useState([]),o=xt[e],i=[ne.formats(o.types),ne.size(o.maxSize),ne.width(o.minWidth),ne.height(o.minHeight)],a=js({constraints:i}),n=d=>{const c=d.currentTarget.files&&d.currentTarget.files[0]||null;c&&a.validate({image:c},{abortEarly:!1}).then(()=>t({image:c})).catch(y=>s(y.inner.map(g=>g.path||"unknown")))};return l.jsxs("form",{onSubmit:d=>d.preventDefault(),children:[l.jsx(nr,{label:"Importer une image depuis l’ordinateur",fileTypes:["image/png","image/jpeg"],isValid:r.length===0,onChange:n}),l.jsx(ar,{constraints:i,failingConstraints:r})]})};try{Ve.displayName="ImageUploadBrowserForm",Ve.__docgenInfo={description:"",displayName:"ImageUploadBrowserForm",props:{onSubmit:{defaultValue:null,description:"",name:"onSubmit",required:!0,type:{name:"(values: ImageUploadBrowserFormValues) => void"}},mode:{defaultValue:null,description:"",name:"mode",required:!0,type:{name:"enum",value:[{value:'"offer"'},{value:'"offer_collective"'},{value:'"venue"'}]}}}}}catch{}const As="_header_gcnvk_13",dt={"modal-upload-browser":"_modal-upload-browser_gcnvk_2",header:As,"horizontal-rule":"_horizontal-rule_gcnvk_19"},$e=({onImageClientUpload:t,mode:e})=>{const r={[h.OFFER]:"portrait",[h.OFFER_COLLECTIVE]:"portrait",[h.VENUE]:"landscape"}[e];return l.jsxs("section",{className:dt["modal-upload-browser"],children:[l.jsx("header",{children:l.jsx("h1",{className:dt.header,children:"Ajouter une image"})}),l.jsx(dr,{orientation:r}),l.jsx(Ve,{onSubmit:t,mode:e})]})};try{$e.displayName="ModalImageUploadBrowser",$e.__docgenInfo={description:"",displayName:"ModalImageUploadBrowser",props:{onImageClientUpload:{defaultValue:null,description:"",name:"onImageClientUpload",required:!0,type:{name:"(values: ImageUploadBrowserFormValues) => void"}},mode:{defaultValue:null,description:"",name:"mode",required:!0,type:{name:"enum",value:[{value:'"offer"'},{value:'"offer_collective"'},{value:'"venue"'}]}}}}}catch{}const Ns="_container_4bsmh_2",xs="_header_4bsmh_8",ks="_subtitle_4bsmh_17",Bs="_actions_4bsmh_23",Ds="_button_4bsmh_29",G={container:Ns,header:xs,subtitle:ks,actions:Bs,button:Ds},He=({imageUrl:t,isUploading:e,onGoBack:r,onUploadImage:s,mode:o})=>{const i={[h.VENUE]:pe,[h.OFFER]:J,[h.OFFER_COLLECTIVE]:J}[o];return l.jsxs("div",{className:G.container,children:[l.jsx("header",{children:l.jsx("h1",{className:G.header,children:"Ajouter une image"})}),l.jsx("div",{className:G.subtitle,children:"Prévisualisation de votre image dans l’application pass Culture"}),l.jsx(i,{imageUrl:t}),l.jsxs("div",{className:G.actions,children:[l.jsx(te,{className:G.button,onClick:r,title:"Retour",type:"button",variant:ee.SECONDARY,children:"Retour"}),l.jsx(Ft,{className:G.button,disabled:!1,isLoading:!!e,onClick:s})]})]})};try{He.displayName="ModalImageUploadConfirm",He.__docgenInfo={description:"",displayName:"ModalImageUploadConfirm",props:{imageUrl:{defaultValue:null,description:"",name:"imageUrl",required:!0,type:{name:"string"}},mode:{defaultValue:null,description:"",name:"mode",required:!0,type:{name:"enum",value:[{value:'"offer"'},{value:'"offer_collective"'},{value:'"venue"'}]}},isUploading:{defaultValue:null,description:"",name:"isUploading",required:!0,type:{name:"boolean"}},onGoBack:{defaultValue:null,description:"",name:"onGoBack",required:!0,type:{name:"() => void"}},onUploadImage:{defaultValue:null,description:"",name:"onUploadImage",required:!0,type:{name:"() => void"}}}}}catch{}const Le=({mode:t,onDismiss:e,onImageUpload:r,initialValues:s={}})=>{const[o,i]=m.useState(!1),{imageUrl:a,originalImageUrl:n,credit:d,cropParams:c}=s,[y,g]=m.useState();m.useEffect(()=>{async function w(ve){g(await ws(ve))}const O=n||a;O&&w(O),i(!0)},[]);const[b,ye]=m.useState(d||""),[ie,be]=m.useState(),[k,C]=m.useState(""),[ge,tt]=m.useState(!1),{xCropPercent:Ee,yCropPercent:K,heightCropPercent:H,widthCropPercent:ae}=c||{},[B,Dt]=m.useState({x:Ee&&ae?he(Ee,ae):.5,y:K&&H?he(K,H):.5}),Vt=()=>{C("")},$t=w=>{g(w.image||void 0)},Ht=()=>{g(void 0)},rt=(w,O,ve)=>{w===void 0||O===void 0||(r({imageFile:O,imageCroppedDataUrl:ve,cropParams:w,credit:b}),e(),tt(!1))},st=t!==h.OFFER_COLLECTIVE,Lt=(w,O)=>{be(O),C(w),st||rt(O,y,w)};return o?l.jsx(Ut,{hasCloseButton:!0,labelledBy:"Ajouter une image",onDismiss:e,children:y?!ie||!k?l.jsx(De,{credit:b,image:y,initialPosition:B,initialScale:H?Os(H):1,onEditedImageSave:Lt,onReplaceImage:Ht,onSetCredit:ye,saveInitialPosition:Dt,mode:t,submitButtonText:st?"Suivant":"Enregistrer"}):l.jsx(He,{isUploading:ge,onGoBack:Vt,onUploadImage:()=>rt(ie,y,k),imageUrl:k,mode:t}):l.jsx($e,{onImageClientUpload:$t,mode:t})}):null};try{Le.displayName="ModalImageEdit",Le.__docgenInfo={description:"",displayName:"ModalImageEdit",props:{mode:{defaultValue:null,description:"",name:"mode",required:!0,type:{name:"enum",value:[{value:'"offer"'},{value:'"offer_collective"'},{value:'"venue"'}]}},onDismiss:{defaultValue:null,description:"",name:"onDismiss",required:!0,type:{name:"() => void"}},onImageUpload:{defaultValue:null,description:"",name:"onImageUpload",required:!0,type:{name:"(values: OnImageUploadArgs) => void"}},initialValues:{defaultValue:{value:"{}"},description:"",name:"initialValues",required:!1,type:{name:"UploadImageValues"}}}}}catch{}const me=({mode:t,initialValues:e={},onImageUpload:r,onClickButtonImage:s})=>{const[o,i]=m.useState(!1),{imageUrl:a,originalImageUrl:n}=e,d=()=>{s&&s(),i(!0)};return l.jsxs(l.Fragment,{children:[a||n?l.jsx(te,{onClick:d,variant:ee.TERNARY,alt:"Modifier l’image",icon:er,children:"Modifier"}):l.jsx(Be,{mode:t,onClick:d}),o&&l.jsx(Le,{mode:t,onDismiss:()=>i(!1),onImageUpload:r,initialValues:e})]})};try{me.displayName="ButtonImageEdit",me.__docgenInfo={description:"",displayName:"ButtonImageEdit",props:{onImageUpload:{defaultValue:null,description:"",name:"onImageUpload",required:!0,type:{name:"(values: OnImageUploadArgs) => void"}},initialValues:{defaultValue:{value:"{}"},description:"",name:"initialValues",required:!1,type:{name:"UploadImageValues"}},mode:{defaultValue:null,description:"",name:"mode",required:!0,type:{name:"enum",value:[{value:'"offer"'},{value:'"offer_collective"'},{value:'"venue"'}]}},onClickButtonImage:{defaultValue:null,description:"",name:"onClickButtonImage",required:!1,type:{name:"(() => void)"}}}}}catch{}const Ue={"image-preview":"_image-preview_3q6l4_1","preview-venue":"_preview-venue_3q6l4_7","preview-offer":"_preview-offer_3q6l4_11"},Ge=({imageUrl:t,alt:e,mode:r})=>l.jsx("img",{alt:e,className:fe(Ue["image-preview"],{[Ue["preview-venue"]]:r===h.VENUE,[Ue["preview-offer"]]:r===h.OFFER||r===h.OFFER_COLLECTIVE}),src:t});try{Ge.displayName="ImagePreview",Ge.__docgenInfo={description:"",displayName:"ImagePreview",props:{imageUrl:{defaultValue:null,description:"",name:"imageUrl",required:!0,type:{name:"string"}},alt:{defaultValue:null,description:"",name:"alt",required:!0,type:{name:"string"}},mode:{defaultValue:null,description:"",name:"mode",required:!0,type:{name:"enum",value:[{value:'"offer"'},{value:'"offer_collective"'},{value:'"venue"'}]}}}}}catch{}const Ce={"explanatory-text":"_explanatory-text_pfqdv_1","image-uploader-image-container":"_image-uploader-image-container_pfqdv_5","image-uploader-actions-container":"_image-uploader-actions-container_pfqdv_9","actions-wrapper":"_actions-wrapper_pfqdv_16"},Me=({className:t,onImageUpload:e,onImageDelete:r,initialValues:s={},mode:o,onClickButtonImageAdd:i,hideActionButtons:a=!1})=>{const{imageUrl:n,originalImageUrl:d,credit:c,cropParams:y}=s;return l.jsx("div",{className:fe(t,Ce["image-uploader-image-container"]),children:n&&d?l.jsxs(l.Fragment,{children:[l.jsx(Ge,{mode:o,imageUrl:n,alt:"Prévisualisation de l’image"}),!a&&l.jsx("div",{className:Ce["image-uploader-actions-container"],children:l.jsxs("div",{className:Ce["actions-wrapper"],children:[l.jsx(me,{mode:o,initialValues:{originalImageUrl:d,imageUrl:n,credit:c,cropParams:y},onImageUpload:e,onClickButtonImage:i}),o!==h.OFFER_COLLECTIVE&&l.jsx(Ne,{imageUrl:n,mode:o}),l.jsx(ke,{onImageDelete:r})]})})]}):l.jsx(me,{mode:o,onImageUpload:e,onClickButtonImage:i})})},kt=Me;try{Me.displayName="ImageUploader",Me.__docgenInfo={description:"",displayName:"ImageUploader",props:{className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},onImageUpload:{defaultValue:null,description:"",name:"onImageUpload",required:!0,type:{name:"(values: OnImageUploadArgs) => void"}},onImageDelete:{defaultValue:null,description:"",name:"onImageDelete",required:!0,type:{name:"() => void"}},initialValues:{defaultValue:{value:"{}"},description:"",name:"initialValues",required:!1,type:{name:"UploadImageValues"}},mode:{defaultValue:null,description:"",name:"mode",required:!0,type:{name:"enum",value:[{value:'"offer"'},{value:'"offer_collective"'},{value:'"venue"'}]}},onClickButtonImageAdd:{defaultValue:null,description:"",name:"onClickButtonImageAdd",required:!1,type:{name:"(() => void)"}},hideActionButtons:{defaultValue:{value:"false"},description:"",name:"hideActionButtons",required:!1,type:{name:"boolean"}}}}}catch{}const ct=""+new URL("sample-image-landscape-eBpjwR3E.jpg",import.meta.url).href,pt=""+new URL("sample-image-portrait-DqK7CIsS.jpg",import.meta.url).href,ri={title:"components/ImageUploader",component:kt},et=t=>l.jsx(je,{children:l.jsx(kt,{...t})}),Bt={initialValues:{originalImageUrl:pt,imageUrl:pt,credit:"John Do",cropParams:{xCropPercent:0,yCropPercent:0,heightCropPercent:1,widthCropPercent:1}},mode:h.OFFER,onImageDelete:()=>{alert("onDelete have been called.")},onImageUpload:()=>{alert("onImageUpload have been called.")}},Q=et.bind({});Q.args={...Bt};const X=et.bind({});X.args={...Bt,initialValues:{imageUrl:ct,originalImageUrl:ct},mode:h.VENUE};const Z=et.bind({});Z.args={mode:h.OFFER};var ft,yt,bt;Q.parameters={...Q.parameters,docs:{...(ft=Q.parameters)==null?void 0:ft.docs,source:{originalSource:`props => <StoreProvider>
    <ImageUploader {...props} />
  </StoreProvider>`,...(bt=(yt=Q.parameters)==null?void 0:yt.docs)==null?void 0:bt.source}}};var gt,Et,vt;X.parameters={...X.parameters,docs:{...(gt=X.parameters)==null?void 0:gt.docs,source:{originalSource:`props => <StoreProvider>
    <ImageUploader {...props} />
  </StoreProvider>`,...(vt=(Et=X.parameters)==null?void 0:Et.docs)==null?void 0:vt.source}}};var qt,_t,Tt;Z.parameters={...Z.parameters,docs:{...(qt=Z.parameters)==null?void 0:qt.docs,source:{originalSource:`props => <StoreProvider>
    <ImageUploader {...props} />
  </StoreProvider>`,...(Tt=(_t=Z.parameters)==null?void 0:_t.docs)==null?void 0:Tt.source}}};const si=["WithImageOffer","WithImageVenue","WithoutImage"];export{Q as WithImageOffer,X as WithImageVenue,Z as WithoutImage,si as __namedExportsOrder,ri as default};
