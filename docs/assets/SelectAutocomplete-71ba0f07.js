import{j as o}from"./jsx-runtime-ffb262ed.js";import{c as x}from"./index-a587463d.js";import{c as w,b as F}from"./formik.esm-96bdd02b.js";import{r as n}from"./index-76fb7be0.js";import{g as H}from"./getLabelString-a0462018.js";import{B as D}from"./BaseCheckbox-2cbf2f9d.js";import"./BaseFileInput-5547a44b.js";import"./stroke-down-f1e965f4.js";import{F as R,A as I}from"./AutocompleteList-31da84c1.js";import"./FieldError-0089fdbc.js";import"./FieldSuccess-31bdacb0.js";import{B as T}from"./BaseInput-a47c473b.js";const z="_option_1lge5_7",u={"select-autocomplete-container":"_select-autocomplete-container_1lge5_2",option:z,"option-disabled":"_option-disabled_1lge5_18","select-autocomplete-input":"_select-autocomplete-input_1lge5_22"},E=r=>r?r.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,""):"",y=({className:r,disabled:N=!1,name:e,hideFooter:v=!1,isOptional:B=!1,label:V,maxDisplayOptions:d,maxHeight:O,onSearchChange:g,options:c,smallLabel:$=!1,placeholder:A,hideArrow:C=!1})=>{const{setFieldValue:m,setFieldTouched:L}=w(),[q,s,S]=F(e),[f]=F(`search-${e}`),p=n.useRef(null),[b,i]=n.useState(!1),[h,_]=n.useState(c);return n.useEffect(()=>{_(c)},[c]),n.useEffect(()=>{const t=a=>{var l;(l=p.current)!=null&&l.contains(a.target)||i(!1)};return p.current&&document.addEventListener("mousedown",t),()=>{document.removeEventListener("mousedown",t)}},[p]),n.useEffect(()=>{if(g){g();return}const a=E(f.value).split(" ");_(c.filter(l=>{const k=E(l.label);return a.length===0||a.every(j=>k.includes(j))}))},[f.value]),o.jsx(R,{label:V,name:`search-${e}`,error:s.error,showError:s.touched&&!!s.error,smallLabel:$,isOptional:B,hideFooter:v,className:r,children:o.jsxs("div",{className:x(u["select-autocomplete-container"],r),ref:p,children:[o.jsx(T,{onFocus:()=>{b||(i(!0),m(`search-${e}`,"",!1)),L(e,!0)},placeholder:A??H(V),hasError:s.touched&&!!s.error,type:"text",disabled:N,className:u["select-autocomplete-input"],autoComplete:"off",...f}),o.jsx(I,{className:u.menu,onButtonClick:()=>{b?i(!1):(m(`search-${e}`,"",!1),i(!0)),L(e,!0)},maxHeight:O,isOpen:b,filteredOptions:[...h.slice(0,d??h.length),...d&&d<h.length?[{value:"",label:`${d} rÃ©sultats maximum. Veuillez affiner votre recherche`,disabled:!0}]:[]],renderOption:({value:t,label:a,disabled:l})=>o.jsx(D,{label:a,className:x(u.option,{[u["option-disabled"]]:l}),value:t,id:`${e}-${t}`,name:e,role:"option","aria-selected":q.value===t,disabled:l,defaultChecked:q.value===t,onClick:()=>{S.setValue(t),i(!1),m(`search-${e}`,a,!1)}},`${e}-${t}`),hideArrow:C})]})})},te=y;try{y.displayName="SelectAutocomplete",y.__docgenInfo={description:"",displayName:"SelectAutocomplete",props:{label:{defaultValue:null,description:"",name:"label",required:!0,type:{name:"string | Element"}},name:{defaultValue:null,description:"",name:"name",required:!0,type:{name:"string"}},description:{defaultValue:null,description:"",name:"description",required:!1,type:{name:"string"}},maxLength:{defaultValue:null,description:"",name:"maxLength",required:!1,type:{name:"number"}},isLabelHidden:{defaultValue:null,description:"",name:"isLabelHidden",required:!1,type:{name:"boolean"}},hasLabelLineBreak:{defaultValue:null,description:"",name:"hasLabelLineBreak",required:!1,type:{name:"boolean"}},isOptional:{defaultValue:{value:"false"},description:"",name:"isOptional",required:!1,type:{name:"boolean"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},classNameLabel:{defaultValue:null,description:"",name:"classNameLabel",required:!1,type:{name:"string"}},classNameFooter:{defaultValue:null,description:"",name:"classNameFooter",required:!1,type:{name:"string"}},filterVariant:{defaultValue:null,description:"",name:"filterVariant",required:!1,type:{name:"boolean"}},smallLabel:{defaultValue:{value:"false"},description:"",name:"smallLabel",required:!1,type:{name:"boolean"}},hideFooter:{defaultValue:{value:"false"},description:"",name:"hideFooter",required:!1,type:{name:"boolean"}},inline:{defaultValue:null,description:"",name:"inline",required:!1,type:{name:"boolean"}},clearButtonProps:{defaultValue:null,description:"",name:"clearButtonProps",required:!1,type:{name:"(ButtonHTMLAttributes<HTMLButtonElement> & { tooltip: string; })"}},ErrorDetails:{defaultValue:null,description:"",name:"ErrorDetails",required:!1,type:{name:"ReactNode"}},disabled:{defaultValue:{value:"false"},description:"",name:"disabled",required:!1,type:{name:"boolean"}},filterLabel:{defaultValue:null,description:"",name:"filterLabel",required:!1,type:{name:"string"}},maxDisplayOptions:{defaultValue:null,description:"",name:"maxDisplayOptions",required:!1,type:{name:"number"}},maxDisplayOptionsLabel:{defaultValue:null,description:"",name:"maxDisplayOptionsLabel",required:!1,type:{name:"string"}},maxHeight:{defaultValue:null,description:"",name:"maxHeight",required:!1,type:{name:"number"}},onSearchChange:{defaultValue:null,description:"",name:"onSearchChange",required:!1,type:{name:"(() => void)"}},options:{defaultValue:null,description:"",name:"options",required:!0,type:{name:"SelectOption[]"}},placeholder:{defaultValue:null,description:"",name:"placeholder",required:!1,type:{name:"string"}},hideArrow:{defaultValue:{value:"false"},description:"",name:"hideArrow",required:!1,type:{name:"boolean"}}}}}catch{}export{te as S};
//# sourceMappingURL=SelectAutocomplete-71ba0f07.js.map
