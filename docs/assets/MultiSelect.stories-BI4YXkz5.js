import{V as ye}from"./index-QnyK0pSJ.js";import{j as e}from"./jsx-runtime-DF2Pcvd1.js";import{c as E}from"./index-DeARc5FM.js";import{r as u}from"./index-B2-qRKKC.js";import{F as _e}from"./FieldError-B3RhE53I.js";import{f as Se}from"./full-close-5Oxr7nnd.js";import{S as de}from"./SvgIcon-DfLnDDE5.js";import{C as F}from"./Checkbox-DPm0mFO1.js";import{s as ve}from"./stroke-search-dgesjRZH.js";import{B as Oe}from"./BaseInput-JKfrEs2s.js";import{f as Ve}from"./full-down-Cmbtr9nI.js";import{f as Ne}from"./full-up-D6TPt2ju.js";import"./chunk-PVWAREVJ-Bt0DAUl0.js";import"./_commonjsHelpers-Cpj98o6Y.js";import"./stroke-error-DSZD431a.js";import"./Tag-BDZYioa0.js";import"./full-thumb-up-Bb4kpRpM.js";function xe(n,r){u.useEffect(()=>{const l=o=>{!n.current||n.current.contains(o.target)||r(o)};return document.addEventListener("mousedown",l),document.addEventListener("focusin",l),document.addEventListener("touchstart",l),()=>{document.removeEventListener("mousedown",l),document.removeEventListener("focusin",l),document.removeEventListener("touchstart",l)}},[n,r])}const N={"selected-tags":"_selected-tags_1lypv_1","tag-extra-count":"_tag-extra-count_1lypv_8","tag-button":"_tag-button_1lypv_18","tag-button-icon":"_tag-button-icon_1lypv_33"},w=({disabled:n,fieldName:r,optionsLabelById:l,selectedOptions:o,removeOption:h,className:g})=>{const p=u.useRef(null);function v(i,s){var V;const b=(V=p.current)==null?void 0:V.getElementsByTagName("button"),O=(b==null?void 0:b[s+1])||(b==null?void 0:b[s-1]);O==null||O.focus(),h(i)}const f=o.slice(0,5),_=o.length-f.length;return o.length===0?null:e.jsxs("ul",{className:E(N["selected-tags"],g),ref:p,children:[f.map((i,s)=>e.jsx("li",{children:e.jsxs("button",{"aria-label":`Supprimer ${l[i]}`,className:N["tag-button"],onClick:()=>v(i,s),type:"button",disabled:n,children:[l[i],e.jsx(de,{src:Se,alt:"Fermer",className:N["tag-button-icon"]})]})},`tag-${r}-${i}`)),_>0&&e.jsxs("li",{className:N["tag-extra-count"],children:["+",_,"..."]})]})};try{w.displayName="SelectedValuesTags",w.__docgenInfo={description:"",displayName:"SelectedValuesTags",props:{disabled:{defaultValue:null,description:"",name:"disabled",required:!0,type:{name:"boolean"}},fieldName:{defaultValue:null,description:"",name:"fieldName",required:!0,type:{name:"string"}},optionsLabelById:{defaultValue:null,description:"",name:"optionsLabelById",required:!0,type:{name:"Record<string, string>"}},selectedOptions:{defaultValue:null,description:"",name:"selectedOptions",required:!0,type:{name:"string[]"}},removeOption:{defaultValue:null,description:"",name:"removeOption",required:!0,type:{name:"(value: string) => void"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}}}}}catch{}const qe="_container_1ffyz_1",Ae="_trigger_1ffyz_30",je="_badge_1ffyz_84",Le="_chevron_1ffyz_98",Ie="_item_1ffyz_111",ze="_panel_1ffyz_129",Ce="_label_1ffyz_146",t={container:qe,"container-input":"_container-input_1ffyz_4","container-label":"_container-label_1ffyz_10","field-error":"_field-error_1ffyz_18",trigger:Ae,"trigger-selected":"_trigger-selected_1ffyz_63","trigger-error":"_trigger-error_1ffyz_66","trigger-content":"_trigger-content_1ffyz_70","trigger-label":"_trigger-label_1ffyz_77",badge:je,chevron:Le,"chevron-disabled":"_chevron-disabled_1ffyz_103",item:Ie,panel:ze,"panel-scrollable":"_panel-scrollable_1ffyz_141",label:Ce,"search-input":"_search-input_1ffyz_157","empty-search":"_empty-search_1ffyz_162","visually-hidden":"_visually-hidden_1ffyz_171"},D=({id:n,options:r,onOptionSelect:l,onSelectAll:o,hasSearch:h=!1,searchLabel:g,hasSelectAllOptions:p,isAllChecked:v})=>{const[f,_]=u.useState(""),i=u.useMemo(()=>r.filter(s=>s.label.toLowerCase().includes(f.toLowerCase())),[r,f]);return e.jsxs("div",{id:n,className:t.panel,children:[h&&e.jsxs("div",{className:t["search-input"],children:[e.jsx("label",{className:t["visually-hidden"],htmlFor:`search-input-${n}`,children:g}),e.jsx(Oe,{type:"search",id:`search-input-${n}`,leftIcon:ve,value:f,onChange:s=>_(s.target.value),autoComplete:"off",spellCheck:!1})]}),e.jsxs("div",{className:t["panel-scrollable"],"data-testid":"panel-scrollable",children:[e.jsx("p",{className:t["visually-hidden"],role:"status",children:e.jsxs("span",{children:[i.length," résultats trouvés"]})}),i.length>0?e.jsxs("ul",{className:t.container,children:[p&&e.jsx("li",{className:t.item,children:e.jsx(F,{label:"Tout sélectionner",checked:v,className:t.label,onChange:o,sizing:"fill"})},"all-options"),i.map(s=>e.jsx("li",{className:t.item,children:e.jsx(F,{className:t.label,label:s.label,checked:s.checked,onChange:()=>l(s),sizing:"fill"})},s.id))]}):e.jsx("div",{className:t["empty-search"],children:e.jsx("span",{children:"Aucun résultat trouvé pour votre recherche."})})]})]})};try{D.displayName="MultiSelectPanel",D.__docgenInfo={description:"",displayName:"MultiSelectPanel",props:{id:{defaultValue:null,description:"",name:"id",required:!0,type:{name:"string"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},label:{defaultValue:null,description:"",name:"label",required:!0,type:{name:"string"}},options:{defaultValue:null,description:"",name:"options",required:!0,type:{name:"(Option & { checked: boolean; })[]"}},hasSelectAllOptions:{defaultValue:null,description:"",name:"hasSelectAllOptions",required:!1,type:{name:"boolean"}},isAllChecked:{defaultValue:null,description:"",name:"isAllChecked",required:!0,type:{name:"boolean"}},hasSearch:{defaultValue:{value:"false"},description:"",name:"hasSearch",required:!1,type:{name:"boolean"}},searchLabel:{defaultValue:null,description:"",name:"searchLabel",required:!1,type:{name:"string"}},onOptionSelect:{defaultValue:null,description:"",name:"onOptionSelect",required:!0,type:{name:"(option: Option) => void"}},onSelectAll:{defaultValue:null,description:"",name:"onSelectAll",required:!0,type:{name:"() => void"}}}}}catch{}const M=({id:n,isOpen:r,selectedCount:l,toggleDropdown:o,buttonLabel:h,disabled:g,error:p})=>e.jsxs("button",{type:"button",className:E(t.trigger,{[t["trigger-selected"]]:l>0,[t["trigger-error"]]:!!p}),onClick:o,"aria-haspopup":"listbox","aria-label":h,"aria-controls":n,disabled:g,"data-error":!!p,children:[e.jsxs("div",{className:t["trigger-content"],children:[l>0&&e.jsxs("div",{className:t.badge,children:[l," ",e.jsx("span",{className:t["visually-hidden"],children:"éléments sélectionnés"})]}),e.jsx("span",{className:t["trigger-label"],children:h})]}),e.jsx(de,{className:`${t.chevron} ${r?t.chevronOpen:""} ${g?t["chevron-disabled"]:""}`,src:r?Ne:Ve})]});try{M.displayName="MultiSelectTrigger",M.__docgenInfo={description:"",displayName:"MultiSelectTrigger",props:{id:{defaultValue:null,description:"",name:"id",required:!0,type:{name:"string"}},isOpen:{defaultValue:null,description:"",name:"isOpen",required:!0,type:{name:"boolean"}},selectedCount:{defaultValue:null,description:"",name:"selectedCount",required:!0,type:{name:"number"}},toggleDropdown:{defaultValue:null,description:"",name:"toggleDropdown",required:!0,type:{name:"() => void"}},buttonLabel:{defaultValue:null,description:"",name:"buttonLabel",required:!0,type:{name:"string"}},disabled:{defaultValue:null,description:"",name:"disabled",required:!1,type:{name:"boolean"}},error:{defaultValue:null,description:"",name:"error",required:!1,type:{name:"string"}}}}}catch{}const z=u.forwardRef(({className:n,options:r,selectedOptions:l,defaultOptions:o=[],hasSearch:h=!1,searchLabel:g,label:p,hasSelectAllOptions:v,disabled:f=!1,onSelectedOptionsChanged:_,error:i,name:s,buttonLabel:b,required:O=!1,asterisk:V=!0,onBlur:ce},ue)=>{const[T,C]=u.useState(!1),[m,R]=u.useState(o),P=m.length===r.length,W=u.useRef(null),B=u.useId(),pe=()=>C(a=>!a);u.useEffect(()=>{l&&R(l)},[l]);function k(a){const d=new Set(m.map(c=>c.id)),y=new Set(a.map(c=>c.id)),ge=new Set([...d].filter(c=>!y.has(c))),be=new Set([...y].filter(c=>!d.has(c)));_(a,r.filter(c=>be.has(c.id)),r.filter(c=>ge.has(c.id))),R(a)}const me=a=>{const d=m.some(y=>y.id===a.id)?m.filter(y=>y.id!==a.id):[...m,a];k(d)},fe=()=>{k(P?[]:r)},he=a=>{const d=m.filter(y=>y.id!==a);k(d)},$=a=>{a.key==="Escape"&&C(!1)};return u.useEffect(()=>(document.addEventListener("keydown",$),()=>{document.removeEventListener("keydown",$)}),[]),xe(W,()=>C(!1)),e.jsxs("fieldset",{className:t.container,onBlur:ce,ref:ue,children:[e.jsxs("legend",{className:t["container-label"],children:[p," ",O&&V&&"*"]}),e.jsxs("div",{className:E(n,t["container-input"]),children:[e.jsxs("div",{ref:W,children:[e.jsx(M,{id:B,buttonLabel:b,isOpen:T,toggleDropdown:pe,selectedCount:m.length,disabled:f,error:i}),T&&e.jsx(D,{id:B,label:p,options:r.map(a=>({...a,checked:m.some(d=>d.id===a.id)})),onOptionSelect:me,onSelectAll:fe,isAllChecked:P,hasSearch:h,searchLabel:g,hasSelectAllOptions:v})]}),e.jsx("div",{role:"alert",id:`error-details-${s}`,children:i&&e.jsx(_e,{name:s,className:t["field-error"],children:i})})]}),e.jsx(w,{disabled:f,selectedOptions:m.map(a=>a.id),removeOption:he,fieldName:"tags",optionsLabelById:m.reduce((a,d)=>({...a,[d.id]:d.label}),{})})]})});z.displayName="MultiSelect";try{z.displayName="MultiSelect",z.__docgenInfo={description:`MultiSelect component for selecting multiple options from a dropdown list.

This component provides a customizable dropdown for selecting multiple options,
with features like search functionality, select all option, and individual option selection.
It integrates with form layouts.`,displayName:"MultiSelect",props:{options:{defaultValue:null,description:"Array of available options",name:"options",required:!0,type:{name:"Option[]"}},selectedOptions:{defaultValue:null,description:"Array of available options",name:"selectedOptions",required:!1,type:{name:"Option[]"}},defaultOptions:{defaultValue:{value:"[]"},description:"Array of initially selected options",name:"defaultOptions",required:!1,type:{name:"Option[]"}},label:{defaultValue:null,description:"Label for the MultiSelect field",name:"label",required:!0,type:{name:"string"}},hasSelectAllOptions:{defaultValue:null,description:'Whether to include a "Select All" option',name:"hasSelectAllOptions",required:!1,type:{name:"boolean"}},disabled:{defaultValue:{value:"false"},description:"Whether the MultiSelect is disabled",name:"disabled",required:!1,type:{name:"boolean"}},onSelectedOptionsChanged:{defaultValue:null,description:`Callback function called when selected options change,
Multiple selections can be made by selecting only one item (ex: selectInterventionAreas.ts)`,name:"onSelectedOptionsChanged",required:!0,type:{name:"(selectedOptions: Option[], addedOptions: Option[], removedOptions: Option[]) => void"}},error:{defaultValue:null,description:"Error message to display",name:"error",required:!1,type:{name:"string"}},name:{defaultValue:null,description:"Name attribute for the form field",name:"name",required:!0,type:{name:"string"}},buttonLabel:{defaultValue:null,description:"Label for the dropdown button",name:"buttonLabel",required:!0,type:{name:"string"}},required:{defaultValue:{value:"false"},description:"field is required",name:"required",required:!1,type:{name:"boolean"}},asterisk:{defaultValue:{value:"true"},description:"display asterik",name:"asterisk",required:!1,type:{name:"boolean"}},className:{defaultValue:null,description:"this class offers the possibility of limiting the size of the multiselect",name:"className",required:!1,type:{name:"string"}},onBlur:{defaultValue:null,description:"Trigger function to display error message when element is unfocus",name:"onBlur",required:!1,type:{name:"(() => void)"}},hasSearch:{defaultValue:{value:"false"},description:"Whether to include a search bar above options\nIf `hasSearch` is `true`, `searchLabel` are required. This part applies the condition",name:"hasSearch",required:!1,type:{name:"boolean"}},searchLabel:{defaultValue:null,description:"",name:"searchLabel",required:!1,type:{name:"string"}}}}}catch{}const Xe={title:"@/ui-kit/forms/MultiSelect",decorators:[ye],component:z,parameters:{docs:{story:{inline:!1,iframeHeight:380}}}},ke=[{id:"1",label:"01 - Ain"},{id:"2",label:"02 - Aisne"},{id:"3",label:"03 - Allier"},{id:"4",label:"04 - Alpes-de-Haute-Provence"},{id:"5",label:"05 - Hautes-Alpes"},{id:"6",label:"06 - Alpes-Maritimes"},{id:"7",label:"07 - Ardèche"},{id:"8",label:"08 - Ardennes"},{id:"9",label:"09 - Ariège"},{id:"10",label:"10 - Aube"},{id:"11",label:"11 - Aude"},{id:"12",label:"12 - Aveyron"},{id:"13",label:"13 - Bouches-du-Rhône"},{id:"14",label:"14 - Calvados"},{id:"15",label:"15 - Cantal"}],S={options:ke,label:"Sélectionner un département",onSelectedOptionsChanged:()=>{},buttonLabel:"Départements"},x={args:{...S}},q={args:{...S,defaultOptions:[{id:"2",label:"75 - Paris"},{id:"3",label:"44 - Nantes"}]}},A={args:{...S,hasSearch:!0,searchLabel:"Rechercher des départements",buttonLabel:"Départements",label:"Sélectionner des départements",name:"départements"}},j={args:{...S,hasSelectAllOptions:!0,buttonLabel:"Départements",label:"Sélectionner des départements",name:"départements"}},L={args:{...S,hasSearch:!0,searchLabel:"Rechercher des départements",hasSelectAllOptions:!0,buttonLabel:"Départements",label:"Sélectionner des départements"}},I={args:{...S,buttonLabel:"Départements",label:"Sélectionner des départements",error:"Veuillez sélectionner un département",onBlur:()=>{},name:"départements"}};var H,K,U;x.parameters={...x.parameters,docs:{...(H=x.parameters)==null?void 0:H.docs,source:{originalSource:`{
  args: {
    ...defaultProps
  }
}`,...(U=(K=x.parameters)==null?void 0:K.docs)==null?void 0:U.source}}};var G,J,Q;q.parameters={...q.parameters,docs:{...(G=q.parameters)==null?void 0:G.docs,source:{originalSource:`{
  args: {
    ...defaultProps,
    defaultOptions: [{
      id: '2',
      label: '75 - Paris'
    }, {
      id: '3',
      label: '44 - Nantes'
    }]
  }
}`,...(Q=(J=q.parameters)==null?void 0:J.docs)==null?void 0:Q.source}}};var X,Y,Z;A.parameters={...A.parameters,docs:{...(X=A.parameters)==null?void 0:X.docs,source:{originalSource:`{
  args: {
    ...defaultProps,
    hasSearch: true,
    searchLabel: 'Rechercher des départements',
    buttonLabel: 'Départements',
    label: 'Sélectionner des départements',
    name: 'départements'
  }
}`,...(Z=(Y=A.parameters)==null?void 0:Y.docs)==null?void 0:Z.source}}};var ee,te,ae;j.parameters={...j.parameters,docs:{...(ee=j.parameters)==null?void 0:ee.docs,source:{originalSource:`{
  args: {
    ...defaultProps,
    hasSelectAllOptions: true,
    buttonLabel: 'Départements',
    label: 'Sélectionner des départements',
    name: 'départements'
  }
}`,...(ae=(te=j.parameters)==null?void 0:te.docs)==null?void 0:ae.source}}};var le,ne,re;L.parameters={...L.parameters,docs:{...(le=L.parameters)==null?void 0:le.docs,source:{originalSource:`{
  args: {
    ...defaultProps,
    hasSearch: true,
    searchLabel: 'Rechercher des départements',
    hasSelectAllOptions: true,
    buttonLabel: 'Départements',
    label: 'Sélectionner des départements'
  }
}`,...(re=(ne=L.parameters)==null?void 0:ne.docs)==null?void 0:re.source}}};var se,ie,oe;I.parameters={...I.parameters,docs:{...(se=I.parameters)==null?void 0:se.docs,source:{originalSource:`{
  args: {
    ...defaultProps,
    buttonLabel: 'Départements',
    label: 'Sélectionner des départements',
    error: 'Veuillez sélectionner un département',
    onBlur: () => {},
    name: 'départements'
  }
}`,...(oe=(ie=I.parameters)==null?void 0:ie.docs)==null?void 0:oe.source}}};const Ye=["Default","WithDefaultOptions","WithSearchInput","WithSelectAllOption","WithSearchInputAndSelectAllOption","WithError"];export{x as Default,q as WithDefaultOptions,I as WithError,A as WithSearchInput,L as WithSearchInputAndSelectAllOption,j as WithSelectAllOption,Ye as __namedExportsOrder,Xe as default};
