import{V as be}from"./index-CknRkA2u.js";import{j as e}from"./jsx-runtime-CfatFE5O.js";import{c as ne}from"./index-DeARc5FM.js";import{r as d}from"./index-ClcD9ViR.js";import{F as fe}from"./FieldError-DblMbt5C.js";import{S as ge}from"./SelectedValuesTags-Di3sw0kN.js";import{B as _e,s as Se}from"./BaseInput-zpkrYXWy.js";import{B as W}from"./BaseCheckbox-GQyCLflZ.js";import{f as ye}from"./full-down-Cmbtr9nI.js";import{f as ve}from"./full-up-D6TPt2ju.js";import{S as Oe}from"./SvgIcon-CUWb-Ez8.js";import"./index-D3nBDJe7.js";import"./index-MhaI5ydX.js";import"./_commonjsHelpers-Cpj98o6Y.js";import"./index-C3LhMar3.js";import"./stroke-error-DSZD431a.js";import"./full-close-5Oxr7nnd.js";function xe(r,l){d.useEffect(()=>{const n=p=>{!r.current||r.current.contains(p.target)||l(p)};return document.addEventListener("mousedown",n),document.addEventListener("focusin",n),document.addEventListener("touchstart",n),()=>{document.removeEventListener("mousedown",n),document.removeEventListener("focusin",n),document.removeEventListener("touchstart",n)}},[r,l])}const Ve="_container_1ebc7_1",Ae="_legend_1ebc7_21",Ne="_trigger_1ebc7_29",qe="_badge_1ebc7_83",Le="_chevron_1ebc7_97",je="_item_1ebc7_110",ke="_tags_1ebc7_122",Ie="_panel_1ebc7_128",Ce="_label_1ebc7_145",we="_checkbox_1ebc7_152",Ee="_separator_1ebc7_182",t={container:Ve,"container-input":"_container-input_1ebc7_4","container-label":"_container-label_1ebc7_10","container-error":"_container-error_1ebc7_14",legend:Ae,trigger:Ne,"trigger-selected":"_trigger-selected_1ebc7_62","trigger-error":"_trigger-error_1ebc7_65","trigger-content":"_trigger-content_1ebc7_69","trigger-label":"_trigger-label_1ebc7_76",badge:qe,chevron:Le,"chevron-disabled":"_chevron-disabled_1ebc7_102","chevron-open":"_chevron-open_1ebc7_106",item:je,tags:ke,panel:Ie,"panel-scrollable":"_panel-scrollable_1ebc7_140",label:Ce,checkbox:we,"search-input":"_search-input_1ebc7_156","empty-search":"_empty-search_1ebc7_161","visually-hidden":"_visually-hidden_1ebc7_170",separator:Ee},k=({id:r,options:l,onOptionSelect:n,onSelectAll:p,hasSearch:b=!1,searchLabel:S,hasSelectAllOptions:u,isAllChecked:f})=>{const[g,q]=d.useState(""),h=d.useMemo(()=>l.filter(s=>s.label.toLowerCase().includes(g.toLowerCase())),[l,g]);return e.jsxs("div",{id:r,className:t.panel,children:[b&&e.jsxs("div",{className:t["search-input"],children:[e.jsx("label",{className:t["visually-hidden"],htmlFor:`search-input-${r}`,children:S}),e.jsx(_e,{type:"search",id:`search-input-${r}`,leftIcon:Se,value:g,onChange:s=>q(s.target.value),autoComplete:"off",spellCheck:!1})]}),e.jsxs("div",{className:t["panel-scrollable"],"data-testid":"panel-scrollable",children:[e.jsx("p",{className:t["visually-hidden"],role:"status",children:e.jsxs("span",{children:[h.length," résultats trouvés"]})}),h.length>0?e.jsxs("ul",{className:t.container,children:[u&&e.jsx("li",{className:t.item,children:e.jsx(W,{label:"Tout sélectionner",checked:f,labelClassName:t.label,inputClassName:t.checkbox,onChange:p})},"all-options"),h.map(s=>e.jsx("li",{className:t.item,children:e.jsx(W,{labelClassName:t.label,inputClassName:t.checkbox,label:s.label,checked:s.checked,onChange:()=>n(s)})},s.id))]}):e.jsx("div",{className:t["empty-search"],children:e.jsx("span",{children:"Aucun résultat trouvé pour votre recherche."})})]})]})};try{k.displayName="MultiSelectPanel",k.__docgenInfo={description:"",displayName:"MultiSelectPanel",props:{id:{defaultValue:null,description:"",name:"id",required:!0,type:{name:"string"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},label:{defaultValue:null,description:"",name:"label",required:!0,type:{name:"string"}},options:{defaultValue:null,description:"",name:"options",required:!0,type:{name:"(Option & { checked: boolean; })[]"}},hasSelectAllOptions:{defaultValue:null,description:"",name:"hasSelectAllOptions",required:!1,type:{name:"boolean"}},isAllChecked:{defaultValue:null,description:"",name:"isAllChecked",required:!0,type:{name:"boolean"}},hasSearch:{defaultValue:{value:"false"},description:"",name:"hasSearch",required:!1,type:{name:"boolean"}},searchLabel:{defaultValue:null,description:"",name:"searchLabel",required:!1,type:{name:"string"}},onOptionSelect:{defaultValue:null,description:"",name:"onOptionSelect",required:!0,type:{name:"(option: Option) => void"}},onSelectAll:{defaultValue:null,description:"",name:"onSelectAll",required:!0,type:{name:"() => void"}}}}}catch{}const I=({id:r,isOpen:l,selectedCount:n,toggleDropdown:p,buttonLabel:b,fieldLabel:S,disabled:u,error:f})=>e.jsxs(e.Fragment,{children:[e.jsx("legend",{className:t["visually-hidden"],children:S}),e.jsxs("button",{type:"button",className:ne(t.trigger,{[t["trigger-selected"]]:n>0,[t["trigger-error"]]:!!f}),onClick:p,"aria-haspopup":"listbox","aria-label":b,"aria-expanded":l,"aria-controls":r,disabled:u,"data-error":!!f,children:[e.jsxs("div",{className:t["trigger-content"],children:[n>0&&e.jsxs("div",{className:t.badge,children:[n," ",e.jsx("span",{className:t["visually-hidden"],children:"éléments sélectionnés"})]}),e.jsx("span",{className:t["trigger-label"],children:b})]}),e.jsx(Oe,{className:`${t.chevron} ${l?t.chevronOpen:""} ${u?t["chevron-disabled"]:""}`,src:l?ve:ye})]})]});try{I.displayName="MultiSelectTrigger",I.__docgenInfo={description:"",displayName:"MultiSelectTrigger",props:{id:{defaultValue:null,description:"",name:"id",required:!0,type:{name:"string"}},isOpen:{defaultValue:null,description:"",name:"isOpen",required:!0,type:{name:"boolean"}},selectedCount:{defaultValue:null,description:"",name:"selectedCount",required:!0,type:{name:"number"}},toggleDropdown:{defaultValue:null,description:"",name:"toggleDropdown",required:!0,type:{name:"() => void"}},buttonLabel:{defaultValue:null,description:"",name:"buttonLabel",required:!0,type:{name:"string"}},fieldLabel:{defaultValue:null,description:"",name:"fieldLabel",required:!0,type:{name:"string"}},disabled:{defaultValue:null,description:"",name:"disabled",required:!1,type:{name:"boolean"}},error:{defaultValue:null,description:"",name:"error",required:!1,type:{name:"string"}}}}}catch{}const N=d.forwardRef(({className:r,options:l,selectedOptions:n,defaultOptions:p=[],hasSearch:b=!1,searchLabel:S,label:u,hasSelectAllOptions:f,disabled:g=!1,onSelectedOptionsChanged:q,error:h,name:s,buttonLabel:le,required:re=!1,asterisk:se=!0,onBlur:ie},oe)=>{const[C,L]=d.useState(!1),[c,w]=d.useState(p),E=c.length===l.length,M=d.useRef(null),D=d.useId(),ce=()=>L(a=>!a);d.useEffect(()=>{n&&w(n)},[n]);function j(a){const i=new Set(c.map(o=>o.id)),m=new Set(a.map(o=>o.id)),me=new Set([...i].filter(o=>!m.has(o))),he=new Set([...m].filter(o=>!i.has(o)));q(a,l.filter(o=>he.has(o.id)),l.filter(o=>me.has(o.id))),w(a)}const de=a=>{const i=c.some(m=>m.id===a.id)?c.filter(m=>m.id!==a.id):[...c,a];j(i)},ue=()=>{j(E?[]:l)},pe=a=>{const i=c.filter(m=>m.id!==a);j(i)},P=a=>{a.key==="Escape"&&L(!1)};return d.useEffect(()=>(document.addEventListener("keydown",P),()=>{document.removeEventListener("keydown",P)}),[]),xe(M,()=>L(!1)),e.jsxs("fieldset",{className:t.container,onBlur:ie,ref:oe,children:[u&&e.jsxs("label",{className:t["container-label"],children:[u," ",re&&se&&"*"]}),e.jsxs("div",{className:ne(r,t["container-input"]),children:[e.jsxs("div",{ref:M,children:[e.jsx(I,{id:D,buttonLabel:le,fieldLabel:u,isOpen:C,toggleDropdown:ce,selectedCount:c.length,disabled:g,error:h}),C&&e.jsx(k,{id:D,label:u,options:l.map(a=>({...a,checked:c.some(i=>i.id===a.id)})),onOptionSelect:de,onSelectAll:ue,isAllChecked:E,hasSearch:b,searchLabel:S,hasSelectAllOptions:f})]}),e.jsx("div",{role:"alert",className:t["container-error"],id:`error-details-${s}`,children:h&&e.jsx(fe,{name:s,children:h})})]}),e.jsx(ge,{disabled:g,selectedOptions:c.map(a=>a.id),removeOption:pe,fieldName:"tags",optionsLabelById:c.reduce((a,i)=>({...a,[i.id]:i.label}),{})})]})});N.displayName="MultiSelect";try{N.displayName="MultiSelect",N.__docgenInfo={description:`MultiSelect component for selecting multiple options from a dropdown list.

This component provides a customizable dropdown for selecting multiple options,
with features like search functionality, select all option, and individual option selection.
It integrates with form layouts.`,displayName:"MultiSelect",props:{options:{defaultValue:null,description:"Array of available options",name:"options",required:!0,type:{name:"Option[]"}},selectedOptions:{defaultValue:null,description:"Array of available options",name:"selectedOptions",required:!1,type:{name:"Option[]"}},defaultOptions:{defaultValue:{value:"[]"},description:"Array of initially selected options",name:"defaultOptions",required:!1,type:{name:"Option[]"}},label:{defaultValue:null,description:"Label for the MultiSelect field",name:"label",required:!0,type:{name:"string"}},hasSelectAllOptions:{defaultValue:null,description:'Whether to include a "Select All" option',name:"hasSelectAllOptions",required:!1,type:{name:"boolean"}},disabled:{defaultValue:{value:"false"},description:"Whether the MultiSelect is disabled",name:"disabled",required:!1,type:{name:"boolean"}},onSelectedOptionsChanged:{defaultValue:null,description:`Callback function called when selected options change,
Multiple selections can be made by selecting only one item (ex: interventionAreaMultiSelect.ts)`,name:"onSelectedOptionsChanged",required:!0,type:{name:"(selectedOptions: Option[], addedOptions: Option[], removedOptions: Option[]) => void"}},error:{defaultValue:null,description:"Error message to display",name:"error",required:!1,type:{name:"string"}},name:{defaultValue:null,description:"Name attribute for the form field",name:"name",required:!0,type:{name:"string"}},buttonLabel:{defaultValue:null,description:"Label for the dropdown button",name:"buttonLabel",required:!0,type:{name:"string"}},required:{defaultValue:{value:"false"},description:"field is required",name:"required",required:!1,type:{name:"boolean"}},asterisk:{defaultValue:{value:"true"},description:"display asterik",name:"asterisk",required:!1,type:{name:"boolean"}},className:{defaultValue:null,description:"this class offers the possibility of limiting the size of the multiselect",name:"className",required:!1,type:{name:"string"}},onBlur:{defaultValue:null,description:"Trigger function to display error message when element is unfocus",name:"onBlur",required:!1,type:{name:"(() => void)"}},hasSearch:{defaultValue:{value:"false"},description:"Whether to include a search bar above options\nIf `hasSearch` is `true`, `searchLabel` are required. This part applies the condition",name:"hasSearch",required:!1,type:{name:"boolean"}},searchLabel:{defaultValue:null,description:"",name:"searchLabel",required:!1,type:{name:"string"}}}}}catch{}const Ze={title:"ui-kit/MultiSelect",decorators:[be],component:N,parameters:{docs:{story:{inline:!1,iframeHeight:380}}}},Me=[{id:"1",label:"01 - Ain"},{id:"2",label:"02 - Aisne"},{id:"3",label:"03 - Allier"},{id:"4",label:"04 - Alpes-de-Haute-Provence"},{id:"5",label:"05 - Hautes-Alpes"},{id:"6",label:"06 - Alpes-Maritimes"},{id:"7",label:"07 - Ardèche"},{id:"8",label:"08 - Ardennes"},{id:"9",label:"09 - Ariège"},{id:"10",label:"10 - Aube"},{id:"11",label:"11 - Aude"},{id:"12",label:"12 - Aveyron"},{id:"13",label:"13 - Bouches-du-Rhône"},{id:"14",label:"14 - Calvados"},{id:"15",label:"15 - Cantal"}],_={options:Me,legend:"Département",label:"Sélectionner un département",onSelectedOptionsChanged:()=>{}},y={args:{..._}},v={args:{..._,defaultOptions:[{id:"2",label:"75 - Paris"},{id:"3",label:"44 - Nantes"}]}},O={args:{..._,hasSearch:!0,searchLabel:"Rechercher des départements",buttonLabel:"Départements",label:"Sélectionner des départements",name:"départements"}},x={args:{..._,hasSelectAllOptions:!0,buttonLabel:"Départements",label:"Sélectionner des départements",name:"départements"}},V={args:{..._,hasSearch:!0,searchLabel:"Rechercher des départements",hasSelectAllOptions:!0,buttonLabel:"Départements",label:"Sélectionner des départements"}},A={args:{..._,buttonLabel:"Départements",label:"Sélectionner des départements",error:"Veuillez sélectionner un département",onBlur:()=>{},name:"départements"}};var B,R,T;y.parameters={...y.parameters,docs:{...(B=y.parameters)==null?void 0:B.docs,source:{originalSource:`{
  args: {
    ...defaultProps
  }
}`,...(T=(R=y.parameters)==null?void 0:R.docs)==null?void 0:T.source}}};var $,F,z;v.parameters={...v.parameters,docs:{...($=v.parameters)==null?void 0:$.docs,source:{originalSource:`{
  args: {
    ...defaultProps,
    defaultOptions: [{
      id: '2',
      label: '75 - Paris'
    }, {
      id: '3',
      label: '44 - Nantes'
    }]
  }
}`,...(z=(F=v.parameters)==null?void 0:F.docs)==null?void 0:z.source}}};var H,K,U;O.parameters={...O.parameters,docs:{...(H=O.parameters)==null?void 0:H.docs,source:{originalSource:`{
  args: {
    ...defaultProps,
    hasSearch: true,
    searchLabel: 'Rechercher des départements',
    buttonLabel: 'Départements',
    label: 'Sélectionner des départements',
    name: 'départements'
  }
}`,...(U=(K=O.parameters)==null?void 0:K.docs)==null?void 0:U.source}}};var G,J,Q;x.parameters={...x.parameters,docs:{...(G=x.parameters)==null?void 0:G.docs,source:{originalSource:`{
  args: {
    ...defaultProps,
    hasSelectAllOptions: true,
    buttonLabel: 'Départements',
    label: 'Sélectionner des départements',
    name: 'départements'
  }
}`,...(Q=(J=x.parameters)==null?void 0:J.docs)==null?void 0:Q.source}}};var X,Y,Z;V.parameters={...V.parameters,docs:{...(X=V.parameters)==null?void 0:X.docs,source:{originalSource:`{
  args: {
    ...defaultProps,
    hasSearch: true,
    searchLabel: 'Rechercher des départements',
    hasSelectAllOptions: true,
    buttonLabel: 'Départements',
    label: 'Sélectionner des départements'
  }
}`,...(Z=(Y=V.parameters)==null?void 0:Y.docs)==null?void 0:Z.source}}};var ee,te,ae;A.parameters={...A.parameters,docs:{...(ee=A.parameters)==null?void 0:ee.docs,source:{originalSource:`{
  args: {
    ...defaultProps,
    buttonLabel: 'Départements',
    label: 'Sélectionner des départements',
    error: 'Veuillez sélectionner un département',
    onBlur: () => {},
    name: 'départements'
  }
}`,...(ae=(te=A.parameters)==null?void 0:te.docs)==null?void 0:ae.source}}};const et=["Default","WithDefaultOptions","WithSearchInput","WithSelectAllOption","WithSearchInputAndSelectAllOption","WithError"];export{y as Default,v as WithDefaultOptions,A as WithError,O as WithSearchInput,V as WithSearchInputAndSelectAllOption,x as WithSelectAllOption,et as __namedExportsOrder,Ze as default};
