import{j as e}from"./jsx-runtime-CfatFE5O.js";import{u as M,F as R}from"./formik.esm-DyanDbCL.js";import{r as h}from"./index-ClcD9ViR.js";import{B as T}from"./BaseInput-zpkrYXWy.js";import{F as k}from"./FieldError-DblMbt5C.js";import{c as q}from"./index-DeARc5FM.js";import{f as D}from"./full-right-Dd3YsyCq.js";import{S as H}from"./SvgIcon-CUWb-Ez8.js";import{p as G,a as W}from"./parseAndValidateFrenchPhoneNumber-Erjmsd8U.js";import"./_commonjsHelpers-Cpj98o6Y.js";import"./stroke-error-DSZD431a.js";const f={"select-input-wrapper":"_select-input-wrapper_4dhml_1","select-input":"_select-input_4dhml_1","select-input-icon":"_select-input-icon_4dhml_17","select-input-icon-disabled":"_select-input-icon-disabled_4dhml_96","select-input-placeholder":"_select-input-placeholder_4dhml_99"},N=({disabled:a,options:o,className:s,value:i,onChange:c})=>e.jsxs("div",{className:q(f["select-input-wrapper"],s),children:[e.jsx(H,{src:D,alt:"",className:q(f["select-input-icon"],{[f["select-input-icon-disabled"]]:a}),width:"16"}),e.jsx("select",{className:f["select-input"],id:"countryCode",disabled:a,value:i,onChange:c,autoComplete:"tel-country-code",children:o.map(u=>e.jsx("option",{value:u.value,label:u.label,children:u.label},u.value))})]});try{N.displayName="CountryCodeSelect",N.__docgenInfo={description:"",displayName:"CountryCodeSelect",props:{disabled:{defaultValue:null,description:"",name:"disabled",required:!0,type:{name:"boolean"}},options:{defaultValue:null,description:"",name:"options",required:!0,type:{name:"PhoneCodeSelectOption[]"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},value:{defaultValue:null,description:"",name:"value",required:!0,type:{name:"string"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!0,type:{name:"(event: ChangeEvent<HTMLSelectElement>) => void"}}}}}catch{}const x=[{label:"+33",value:"FR"},{label:"+262",value:"RE"},{label:"+508",value:"PM"},{label:"+590",value:"GP"},{label:"+594",value:"GF"},{label:"+596",value:"MQ"},{label:"+687",value:"NC"}],U={FR:"6 12 34 56 78",RE:"692 12 34 56",PM:"55 12 34",GP:"690 00 01 02",GF:"694 00 01 02",MQ:"696 00 01 02",NC:"75 12 34"},l={"select-input-wrapper":"_select-input-wrapper_xvcyd_1","select-input":"_select-input_xvcyd_1","select-input-icon":"_select-input-icon_xvcyd_17","select-input-icon-disabled":"_select-input-icon-disabled_xvcyd_96","select-input-placeholder":"_select-input-placeholder_xvcyd_99","phone-number":"_phone-number_xvcyd_106","phone-number-input":"_phone-number-input_xvcyd_110","phone-number-input-wrapper":"_phone-number-input-wrapper_xvcyd_116","phone-number-input-legend":"_phone-number-input-legend_xvcyd_120","phone-number-input-footer":"_phone-number-input-footer_xvcyd_125","phone-number-input-error":"_phone-number-input-error_xvcyd_131","country-code-select":"_country-code-select_xvcyd_138","visually-hidden":"_visually-hidden_xvcyd_144","phone-format":"_phone-format_xvcyd_156","phone-number-inpus":"_phone-number-inpus_xvcyd_164"},E={inputValue:"",countryCode:"FR"},Q=a=>{var s;if(!a)return E;const o=G(a);if(o.number){const i=(s=x.find(c=>c.label===`+${o.countryCallingCode}`))==null?void 0:s.value;return{inputValue:o.nationalNumber,countryCode:i}}return E},C=({name:a,label:o,disabled:s,isOptional:i=!1,maxLength:c=25})=>{const[u,d,r]=M({name:a}),V=h.useId(),[m,P]=h.useState(x[0].value),[_,v]=h.useState(""),g=async(n,t)=>{const p=W(n,t);return p&&await r.setValue(p.number,!1),v(n),i&&n===""?(await r.setValue(""),r.setError(void 0),n):!p||!p.isValid()?(i&&await r.setValue(n),r.setError("Veuillez renseigner un numéro de téléphone valide, exemple : 612345678"),n):(r.setError(void 0),p.nationalNumber)},S=async n=>{const t=n.target.value;await g(t,m)},O=async n=>{const t=n.target.value;P(t),_&&await g(_,t)},B=async n=>{d.touched||await r.setTouched(!0,!1);const t=await g(n.target.value,m);v(t)};return h.useEffect(()=>{try{const{inputValue:n,countryCode:t}=Q(u.value);P(t),v(n)}catch(n){r.setError(n)}},[u.value]),e.jsxs("fieldset",{className:l["phone-number-input-wrapper"],children:[e.jsxs("legend",{className:l["phone-number-input-legend"],children:[o," ",!i&&"*"]}),e.jsxs("p",{className:l["phone-format"],id:V,children:["Par exemple : ",U[m]]}),e.jsxs("div",{className:l["phone-number-inpus"],children:[e.jsx("label",{htmlFor:"countryCode",className:l["visually-hidden"],children:"Indicatif téléphonique"}),e.jsx(N,{disabled:!!s,options:x,className:l["country-code-select"],value:m,onChange:O}),e.jsx("label",{htmlFor:a,className:l["visually-hidden"],children:"Numéro de téléphone"}),e.jsx(T,{disabled:s,hasError:d.touched&&!!d.error,type:"text",name:a,value:_,onChange:S,className:l["phone-number-input"],onBlur:B,autoComplete:"tel-national",maxLength:c,"aria-describedby":V}),d.error&&d.touched&&e.jsx("div",{className:l["phone-number-input-footer"],children:e.jsx("div",{className:l["phone-number-input-error"],children:e.jsx(k,{name:a,children:d.error})})})]})]})};try{C.displayName="PhoneNumberInput",C.__docgenInfo={description:`The PhoneNumberInput component allows users to input and validate a phone number.
It integrates with Formik for form state management and supports country code selection.

---
**Important: Avoid using placeholders to indicate phone number format.**
Instead, use labels or helper text to ensure accessibility and clarity for all users.
---`,displayName:"PhoneNumberInput",props:{label:{defaultValue:null,description:"",name:"label",required:!0,type:{name:"string | Element"}},name:{defaultValue:null,description:"",name:"name",required:!0,type:{name:"string"}},description:{defaultValue:null,description:"",name:"description",required:!1,type:{name:"string"}},maxLength:{defaultValue:{value:"25"},description:"Maximum length for the phone number input.",name:"maxLength",required:!1,type:{name:"number"}},isLabelHidden:{defaultValue:null,description:`A flag to hide the label.
To be used with caution, as it can affect accessibility.
Do not use it if the label is mandatory, placeholder is not
a substitute for a label.`,name:"isLabelHidden",required:!1,type:{name:"boolean"}},hasLabelLineBreak:{defaultValue:null,description:"",name:"hasLabelLineBreak",required:!1,type:{name:"boolean"}},isOptional:{defaultValue:{value:"false"},description:`A flag to indicate that the field is optional.
It will display an asterisk next to the label.`,name:"isOptional",required:!1,type:{name:"boolean"}},hideAsterisk:{defaultValue:null,description:`Can be false only when it's the only field in a form and it's mandatory,
or when all fields are mandatory and the form indicates that all fields are mandatory`,name:"hideAsterisk",required:!1,type:{name:"boolean"}},className:{defaultValue:null,description:`A custom class for the field layout,
where label, description, input, and footer are displayed.`,name:"className",required:!1,type:{name:"string"}},classNameLabel:{defaultValue:null,description:"",name:"classNameLabel",required:!1,type:{name:"string"}},classNameFooter:{defaultValue:null,description:`A custom class for the footer,
where errors and character count are displayed.`,name:"classNameFooter",required:!1,type:{name:"string"}},classNameInput:{defaultValue:null,description:"",name:"classNameInput",required:!1,type:{name:"string"}},filterVariant:{defaultValue:null,description:"",name:"filterVariant",required:!1,type:{name:"boolean"}},smallLabel:{defaultValue:null,description:"A flag to display a smaller label.",name:"smallLabel",required:!1,type:{name:"boolean"}},inline:{defaultValue:null,description:"",name:"inline",required:!1,type:{name:"boolean"}},clearButtonProps:{defaultValue:null,description:"",name:"clearButtonProps",required:!1,type:{name:'(ButtonHTMLAttributes<HTMLButtonElement> & { tooltip: string; display?: "clear" | "close"; })'}},ErrorDetails:{defaultValue:null,description:"",name:"ErrorDetails",required:!1,type:{name:"ReactNode"}},disabled:{defaultValue:null,description:"Whether the phone number input is disabled.",name:"disabled",required:!1,type:{name:"boolean"}}}}}catch{}const le={title:"ui-kit/forms/PhoneNumberInput",component:C,decorators:[a=>e.jsx(R,{initialValues:{phone:""},onSubmit:()=>{},children:e.jsx(a,{})})]},b={args:{name:"phone",label:"Custom label for my required field"}},y={args:{name:"phone",label:"Phone number input optional",isOptional:!0}};var w,I,j;b.parameters={...b.parameters,docs:{...(w=b.parameters)==null?void 0:w.docs,source:{originalSource:`{
  args: {
    name: 'phone',
    label: 'Custom label for my required field'
  }
}`,...(j=(I=b.parameters)==null?void 0:I.docs)==null?void 0:j.source}}};var L,F,A;y.parameters={...y.parameters,docs:{...(L=y.parameters)==null?void 0:L.docs,source:{originalSource:`{
  args: {
    name: 'phone',
    label: 'Phone number input optional',
    isOptional: true
  }
}`,...(A=(F=y.parameters)==null?void 0:F.docs)==null?void 0:A.source}}};const re=["Default","WithOptional"];export{b as Default,y as WithOptional,re as __namedExportsOrder,le as default};
