import{j as t}from"./jsx-runtime-Cosh3CiJ.js";import{V as y}from"./index--Q5IFsBn.js";import{r as n}from"./iframe-CkLLL8Fw.js";import{u as k}from"./chunk-WWGJGFF6-DF5laUNE.js";import{u as v,E as g,a as p}from"./constants-BiIWbSRJ.js";import{u as d,b as S}from"./useNotification-BLnESFSN.js";import{T}from"./TextInput-ipYh_Cj0.js";import{f as x}from"./full-duplicate-BZV8LNX-.js";import{B as N}from"./Button-c-elpywo.js";import{B as b}from"./types-yVZEaApa.js";import{c as I}from"./testUtils-DO-Bj8ps.js";import{P as E}from"./useAppDispatch-D32HoOwJ.js";import{N as L}from"./NotificationToaster-dixaG8iM.js";import"./preload-helper-PPVm8Dsz.js";import"./config-BqmKEuqZ.js";import"./store-B3D8PpUD.js";import"./index-CA89bMOU.js";import"./SvgIcon-Cic2iTkj.js";import"./FieldFooter-C2xTZgVl.js";import"./full-error-BFAmjN4t.js";import"./index.module-DiiM7eGi.js";import"./FieldHeader-Bg2Kn88C.js";import"./Tooltip-DRcl7BfP.js";import"./stroke-pass-CALgybTM.js";import"./Button.module-CY1ZDZvt.js";import"./full-info-D24AtBVt.js";import"./full-validate-CbMNulkZ.js";function O(e){const i=n.useRef(!1);return n.useCallback(()=>{i.current||(i.current=!0,e&&e())},[e])}const f={"share-link":"_share-link_ss7zf_1","share-link-input":"_share-link-input_ss7zf_7","share-link-button":"_share-link-button_ss7zf_15"},u=({link:e,label:i,notifySuccessMessage:s,offerId:r})=>{const o=n.useRef(null),a=d(),{logEvent:l}=v(),h=k(),m=O(()=>{l(g.CLICKED_COPY_TEMPLATE_OFFER_LINK,{from:h.pathname,offerId:r})}),_=async()=>{try{await navigator.clipboard.writeText(e),a.success(s),m()}catch{o.current&&(o.current.select(),document.execCommand("copy"),a.success(s),m())}};return t.jsxs("div",{className:f["share-link"],children:[t.jsx("div",{className:f["share-link-input"],children:t.jsx(T,{name:"share-link",label:i,value:e,ref:o})}),t.jsx(N,{onClick:_,variant:b.PRIMARY,className:f["share-link-button"],icon:x,children:"Copier"})]})};try{u.displayName="ShareLink",u.__docgenInfo={description:"",displayName:"ShareLink",props:{link:{defaultValue:null,description:"",name:"link",required:!0,type:{name:"string"}},label:{defaultValue:null,description:"",name:"label",required:!0,type:{name:"string"}},notifySuccessMessage:{defaultValue:null,description:"",name:"notifySuccessMessage",required:!0,type:{name:"string"}},offerId:{defaultValue:null,description:"",name:"offerId",required:!0,type:{name:"number"}}}}}catch{}const j=e=>e.notification.notification,A=e=>e.notification.isStickyBarOpen,C=()=>{const[e,i]=n.useState(!1),s=p(A),r=p(j),o=d();return n.useEffect(()=>{if(!r?.text||r.duration===void 0)return()=>{};i(!0);const a=setTimeout(()=>{i(!1)},r.duration),l=setTimeout(()=>{o.close()},r.duration+S);return()=>{clearTimeout(a),clearTimeout(l)}},[r,o]),t.jsx(L,{notification:r,isVisible:e,isStickyBarOpen:s})},se={title:"@/ui-kit/ShareLink",decorators:[y],component:u},c={render:e=>t.jsxs(E,{store:I({}),children:[t.jsx("div",{style:{width:"100%"},children:t.jsx(u,{...e})}),t.jsx(C,{})]}),args:{link:"https://bv.ac-versailles.fr/adage/passculture/offres/offerid/8 ",label:"Lien de l’offre",notifySuccessMessage:"Le lien ADAGE a bien été copié"}};c.parameters={...c.parameters,docs:{...c.parameters?.docs,source:{originalSource:`{
  render: args => <Provider store={configureTestStore({})}>
      <div style={{
      width: '100%'
    }}>
        <ShareLink {...args} />
      </div>
      <Notification />
    </Provider>,
  args: {
    link: 'https://bv.ac-versailles.fr/adage/passculture/offres/offerid/8 ',
    label: 'Lien de l’offre',
    notifySuccessMessage: 'Le lien ADAGE a bien été copié'
  }
}`,...c.parameters?.docs?.source}}};const ae=["Default"];export{c as Default,ae as __namedExportsOrder,se as default};
