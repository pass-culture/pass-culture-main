import{j as l}from"./jsx-runtime-CBFbXJzw.js";import{c as v}from"./index-Bobs4FBH.js";import{r as n}from"./iframe-B-OegMqY.js";import{n as V}from"./noop-BjFrJKj1.js";import{F as G}from"./FieldLayout-DkpmCc9W.js";import{f as J}from"./full-down-Cmbtr9nI.js";import{S as P}from"./SvgIcon-DZ_EFh9o.js";const Q="_menu_1k3zf_1",N={menu:Q,"menu--no-results":"_menu--no-results_1k3zf_14","options-item":"_options-item_1k3zf_17","option-hovered":"_option-hovered_1k3zf_22"},k=({className:i,fieldName:y,filteredOptions:t,setHoveredOptionIndex:p,listRef:O,hoveredOptionIndex:q,selectOption:h})=>l.jsx("ul",{className:v(N.menu,i),"data-testid":"list",id:`list-${y}`,ref:O,role:"listbox","aria-label":"options",children:t.length>0?t.map(({value:m,label:E},s)=>{const _=q===s;return l.jsx("li",{"aria-selected":_,"aria-posinset":s+1,"aria-setsize":t.length,className:q===s?N["option-hovered"]:"","data-value":m,"data-selected":_,id:`option-display-${m}`,onMouseEnter:()=>p(s),onFocus:()=>p(s),onClick:()=>{h(String(m))},role:"option",tabIndex:-1,children:l.jsx("span",{className:v(N["options-item"]),children:E})},`option-display-${m}`)}):l.jsx("li",{className:N["menu--no-results"],children:"Aucun rÃ©sultat"})});try{k.displayName="OptionsList",k.__docgenInfo={description:"",displayName:"OptionsList",props:{className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},fieldName:{defaultValue:null,description:"",name:"fieldName",required:!0,type:{name:"string"}},filteredOptions:{defaultValue:null,description:"",name:"filteredOptions",required:!0,type:{name:"SelectOption[]"}},setHoveredOptionIndex:{defaultValue:null,description:"",name:"setHoveredOptionIndex",required:!0,type:{name:"(value: number | null) => void"}},listRef:{defaultValue:null,description:"",name:"listRef",required:!0,type:{name:"Ref<HTMLUListElement>"}},hoveredOptionIndex:{defaultValue:null,description:"",name:"hoveredOptionIndex",required:!0,type:{name:"number | null"}},selectOption:{defaultValue:null,description:"",name:"selectOption",required:!0,type:{name:"(value: string) => void"}}}}}catch{}const w={"multi-select-autocomplete-container":"_multi-select-autocomplete-container_1y15t_2","multi-select-autocomplete-input-container":"_multi-select-autocomplete-input-container_1y15t_8","multi-select-autocomplete-placeholder-input":"_multi-select-autocomplete-placeholder-input_1y15t_12","has-error":"_has-error_1y15t_57","field-overlay":"_field-overlay_1y15t_84"},B={"dropdown-indicator":"_dropdown-indicator_roqvu_1","dropdown-indicator--open":"_dropdown-indicator--open_roqvu_31"},L=({fieldName:i,disabled:y,isOpen:t,toggleField:p})=>l.jsx("button",{onClick:p,className:B["dropdown-indicator"],type:"button","aria-expanded":t,"aria-label":`${t?"Masquer":"Afficher"} les options`,"aria-controls":`list-${i}`,disabled:y,tabIndex:-1,children:l.jsx(P,{className:v({[B["dropdown-indicator--open"]]:t}),src:J})});try{L.displayName="Toggle",L.__docgenInfo={description:"",displayName:"Toggle",props:{fieldName:{defaultValue:null,description:"",name:"fieldName",required:!0,type:{name:"string"}},disabled:{defaultValue:null,description:"",name:"disabled",required:!0,type:{name:"boolean"}},isOpen:{defaultValue:null,description:"",name:"isOpen",required:!0,type:{name:"boolean"}},toggleField:{defaultValue:null,description:"",name:"toggleField",required:!0,type:{name:"() => void"}}}}}catch{}const j=n.forwardRef(({className:i,disabled:y=!1,name:t,required:p=!0,requiredIndicator:O="symbol",label:q,options:h,resetOnOpen:m=!0,description:E,error:s,onChange:_=()=>V,onBlur:D=()=>V,value:A,onSearch:T=()=>V,searchInOptions:z=(g,c)=>g.filter(r=>r.label.toLowerCase().includes(c.trim().toLowerCase())),onReset:M=()=>V},I)=>{const[g,c]=n.useState(""),[r,f]=n.useState(!1),[o,u]=n.useState(null),S=n.useRef(),F=n.useRef(),H=n.useRef(!1),x=n.useRef(null),b=n.useRef(null),C=n.useRef(null);n.useEffect(()=>{S.current=new Map(h.map(({label:e,value:a})=>[a,e])),F.current=new Map(h.map(({label:e,value:a})=>[e,a]))},[h]),n.useEffect(()=>{m&&r&&(c(""),M())},[r,m]),n.useEffect(()=>{const e=a=>{x.current?.contains(a.target)||f(!1)};return x.current&&document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[x]),n.useEffect(()=>{if(u(null),!H.current){H.current=!0;return}T(g.trim())},[g]);const d=z(h,g),K=e=>{switch(e.key){case"ArrowUp":if(o!==null){e.preventDefault();const a=(o-1+d.length)%d.length;u(a),C.current?.getElementsByTagName("li")[a]?.scrollIntoView({block:"nearest"})}break;case"ArrowDown":if(R(),o===null)d.length>0&&u(0);else{const a=(o+1)%d.length;u(a),C.current?.getElementsByTagName("li")[a]?.scrollIntoView({block:"nearest"})}break;case"Enter":r&&o!==null&&d[o]&&(e.preventDefault(),d[o]&&$(String(d[o].value)));break;case"Escape":e.preventDefault(),r?(u(null),f(!1)):c("");break;case"Tab":u(null),f(!1);break}},$=e=>{c(S.current?.get(e)??""),_({type:"change",target:{name:t,value:e}}),D({type:"blur",target:{name:t,value:e}}),f(!1),u(null)},R=()=>{r||f(!0)},U=()=>{f(!r),b.current?.focus()};return n.useEffect(()=>{const e=(A||I&&b.current?.value)??"";c(S.current?.get(e)??e)},[b,A,I]),n.useImperativeHandle(I,()=>b.current),l.jsx(G,{className:i,error:s,required:p,requiredIndicator:O,label:q,name:t,showError:!!s,description:E,children:l.jsxs("div",{className:v(w["multi-select-autocomplete-container"],i),ref:x,children:[l.jsxs("div",{className:v(w["multi-select-autocomplete-input-container"]),children:[l.jsx("input",{...o!==null&&{"aria-activedescendant":`option-display-${d[o]?.value}`},onClick:R,className:v(w["multi-select-autocomplete-placeholder-input"],{[w["has-error"]]:!!s}),onKeyDown:K,type:"search",disabled:y,"aria-autocomplete":"list","aria-controls":`list-${t}`,id:t,"aria-expanded":r,"aria-haspopup":"listbox","aria-required":p,role:"combobox",value:g,ref:b,name:t,onChange:e=>{u(null),c(e.target.value),_({type:"change",target:{name:t,value:e.target.value}}),R()},onBlur:e=>{c(e.target.value);const a=F.current?.get(e.target.value)??"";D({type:"blur",target:{name:t,value:a}})}}),l.jsx(L,{fieldName:t,disabled:y,isOpen:r,toggleField:U})]}),l.jsx("div",{className:w["field-overlay"],children:r&&l.jsx(k,{className:i,fieldName:t,filteredOptions:d,setHoveredOptionIndex:u,listRef:C,hoveredOptionIndex:o,selectOption:$})})]})})});j.displayName="SelectAutocomplete";try{j.displayName="SelectAutocomplete",j.__docgenInfo={description:"",displayName:"SelectAutocomplete",props:{name:{defaultValue:null,description:"Name of the field, used for form submission and accessibility",name:"name",required:!0,type:{name:"string"}},label:{defaultValue:null,description:"Label displayed above the input",name:"label",required:!0,type:{name:"string | Element"}},options:{defaultValue:null,description:"List of available options",name:"options",required:!0,type:{name:"SelectOption[]"}},description:{defaultValue:null,description:"Helper text displayed below the input",name:"description",required:!1,type:{name:"string"}},disabled:{defaultValue:{value:"false"},description:"Disables the input and prevents interaction",name:"disabled",required:!1,type:{name:"boolean"}},required:{defaultValue:{value:"true"},description:"Indicates if the field is required",name:"required",required:!1,type:{name:"boolean"}},requiredIndicator:{defaultValue:{value:"symbol"},description:"What type of required indicator is displayed",name:"requiredIndicator",required:!1,type:{name:"enum",value:[{value:'"symbol"'},{value:'"hidden"'},{value:'"explicit"'}]}},className:{defaultValue:null,description:"Additional CSS class names",name:"className",required:!1,type:{name:"string"}},error:{defaultValue:null,description:"Error message to display",name:"error",required:!1,type:{name:"string"}},onChange:{defaultValue:{value:"() => noop"},description:"Called when the selected value changes",name:"onChange",required:!1,type:{name:'((e: CustomEvent<"change">) => void)'}},onBlur:{defaultValue:{value:"() => noop"},description:"Called when the input loses focus",name:"onBlur",required:!1,type:{name:'((e: CustomEvent<"blur">) => void)'}},value:{defaultValue:null,description:"Value of the input",name:"value",required:!1,type:{name:"string"}},onSearch:{defaultValue:{value:"() => noop"},description:"Called when the search input changes",name:"onSearch",required:!1,type:{name:"((pattern: string) => void)"}},searchInOptions:{defaultValue:{value:`(options, pattern) =>
        options.filter((opt) =>
          opt.label.toLowerCase().includes(pattern.trim().toLowerCase())
        )`},description:"Custom function to filter options based on search pattern",name:"searchInOptions",required:!1,type:{name:"((options: SelectOption[], pattern: string) => SelectOption[])"}},resetOnOpen:{defaultValue:{value:"true"},description:"Resets the input value when dropdown opens.",name:"resetOnOpen",required:!1,type:{name:"boolean"}},onReset:{defaultValue:{value:"() => noop"},description:"Called when the input is reset.\n(cannot be provided when `resetOnOpen` is `false`)",name:"onReset",required:!1,type:{name:"(() => void)"}}}}}catch{}export{j as S};
