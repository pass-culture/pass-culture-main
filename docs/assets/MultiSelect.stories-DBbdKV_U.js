import{V as ee}from"./index-CRFctG6a.js";import{j as e}from"./jsx-runtime-BQLk0I8r.js";import{c as M}from"./index-D4TsieV0.js";import{r as o}from"./iframe-BG7RKYN3.js";import{F as te}from"./FieldFooter-DIa-HZkT.js";import{f as ae}from"./full-close-5Oxr7nnd.js";import{S as H}from"./SvgIcon-ZN384AIy.js";import{C as F}from"./Checkbox-C-wUuz4F.js";import{S as ne}from"./SearchInput-DKshpNky.js";import{f as le}from"./full-down-Cmbtr9nI.js";import{f as re}from"./full-up-D6TPt2ju.js";import"./chunk-EPOLDU6W-C20MunmP.js";import"./preload-helper-PPVm8Dsz.js";import"./full-error-BFAmjN4t.js";import"./index.module-DUllVpJT.js";import"./Asset-CQtlsb0t.js";import"./Tag-BqK3RZ6J.js";import"./full-thumb-up-Bb4kpRpM.js";import"./full-clear-Q4kCtSRL.js";import"./stroke-search-Bph5aoaJ.js";import"./TextInput-BS27TuwF.js";import"./FieldHeader-CJQ7N826.js";import"./Tooltip-BrmyMD7i.js";function se(s,l){o.useEffect(()=>{const n=d=>{!s.current||s.current.contains(d.target)||l(d)};return document.addEventListener("mousedown",n),document.addEventListener("focusin",n),document.addEventListener("touchstart",n),()=>{document.removeEventListener("mousedown",n),document.removeEventListener("focusin",n),document.removeEventListener("touchstart",n)}},[s,l])}const O={"selected-tags":"_selected-tags_1uub6_1","tag-extra-count":"_tag-extra-count_1uub6_8","tag-button":"_tag-button_1uub6_18","tag-button-icon":"_tag-button-icon_1uub6_33"},E=({disabled:s,fieldName:l,optionsLabelById:n,selectedOptions:d,removeOption:f,className:b})=>{const p=o.useRef(null);function _(i,g){const r=p.current?.getElementsByTagName("button");(r?.[g+1]||r?.[g-1])?.focus(),f(i)}const m=d.slice(0,5),S=d.length-m.length;return d.length===0?null:e.jsxs("ul",{className:M(O["selected-tags"],b),ref:p,children:[m.map((i,g)=>e.jsx("li",{children:e.jsxs("button",{"aria-label":`Supprimer ${n[i]}`,className:O["tag-button"],onClick:()=>_(i,g),type:"button",disabled:s,children:[n[i],e.jsx(H,{src:ae,alt:"Fermer",className:O["tag-button-icon"]})]})},`tag-${l}-${i}`)),S>0&&e.jsxs("li",{className:O["tag-extra-count"],children:["+",S,"..."]})]})};try{E.displayName="SelectedValuesTags",E.__docgenInfo={description:"",displayName:"SelectedValuesTags",props:{disabled:{defaultValue:null,description:"",name:"disabled",required:!0,type:{name:"boolean"}},fieldName:{defaultValue:null,description:"",name:"fieldName",required:!0,type:{name:"string"}},optionsLabelById:{defaultValue:null,description:"",name:"optionsLabelById",required:!0,type:{name:"Record<string, string>"}},selectedOptions:{defaultValue:null,description:"",name:"selectedOptions",required:!0,type:{name:"string[]"}},removeOption:{defaultValue:null,description:"",name:"removeOption",required:!0,type:{name:"(value: string) => void"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}}}}}catch{}const ie="_container_1soy1_1",oe="_trigger_1soy1_27",de="_badge_1soy1_81",ce="_chevron_1soy1_95",ue="_item_1soy1_108",pe="_panel_1soy1_126",me="_label_1soy1_143",t={container:ie,"container-input":"_container-input_1soy1_4","container-label":"_container-label_1soy1_10",trigger:oe,"trigger-selected":"_trigger-selected_1soy1_60","trigger-error":"_trigger-error_1soy1_63","trigger-content":"_trigger-content_1soy1_67","trigger-label":"_trigger-label_1soy1_74",badge:de,chevron:ce,"chevron-disabled":"_chevron-disabled_1soy1_100",item:ue,panel:pe,"panel-scrollable":"_panel-scrollable_1soy1_138",label:me,"search-input":"_search-input_1soy1_154","empty-search":"_empty-search_1soy1_159","visually-hidden":"_visually-hidden_1soy1_168"},k=({id:s,options:l,onOptionSelect:n,onSelectAll:d,hasSearch:f=!1,searchLabel:b,hasSelectAllOptions:p,isAllChecked:_})=>{const[m,S]=o.useState(""),i=o.useMemo(()=>l.filter(r=>r.label.toLowerCase().includes(m.toLowerCase())),[l,m]);function g(r){r.key==="Escape"&&m&&r.stopPropagation()}return e.jsxs("div",{id:s,className:t.panel,children:[f&&e.jsx("div",{className:t["search-input"],children:e.jsx(ne,{name:"search",value:m,onChange:r=>S(r.target.value),label:b||"Rechercher",onKeyDown:g})}),e.jsxs("div",{className:t["panel-scrollable"],"data-testid":"panel-scrollable",children:[e.jsx("p",{className:t["visually-hidden"],role:"status",children:e.jsxs("span",{children:[i.length," résultats trouvés"]})}),i.length>0?e.jsxs("ul",{className:t.container,children:[p&&e.jsx("li",{className:t.item,children:e.jsx(F,{label:"Tout sélectionner",checked:_,className:t.label,onChange:d,sizing:"fill"})},"all-options"),i.map(r=>e.jsx("li",{className:t.item,children:e.jsx(F,{className:t.label,label:r.label,checked:r.checked,onChange:()=>n(r),sizing:"fill"})},r.id))]}):e.jsx("div",{className:t["empty-search"],children:e.jsx("span",{children:"Aucun résultat trouvé pour votre recherche."})})]})]})};try{k.displayName="MultiSelectPanel",k.__docgenInfo={description:"",displayName:"MultiSelectPanel",props:{id:{defaultValue:null,description:"",name:"id",required:!0,type:{name:"string"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},label:{defaultValue:null,description:"",name:"label",required:!0,type:{name:"string"}},options:{defaultValue:null,description:"",name:"options",required:!0,type:{name:"(Option & { checked: boolean; })[]"}},hasSelectAllOptions:{defaultValue:null,description:"",name:"hasSelectAllOptions",required:!1,type:{name:"boolean"}},isAllChecked:{defaultValue:null,description:"",name:"isAllChecked",required:!0,type:{name:"boolean"}},hasSearch:{defaultValue:{value:"false"},description:"",name:"hasSearch",required:!1,type:{name:"boolean"}},searchLabel:{defaultValue:null,description:"",name:"searchLabel",required:!1,type:{name:"string"}},onOptionSelect:{defaultValue:null,description:"",name:"onOptionSelect",required:!0,type:{name:"(option: Option) => void"}},onSelectAll:{defaultValue:null,description:"",name:"onSelectAll",required:!0,type:{name:"() => void"}}}}}catch{}const D=({id:s,isOpen:l,selectedCount:n,toggleDropdown:d,buttonLabel:f,disabled:b,error:p,errorId:_})=>e.jsxs("button",{type:"button",className:M(t.trigger,{[t["trigger-selected"]]:n>0,[t["trigger-error"]]:!!p}),onClick:d,"aria-haspopup":"listbox","aria-label":f,"aria-controls":s,disabled:b,"data-error":!!p,"aria-describedby":_,children:[e.jsxs("div",{className:t["trigger-content"],children:[n>0&&e.jsxs("div",{className:t.badge,children:[n," ",e.jsx("span",{className:t["visually-hidden"],children:"éléments sélectionnés"})]}),e.jsx("span",{className:t["trigger-label"],children:f})]}),e.jsx(H,{className:`${t.chevron} ${l?t.chevronOpen:""} ${b?t["chevron-disabled"]:""}`,src:l?re:le})]});try{D.displayName="MultiSelectTrigger",D.__docgenInfo={description:"",displayName:"MultiSelectTrigger",props:{id:{defaultValue:null,description:"",name:"id",required:!0,type:{name:"string"}},isOpen:{defaultValue:null,description:"",name:"isOpen",required:!0,type:{name:"boolean"}},selectedCount:{defaultValue:null,description:"",name:"selectedCount",required:!0,type:{name:"number"}},toggleDropdown:{defaultValue:null,description:"",name:"toggleDropdown",required:!0,type:{name:"() => void"}},buttonLabel:{defaultValue:null,description:"",name:"buttonLabel",required:!0,type:{name:"string"}},disabled:{defaultValue:null,description:"",name:"disabled",required:!1,type:{name:"boolean"}},error:{defaultValue:null,description:"",name:"error",required:!1,type:{name:"string"}},errorId:{defaultValue:null,description:"",name:"errorId",required:!1,type:{name:"string"}}}}}catch{}const I=o.forwardRef(({className:s,options:l,selectedOptions:n,defaultOptions:d=[],hasSearch:f=!1,searchLabel:b,label:p,hasSelectAllOptions:_,disabled:m=!1,onSelectedOptionsChanged:S,error:i,buttonLabel:g,required:r=!1,requiredIndicator:R="symbol",onBlur:K},U)=>{const[T,L]=o.useState(!1),[h,P]=o.useState(d),W=h.length===l.length,B=o.useRef(null),$=o.useId(),z=o.useId(),G=()=>L(a=>!a);o.useEffect(()=>{n&&P(n)},[n]);function w(a){const c=new Set(h.map(u=>u.id)),y=new Set(a.map(u=>u.id)),Y=new Set([...c].filter(u=>!y.has(u))),Z=new Set([...y].filter(u=>!c.has(u)));S(a,l.filter(u=>Z.has(u.id)),l.filter(u=>Y.has(u.id))),P(a)}const J=a=>{const c=h.some(y=>y.id===a.id)?h.filter(y=>y.id!==a.id):[...h,a];w(c)},Q=()=>{w(W?[]:l)},X=a=>{const c=h.filter(y=>y.id!==a);w(c)},C=o.useCallback(a=>{a.key==="Escape"&&L(!1)},[]);return o.useEffect(()=>(document.addEventListener("keydown",C),()=>{document.removeEventListener("keydown",C)}),[C]),se(B,()=>L(!1)),e.jsxs("fieldset",{className:t.container,onBlur:K,ref:U,children:[e.jsxs("legend",{className:t["container-label"],children:[p,r&&R==="symbol"&&e.jsx(e.Fragment,{children:" *"})]}),e.jsxs("div",{className:M(s,t["container-input"]),children:[e.jsxs("div",{ref:B,children:[e.jsx(D,{id:$,buttonLabel:g,isOpen:T,toggleDropdown:G,selectedCount:h.length,disabled:m,error:i,errorId:z}),T&&e.jsx(k,{id:$,label:p,options:l.map(a=>({...a,checked:h.some(c=>c.id===a.id)})),onOptionSelect:J,onSelectAll:Q,isAllChecked:W,hasSearch:f,searchLabel:b,hasSelectAllOptions:_})]}),e.jsx(te,{error:i,errorId:z})]}),e.jsx(E,{disabled:m,selectedOptions:h.map(a=>a.id),removeOption:X,fieldName:"tags",optionsLabelById:h.reduce((a,c)=>Object.assign(a,{[c.id]:c.label}),{})})]})});I.displayName="MultiSelect";try{I.displayName="MultiSelect",I.__docgenInfo={description:`MultiSelect component for selecting multiple options from a dropdown list.

This component provides a customizable dropdown for selecting multiple options,
with features like search functionality, select all option, and individual option selection.
It integrates with form layouts.`,displayName:"MultiSelect",props:{options:{defaultValue:null,description:"Array of available options",name:"options",required:!0,type:{name:"Option[]"}},selectedOptions:{defaultValue:null,description:"Array of available options",name:"selectedOptions",required:!1,type:{name:"Option[]"}},defaultOptions:{defaultValue:{value:"[]"},description:"Array of initially selected options",name:"defaultOptions",required:!1,type:{name:"Option[]"}},label:{defaultValue:null,description:"Label for the MultiSelect field",name:"label",required:!0,type:{name:"string"}},hasSelectAllOptions:{defaultValue:null,description:'Whether to include a "Select All" option',name:"hasSelectAllOptions",required:!1,type:{name:"boolean"}},disabled:{defaultValue:{value:"false"},description:"Whether the MultiSelect is disabled",name:"disabled",required:!1,type:{name:"boolean"}},onSelectedOptionsChanged:{defaultValue:null,description:`Callback function called when selected options change,
Multiple selections can be made by selecting only one item (ex: selectInterventionAreas.ts)`,name:"onSelectedOptionsChanged",required:!0,type:{name:"(selectedOptions: Option[], addedOptions: Option[], removedOptions: Option[]) => void"}},error:{defaultValue:null,description:"Error message to display",name:"error",required:!1,type:{name:"string"}},name:{defaultValue:null,description:"Name attribute for the form field",name:"name",required:!0,type:{name:"string"}},buttonLabel:{defaultValue:null,description:"Label for the dropdown button",name:"buttonLabel",required:!0,type:{name:"string"}},required:{defaultValue:{value:"false"},description:"field is required",name:"required",required:!1,type:{name:"boolean"}},requiredIndicator:{defaultValue:{value:"symbol"},description:"What type of required indicator is displayed",name:"requiredIndicator",required:!1,type:{name:"enum",value:[{value:'"symbol"'},{value:'"hidden"'},{value:'"explicit"'}]}},className:{defaultValue:null,description:"this class offers the possibility of limiting the size of the multiselect",name:"className",required:!1,type:{name:"string"}},onBlur:{defaultValue:null,description:"Trigger function to display error message when element is unfocus",name:"onBlur",required:!1,type:{name:"(() => void)"}},hasSearch:{defaultValue:{value:"false"},description:"Whether to include a search bar above options\nIf `hasSearch` is `true`, `searchLabel` are required. This part applies the condition",name:"hasSearch",required:!1,type:{name:"boolean"}},searchLabel:{defaultValue:null,description:"",name:"searchLabel",required:!1,type:{name:"string"}}}}}catch{}const Te={title:"@/ui-kit/forms/MultiSelect",decorators:[ee],component:I,parameters:{docs:{story:{inline:!1,iframeHeight:380}}}},he=[{id:"1",label:"01 - Ain"},{id:"2",label:"02 - Aisne"},{id:"3",label:"03 - Allier"},{id:"4",label:"04 - Alpes-de-Haute-Provence"},{id:"5",label:"05 - Hautes-Alpes"},{id:"6",label:"06 - Alpes-Maritimes"},{id:"7",label:"07 - Ardèche"},{id:"8",label:"08 - Ardennes"},{id:"9",label:"09 - Ariège"},{id:"10",label:"10 - Aube"},{id:"11",label:"11 - Aude"},{id:"12",label:"12 - Aveyron"},{id:"13",label:"13 - Bouches-du-Rhône"},{id:"14",label:"14 - Calvados"},{id:"15",label:"15 - Cantal"}],v={options:he,label:"Sélectionner un département",onSelectedOptionsChanged:()=>{},buttonLabel:"Départements"},V={args:{...v}},q={args:{...v,defaultOptions:[{id:"2",label:"75 - Paris"},{id:"3",label:"44 - Nantes"}]}},x={args:{...v,hasSearch:!0,searchLabel:"Rechercher des départements",buttonLabel:"Départements",label:"Sélectionner des départements",name:"départements"}},N={args:{...v,hasSelectAllOptions:!0,buttonLabel:"Départements",label:"Sélectionner des départements",name:"départements"}},A={args:{...v,hasSearch:!0,searchLabel:"Rechercher des départements",hasSelectAllOptions:!0,buttonLabel:"Départements",label:"Sélectionner des départements"}},j={args:{...v,buttonLabel:"Départements",label:"Sélectionner des départements",error:"Veuillez sélectionner un département",onBlur:()=>{},name:"départements"}};V.parameters={...V.parameters,docs:{...V.parameters?.docs,source:{originalSource:`{
  args: {
    ...defaultProps
  }
}`,...V.parameters?.docs?.source}}};q.parameters={...q.parameters,docs:{...q.parameters?.docs,source:{originalSource:`{
  args: {
    ...defaultProps,
    defaultOptions: [{
      id: '2',
      label: '75 - Paris'
    }, {
      id: '3',
      label: '44 - Nantes'
    }]
  }
}`,...q.parameters?.docs?.source}}};x.parameters={...x.parameters,docs:{...x.parameters?.docs,source:{originalSource:`{
  args: {
    ...defaultProps,
    hasSearch: true,
    searchLabel: 'Rechercher des départements',
    buttonLabel: 'Départements',
    label: 'Sélectionner des départements',
    name: 'départements'
  }
}`,...x.parameters?.docs?.source}}};N.parameters={...N.parameters,docs:{...N.parameters?.docs,source:{originalSource:`{
  args: {
    ...defaultProps,
    hasSelectAllOptions: true,
    buttonLabel: 'Départements',
    label: 'Sélectionner des départements',
    name: 'départements'
  }
}`,...N.parameters?.docs?.source}}};A.parameters={...A.parameters,docs:{...A.parameters?.docs,source:{originalSource:`{
  args: {
    ...defaultProps,
    hasSearch: true,
    searchLabel: 'Rechercher des départements',
    hasSelectAllOptions: true,
    buttonLabel: 'Départements',
    label: 'Sélectionner des départements'
  }
}`,...A.parameters?.docs?.source}}};j.parameters={...j.parameters,docs:{...j.parameters?.docs,source:{originalSource:`{
  args: {
    ...defaultProps,
    buttonLabel: 'Départements',
    label: 'Sélectionner des départements',
    error: 'Veuillez sélectionner un département',
    onBlur: () => {},
    name: 'départements'
  }
}`,...j.parameters?.docs?.source}}};const Pe=["Default","WithDefaultOptions","WithSearchInput","WithSelectAllOption","WithSearchInputAndSelectAllOption","WithError"];export{V as Default,q as WithDefaultOptions,j as WithError,x as WithSearchInput,A as WithSearchInputAndSelectAllOption,N as WithSelectAllOption,Pe as __namedExportsOrder,Te as default};
