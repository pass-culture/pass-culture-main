import{V as pe}from"./index-CknRkA2u.js";import{j as e}from"./jsx-runtime-CfatFE5O.js";import{r as c}from"./index-ClcD9ViR.js";import{F as me}from"./FieldLayout-Dd55Pa2G.js";import{S as he}from"./SelectedValuesTags-D2E3rwn0.js";import{B as fe,s as be}from"./BaseInput-zpkrYXWy.js";import{B as P}from"./BaseCheckbox-Mv0yXU8n.js";import{c as ge}from"./index-DeARc5FM.js";import{f as ye}from"./full-down-Cmbtr9nI.js";import{f as _e}from"./full-up-D6TPt2ju.js";import{S as Se}from"./SvgIcon-CUWb-Ez8.js";import"./index-D3nBDJe7.js";import"./index-MhaI5ydX.js";import"./_commonjsHelpers-Cpj98o6Y.js";import"./index-C3LhMar3.js";import"./full-clear-Q4kCtSRL.js";import"./full-close-5Oxr7nnd.js";import"./full-help-blUMxBcv.js";import"./Button-CSQAIFQX.js";import"./stroke-pass-CALgybTM.js";import"./Tooltip-CPMX2zM9.js";import"./useTooltipProps-C5TDwaI9.js";import"./Button.module-CvOOzViS.js";import"./types-DjX_gQD6.js";import"./FieldError-DblMbt5C.js";import"./stroke-error-DSZD431a.js";import"./FieldLayoutCharacterCount-DooUcf1c.js";function ve(n,l){c.useEffect(()=>{const r=u=>{!n.current||n.current.contains(u.target)||l(u)};return document.addEventListener("mousedown",r),document.addEventListener("focusin",r),document.addEventListener("touchstart",r),()=>{document.removeEventListener("mousedown",r),document.removeEventListener("focusin",r),document.removeEventListener("touchstart",r)}},[n,l])}const Oe="_container_1szey_1",xe="_legend_1szey_9",Ae="_trigger_1szey_17",Ve="_badge_1szey_71",Le="_chevron_1szey_85",qe="_item_1szey_98",Ne="_tags_1szey_110",je="_panel_1szey_116",Ie="_label_1szey_133",we="_checkbox_1szey_140",ke="_separator_1szey_170",t={container:Oe,legend:xe,trigger:Ae,"trigger-selected":"_trigger-selected_1szey_50","trigger-error":"_trigger-error_1szey_53","trigger-content":"_trigger-content_1szey_57","trigger-label":"_trigger-label_1szey_64",badge:Ve,chevron:Le,"chevron-disabled":"_chevron-disabled_1szey_90","chevron-open":"_chevron-open_1szey_94",item:qe,tags:Ne,panel:je,"panel-scrollable":"_panel-scrollable_1szey_128",label:Ie,checkbox:we,"search-input":"_search-input_1szey_144","empty-search":"_empty-search_1szey_149","visually-hidden":"_visually-hidden_1szey_158",separator:ke},j=({id:n,options:l,onOptionSelect:r,onSelectAll:u,hasSearch:f=!1,searchLabel:m,hasSelectAllOptions:b,isAllChecked:h})=>{const[y,S]=c.useState(""),_=c.useMemo(()=>l.filter(i=>i.label.toLowerCase().includes(y.toLowerCase())),[l,y]);return e.jsxs("div",{id:n,className:t.panel,children:[f&&e.jsxs("div",{className:t["search-input"],children:[e.jsx("label",{className:t["visually-hidden"],htmlFor:`search-input-${n}`,children:m}),e.jsx(fe,{type:"search",id:`search-input-${n}`,leftIcon:be,value:y,onChange:i=>S(i.target.value),autoComplete:"off",spellCheck:!1})]}),e.jsxs("div",{className:t["panel-scrollable"],"data-testid":"panel-scrollable",children:[e.jsx("p",{className:t["visually-hidden"],role:"status",children:e.jsxs("span",{children:[_.length," résultats trouvés"]})}),_.length>0?e.jsxs("ul",{className:t.container,children:[b&&e.jsx("li",{className:t.item,children:e.jsx(P,{label:"Tout sélectionner",checked:h,labelClassName:t.label,inputClassName:t.checkbox,onChange:u})},"all-options"),_.map(i=>e.jsx("li",{className:t.item,children:e.jsx(P,{labelClassName:t.label,inputClassName:t.checkbox,label:i.label,checked:i.checked,onChange:()=>r(i)})},i.id))]}):e.jsx("div",{className:t["empty-search"],children:e.jsx("span",{children:"Aucun résultat trouvé pour votre recherche."})})]})]})};try{j.displayName="MultiSelectPanel",j.__docgenInfo={description:"",displayName:"MultiSelectPanel",props:{id:{defaultValue:null,description:"",name:"id",required:!0,type:{name:"string"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},label:{defaultValue:null,description:"",name:"label",required:!0,type:{name:"string"}},options:{defaultValue:null,description:"",name:"options",required:!0,type:{name:"(Option & { checked: boolean; })[]"}},hasSelectAllOptions:{defaultValue:null,description:"",name:"hasSelectAllOptions",required:!1,type:{name:"boolean"}},isAllChecked:{defaultValue:null,description:"",name:"isAllChecked",required:!0,type:{name:"boolean"}},hasSearch:{defaultValue:{value:"false"},description:"",name:"hasSearch",required:!1,type:{name:"boolean"}},searchLabel:{defaultValue:null,description:"",name:"searchLabel",required:!1,type:{name:"string"}},onOptionSelect:{defaultValue:null,description:"",name:"onOptionSelect",required:!0,type:{name:"(option: Option) => void"}},onSelectAll:{defaultValue:null,description:"",name:"onSelectAll",required:!0,type:{name:"() => void"}}}}}catch{}const I=({id:n,isOpen:l,selectedCount:r,toggleDropdown:u,buttonLabel:f,fieldLabel:m,disabled:b,error:h})=>e.jsxs(e.Fragment,{children:[e.jsx("legend",{className:t["visually-hidden"],children:m}),e.jsxs("button",{type:"button",className:ge(t.trigger,{[t["trigger-selected"]]:r>0,[t["trigger-error"]]:!!h}),onClick:u,"aria-haspopup":"listbox","aria-label":f,"aria-expanded":l,"aria-controls":n,disabled:b,"data-error":!!h,children:[e.jsxs("div",{className:t["trigger-content"],children:[r>0&&e.jsxs("div",{className:t.badge,children:[r," ",e.jsx("span",{className:t["visually-hidden"],children:"éléments sélectionnés"})]}),e.jsx("span",{className:t["trigger-label"],children:f})]}),e.jsx(Se,{className:`${t.chevron} ${l?t.chevronOpen:""} ${b?t["chevron-disabled"]:""}`,src:l?_e:ye})]})]});try{I.displayName="MultiSelectTrigger",I.__docgenInfo={description:"",displayName:"MultiSelectTrigger",props:{id:{defaultValue:null,description:"",name:"id",required:!0,type:{name:"string"}},isOpen:{defaultValue:null,description:"",name:"isOpen",required:!0,type:{name:"boolean"}},selectedCount:{defaultValue:null,description:"",name:"selectedCount",required:!0,type:{name:"number"}},toggleDropdown:{defaultValue:null,description:"",name:"toggleDropdown",required:!0,type:{name:"() => void"}},buttonLabel:{defaultValue:null,description:"",name:"buttonLabel",required:!0,type:{name:"string"}},fieldLabel:{defaultValue:null,description:"",name:"fieldLabel",required:!0,type:{name:"string"}},disabled:{defaultValue:null,description:"",name:"disabled",required:!1,type:{name:"boolean"}},error:{defaultValue:null,description:"",name:"error",required:!1,type:{name:"string"}}}}}catch{}const w=({options:n,selectedOptions:l,defaultOptions:r=[],hasSearch:u=!1,searchLabel:f,label:m,hasSelectAllOptions:b,disabled:h=!1,onSelectedOptionsChanged:y,error:S,name:_,buttonLabel:i,isOptional:ne=!1,showError:re=!1,onBlur:le})=>{const[k,q]=c.useState(!1),[d,C]=c.useState(r),z=d.length===n.length,E=c.useRef(null),D=c.useId(),se=()=>q(a=>!a);c.useEffect(()=>{l&&C(l)},[l]);function N(a){const s=new Set(d.map(o=>o.id)),p=new Set(a.map(o=>o.id)),ce=new Set([...s].filter(o=>!p.has(o))),ue=new Set([...p].filter(o=>!s.has(o)));y(a,n.filter(o=>ue.has(o.id)),n.filter(o=>ce.has(o.id))),C(a)}const oe=a=>{const s=d.some(p=>p.id===a.id)?d.filter(p=>p.id!==a.id):[...d,a];N(s)},ie=()=>{N(z?[]:n)},de=a=>{const s=d.filter(p=>p.id!==a);N(s)},M=a=>{a.key==="Escape"&&q(!1)};return c.useEffect(()=>(document.addEventListener("keydown",M),()=>{document.removeEventListener("keydown",M)}),[]),ve(E,()=>q(!1)),e.jsx(me,{label:m,name:_,error:S,showError:re,isOptional:ne,children:e.jsxs("fieldset",{className:t.container,onBlur:le,children:[e.jsxs("div",{ref:E,children:[e.jsx(I,{id:D,buttonLabel:i,fieldLabel:m,isOpen:k,toggleDropdown:se,selectedCount:d.length,disabled:h,error:S}),k&&e.jsx(j,{id:D,label:m,options:n.map(a=>({...a,checked:d.some(s=>s.id===a.id)})),onOptionSelect:oe,onSelectAll:ie,isAllChecked:z,hasSearch:u,searchLabel:f,hasSelectAllOptions:b})]}),e.jsx(he,{disabled:h,selectedOptions:d.map(a=>a.id),removeOption:de,fieldName:"tags",optionsLabelById:d.reduce((a,s)=>({...a,[s.id]:s.label}),{})})]})})};try{w.displayName="MultiSelect",w.__docgenInfo={description:`MultiSelect component for selecting multiple options from a dropdown list.

This component provides a customizable dropdown for selecting multiple options,
with features like search functionality, select all option, and individual option selection.
It integrates with form layouts.`,displayName:"MultiSelect",props:{options:{defaultValue:null,description:"Array of available options",name:"options",required:!0,type:{name:"Option[]"}},selectedOptions:{defaultValue:null,description:"Array of available options",name:"selectedOptions",required:!1,type:{name:"Option[]"}},defaultOptions:{defaultValue:{value:"[]"},description:"Array of initially selected options",name:"defaultOptions",required:!1,type:{name:"Option[]"}},label:{defaultValue:null,description:"Label for the MultiSelect field",name:"label",required:!0,type:{name:"string"}},hasSelectAllOptions:{defaultValue:null,description:'Whether to include a "Select All" option',name:"hasSelectAllOptions",required:!1,type:{name:"boolean"}},disabled:{defaultValue:{value:"false"},description:"Whether the MultiSelect is disabled",name:"disabled",required:!1,type:{name:"boolean"}},onSelectedOptionsChanged:{defaultValue:null,description:`Callback function called when selected options change,
Multiple selections can be made by selecting only one item (ex: interventionAreaMultiSelect.ts)`,name:"onSelectedOptionsChanged",required:!0,type:{name:"(selectedOptions: Option[], addedOptions: Option[], removedOptions: Option[]) => void"}},error:{defaultValue:null,description:"Error message to display",name:"error",required:!1,type:{name:"string"}},name:{defaultValue:null,description:"Name attribute for the form field",name:"name",required:!0,type:{name:"string"}},buttonLabel:{defaultValue:null,description:"Label for the dropdown button",name:"buttonLabel",required:!0,type:{name:"string"}},isOptional:{defaultValue:{value:"false"},description:"",name:"isOptional",required:!1,type:{name:"boolean"}},showError:{defaultValue:{value:"false"},description:"",name:"showError",required:!1,type:{name:"boolean"}},onBlur:{defaultValue:null,description:"Trigger function to display error message when element is unfocus",name:"onBlur",required:!1,type:{name:"(() => void)"}},hasSearch:{defaultValue:{value:"false"},description:"Whether to include a search bar above options\nIf `hasSearch` is `true`, `searchLabel` are required. This part applies the condition",name:"hasSearch",required:!1,type:{name:"boolean"}},searchLabel:{defaultValue:null,description:"",name:"searchLabel",required:!1,type:{name:"string"}}}}}catch{}const ot={title:"ui-kit/MultiSelect",decorators:[pe],component:w,parameters:{docs:{story:{inline:!1,iframeHeight:380}}}},Ce=[{id:"1",label:"01 - Ain"},{id:"2",label:"02 - Aisne"},{id:"3",label:"03 - Allier"},{id:"4",label:"04 - Alpes-de-Haute-Provence"},{id:"5",label:"05 - Hautes-Alpes"},{id:"6",label:"06 - Alpes-Maritimes"},{id:"7",label:"07 - Ardèche"},{id:"8",label:"08 - Ardennes"},{id:"9",label:"09 - Ariège"},{id:"10",label:"10 - Aube"},{id:"11",label:"11 - Aude"},{id:"12",label:"12 - Aveyron"},{id:"13",label:"13 - Bouches-du-Rhône"},{id:"14",label:"14 - Calvados"},{id:"15",label:"15 - Cantal"}],g={options:Ce,legend:"Département",label:"Sélectionner un département",onSelectedOptionsChanged:()=>{}},v={args:{...g}},O={args:{...g,defaultOptions:[{id:"2",label:"75 - Paris"},{id:"3",label:"44 - Nantes"}]}},x={args:{...g,hasSearch:!0,searchLabel:"Rechercher des départements",buttonLabel:"Départements",label:"Sélectionner des départements",name:"départements"}},A={args:{...g,hasSelectAllOptions:!0,buttonLabel:"Départements",label:"Sélectionner des départements",name:"départements"}},V={args:{...g,hasSearch:!0,searchLabel:"Rechercher des départements",hasSelectAllOptions:!0,buttonLabel:"Départements",label:"Sélectionner des départements"}},L={args:{...g,buttonLabel:"Départements",label:"Sélectionner des départements",showError:!0,error:"Veuillez sélectionner un département",onBlur:()=>{},name:"départements"}};var W,B,R;v.parameters={...v.parameters,docs:{...(W=v.parameters)==null?void 0:W.docs,source:{originalSource:`{
  args: {
    ...defaultProps
  }
}`,...(R=(B=v.parameters)==null?void 0:B.docs)==null?void 0:R.source}}};var T,F,$;O.parameters={...O.parameters,docs:{...(T=O.parameters)==null?void 0:T.docs,source:{originalSource:`{
  args: {
    ...defaultProps,
    defaultOptions: [{
      id: '2',
      label: '75 - Paris'
    }, {
      id: '3',
      label: '44 - Nantes'
    }]
  }
}`,...($=(F=O.parameters)==null?void 0:F.docs)==null?void 0:$.source}}};var H,K,U;x.parameters={...x.parameters,docs:{...(H=x.parameters)==null?void 0:H.docs,source:{originalSource:`{
  args: {
    ...defaultProps,
    hasSearch: true,
    searchLabel: 'Rechercher des départements',
    buttonLabel: 'Départements',
    label: 'Sélectionner des départements',
    name: 'départements'
  }
}`,...(U=(K=x.parameters)==null?void 0:K.docs)==null?void 0:U.source}}};var G,J,Q;A.parameters={...A.parameters,docs:{...(G=A.parameters)==null?void 0:G.docs,source:{originalSource:`{
  args: {
    ...defaultProps,
    hasSelectAllOptions: true,
    buttonLabel: 'Départements',
    label: 'Sélectionner des départements',
    name: 'départements'
  }
}`,...(Q=(J=A.parameters)==null?void 0:J.docs)==null?void 0:Q.source}}};var X,Y,Z;V.parameters={...V.parameters,docs:{...(X=V.parameters)==null?void 0:X.docs,source:{originalSource:`{
  args: {
    ...defaultProps,
    hasSearch: true,
    searchLabel: 'Rechercher des départements',
    hasSelectAllOptions: true,
    buttonLabel: 'Départements',
    label: 'Sélectionner des départements'
  }
}`,...(Z=(Y=V.parameters)==null?void 0:Y.docs)==null?void 0:Z.source}}};var ee,te,ae;L.parameters={...L.parameters,docs:{...(ee=L.parameters)==null?void 0:ee.docs,source:{originalSource:`{
  args: {
    ...defaultProps,
    buttonLabel: 'Départements',
    label: 'Sélectionner des départements',
    showError: true,
    error: 'Veuillez sélectionner un département',
    onBlur: () => {},
    name: 'départements'
  }
}`,...(ae=(te=L.parameters)==null?void 0:te.docs)==null?void 0:ae.source}}};const it=["Default","WithDefaultOptions","WithSearchInput","WithSelectAllOption","WithSearchInputAndSelectAllOption","WithError"];export{v as Default,O as WithDefaultOptions,L as WithError,x as WithSearchInput,V as WithSearchInputAndSelectAllOption,A as WithSelectAllOption,it as __namedExportsOrder,ot as default};
