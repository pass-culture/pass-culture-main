import{j as t}from"./jsx-runtime-C_uOM0Gm.js";import{V as y}from"./index-vSssAp4U.js";import{r as u}from"./iframe-CTnXOULQ.js";import{u as S}from"./chunk-EPOLDU6W-u6n6pb5J.js";import{u as g,E as b,a as f}from"./constants-B8J2J8NQ.js";import{u as v}from"./useSnackBar-BVi7-NBL.js";import{T as x}from"./TextInput-DOsfrCQI.js";import{f as B}from"./full-duplicate-BZV8LNX-.js";import{B as C}from"./Button-D-MtOkGK.js";import{B as L}from"./types-yVZEaApa.js";import{P as A,c as E}from"./testUtils-B_sNBPCn.js";import{c as j}from"./index-TscbDd2H.js";import{u as I}from"./useAppDispatch-D_a_Ase9.js";import{u as T}from"./useMediaQuery-DeNVqfPX.js";import{e as w,f as D}from"./store-DbzJj_LB.js";import{a as N}from"./SnackBar-DSFSWWuB.js";import"./preload-helper-PPVm8Dsz.js";import"./SvgIcon-CJiY4LCz.js";import"./FieldFooter-CL0tzobd.js";import"./full-error-BFAmjN4t.js";import"./index.module-DEHgy3-r.js";import"./FieldHeader-DxZ9joXq.js";import"./Tooltip-GJ5PEk5n.js";import"./stroke-pass-CALgybTM.js";import"./Button.module-BE-jPv6M.js";import"./date-CrU56jqV.js";import"./full-clear-Q4kCtSRL.js";import"./full-close-5Oxr7nnd.js";import"./full-validate-CbMNulkZ.js";function O(e){const s=u.useRef(!1);return u.useCallback(()=>{s.current||(s.current=!0,e&&e())},[e])}const p={"share-link":"_share-link_ss7zf_1","share-link-input":"_share-link-input_ss7zf_7","share-link-button":"_share-link-button_ss7zf_15"},c=({link:e,label:s,notifySuccessMessage:o,offerId:l})=>{const a=u.useRef(null),r=v(),{logEvent:n}=g(),h=S(),d=O(()=>{n(b.CLICKED_COPY_TEMPLATE_OFFER_LINK,{from:h.pathname,offerId:l})}),_=async()=>{try{await navigator.clipboard.writeText(e),r.success(o),d()}catch{a.current&&(a.current.select(),document.execCommand("copy"),r.success(o),d())}};return t.jsxs("div",{className:p["share-link"],children:[t.jsx("div",{className:p["share-link-input"],children:t.jsx(x,{name:"share-link",label:s,value:e,ref:a})}),t.jsx(C,{onClick:_,variant:L.PRIMARY,className:p["share-link-button"],icon:B,children:"Copier"})]})};try{c.displayName="ShareLink",c.__docgenInfo={description:"",displayName:"ShareLink",props:{link:{defaultValue:null,description:"",name:"link",required:!0,type:{name:"string"}},label:{defaultValue:null,description:"",name:"label",required:!0,type:{name:"string"}},notifySuccessMessage:{defaultValue:null,description:"",name:"notifySuccessMessage",required:!0,type:{name:"string"}},offerId:{defaultValue:null,description:"",name:"offerId",required:!0,type:{name:"number"}}}}}catch{}const R=w.getSelectors(e=>e.snackBar.list),P=e=>e.snackBar.isStickyBarOpen,V=e=>R.selectAll(e),k={"snack-bar-container":"_snack-bar-container_1xbo7_1","with-sticky-action-bar":"_with-sticky-action-bar_1xbo7_13"},m=()=>{const e=f(V),s=I(),o=f(P),l=T("(max-width: 38.125rem)"),a=e.sort((r,n)=>(l?1:-1)*(new Date(r.createdAt).getTime()-new Date(n.createdAt).getTime()));return t.jsx("div",{className:j(k["snack-bar-container"],o&&k["with-sticky-action-bar"]),children:a.map((r,n)=>t.jsx(N,{variant:r.variant,description:r.description,onClose:()=>s(D(r.id)),testId:`global-snack-bar-${r.variant}-${n}`},r.id))})};try{m.displayName="SnackBarContainer",m.__docgenInfo={description:`The SnackBarContainer component is used to display snackbars of different types.
It supports displaying snackbars such as errors and success

---
**Important: Use \`list\` selector to get the snackbars to be displayed.**
---`,displayName:"SnackBarContainer",props:{}}}catch{}const fe={title:"@/ui-kit/ShareLink",decorators:[y],component:c},i={render:e=>t.jsxs(A,{store:E({}),children:[t.jsx("div",{style:{width:"100%"},children:t.jsx(c,{...e})}),t.jsx(m,{})]}),args:{link:"https://bv.ac-versailles.fr/adage/passculture/offres/offerid/8 ",label:"Lien de l’offre",notifySuccessMessage:"Le lien ADAGE a bien été copié"}};i.parameters={...i.parameters,docs:{...i.parameters?.docs,source:{originalSource:`{
  render: args => <Provider store={configureTestStore({})}>
      <div style={{
      width: '100%'
    }}>
        <ShareLink {...args} />
      </div>
      <SnackBarContainer />
    </Provider>,
  args: {
    link: 'https://bv.ac-versailles.fr/adage/passculture/offres/offerid/8 ',
    label: 'Lien de l’offre',
    notifySuccessMessage: 'Le lien ADAGE a bien été copié'
  }
}`,...i.parameters?.docs?.source}}};const ke=["Default"];export{i as Default,ke as __namedExportsOrder,fe as default};
