var tt=(t,e,r)=>{if(!e.has(t))throw TypeError("Cannot "+r)};var u=(t,e,r)=>(tt(t,e,"read from private field"),r?r.call(t):e.get(t)),f=(t,e,r)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,r)},p=(t,e,r,o)=>(tt(t,e,"write to private field"),o?o.call(t,r):e.set(t,r),r);import{j as l}from"./jsx-runtime-vNq4Oc-g.js";import{r as m}from"./index-4g5l5LRQ.js";import{u as Bt}from"./reducer-f9lq0oNF.js";import{U as Ge,A as vt}from"./config-KjRYmNhP.js";import"./VenuePhysicalLocation-v2PyZzNX.js";import{b as Dt,c as rt,d as st}from"./reducer-Iw-rOIcR.js";import{c as pe}from"./index-XNbs-YUW.js";import{s as Vt}from"./stroke-pass-84wyy11D.js";import{S as Le}from"./SvgIcon-QVOPtTle.js";import{f as $t,a as Ht,s as Gt}from"./full-download-fPe7ZvD3.js";import{D as Lt}from"./Divider-RocaqWVQ.js";import{S as _t}from"./SubmitButton-LVJPXjBn.js";import{B as te}from"./ButtonLink-iC8iNd8u.js";import{B as re}from"./Button-P_-r8ZEc.js";import{T as Mt}from"./Thumb-ynmyzkn_.js";import"./stroke-offer-kjKFmafA.js";import"./Banner-usFi2Sq1.js";import"./InfoBox-43m6zAOt.js";import{D as Tt}from"./DialogBox-wS_ac-at.js";import{a as Rt,I as he}from"./ImagePreviewsWrapper-HLVWMszC.js";import{u as St}from"./useNotification-YWT9gs6Y.js";import{f as Wt}from"./full-trash-A0u8oE8D.js";import{C as zt}from"./ConfirmDialog-qfVmqNTZ.js";import{s as Jt}from"./stroke-trash-pW9H4mMs.js";import{f as Kt}from"./full-edit--NrgCQQr.js";import{u as Yt,F as Qt,a as Xt}from"./formik.esm-ymFmkpzG.js";import{I as Zt}from"./ImageEditor-k-Gm6SMe.js";import{g as er,i as le,C as tr}from"./imageConstraints-p8NSaJUa.js";import{B as rr}from"./BaseFileInput-fNcrexu0.js";import{c as sr,a as or}from"./index.esm-Fq04sIRF.js";import{P as ir}from"./PreferredOrientation-J_RrYDSB.js";import"./_commonjsHelpers-4gQjN7DL.js";import"./index-VkxvJQxW.js";import"./index-CQtvWCGL.js";import"./Button.module-fn58QZwY.js";import"./Tooltip-kKBX527K.js";import"./useTooltipProps-5VZ0BXiJ.js";import"./full-next-6FYpialQ.js";import"./BaseRadio-FPTZu85Z.js";import"./FieldError-Tc_LJzie.js";import"./stroke-error-U5wg3Vd5.js";import"./FieldSuccess-GGwnsLIr.js";import"./stroke-valid-qcZpl8lN.js";import"./full-clear-0L2gsxg_.js";import"./index-VFMbf6KQ.js";import"./SelectInput-6KaGHNHr.js";import"./stroke-down-4xbrRvHV.js";import"./BaseCheckbox-ktuHWrzJ.js";import"./typeof-Q9eVcF_1.js";import"./BaseInput-AweWbigz.js";import"./shadow-tips-help-vs0tLBP5.js";import"./shadow-tips-warning-og_aO0Ug.js";import"./stroke-close-KQNU-49n.js";import"./LinkNodes-LX9WZqgT.js";import"./full-link-GGegv9yK.js";import"./tslib.es6-OTA_Hx-d.js";import"./Dialog-YxtDs0b1.js";import"./Slider-yW25muXT.js";let ar=class{constructor(e){this.config=e}},Ce=class extends Error{constructor(e,r,o){super(o),this.name="ApiError",this.url=r.url,this.status=r.status,this.statusText=r.statusText,this.body=r.body,this.request=e}},nr=class extends Error{constructor(e){super(e),this.name="CancelError"}get isCancelled(){return!0}};var _,T,E,I,D,W,P,dt;let lr=(dt=class{constructor(e){f(this,_,void 0);f(this,T,void 0);f(this,E,void 0);f(this,I,void 0);f(this,D,void 0);f(this,W,void 0);f(this,P,void 0);p(this,_,!1),p(this,T,!1),p(this,E,!1),p(this,I,[]),p(this,D,new Promise((r,o)=>{p(this,W,r),p(this,P,o);const s=n=>{u(this,_)||u(this,T)||u(this,E)||(p(this,_,!0),u(this,W)&&u(this,W).call(this,n))},i=n=>{u(this,_)||u(this,T)||u(this,E)||(p(this,T,!0),u(this,P)&&u(this,P).call(this,n))},a=n=>{u(this,_)||u(this,T)||u(this,E)||u(this,I).push(n)};return Object.defineProperty(a,"isResolved",{get:()=>u(this,_)}),Object.defineProperty(a,"isRejected",{get:()=>u(this,T)}),Object.defineProperty(a,"isCancelled",{get:()=>u(this,E)}),e(s,i,a)}))}get[Symbol.toStringTag](){return"Cancellable Promise"}then(e,r){return u(this,D).then(e,r)}catch(e){return u(this,D).catch(e)}finally(e){return u(this,D).finally(e)}cancel(){if(!(u(this,_)||u(this,T)||u(this,E))){if(p(this,E,!0),u(this,I).length)try{for(const e of u(this,I))e()}catch(e){console.warn("Cancellation threw an error",e);return}u(this,I).length=0,u(this,P)&&u(this,P).call(this,new nr("Request aborted"))}}get isCancelled(){return u(this,E)}},_=new WeakMap,T=new WeakMap,E=new WeakMap,I=new WeakMap,D=new WeakMap,W=new WeakMap,P=new WeakMap,dt);const Me=t=>t!=null,se=t=>typeof t=="string",_e=t=>se(t)&&t!=="",We=t=>typeof t=="object"&&typeof t.type=="string"&&typeof t.stream=="function"&&typeof t.arrayBuffer=="function"&&typeof t.constructor=="function"&&typeof t.constructor.name=="string"&&/^(Blob|File)$/.test(t.constructor.name)&&/^(Blob|File)$/.test(t[Symbol.toStringTag]),Ft=t=>t instanceof FormData,ur=t=>{try{return btoa(t)}catch{return Buffer.from(t).toString("base64")}},dr=t=>{const e=[],r=(s,i)=>{e.push(`${encodeURIComponent(s)}=${encodeURIComponent(String(i))}`)},o=(s,i)=>{Me(i)&&(Array.isArray(i)?i.forEach(a=>{o(s,a)}):typeof i=="object"?Object.entries(i).forEach(([a,n])=>{o(`${s}[${a}]`,n)}):r(s,i))};return Object.entries(t).forEach(([s,i])=>{o(s,i)}),e.length>0?`?${e.join("&")}`:""},cr=(t,e)=>{const r=t.ENCODE_PATH||encodeURI,o=e.url.replace("{api-version}",t.VERSION).replace(/{(.*?)}/g,(i,a)=>{var n;return(n=e.path)!=null&&n.hasOwnProperty(a)?r(String(e.path[a])):i}),s=`${t.BASE}${o}`;return e.query?`${s}${dr(e.query)}`:s},pr=t=>{if(t.formData){const e=new FormData,r=(o,s)=>{se(s)||We(s)?e.append(o,s):e.append(o,JSON.stringify(s))};return Object.entries(t.formData).filter(([o,s])=>Me(s)).forEach(([o,s])=>{Array.isArray(s)?s.forEach(i=>r(o,i)):r(o,s)}),e}},ue=async(t,e)=>typeof e=="function"?e(t):e,hr=async(t,e)=>{const r=await ue(e,t.TOKEN),o=await ue(e,t.USERNAME),s=await ue(e,t.PASSWORD),i=await ue(e,t.HEADERS),a=Object.entries({Accept:"application/json",...i,...e.headers}).filter(([n,d])=>Me(d)).reduce((n,[d,c])=>({...n,[d]:String(c)}),{});if(_e(r)&&(a.Authorization=`Bearer ${r}`),_e(o)&&_e(s)){const n=ur(`${o}:${s}`);a.Authorization=`Basic ${n}`}return e.body&&(e.mediaType?a["Content-Type"]=e.mediaType:We(e.body)?a["Content-Type"]=e.body.type||"application/octet-stream":se(e.body)?a["Content-Type"]="text/plain":Ft(e.body)||(a["Content-Type"]="application/json")),new Headers(a)},mr=t=>{var e;if(t.body)return(e=t.mediaType)!=null&&e.includes("/json")?JSON.stringify(t.body):se(t.body)||We(t.body)||Ft(t.body)?t.body:JSON.stringify(t.body)},fr=(t,e,r,o,s,i,a)=>{const n=new AbortController,d={headers:i,body:o??s,method:e.method,signal:n.signal};return t.WITH_CREDENTIALS&&(d.credentials=t.CREDENTIALS),a(()=>n.abort()),fetch(r,d)},yr=(t,e)=>{if(e){const r=t.headers.get(e);if(se(r))return r}},br=async t=>{if(t.status!==204)try{const e=t.headers.get("Content-Type");if(e)return e.toLowerCase().startsWith("application/json")?await t.json():await t.text()}catch(e){console.error(e)}},gr=(t,e)=>{const o={400:"Bad Request",401:"Unauthorized",403:"Forbidden",404:"Not Found",500:"Internal Server Error",502:"Bad Gateway",503:"Service Unavailable",...t.errors}[e.status];if(e.status===503){window.location.assign(Ge);return}if(o)throw new Ce(t,e,o);if(!e.ok)throw new Ce(t,e,"Generic Error")},Er=(t,e)=>new lr(async(r,o,s)=>{try{const i=cr(t,e),a=pr(e),n=mr(e),d=await hr(t,e);if(!s.isCancelled){const c=await fr(t,e,i,n,a,d,s),y=await br(c),g=yr(c,e.responseHeader),b={url:i,ok:c.ok,status:c.status,statusText:c.statusText,body:g??y};gr(e,b),r(b.body)}}catch(i){i instanceof Ce&&i.status===401&&!i.url.includes("/users/current")&&!i.url.includes("/users/signin")&&(window.location.href="/connexion"),o(i)}});let qr=class extends ar{constructor(e){super(e)}request(e){return Er(this.config,e)}},vr=class{constructor(e){this.httpRequest=e}authenticate(){return this.httpRequest.request({method:"GET",url:"/adage-iframe/authenticate",errors:{403:"Forbidden",422:"Unprocessable Entity"}})}getAcademies(){return this.httpRequest.request({method:"GET",url:"/adage-iframe/collective/academies",errors:{403:"Forbidden",422:"Unprocessable Entity"}})}bookCollectiveOffer(e){return this.httpRequest.request({method:"POST",url:"/adage-iframe/collective/bookings",body:e,mediaType:"application/json",errors:{400:"Bad Request",403:"Forbidden",422:"Unprocessable Entity"}})}getCollectiveFavorites(){return this.httpRequest.request({method:"GET",url:"/adage-iframe/collective/favorites",errors:{403:"Forbidden",422:"Unprocessable Entity"}})}getEducationalInstitutionWithBudget(){return this.httpRequest.request({method:"GET",url:"/adage-iframe/collective/institution",errors:{403:"Forbidden",422:"Unprocessable Entity"}})}deleteFavoriteForCollectiveOffer(e){return this.httpRequest.request({method:"DELETE",url:"/adage-iframe/collective/offer/{offer_id}/favorites",path:{offer_id:e},errors:{403:"Forbidden",422:"Unprocessable Entity"}})}getCollectiveOfferTemplate(e){return this.httpRequest.request({method:"GET",url:"/adage-iframe/collective/offers-template/{offer_id}",path:{offer_id:e},errors:{403:"Forbidden",404:"Not Found",422:"Unprocessable Entity"}})}createCollectiveRequest(e,r){return this.httpRequest.request({method:"POST",url:"/adage-iframe/collective/offers-template/{offer_id}/request",path:{offer_id:e},body:r,mediaType:"application/json",errors:{403:"Forbidden",404:"Not Found",422:"Unprocessable Entity"}})}getCollectiveOffersForMyInstitution(){return this.httpRequest.request({method:"GET",url:"/adage-iframe/collective/offers/my_institution",errors:{403:"Forbidden",422:"Unprocessable Entity"}})}getCollectiveOffer(e){return this.httpRequest.request({method:"GET",url:"/adage-iframe/collective/offers/{offer_id}",path:{offer_id:e},errors:{403:"Forbidden",404:"Not Found",422:"Unprocessable Entity"}})}postCollectiveOfferFavorites(e){return this.httpRequest.request({method:"POST",url:"/adage-iframe/collective/offers/{offer_id}/favorites",path:{offer_id:e},errors:{403:"Forbidden",422:"Unprocessable Entity"}})}deleteFavoriteForCollectiveOfferTemplate(e){return this.httpRequest.request({method:"DELETE",url:"/adage-iframe/collective/template/{offer_template_id}/favorites",path:{offer_template_id:e},errors:{403:"Forbidden",422:"Unprocessable Entity"}})}postCollectiveTemplateFavorites(e){return this.httpRequest.request({method:"POST",url:"/adage-iframe/collective/templates/{offer_id}/favorites",path:{offer_id:e},errors:{403:"Forbidden",422:"Unprocessable Entity"}})}listFeatures(){return this.httpRequest.request({method:"GET",url:"/adage-iframe/features",errors:{403:"Forbidden",404:"Not Found",422:"Unprocessable Entity"}})}logBookingModalButtonClick(e){return this.httpRequest.request({method:"POST",url:"/adage-iframe/logs/booking-modal-button",body:e,mediaType:"application/json",errors:{403:"Forbidden",404:"Not Found",422:"Unprocessable Entity"}})}logCatalogView(e){return this.httpRequest.request({method:"POST",url:"/adage-iframe/logs/catalog-view",body:e,mediaType:"application/json",errors:{403:"Forbidden",404:"Not Found",422:"Unprocessable Entity"}})}logConsultPlaylistElement(e){return this.httpRequest.request({method:"POST",url:"/adage-iframe/logs/consult-playlist-element",body:e,mediaType:"application/json",errors:{403:"Forbidden",404:"Not Found",422:"Unprocessable Entity"}})}logContactModalButtonClick(e){return this.httpRequest.request({method:"POST",url:"/adage-iframe/logs/contact-modal-button",body:e,mediaType:"application/json",errors:{403:"Forbidden",404:"Not Found",422:"Unprocessable Entity"}})}logFavOfferButtonClick(e){return this.httpRequest.request({method:"POST",url:"/adage-iframe/logs/fav-offer/",body:e,mediaType:"application/json",errors:{403:"Forbidden",404:"Not Found",422:"Unprocessable Entity"}})}logHasSeenWholePlaylist(e){return this.httpRequest.request({method:"POST",url:"/adage-iframe/logs/has-seen-whole-playlist/",body:e,mediaType:"application/json",errors:{403:"Forbidden",404:"Not Found",422:"Unprocessable Entity"}})}logHeaderLinkClick(e){return this.httpRequest.request({method:"POST",url:"/adage-iframe/logs/header-link-click/",body:e,mediaType:"application/json",errors:{403:"Forbidden",404:"Not Found",422:"Unprocessable Entity"}})}logOfferDetailsButtonClick(e){return this.httpRequest.request({method:"POST",url:"/adage-iframe/logs/offer-detail",body:e,mediaType:"application/json",errors:{403:"Forbidden",404:"Not Found",422:"Unprocessable Entity"}})}logOfferTemplateDetailsButtonClick(e){return this.httpRequest.request({method:"POST",url:"/adage-iframe/logs/offer-template-detail",body:e,mediaType:"application/json",errors:{403:"Forbidden",404:"Not Found",422:"Unprocessable Entity"}})}logHasSeenAllPlaylist(e){return this.httpRequest.request({method:"POST",url:"/adage-iframe/logs/playlist",body:e,mediaType:"application/json",errors:{403:"Forbidden",404:"Not Found",422:"Unprocessable Entity"}})}logRequestFormPopinDismiss(e){return this.httpRequest.request({method:"POST",url:"/adage-iframe/logs/request-popin-dismiss",body:e,mediaType:"application/json",errors:{403:"Forbidden",404:"Not Found",422:"Unprocessable Entity"}})}logOpenSatisfactionSurvey(e){return this.httpRequest.request({method:"POST",url:"/adage-iframe/logs/sat-survey",body:e,mediaType:"application/json",errors:{403:"Forbidden",404:"Not Found",422:"Unprocessable Entity"}})}logSearchButtonClick(e){return this.httpRequest.request({method:"POST",url:"/adage-iframe/logs/search-button",body:e,mediaType:"application/json",errors:{403:"Forbidden",404:"Not Found",422:"Unprocessable Entity"}})}logSearchShowMore(e){return this.httpRequest.request({method:"POST",url:"/adage-iframe/logs/search-show-more",body:e,mediaType:"application/json",errors:{403:"Forbidden",404:"Not Found",422:"Unprocessable Entity"}})}logTrackingAutocompleteSuggestionClick(e){return this.httpRequest.request({method:"POST",url:"/adage-iframe/logs/tracking-autocompletion",body:e,mediaType:"application/json",errors:{403:"Forbidden",404:"Not Found",422:"Unprocessable Entity"}})}logTrackingCtaShare(e){return this.httpRequest.request({method:"POST",url:"/adage-iframe/logs/tracking-cta-share",body:e,mediaType:"application/json",errors:{403:"Forbidden",404:"Not Found",422:"Unprocessable Entity"}})}logTrackingFilter(e){return this.httpRequest.request({method:"POST",url:"/adage-iframe/logs/tracking-filter",body:e,mediaType:"application/json",errors:{403:"Forbidden",404:"Not Found",422:"Unprocessable Entity"}})}logTrackingMap(e){return this.httpRequest.request({method:"POST",url:"/adage-iframe/logs/tracking-map",body:e,mediaType:"application/json",errors:{403:"Forbidden",404:"Not Found",422:"Unprocessable Entity"}})}getEducationalOffersCategories(){return this.httpRequest.request({method:"GET",url:"/adage-iframe/offers/categories",errors:{403:"Forbidden",422:"Unprocessable Entity"}})}getEducationalOffersFormats(){return this.httpRequest.request({method:"GET",url:"/adage-iframe/offers/formats",errors:{403:"Forbidden",422:"Unprocessable Entity"}})}getClassroomPlaylist(){return this.httpRequest.request({method:"GET",url:"/adage-iframe/playlists/classroom",errors:{403:"Forbidden",422:"Unprocessable Entity"}})}getLocalOfferersPlaylist(){return this.httpRequest.request({method:"GET",url:"/adage-iframe/playlists/local-offerers",errors:{403:"Forbidden",422:"Unprocessable Entity"}})}newTemplateOffersPlaylist(){return this.httpRequest.request({method:"GET",url:"/adage-iframe/playlists/new_template_offers",errors:{403:"Forbidden",404:"Not Found",422:"Unprocessable Entity"}})}saveRedactorPreferences(e){return this.httpRequest.request({method:"POST",url:"/adage-iframe/redactor/preferences",body:e,mediaType:"application/json",errors:{403:"Forbidden",422:"Unprocessable Entity"}})}createAdageJwtFakeToken(){return this.httpRequest.request({method:"GET",url:"/adage-iframe/testing/token",errors:{403:"Forbidden",404:"Not Found",422:"Unprocessable Entity"}})}getVenueBySiret(e,r=!1){return this.httpRequest.request({method:"GET",url:"/adage-iframe/venues/siret/{siret}",path:{siret:e},query:{getRelative:r},errors:{403:"Forbidden",422:"Unprocessable Entity"}})}getVenueById(e,r=!1){return this.httpRequest.request({method:"GET",url:"/adage-iframe/venues/{venue_id}",path:{venue_id:e},query:{getRelative:r},errors:{403:"Forbidden",422:"Unprocessable Entity"}})}};class _r{constructor(e,r=qr){this.request=new r({BASE:(e==null?void 0:e.BASE)??"http://localhost:5001",VERSION:(e==null?void 0:e.VERSION)??"0.1.0",WITH_CREDENTIALS:(e==null?void 0:e.WITH_CREDENTIALS)??!1,CREDENTIALS:(e==null?void 0:e.CREDENTIALS)??"include",TOKEN:e==null?void 0:e.TOKEN,USERNAME:e==null?void 0:e.USERNAME,PASSWORD:e==null?void 0:e.PASSWORD,HEADERS:e==null?void 0:e.HEADERS,ENCODE_PATH:e==null?void 0:e.ENCODE_PATH}),this.default=new vr(this.request)}}let Tr=class{constructor(e){this.config=e}},Oe=class extends Error{constructor(e,r,o){super(o),this.name="ApiError",this.url=r.url,this.status=r.status,this.statusText=r.statusText,this.body=r.body,this.request=e}},Rr=class extends Error{constructor(e){super(e),this.name="CancelError"}get isCancelled(){return!0}};var R,S,q,j,V,z,A,ct;let Sr=(ct=class{constructor(e){f(this,R,void 0);f(this,S,void 0);f(this,q,void 0);f(this,j,void 0);f(this,V,void 0);f(this,z,void 0);f(this,A,void 0);p(this,R,!1),p(this,S,!1),p(this,q,!1),p(this,j,[]),p(this,V,new Promise((r,o)=>{p(this,z,r),p(this,A,o);const s=n=>{u(this,R)||u(this,S)||u(this,q)||(p(this,R,!0),u(this,z)&&u(this,z).call(this,n))},i=n=>{u(this,R)||u(this,S)||u(this,q)||(p(this,S,!0),u(this,A)&&u(this,A).call(this,n))},a=n=>{u(this,R)||u(this,S)||u(this,q)||u(this,j).push(n)};return Object.defineProperty(a,"isResolved",{get:()=>u(this,R)}),Object.defineProperty(a,"isRejected",{get:()=>u(this,S)}),Object.defineProperty(a,"isCancelled",{get:()=>u(this,q)}),e(s,i,a)}))}get[Symbol.toStringTag](){return"Cancellable Promise"}then(e,r){return u(this,V).then(e,r)}catch(e){return u(this,V).catch(e)}finally(e){return u(this,V).finally(e)}cancel(){if(!(u(this,R)||u(this,S)||u(this,q))){if(p(this,q,!0),u(this,j).length)try{for(const e of u(this,j))e()}catch(e){console.warn("Cancellation threw an error",e);return}u(this,j).length=0,u(this,A)&&u(this,A).call(this,new Rr("Request aborted"))}}get isCancelled(){return u(this,q)}},R=new WeakMap,S=new WeakMap,q=new WeakMap,j=new WeakMap,V=new WeakMap,z=new WeakMap,A=new WeakMap,ct);const ze=t=>t!=null,oe=t=>typeof t=="string",Te=t=>oe(t)&&t!=="",Je=t=>typeof t=="object"&&typeof t.type=="string"&&typeof t.stream=="function"&&typeof t.arrayBuffer=="function"&&typeof t.constructor=="function"&&typeof t.constructor.name=="string"&&/^(Blob|File)$/.test(t.constructor.name)&&/^(Blob|File)$/.test(t[Symbol.toStringTag]),Ut=t=>t instanceof FormData,Fr=t=>{try{return btoa(t)}catch{return Buffer.from(t).toString("base64")}},Ur=t=>{const e=[],r=(s,i)=>{e.push(`${encodeURIComponent(s)}=${encodeURIComponent(String(i))}`)},o=(s,i)=>{ze(i)&&(Array.isArray(i)?i.forEach(a=>{o(s,a)}):typeof i=="object"?Object.entries(i).forEach(([a,n])=>{o(`${s}[${a}]`,n)}):r(s,i))};return Object.entries(t).forEach(([s,i])=>{o(s,i)}),e.length>0?`?${e.join("&")}`:""},Cr=(t,e)=>{const r=t.ENCODE_PATH||encodeURI,o=e.url.replace("{api-version}",t.VERSION).replace(/{(.*?)}/g,(i,a)=>{var n;return(n=e.path)!=null&&n.hasOwnProperty(a)?r(String(e.path[a])):i}),s=`${t.BASE}${o}`;return e.query?`${s}${Ur(e.query)}`:s},Or=t=>{if(t.formData){const e=new FormData,r=(o,s)=>{oe(s)||Je(s)?e.append(o,s):e.append(o,JSON.stringify(s))};return Object.entries(t.formData).filter(([o,s])=>ze(s)).forEach(([o,s])=>{Array.isArray(s)?s.forEach(i=>r(o,i)):r(o,s)}),e}},de=async(t,e)=>typeof e=="function"?e(t):e,wr=async(t,e)=>{const r=await de(e,t.TOKEN),o=await de(e,t.USERNAME),s=await de(e,t.PASSWORD),i=await de(e,t.HEADERS),a=Object.entries({Accept:"application/json",...i,...e.headers}).filter(([n,d])=>ze(d)).reduce((n,[d,c])=>({...n,[d]:String(c)}),{});if(Te(r)&&(a.Authorization=`Bearer ${r}`),Te(o)&&Te(s)){const n=Fr(`${o}:${s}`);a.Authorization=`Basic ${n}`}return e.body&&(e.mediaType?a["Content-Type"]=e.mediaType:Je(e.body)?a["Content-Type"]=e.body.type||"application/octet-stream":oe(e.body)?a["Content-Type"]="text/plain":Ut(e.body)||(a["Content-Type"]="application/json")),new Headers(a)},Ir=t=>{var e;if(t.body)return(e=t.mediaType)!=null&&e.includes("/json")?JSON.stringify(t.body):oe(t.body)||Je(t.body)||Ut(t.body)?t.body:JSON.stringify(t.body)},Pr=(t,e,r,o,s,i,a)=>{const n=new AbortController,d={headers:i,body:o??s,method:e.method,signal:n.signal};return t.WITH_CREDENTIALS&&(d.credentials=t.CREDENTIALS),a(()=>n.abort()),fetch(r,d)},jr=(t,e)=>{if(e){const r=t.headers.get(e);if(oe(r))return r}},Ar=async t=>{if(t.status!==204)try{const e=t.headers.get("Content-Type");if(e)return e.toLowerCase().startsWith("application/json")?await t.json():await t.text()}catch(e){console.error(e)}},Nr=(t,e)=>{const o={400:"Bad Request",401:"Unauthorized",403:"Forbidden",404:"Not Found",500:"Internal Server Error",502:"Bad Gateway",503:"Service Unavailable",...t.errors}[e.status];if(e.status===503){window.location.assign(Ge);return}if(o)throw new Oe(t,e,o);if(!e.ok)throw new Oe(t,e,"Generic Error")},xr=(t,e)=>new Sr(async(r,o,s)=>{try{const i=Cr(t,e),a=Or(e),n=Ir(e),d=await wr(t,e);if(!s.isCancelled){const c=await Pr(t,e,i,n,a,d,s),y=await Ar(c),g=jr(c,e.responseHeader),b={url:i,ok:c.ok,status:c.status,statusText:c.statusText,body:g??y};Nr(e,b),r(b.body)}}catch(i){i instanceof Oe&&i.status===401&&!i.url.includes("/users/current")&&!i.url.includes("/users/signin")&&(window.location.href="/connexion"),o(i)}});let kr=class extends Tr{constructor(e){super(e)}request(e){return xr(this.config,e)}};class Br{constructor(e){this.httpRequest=e}getBookingsPro(e=1,r,o,s,i,a,n,d,c){return this.httpRequest.request({method:"GET",url:"/bookings/pro",query:{page:e,venueId:r,offerId:o,eventDate:s,bookingStatusFilter:i,bookingPeriodBeginningDate:a,bookingPeriodEndingDate:n,offerType:d,exportType:c},errors:{403:"Forbidden",422:"Unprocessable Entity"}})}getUserHasBookings(){return this.httpRequest.request({method:"GET",url:"/bookings/pro/userHasBookings",errors:{403:"Forbidden",422:"Unprocessable Entity"}})}getCollectiveBookingsPro(e=1,r,o,s,i,a){return this.httpRequest.request({method:"GET",url:"/collective/bookings/pro",query:{page:e,venueId:r,eventDate:o,bookingStatusFilter:s,bookingPeriodBeginningDate:i,bookingPeriodEndingDate:a},errors:{403:"Forbidden",422:"Unprocessable Entity"}})}getUserHasCollectiveBookings(){return this.httpRequest.request({method:"GET",url:"/collective/bookings/pro/userHasBookings",errors:{403:"Forbidden",422:"Unprocessable Entity"}})}getCollectiveBookingById(e){return this.httpRequest.request({method:"GET",url:"/collective/bookings/{booking_id}",path:{booking_id:e},errors:{403:"Forbidden",422:"Unprocessable Entity"}})}listEducationalDomains(){return this.httpRequest.request({method:"GET",url:"/collective/educational-domains",errors:{403:"Forbidden",422:"Unprocessable Entity"}})}getCollectiveOffers(e,r,o,s,i,a,n,d,c,y){return this.httpRequest.request({method:"GET",url:"/collective/offers",query:{nameOrIsbn:e,offererId:r,status:o,venueId:s,categoryId:i,creationMode:a,periodBeginningDate:n,periodEndingDate:d,collectiveOfferType:c,format:y},errors:{403:"Forbidden",422:"Unprocessable Entity"}})}createCollectiveOffer(e){return this.httpRequest.request({method:"POST",url:"/collective/offers",body:e,mediaType:"application/json",errors:{403:"Forbidden",422:"Unprocessable Entity"}})}createCollectiveOfferTemplate(e){return this.httpRequest.request({method:"POST",url:"/collective/offers-template",body:e,mediaType:"application/json",errors:{403:"Forbidden",422:"Unprocessable Entity"}})}patchCollectiveOffersTemplateActiveStatus(e){return this.httpRequest.request({method:"PATCH",url:"/collective/offers-template/active-status",body:e,mediaType:"application/json",errors:{403:"Forbidden",422:"Unprocessable Entity"}})}getCollectiveOfferRequest(e){return this.httpRequest.request({method:"GET",url:"/collective/offers-template/request/{request_id}",path:{request_id:e},errors:{403:"Forbidden",422:"Unprocessable Entity"}})}getCollectiveOfferTemplate(e){return this.httpRequest.request({method:"GET",url:"/collective/offers-template/{offer_id}",path:{offer_id:e},errors:{403:"Forbidden",422:"Unprocessable Entity"}})}editCollectiveOfferTemplate(e,r){return this.httpRequest.request({method:"PATCH",url:"/collective/offers-template/{offer_id}",path:{offer_id:e},body:r,mediaType:"application/json",errors:{403:"Forbidden",422:"Unprocessable Entity"}})}createCollectiveOfferTemplateFromCollectiveOffer(e,r){return this.httpRequest.request({method:"POST",url:"/collective/offers-template/{offer_id}/",path:{offer_id:e},body:r,mediaType:"application/json",errors:{400:"Bad Request",403:"Forbidden",404:"Not Found",422:"Unprocessable Entity"}})}deleteOfferTemplateImage(e){return this.httpRequest.request({method:"DELETE",url:"/collective/offers-template/{offer_id}/image",path:{offer_id:e},errors:{403:"Forbidden",422:"Unprocessable Entity"}})}attachOfferTemplateImage(e,r){return this.httpRequest.request({method:"POST",url:"/collective/offers-template/{offer_id}/image",path:{offer_id:e},formData:r,mediaType:"multipart/form-data",errors:{403:"Forbidden",422:"Unprocessable Entity"}})}patchCollectiveOfferTemplatePublication(e){return this.httpRequest.request({method:"PATCH",url:"/collective/offers-template/{offer_id}/publish",path:{offer_id:e},errors:{403:"Forbidden",404:"Not Found",422:"Unprocessable Entity"}})}patchCollectiveOffersActiveStatus(e){return this.httpRequest.request({method:"PATCH",url:"/collective/offers/active-status",body:e,mediaType:"application/json",errors:{403:"Forbidden",422:"Unprocessable Entity"}})}patchAllCollectiveOffersActiveStatus(e){return this.httpRequest.request({method:"PATCH",url:"/collective/offers/all-active-status",body:e,mediaType:"application/json",errors:{403:"Forbidden",422:"Unprocessable Entity"}})}getAutocompleteEducationalRedactorsForUai(e,r){return this.httpRequest.request({method:"GET",url:"/collective/offers/redactors",query:{uai:e,candidate:r},errors:{403:"Forbidden",422:"Unprocessable Entity"}})}getCollectiveOffer(e){return this.httpRequest.request({method:"GET",url:"/collective/offers/{offer_id}",path:{offer_id:e},errors:{403:"Forbidden",422:"Unprocessable Entity"}})}editCollectiveOffer(e,r){return this.httpRequest.request({method:"PATCH",url:"/collective/offers/{offer_id}",path:{offer_id:e},body:r,mediaType:"application/json",errors:{403:"Forbidden",422:"Unprocessable Entity"}})}cancelCollectiveOfferBooking(e){return this.httpRequest.request({method:"PATCH",url:"/collective/offers/{offer_id}/cancel_booking",path:{offer_id:e},errors:{400:"Bad Request",403:"Forbidden",404:"Not Found",422:"Unprocessable Entity"}})}duplicateCollectiveOffer(e){return this.httpRequest.request({method:"POST",url:"/collective/offers/{offer_id}/duplicate",path:{offer_id:e},errors:{403:"Forbidden",422:"Unprocessable Entity"}})}patchCollectiveOffersEducationalInstitution(e,r){return this.httpRequest.request({method:"PATCH",url:"/collective/offers/{offer_id}/educational_institution",path:{offer_id:e},body:r,mediaType:"application/json",errors:{403:"Forbidden",404:"Not Found",422:"Unprocessable Entity"}})}deleteOfferImage(e){return this.httpRequest.request({method:"DELETE",url:"/collective/offers/{offer_id}/image",path:{offer_id:e},errors:{403:"Forbidden",422:"Unprocessable Entity"}})}attachOfferImage(e,r){return this.httpRequest.request({method:"POST",url:"/collective/offers/{offer_id}/image",path:{offer_id:e},formData:r,mediaType:"multipart/form-data",errors:{403:"Forbidden",422:"Unprocessable Entity"}})}patchCollectiveOfferPublication(e){return this.httpRequest.request({method:"PATCH",url:"/collective/offers/{offer_id}/publish",path:{offer_id:e},errors:{403:"Forbidden",404:"Not Found",422:"Unprocessable Entity"}})}createCollectiveStock(e){return this.httpRequest.request({method:"POST",url:"/collective/stocks",body:e,mediaType:"application/json",errors:{403:"Forbidden",422:"Unprocessable Entity"}})}editCollectiveStock(e,r){return this.httpRequest.request({method:"PATCH",url:"/collective/stocks/{collective_stock_id}",path:{collective_stock_id:e},body:r,mediaType:"application/json",errors:{400:"Bad Request",401:"Unauthorized",403:"Forbidden",404:"Not Found",422:"Unprocessable Entity"}})}getEducationalPartner(e){return this.httpRequest.request({method:"GET",url:"/cultural-partner/{siret}",path:{siret:e},errors:{401:"Unauthorized",403:"Forbidden",404:"Not Found",422:"Unprocessable Entity"}})}getEducationalPartners(){return this.httpRequest.request({method:"GET",url:"/cultural-partners",errors:{401:"Unauthorized",403:"Forbidden",422:"Unprocessable Entity"}})}getEducationalInstitutions(e=1e3,r=1){return this.httpRequest.request({method:"GET",url:"/educational_institutions",query:{perPageLimit:e,page:r},errors:{401:"Unauthorized",403:"Forbidden",422:"Unprocessable Entity"}})}listFeatures(){return this.httpRequest.request({method:"GET",url:"/features",errors:{403:"Forbidden",422:"Unprocessable Entity"}})}getBankAccounts(){return this.httpRequest.request({method:"GET",url:"/finance/bank-accounts",errors:{403:"Forbidden",422:"Unprocessable Entity"}})}getInvoices(e,r,o){return this.httpRequest.request({method:"GET",url:"/finance/invoices",query:{periodBeginningDate:e,periodEndingDate:r,reimbursementPointId:o},errors:{403:"Forbidden",422:"Unprocessable Entity"}})}getReimbursementPoints(){return this.httpRequest.request({method:"GET",url:"/finance/reimbursement-points",errors:{403:"Forbidden",422:"Unprocessable Entity"}})}getNationalPrograms(){return this.httpRequest.request({method:"GET",url:"/national-programs",errors:{403:"Forbidden",422:"Unprocessable Entity"}})}createOfferer(e){return this.httpRequest.request({method:"POST",url:"/offerers",body:e,mediaType:"application/json",errors:{403:"Forbidden",422:"Unprocessable Entity"}})}deleteApiKey(e){return this.httpRequest.request({method:"DELETE",url:"/offerers/api_keys/{api_key_prefix}",path:{api_key_prefix:e},errors:{403:"Forbidden",422:"Unprocessable Entity"}})}listEducationalOfferers(e){return this.httpRequest.request({method:"GET",url:"/offerers/educational",query:{offerer_id:e},errors:{403:"Forbidden",422:"Unprocessable Entity"}})}listOfferersNames(e,r,o){return this.httpRequest.request({method:"GET",url:"/offerers/names",query:{validated:e,validated_for_user:r,offerer_id:o},errors:{403:"Forbidden",422:"Unprocessable Entity"}})}saveNewOnboardingData(e){return this.httpRequest.request({method:"POST",url:"/offerers/new",body:e,mediaType:"application/json",errors:{403:"Forbidden",422:"Unprocessable Entity"}})}getOfferer(e){return this.httpRequest.request({method:"GET",url:"/offerers/{offerer_id}",path:{offerer_id:e},errors:{403:"Forbidden",422:"Unprocessable Entity"}})}generateApiKeyRoute(e){return this.httpRequest.request({method:"POST",url:"/offerers/{offerer_id}/api_keys",path:{offerer_id:e},errors:{403:"Forbidden",422:"Unprocessable Entity"}})}getOffererBankAccountsAndAttachedVenues(e){return this.httpRequest.request({method:"GET",url:"/offerers/{offerer_id}/bank-accounts",path:{offerer_id:e},errors:{403:"Forbidden",422:"Unprocessable Entity"}})}linkVenueToBankAccount(e,r,o){return this.httpRequest.request({method:"PATCH",url:"/offerers/{offerer_id}/bank-accounts/{bank_account_id}",path:{offerer_id:e,bank_account_id:r},body:o,mediaType:"application/json",errors:{403:"Forbidden",422:"Unprocessable Entity"}})}getOffererStatsDashboardUrl(e){return this.httpRequest.request({method:"GET",url:"/offerers/{offerer_id}/dashboard",path:{offerer_id:e},errors:{403:"Forbidden",422:"Unprocessable Entity"}})}canOffererCreateEducationalOffer(e){return this.httpRequest.request({method:"GET",url:"/offerers/{offerer_id}/eac-eligibility",path:{offerer_id:e},errors:{403:"Forbidden",422:"Unprocessable Entity"}})}inviteMember(e,r){return this.httpRequest.request({method:"POST",url:"/offerers/{offerer_id}/invite",path:{offerer_id:e},body:r,mediaType:"application/json",errors:{403:"Forbidden",422:"Unprocessable Entity"}})}getOffererMembers(e){return this.httpRequest.request({method:"GET",url:"/offerers/{offerer_id}/members",path:{offerer_id:e},errors:{403:"Forbidden",422:"Unprocessable Entity"}})}getAvailableReimbursementPoints(e){return this.httpRequest.request({method:"GET",url:"/offerers/{offerer_id}/reimbursement-points",path:{offerer_id:e},errors:{403:"Forbidden",422:"Unprocessable Entity"}})}getOffererStats(e){return this.httpRequest.request({method:"GET",url:"/offerers/{offerer_id}/stats",path:{offerer_id:e},errors:{403:"Forbidden",422:"Unprocessable Entity"}})}getOffererV2Stats(e){return this.httpRequest.request({method:"GET",url:"/offerers/{offerer_id}/v2/stats",path:{offerer_id:e},errors:{403:"Forbidden",422:"Unprocessable Entity"}})}listOffers(e,r,o,s,i,a,n,d,c){return this.httpRequest.request({method:"GET",url:"/offers",query:{nameOrIsbn:e,offererId:r,status:o,venueId:s,categoryId:i,creationMode:a,periodBeginningDate:n,periodEndingDate:d,collectiveOfferType:c},errors:{403:"Forbidden",422:"Unprocessable Entity"}})}postOffer(e){return this.httpRequest.request({method:"POST",url:"/offers",body:e,mediaType:"application/json",errors:{403:"Forbidden",422:"Unprocessable Entity"}})}patchOffersActiveStatus(e){return this.httpRequest.request({method:"PATCH",url:"/offers/active-status",body:e,mediaType:"application/json",errors:{403:"Forbidden",422:"Unprocessable Entity"}})}patchAllOffersActiveStatus(e){return this.httpRequest.request({method:"PATCH",url:"/offers/all-active-status",body:e,mediaType:"application/json",errors:{403:"Forbidden",422:"Unprocessable Entity"}})}getCategories(){return this.httpRequest.request({method:"GET",url:"/offers/categories",errors:{403:"Forbidden",422:"Unprocessable Entity"}})}deleteDraftOffers(e){return this.httpRequest.request({method:"POST",url:"/offers/delete-draft",body:e,mediaType:"application/json",errors:{403:"Forbidden",422:"Unprocessable Entity"}})}getAllMusicTypes(){return this.httpRequest.request({method:"GET",url:"/offers/music-types/all",errors:{403:"Forbidden",422:"Unprocessable Entity"}})}getEventMusicTypes(){return this.httpRequest.request({method:"GET",url:"/offers/music-types/event",errors:{403:"Forbidden",422:"Unprocessable Entity"}})}patchPublishOffer(e){return this.httpRequest.request({method:"PATCH",url:"/offers/publish",body:e,mediaType:"application/json",errors:{403:"Forbidden",404:"Not Found",422:"Unprocessable Entity"}})}createThumbnail(e){return this.httpRequest.request({method:"POST",url:"/offers/thumbnails/",formData:e,mediaType:"multipart/form-data",errors:{403:"Forbidden",422:"Unprocessable Entity"}})}deleteThumbnail(e){return this.httpRequest.request({method:"DELETE",url:"/offers/thumbnails/{offer_id}",path:{offer_id:e},errors:{403:"Forbidden",422:"Unprocessable Entity"}})}getOffer(e){return this.httpRequest.request({method:"GET",url:"/offers/{offer_id}",path:{offer_id:e},errors:{403:"Forbidden",422:"Unprocessable Entity"}})}patchOffer(e,r){return this.httpRequest.request({method:"PATCH",url:"/offers/{offer_id}",path:{offer_id:e},body:r,mediaType:"application/json",errors:{403:"Forbidden",422:"Unprocessable Entity"}})}postPriceCategories(e,r){return this.httpRequest.request({method:"POST",url:"/offers/{offer_id}/price_categories",path:{offer_id:e},body:r,mediaType:"application/json",errors:{403:"Forbidden",422:"Unprocessable Entity"}})}deletePriceCategory(e,r){return this.httpRequest.request({method:"DELETE",url:"/offers/{offer_id}/price_categories/{price_category_id}",path:{offer_id:e,price_category_id:r},errors:{403:"Forbidden",422:"Unprocessable Entity"}})}getStocksStats(e){return this.httpRequest.request({method:"GET",url:"/offers/{offer_id}/stocks-stats",path:{offer_id:e},errors:{403:"Forbidden",422:"Unprocessable Entity"}})}getStocks(e,r,o,s,i,a=!1,n=1,d=20){return this.httpRequest.request({method:"GET",url:"/offers/{offer_id}/stocks/",path:{offer_id:e},query:{date:r,time:o,price_category_id:s,order_by:i,order_by_desc:a,page:n,stocks_limit_per_page:d},errors:{403:"Forbidden",422:"Unprocessable Entity"}})}deleteAllFilteredStocks(e,r){return this.httpRequest.request({method:"POST",url:"/offers/{offer_id}/stocks/all-delete",path:{offer_id:e},body:r,mediaType:"application/json",errors:{403:"Forbidden",422:"Unprocessable Entity"}})}deleteStocks(e,r){return this.httpRequest.request({method:"POST",url:"/offers/{offer_id}/stocks/delete",path:{offer_id:e},body:r,mediaType:"application/json",errors:{403:"Forbidden",422:"Unprocessable Entity"}})}getReimbursementsCsv(e,r,o){return this.httpRequest.request({method:"GET",url:"/reimbursements/csv",query:{venueId:e,reimbursementPeriodBeginningDate:r,reimbursementPeriodEndingDate:o},errors:{403:"Forbidden",422:"Unprocessable Entity"}})}getSirenInfo(e){return this.httpRequest.request({method:"GET",url:"/sirene/siren/{siren}",path:{siren:e},errors:{403:"Forbidden",422:"Unprocessable Entity"}})}getSiretInfo(e){return this.httpRequest.request({method:"GET",url:"/sirene/siret/{siret}",path:{siret:e},errors:{403:"Forbidden",422:"Unprocessable Entity"}})}upsertStocks(e){return this.httpRequest.request({method:"POST",url:"/stocks/bulk",body:e,mediaType:"application/json",errors:{403:"Forbidden",422:"Unprocessable Entity"}})}deleteStock(e){return this.httpRequest.request({method:"DELETE",url:"/stocks/{stock_id}",path:{stock_id:e},errors:{403:"Forbidden",422:"Unprocessable Entity"}})}connectAs(e){return this.httpRequest.request({method:"GET",url:"/users/connect-as/{token}",path:{token:e},errors:{403:"Forbidden",422:"Unprocessable Entity"}})}cookiesConsent(e){return this.httpRequest.request({method:"POST",url:"/users/cookies",body:e,mediaType:"application/json",errors:{400:"Bad Request",403:"Forbidden",422:"Unprocessable Entity"}})}getProfile(){return this.httpRequest.request({method:"GET",url:"/users/current",errors:{403:"Forbidden",422:"Unprocessable Entity"}})}postUserEmail(e){return this.httpRequest.request({method:"POST",url:"/users/email",body:e,mediaType:"application/json",errors:{403:"Forbidden",422:"Unprocessable Entity"}})}getUserEmailPendingValidation(){return this.httpRequest.request({method:"GET",url:"/users/email_pending_validation",errors:{403:"Forbidden",422:"Unprocessable Entity"}})}patchUserIdentity(e){return this.httpRequest.request({method:"PATCH",url:"/users/identity",body:e,mediaType:"application/json",errors:{403:"Forbidden",422:"Unprocessable Entity"}})}postNewPassword(e){return this.httpRequest.request({method:"POST",url:"/users/new-password",body:e,mediaType:"application/json",errors:{400:"Bad Request",403:"Forbidden",422:"Unprocessable Entity"}})}postChangePassword(e){return this.httpRequest.request({method:"POST",url:"/users/password",body:e,mediaType:"application/json",errors:{400:"Bad Request",403:"Forbidden",422:"Unprocessable Entity"}})}patchUserPhone(e){return this.httpRequest.request({method:"PATCH",url:"/users/phone",body:e,mediaType:"application/json",errors:{403:"Forbidden",422:"Unprocessable Entity"}})}postProFlags(e){return this.httpRequest.request({method:"POST",url:"/users/pro_flags",body:e,mediaType:"application/json",errors:{400:"Bad Request",403:"Forbidden",422:"Unprocessable Entity"}})}resetPassword(e){return this.httpRequest.request({method:"POST",url:"/users/reset-password",body:e,mediaType:"application/json",errors:{403:"Forbidden",422:"Unprocessable Entity"}})}patchProUserRgsSeen(){return this.httpRequest.request({method:"PATCH",url:"/users/rgs-seen",errors:{403:"Forbidden",422:"Unprocessable Entity"}})}signin(e){return this.httpRequest.request({method:"POST",url:"/users/signin",body:e,mediaType:"application/json",errors:{403:"Forbidden",422:"Unprocessable Entity"}})}signout(){return this.httpRequest.request({method:"GET",url:"/users/signout",errors:{403:"Forbidden",422:"Unprocessable Entity"}})}checkActivationTokenExists(e){return this.httpRequest.request({method:"GET",url:"/users/token/{token}",path:{token:e},errors:{403:"Forbidden",404:"Not Found",422:"Unprocessable Entity"}})}patchUserTutoSeen(){return this.httpRequest.request({method:"PATCH",url:"/users/tuto-seen",errors:{403:"Forbidden",422:"Unprocessable Entity"}})}patchValidateEmail(e){return this.httpRequest.request({method:"PATCH",url:"/users/validate_email",body:e,mediaType:"application/json",errors:{403:"Forbidden",422:"Unprocessable Entity"}})}getInvoicesV2(e,r,o,s){return this.httpRequest.request({method:"GET",url:"/v2/finance/invoices",query:{periodBeginningDate:e,periodEndingDate:r,bankAccountId:o,offererId:s},errors:{403:"Forbidden",422:"Unprocessable Entity"}})}signupProV2(e){return this.httpRequest.request({method:"POST",url:"/v2/users/signup/pro",body:e,mediaType:"application/json",errors:{403:"Forbidden",422:"Unprocessable Entity"}})}validateUser(e){return this.httpRequest.request({method:"PATCH",url:"/validate/user/{token}",path:{token:e},errors:{403:"Forbidden",422:"Unprocessable Entity"}})}fetchVenueLabels(){return this.httpRequest.request({method:"GET",url:"/venue-labels",errors:{403:"Forbidden",422:"Unprocessable Entity"}})}getVenueTypes(){return this.httpRequest.request({method:"GET",url:"/venue-types",errors:{403:"Forbidden",422:"Unprocessable Entity"}})}listVenueProviders(e){return this.httpRequest.request({method:"GET",url:"/venueProviders",query:{venueId:e},errors:{403:"Forbidden",422:"Unprocessable Entity"}})}createVenueProvider(e){return this.httpRequest.request({method:"POST",url:"/venueProviders",body:e,mediaType:"application/json",errors:{403:"Forbidden",422:"Unprocessable Entity"}})}updateVenueProvider(e){return this.httpRequest.request({method:"PUT",url:"/venueProviders",body:e,mediaType:"application/json",errors:{403:"Forbidden",422:"Unprocessable Entity"}})}deleteVenueProvider(e){return this.httpRequest.request({method:"DELETE",url:"/venueProviders/{venue_provider_id}",path:{venue_provider_id:e},errors:{403:"Forbidden",422:"Unprocessable Entity"}})}getVenues(e,r,o){return this.httpRequest.request({method:"GET",url:"/venues",query:{validated:e,activeOfferersOnly:r,offererId:o},errors:{403:"Forbidden",422:"Unprocessable Entity"}})}postCreateVenue(e){return this.httpRequest.request({method:"POST",url:"/venues",body:e,mediaType:"application/json",errors:{403:"Forbidden",422:"Unprocessable Entity"}})}getVenuesEducationalStatuses(){return this.httpRequest.request({method:"GET",url:"/venues-educational-statuses",errors:{403:"Forbidden",422:"Unprocessable Entity"}})}getVenuesOfOffererFromSiret(e){return this.httpRequest.request({method:"GET",url:"/venues/siret/{siret}",path:{siret:e},errors:{403:"Forbidden",422:"Unprocessable Entity"}})}getVenue(e){return this.httpRequest.request({method:"GET",url:"/venues/{venue_id}",path:{venue_id:e},errors:{403:"Forbidden",422:"Unprocessable Entity"}})}editVenue(e,r){return this.httpRequest.request({method:"PATCH",url:"/venues/{venue_id}",path:{venue_id:e},body:r,mediaType:"application/json",errors:{403:"Forbidden",422:"Unprocessable Entity"}})}deleteVenueBanner(e){return this.httpRequest.request({method:"DELETE",url:"/venues/{venue_id}/banner",path:{venue_id:e},errors:{403:"Forbidden",422:"Unprocessable Entity"}})}getVenueCollectiveData(e){return this.httpRequest.request({method:"GET",url:"/venues/{venue_id}/collective-data",path:{venue_id:e},errors:{403:"Forbidden",422:"Unprocessable Entity"}})}editVenueCollectiveData(e,r){return this.httpRequest.request({method:"PATCH",url:"/venues/{venue_id}/collective-data",path:{venue_id:e},body:r,mediaType:"application/json",errors:{403:"Forbidden",422:"Unprocessable Entity"}})}getVenueStatsDashboardUrl(e){return this.httpRequest.request({method:"GET",url:"/venues/{venue_id}/dashboard",path:{venue_id:e},errors:{403:"Forbidden",422:"Unprocessable Entity"}})}linkVenueToPricingPoint(e,r){return this.httpRequest.request({method:"POST",url:"/venues/{venue_id}/pricing-point",path:{venue_id:e},body:r,mediaType:"application/json",errors:{403:"Forbidden",422:"Unprocessable Entity"}})}getVenueStats(e){return this.httpRequest.request({method:"GET",url:"/venues/{venue_id}/stats",path:{venue_id:e},errors:{403:"Forbidden",422:"Unprocessable Entity"}})}}class Dr{constructor(e,r=kr){this.request=new r({BASE:(e==null?void 0:e.BASE)??"http://localhost:5001",VERSION:(e==null?void 0:e.VERSION)??"1",WITH_CREDENTIALS:(e==null?void 0:e.WITH_CREDENTIALS)??!1,CREDENTIALS:(e==null?void 0:e.CREDENTIALS)??"include",TOKEN:e==null?void 0:e.TOKEN,USERNAME:e==null?void 0:e.USERNAME,PASSWORD:e==null?void 0:e.PASSWORD,HEADERS:e==null?void 0:e.HEADERS,ENCODE_PATH:e==null?void 0:e.ENCODE_PATH}),this.default=new Br(this.request)}}class Vr{constructor(e){this.config=e}}class we extends Error{constructor(e,r,o){super(o),this.name="ApiError",this.url=r.url,this.status=r.status,this.statusText=r.statusText,this.body=r.body,this.request=e}}class $r extends Error{constructor(e){super(e),this.name="CancelError"}get isCancelled(){return!0}}var F,U,v,N,$,J,x;class Hr{constructor(e){f(this,F,void 0);f(this,U,void 0);f(this,v,void 0);f(this,N,void 0);f(this,$,void 0);f(this,J,void 0);f(this,x,void 0);p(this,F,!1),p(this,U,!1),p(this,v,!1),p(this,N,[]),p(this,$,new Promise((r,o)=>{p(this,J,r),p(this,x,o);const s=n=>{u(this,F)||u(this,U)||u(this,v)||(p(this,F,!0),u(this,J)&&u(this,J).call(this,n))},i=n=>{u(this,F)||u(this,U)||u(this,v)||(p(this,U,!0),u(this,x)&&u(this,x).call(this,n))},a=n=>{u(this,F)||u(this,U)||u(this,v)||u(this,N).push(n)};return Object.defineProperty(a,"isResolved",{get:()=>u(this,F)}),Object.defineProperty(a,"isRejected",{get:()=>u(this,U)}),Object.defineProperty(a,"isCancelled",{get:()=>u(this,v)}),e(s,i,a)}))}get[Symbol.toStringTag](){return"Cancellable Promise"}then(e,r){return u(this,$).then(e,r)}catch(e){return u(this,$).catch(e)}finally(e){return u(this,$).finally(e)}cancel(){if(!(u(this,F)||u(this,U)||u(this,v))){if(p(this,v,!0),u(this,N).length)try{for(const e of u(this,N))e()}catch(e){console.warn("Cancellation threw an error",e);return}u(this,N).length=0,u(this,x)&&u(this,x).call(this,new $r("Request aborted"))}}get isCancelled(){return u(this,v)}}F=new WeakMap,U=new WeakMap,v=new WeakMap,N=new WeakMap,$=new WeakMap,J=new WeakMap,x=new WeakMap;const Ke=t=>t!=null,ie=t=>typeof t=="string",Re=t=>ie(t)&&t!=="",Ye=t=>typeof t=="object"&&typeof t.type=="string"&&typeof t.stream=="function"&&typeof t.arrayBuffer=="function"&&typeof t.constructor=="function"&&typeof t.constructor.name=="string"&&/^(Blob|File)$/.test(t.constructor.name)&&/^(Blob|File)$/.test(t[Symbol.toStringTag]),Ct=t=>t instanceof FormData,Gr=t=>{try{return btoa(t)}catch{return Buffer.from(t).toString("base64")}},Lr=t=>{const e=[],r=(s,i)=>{e.push(`${encodeURIComponent(s)}=${encodeURIComponent(String(i))}`)},o=(s,i)=>{Ke(i)&&(Array.isArray(i)?i.forEach(a=>{o(s,a)}):typeof i=="object"?Object.entries(i).forEach(([a,n])=>{o(`${s}[${a}]`,n)}):r(s,i))};return Object.entries(t).forEach(([s,i])=>{o(s,i)}),e.length>0?`?${e.join("&")}`:""},Mr=(t,e)=>{const r=t.ENCODE_PATH||encodeURI,o=e.url.replace("{api-version}",t.VERSION).replace(/{(.*?)}/g,(i,a)=>{var n;return(n=e.path)!=null&&n.hasOwnProperty(a)?r(String(e.path[a])):i}),s=`${t.BASE}${o}`;return e.query?`${s}${Lr(e.query)}`:s},Wr=t=>{if(t.formData){const e=new FormData,r=(o,s)=>{ie(s)||Ye(s)?e.append(o,s):e.append(o,JSON.stringify(s))};return Object.entries(t.formData).filter(([o,s])=>Ke(s)).forEach(([o,s])=>{Array.isArray(s)?s.forEach(i=>r(o,i)):r(o,s)}),e}},ce=async(t,e)=>typeof e=="function"?e(t):e,zr=async(t,e)=>{const r=await ce(e,t.TOKEN),o=await ce(e,t.USERNAME),s=await ce(e,t.PASSWORD),i=await ce(e,t.HEADERS),a=Object.entries({Accept:"application/json",...i,...e.headers}).filter(([n,d])=>Ke(d)).reduce((n,[d,c])=>({...n,[d]:String(c)}),{});if(Re(r)&&(a.Authorization=`Bearer ${r}`),Re(o)&&Re(s)){const n=Gr(`${o}:${s}`);a.Authorization=`Basic ${n}`}return e.body&&(e.mediaType?a["Content-Type"]=e.mediaType:Ye(e.body)?a["Content-Type"]=e.body.type||"application/octet-stream":ie(e.body)?a["Content-Type"]="text/plain":Ct(e.body)||(a["Content-Type"]="application/json")),new Headers(a)},Jr=t=>{var e;if(t.body)return(e=t.mediaType)!=null&&e.includes("/json")?JSON.stringify(t.body):ie(t.body)||Ye(t.body)||Ct(t.body)?t.body:JSON.stringify(t.body)},Kr=(t,e,r,o,s,i,a)=>{const n=new AbortController,d={headers:i,body:o??s,method:e.method,signal:n.signal};return t.WITH_CREDENTIALS&&(d.credentials=t.CREDENTIALS),a(()=>n.abort()),fetch(r,d)},Yr=(t,e)=>{if(e){const r=t.headers.get(e);if(ie(r))return r}},Qr=async t=>{if(t.status!==204)try{const e=t.headers.get("Content-Type");if(e)return e.toLowerCase().startsWith("application/json")?await t.json():await t.text()}catch(e){console.error(e)}},Xr=(t,e)=>{const o={400:"Bad Request",401:"Unauthorized",403:"Forbidden",404:"Not Found",500:"Internal Server Error",502:"Bad Gateway",503:"Service Unavailable",...t.errors}[e.status];if(e.status===503){window.location.assign(Ge);return}if(o)throw new we(t,e,o);if(!e.ok)throw new we(t,e,"Generic Error")},Zr=(t,e)=>new Hr(async(r,o,s)=>{try{const i=Mr(t,e),a=Wr(e),n=Jr(e),d=await zr(t,e);if(!s.isCancelled){const c=await Kr(t,e,i,n,a,d,s),y=await Qr(c),g=Yr(c,e.responseHeader),b={url:i,ok:c.ok,status:c.status,statusText:c.statusText,body:g??y};Xr(e,b),r(b.body)}}catch(i){i instanceof we&&i.status===401&&!i.url.includes("/users/current")&&!i.url.includes("/users/signin")&&(window.location.href="/connexion"),o(i)}});class es extends Vr{constructor(e){super(e)}request(e){return Zr(this.config,e)}}class ts{constructor(e){this.httpRequest=e}cancelCollectiveBooking(e){return this.httpRequest.request({method:"PATCH",url:"/v2/collective/bookings/{booking_id}",path:{booking_id:e},errors:{401:"Authentification nécessaire",422:"Unprocessable Entity"}})}listCategories(){return this.httpRequest.request({method:"GET",url:"/v2/collective/categories",errors:{401:"Authentification nécessaire",422:"Unprocessable Entity"}})}listEducationalDomains(){return this.httpRequest.request({method:"GET",url:"/v2/collective/educational-domains",errors:{401:"Authentification nécessaire",422:"Unprocessable Entity"}})}listEducationalInstitutions(e,r,o,s,i,a,n=20){return this.httpRequest.request({method:"GET",url:"/v2/collective/educational-institutions/",query:{id:e,name:r,institutionType:o,city:s,postalCode:i,uai:a,limit:n},errors:{400:"Requête malformée",401:"Authentification nécessaire",422:"Unprocessable Entity"}})}getNationalPrograms(){return this.httpRequest.request({method:"GET",url:"/v2/collective/national-programs/",errors:{401:"Authentification nécessaire",403:"Vous n'avez pas les droits nécessaires pour voir ces informations",422:"Unprocessable Entity"}})}getOffererVenues(e){return this.httpRequest.request({method:"GET",url:"/v2/collective/offerer_venues",query:{siren:e},errors:{401:"Authentification nécessaire",422:"Unprocessable Entity"}})}getCollectiveOffersPublic(e,r,o,s){return this.httpRequest.request({method:"GET",url:"/v2/collective/offers/",query:{status:e,venueId:r,periodBeginningDate:o,periodEndingDate:s},errors:{401:"Authentification nécessaire",403:"Vous n'avez pas les droits nécessaires pour voir cette offre collective",404:"L'offre collective n'existe pas",422:"Unprocessable Entity"}})}postCollectiveOfferPublic(e){return this.httpRequest.request({method:"POST",url:"/v2/collective/offers/",body:e,mediaType:"application/json",errors:{400:"Requête malformée",401:"Authentification nécessaire",403:"Non éligible pour les offres collectives",404:"L'une des resources pour la création de l'offre n'a pas été trouvée",422:"Unprocessable Entity"}})}getOffersFormats(){return this.httpRequest.request({method:"GET",url:"/v2/collective/offers/formats",errors:{401:"Authentification nécessaire",403:"Vous n'avez pas les droits nécessaires pour voir cette offre collective",404:"L'offre collective n'existe pas",422:"Unprocessable Entity"}})}getCollectiveOfferPublic(e){return this.httpRequest.request({method:"GET",url:"/v2/collective/offers/{offer_id}",path:{offer_id:e},errors:{401:"Authentification nécessaire",403:"Vous n'avez pas les droits nécessaires pour voir cette offre collective",404:"L'offre collective n'existe pas",422:"Unprocessable Entity"}})}patchCollectiveOfferPublic(e,r){return this.httpRequest.request({method:"PATCH",url:"/v2/collective/offers/{offer_id}",path:{offer_id:e},body:r,mediaType:"application/json",errors:{400:"Requête malformée",401:"Authentification nécessaire",403:"Vous n'avez pas les droits nécessaires pour éditer cette offre collective",404:"L'une des resources pour la création de l'offre n'a pas été trouvée",422:"Cetains champs ne peuvent pas être édités selon l'état de l'offre"}})}listStudentsLevels(){return this.httpRequest.request({method:"GET",url:"/v2/collective/student-levels",errors:{401:"Authentification nécessaire",422:"Unprocessable Entity"}})}listSubcategories(){return this.httpRequest.request({method:"GET",url:"/v2/collective/subcategories",errors:{401:"Authentification nécessaire",422:"Unprocessable Entity"}})}listVenues(){return this.httpRequest.request({method:"GET",url:"/v2/collective/venues",errors:{401:"Authentification nécessaire",422:"Unprocessable Entity"}})}}class rs{constructor(e){this.httpRequest=e}patchCancelBookingByToken(e){return this.httpRequest.request({method:"PATCH",url:"/v2/bookings/cancel/token/{token}",path:{token:e},errors:{401:"Authentification nécessaire",403:"Vous n'avez pas les droits nécessaires pour annuler cette contremarque ou la réservation a déjà été validée",404:"La contremarque n'existe pas",410:"La contremarque a déjà été annulée",422:"Unprocessable Entity"}})}patchBookingKeepByToken(e){return this.httpRequest.request({method:"PATCH",url:"/v2/bookings/keep/token/{token}",path:{token:e},errors:{401:"Authentification nécessaire",403:"Vous n'avez pas les droits nécessaires pour voir cette contremarque",404:"La contremarque n'existe pas",410:"La requête est refusée car la contremarque n'a pas encore été validée, a été annulée, ou son remboursement a été initié",422:"Unprocessable Entity"}})}getBookingByTokenV2(e){return this.httpRequest.request({method:"GET",url:"/v2/bookings/token/{token}",path:{token:e},errors:{401:"Authentification nécessaire",403:"Vous n'avez pas les droits nécessaires pour voir cette contremarque",404:"La contremarque n'existe pas",410:`Cette contremarque a été validée.
        En l’invalidant vous indiquez qu’elle n’a pas été utilisée et vous ne serez pas remboursé.`,422:"Unprocessable Entity"}})}patchBookingUseByToken(e){return this.httpRequest.request({method:"PATCH",url:"/v2/bookings/use/token/{token}",path:{token:e},errors:{401:"Authentification nécessaire",403:"Vous n'avez pas les droits nécessaires pour voir cette contremarque",404:"La contremarque n'existe pas",410:`Cette contremarque a été validée.
        En l’invalidant vous indiquez qu’elle n’a pas été utilisée et vous ne serez pas remboursé.`,422:"Unprocessable Entity"}})}}class ss{constructor(e,r=es){this.request=new r({BASE:(e==null?void 0:e.BASE)??"http://localhost:5001",VERSION:(e==null?void 0:e.VERSION)??"2",WITH_CREDENTIALS:(e==null?void 0:e.WITH_CREDENTIALS)??!1,CREDENTIALS:(e==null?void 0:e.CREDENTIALS)??"include",TOKEN:e==null?void 0:e.TOKEN,USERNAME:e==null?void 0:e.USERNAME,PASSWORD:e==null?void 0:e.PASSWORD,HEADERS:e==null?void 0:e.HEADERS,ENCODE_PATH:e==null?void 0:e.ENCODE_PATH}),this.apiOffresCollectives=new ts(this.request),this.dPrCiEApiContremarque=new rs(this.request)}}const os=new URLSearchParams(window.location.search),is=os.get("token"),Ot={BASE:vt,VERSION:"1",WITH_CREDENTIALS:!0,CREDENTIALS:"include"},as={BASE:vt,VERSION:"1",WITH_CREDENTIALS:!1,CREDENTIALS:"omit",TOKEN:is??""},ot=new Dr(Ot).default;new ss(Ot).dPrCiEApiContremarque;new _r(as).default;const ns="homepageSelectedOffererId",Ie=({message:t="Chargement en cours",className:e})=>{const[r,o]=m.useState(3),[s,i]=m.useState(null);return m.useEffect(()=>{s&&window.clearInterval(s);const a=window.setInterval(()=>{o(n=>n%3+1)},500);return i(a),()=>{window.clearInterval(a)}},[]),l.jsxs("div",{className:pe("loading-spinner",e),"data-testid":"spinner",children:[l.jsx(Le,{src:Vt,alt:"",className:"loading-spinner-icon"}),l.jsx("div",{className:"content","data-dots":Array(r).fill(".").join(""),children:t})]})};try{Ie.displayName="Spinner",Ie.__docgenInfo={description:"",displayName:"Spinner",props:{message:{defaultValue:{value:"Chargement en cours"},description:"",name:"message",required:!1,type:{name:"string"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}}}}}catch{}function ls(){try{const t=window.localStorage,e="__storage_test__";return t.setItem(e,e),t.removeItem(e),!0}catch(t){return t instanceof DOMException&&(t.code===22||t.code===1014||t.name==="QuotaExceededError"||t.name==="NS_ERROR_DOM_QUOTA_REACHED")&&window.localStorage&&window.localStorage.length!==0}}const us={"spinner-container":"_spinner-container_10or6_1"},Pe=({children:t,isAdageIframe:e=!1})=>{const r=Bt(),[o,s]=m.useState(!1);return m.useEffect(()=>{const i=async()=>{if(!e)try{const d=await ot.getProfile();r(rt(d))}catch{r(rt(null))}},a=async()=>{try{const d=await ot.listFeatures();r(st(d))}catch{r(st([]))}};(async()=>{if(await Promise.all([i(),a()]),ls()){const d=localStorage.getItem(ns);r(Dt(Number(d)))}s(!0)})()},[e,r]),o?t:l.jsx("main",{id:"content",className:us["spinner-container"],children:l.jsx(Ie,{})})};try{Pe.displayName="StoreProvider",Pe.__docgenInfo={description:"",displayName:"StoreProvider",props:{isAdageIframe:{defaultValue:{value:"false"},description:"",name:"isAdageIframe",required:!1,type:{name:"boolean"}}}}}catch{}const ds=""+new URL("offer-home-shell-0XuNO5pr.png",import.meta.url).href,cs=""+new URL("offer-shell-NTSb2-4f.png",import.meta.url).href,it={"image-preview-shell":"_image-preview-shell_1xnl4_1","image-preview-home-preview":"_image-preview-home-preview_1xnl4_6"},Se={"image-preview-shell":"_image-preview-shell_glg9w_1","image-preview-blur-offer-preview":"_image-preview-blur-offer-preview_glg9w_7","image-preview-offer-preview":"_image-preview-offer-preview_glg9w_16"},K=({imageUrl:t})=>l.jsxs(Rt,{children:[l.jsxs(he,{title:"Page d’accueil",children:[l.jsx("img",{alt:"",className:it["image-preview-shell"],src:ds}),l.jsx("img",{"data-testid":"app-preview-offer-img-home",alt:"",className:it["image-preview-home-preview"],src:t})]}),l.jsxs(he,{title:"Détails de l’offre",children:[l.jsx("img",{alt:"",className:Se["image-preview-blur-offer-preview"],src:t}),l.jsx("img",{alt:"",className:Se["image-preview-shell"],src:cs}),l.jsx("img",{"data-testid":"app-preview-offer-img",alt:"",className:Se["image-preview-offer-preview"],src:t})]})]});try{K.displayName="AppPreviewOffer",K.__docgenInfo={description:"",displayName:"AppPreviewOffer",props:{imageUrl:{defaultValue:null,description:"",name:"imageUrl",required:!0,type:{name:"string"}}}}}catch{}const ps=""+new URL("venue-home-shell-oOWagqMM.png",import.meta.url).href,hs=""+new URL("venue-shell-Y2dRTB5B.png",import.meta.url).href,at={"image-preview-shell":"_image-preview-shell_3dbf9_1","image-preview-home-preview":"_image-preview-home-preview_3dbf9_6"},Fe={"image-preview-shell":"_image-preview-shell_gbu12_1","image-preview-blur-venue-preview":"_image-preview-blur-venue-preview_gbu12_7","image-preview-venue-preview":"_image-preview-venue-preview_gbu12_16"},me=({imageUrl:t})=>{const e=St(),r=m.useCallback(()=>{e.error("Une erreur est survenue. Merci de réessayer plus tard")},[e]);return l.jsxs(Rt,{children:[l.jsxs(he,{title:"Page d’accueil",children:[l.jsx("img",{alt:"",className:at["image-preview-shell"],src:ps}),l.jsx("img",{"data-testid":"app-preview-venue-img-home",alt:"",className:at["image-preview-home-preview"],onError:r,src:t})]}),l.jsxs(he,{title:"Page Lieu",children:[l.jsx("img",{alt:"",className:Fe["image-preview-blur-venue-preview"],src:t}),l.jsx("img",{alt:"",className:Fe["image-preview-shell"],src:hs}),l.jsx("img",{"data-testid":"app-preview-venue-img",alt:"",className:Fe["image-preview-venue-preview"],src:t})]})]})};try{me.displayName="AppPreviewVenue",me.__docgenInfo={description:"",displayName:"AppPreviewVenue",props:{imageUrl:{defaultValue:null,description:"",name:"imageUrl",required:!0,type:{name:"string"}}}}}catch{}var h=(t=>(t.OFFER="offer",t.OFFER_COLLECTIVE="offer_collective",t.VENUE="venue",t))(h||{});const ms="_container_uuguy_2",fs="_header_uuguy_8",ys="_subtitle_uuguy_17",bs="_actions_uuguy_23",gs="_button_uuguy_28",Ue={container:ms,header:fs,subtitle:ys,actions:bs,button:gs},je=({mode:t,hideModal:e,imageUrl:r})=>{const o={[h.VENUE]:me,[h.OFFER]:K,[h.OFFER_COLLECTIVE]:K}[t];return l.jsx(Tt,{hasCloseButton:!0,labelledBy:"Ajouter une image",onDismiss:e,children:l.jsxs("div",{className:Ue.container,children:[l.jsx("header",{children:l.jsx("h1",{className:Ue.header,children:"Ajouter une image"})}),l.jsx("div",{className:Ue.subtitle,children:"Prévisualisation de votre image dans l’application pass Culture"}),l.jsx(o,{imageUrl:r})]})})};try{je.displayName="ModalAppPreview",je.__docgenInfo={description:"",displayName:"ModalAppPreview",props:{hideModal:{defaultValue:null,description:"",name:"hideModal",required:!0,type:{name:"() => void"}},mode:{defaultValue:null,description:"",name:"mode",required:!0,type:{name:"enum",value:[{value:'"offer"'},{value:'"offer_collective"'},{value:'"venue"'}]}},imageUrl:{defaultValue:null,description:"",name:"imageUrl",required:!0,type:{name:"string"}}}}}catch{}const Ae=({imageUrl:t,mode:e})=>{const[r,o]=m.useState(!1);return l.jsxs(l.Fragment,{children:[l.jsx(re,{onClick:()=>o(!0),variant:te.TERNARY,icon:$t,children:"Prévisualiser"}),r&&t&&l.jsx(je,{mode:e,imageUrl:t,hideModal:()=>o(!1)})]})};try{Ae.displayName="ButtonAppPreview",Ae.__docgenInfo={description:"",displayName:"ButtonAppPreview",props:{mode:{defaultValue:null,description:"",name:"mode",required:!0,type:{name:"enum",value:[{value:'"offer"'},{value:'"offer_collective"'},{value:'"venue"'}]}},imageUrl:{defaultValue:null,description:"",name:"imageUrl",required:!0,type:{name:"string"}}}}}catch{}const Es={"button-image-delete-icon":"_button-image-delete-icon_ooh4c_1"},Ne=({isLoading:t,onConfirm:e,onDismiss:r})=>l.jsx(zt,{cancelText:"Retour",confirmText:"Supprimer",icon:Jt,isLoading:t,onCancel:r,onConfirm:e,title:"Supprimer l’image",children:"Souhaitez-vous vraiment supprimer cette image ?"});try{Ne.displayName="ModalImageDelete",Ne.__docgenInfo={description:"",displayName:"ModalImageDelete",props:{isLoading:{defaultValue:null,description:"",name:"isLoading",required:!0,type:{name:"boolean"}},onConfirm:{defaultValue:null,description:"",name:"onConfirm",required:!0,type:{name:"() => void"}},onDismiss:{defaultValue:null,description:"",name:"onDismiss",required:!0,type:{name:"() => void"}}}}}catch{}const xe=({onImageDelete:t})=>{const[e,r]=m.useState(!1),[o,s]=m.useState(!1),i=()=>{s(!0),t()};return l.jsxs(l.Fragment,{children:[l.jsxs(re,{onClick:()=>r(!0),variant:te.TERNARY,children:[l.jsx(Le,{alt:"",className:Es["button-image-delete-icon"],src:Wt}),"Supprimer"]}),e&&l.jsx(Ne,{isLoading:o,onConfirm:i,onDismiss:()=>r(!1)})]})};try{xe.displayName="ButtonImageDelete",xe.__docgenInfo={description:"",displayName:"ButtonImageDelete",props:{onImageDelete:{defaultValue:null,description:"",name:"onImageDelete",required:!0,type:{name:"() => void"}}}}}catch{}const qs="_label_185fk_23",vs="_icon_185fk_36",Q={"button-image-add":"_button-image-add_185fk_2","add-image-venue":"_add-image-venue_185fk_15","add-image-offer":"_add-image-offer_185fk_19",label:qs,"image-upload-button-label":"_image-upload-button-label_185fk_29",icon:vs},_s=async(t,e="image.jpg")=>{const o=await(await fetch(t)).blob();return new File([o],e,{type:o.type})},fe=(t,e)=>t+e/2,Ts=t=>1/t,wt={[h.OFFER]:{maxSize:1e7,minWidth:400,types:["image/png","image/jpeg"],minHeight:600},[h.OFFER_COLLECTIVE]:{maxSize:1e7,minWidth:400,types:["image/png","image/jpeg"],minHeight:600},[h.VENUE]:{maxSize:1e7,minWidth:600,types:["image/png","image/jpeg"],minHeight:400}},Rs=t=>{const[e,r]=m.useState(0),[o,s]=m.useState(0);return m.useEffect(()=>{er(t).then(i=>{i&&(r(i.width),s(i.height))})},[]),{width:e,height:o}},G={"modal-image-crop":"_modal-image-crop_11rti_2","modal-image-crop-form":"_modal-image-crop-form_11rti_13","modal-image-crop-header":"_modal-image-crop-header_11rti_19","modal-image-crop-right":"_modal-image-crop-right_11rti_27","modal-image-crop-credit":"_modal-image-crop-credit_11rti_33","modal-image-crop-footer":"_modal-image-crop-footer_11rti_39"},Ss=({originalDimensions:t,orientation:e})=>e==="landscape"?{width:Math.floor(Math.min(t.width,t.height/2*3)),height:Math.floor(Math.min(t.height,t.width/3*2))}:{width:Math.floor(Math.min(t.width,t.height/3*2)),height:Math.floor(Math.min(t.height,t.width/2*3))},ke=({onReplaceImage:t,image:e,credit:r,onSetCredit:o,onEditedImageSave:s,saveInitialPosition:i,initialPosition:a,initialScale:n,mode:d,submitButtonText:c})=>{const{width:y,height:g}=Rs(e),b=m.useRef(null),be=St(),ae=wt[d].minWidth,{width:ge}=Ss({originalDimensions:{width:y,height:g},orientation:d===h.VENUE?"landscape":"portrait"}),k=Math.min(4,(ge-10)/ae),C={[h.OFFER]:384,[h.OFFER_COLLECTIVE]:384,[h.VENUE]:244}[d],Ee={[h.OFFER]:{canvasHeight:C,canvasWidth:C*6/9,cropBorderColor:"#FFF",cropBorderHeight:50,cropBorderWidth:105,maxScale:k},[h.OFFER_COLLECTIVE]:{canvasHeight:C,canvasWidth:C*6/9,cropBorderColor:"#FFF",cropBorderHeight:50,cropBorderWidth:105,maxScale:k},[h.VENUE]:{canvasHeight:C,canvasWidth:C*3/2,cropBorderColor:"#FFF",cropBorderHeight:40,cropBorderWidth:100,maxScale:k}}[d],Y=Yt({initialValues:{credit:r||"",scale:n||1},onSubmit:H=>{try{if(b.current){const ne=b.current.getImage(),B=b.current.getCroppingRect();i({x:fe(B.x,B.width),y:fe(B.y,B.height)}),s(ne.toDataURL(),B)}o(H.credit)}catch{be.error("Une erreur est survenue. Merci de réessayer plus tard")}}});return l.jsx("section",{className:G["modal-image-crop"],children:l.jsx(Qt,{value:Y,children:l.jsxs(Xt,{onSubmit:Y.handleSubmit,children:[l.jsxs("div",{className:G["modal-image-crop-form"],children:[l.jsx("header",{children:l.jsx("h1",{className:G["modal-image-crop-header"],children:"Ajouter une image"})}),l.jsx("p",{className:G["modal-image-crop-right"],children:"En utilisant ce contenu, je certifie que je suis propriétaire ou que je dispose des autorisations nécessaires pour l’utilisation de celui-ci."}),l.jsx(Zt,{...Ee,image:e,initialPosition:a,ref:b}),l.jsx(Mt,{countCharacters:!0,className:G["modal-image-crop-credit"],label:"Crédit de l’image",maxLength:255,name:"credit",placeholder:"Photographe...",required:!1,type:"text",isOptional:!0})]}),l.jsx(Lt,{}),l.jsxs("footer",{className:G["modal-image-crop-footer"],children:[l.jsx(re,{icon:Ht,onClick:t,variant:te.TERNARY,children:"Remplacer l’image"}),l.jsx(_t,{children:c})]})]})})})};try{ke.displayName="ModalImageCrop",ke.__docgenInfo={description:"",displayName:"ModalImageCrop",props:{image:{defaultValue:null,description:"",name:"image",required:!0,type:{name:"File"}},credit:{defaultValue:null,description:"",name:"credit",required:!0,type:{name:"string"}},onSetCredit:{defaultValue:null,description:"",name:"onSetCredit",required:!0,type:{name:"(credit: string) => void"}},onReplaceImage:{defaultValue:null,description:"",name:"onReplaceImage",required:!0,type:{name:"() => void"}},initialPosition:{defaultValue:null,description:"",name:"initialPosition",required:!1,type:{name:"Position"}},initialScale:{defaultValue:null,description:"",name:"initialScale",required:!1,type:{name:"number"}},saveInitialPosition:{defaultValue:null,description:"",name:"saveInitialPosition",required:!0,type:{name:"(position: Position) => void"}},onEditedImageSave:{defaultValue:null,description:"",name:"onEditedImageSave",required:!0,type:{name:"(dataUrl: string, croppedRect: CroppedRect) => void"}},mode:{defaultValue:null,description:"",name:"mode",required:!0,type:{name:"enum",value:[{value:'"offer"'},{value:'"offer_collective"'},{value:'"venue"'}]}},submitButtonText:{defaultValue:null,description:"",name:"submitButtonText",required:!0,type:{name:"string"}}}}}catch{}const Fs=({constraints:t})=>sr().shape(t.reduce((e,r)=>({...e,[r.id]:or().test({message:r.description,test:(o,s)=>r.asyncValidator(s.parent.image)})}),{})),Be=({onSubmit:t,mode:e})=>{const[r,o]=m.useState([]),s=wt[e],i=[le.formats(s.types),le.size(s.maxSize),le.width(s.minWidth),le.height(s.minHeight)],a=Fs({constraints:i}),n=d=>{const c=d.currentTarget.files&&d.currentTarget.files[0]||null;c&&a.validate({image:c},{abortEarly:!1}).then(()=>t({image:c})).catch(y=>o(y.inner.map(g=>g.path||"unknown")))};return l.jsxs("form",{onSubmit:d=>d.preventDefault(),children:[l.jsx(rr,{label:"Importer une image depuis l’ordinateur",fileTypes:["image/png","image/jpeg"],isValid:r.length===0,onChange:n}),l.jsx(tr,{constraints:i,failingConstraints:r})]})};try{Be.displayName="ImageUploadBrowserForm",Be.__docgenInfo={description:"",displayName:"ImageUploadBrowserForm",props:{onSubmit:{defaultValue:null,description:"",name:"onSubmit",required:!0,type:{name:"(values: ImageUploadBrowserFormValues) => void"}},mode:{defaultValue:null,description:"",name:"mode",required:!0,type:{name:"enum",value:[{value:'"offer"'},{value:'"offer_collective"'},{value:'"venue"'}]}}}}}catch{}const Us="_header_gcnvk_13",nt={"modal-upload-browser":"_modal-upload-browser_gcnvk_2",header:Us,"horizontal-rule":"_horizontal-rule_gcnvk_19"},De=({onImageClientUpload:t,mode:e})=>{const r={[h.OFFER]:"portrait",[h.OFFER_COLLECTIVE]:"portrait",[h.VENUE]:"landscape"}[e];return l.jsxs("section",{className:nt["modal-upload-browser"],children:[l.jsx("header",{children:l.jsx("h1",{className:nt.header,children:"Ajouter une image"})}),l.jsx(ir,{orientation:r}),l.jsx(Be,{onSubmit:t,mode:e})]})};try{De.displayName="ModalImageUploadBrowser",De.__docgenInfo={description:"",displayName:"ModalImageUploadBrowser",props:{onImageClientUpload:{defaultValue:null,description:"",name:"onImageClientUpload",required:!0,type:{name:"(values: ImageUploadBrowserFormValues) => void"}},mode:{defaultValue:null,description:"",name:"mode",required:!0,type:{name:"enum",value:[{value:'"offer"'},{value:'"offer_collective"'},{value:'"venue"'}]}}}}}catch{}const Cs="_container_4bsmh_2",Os="_header_4bsmh_8",ws="_subtitle_4bsmh_17",Is="_actions_4bsmh_23",Ps="_button_4bsmh_29",L={container:Cs,header:Os,subtitle:ws,actions:Is,button:Ps},Ve=({imageUrl:t,isUploading:e,onGoBack:r,onUploadImage:o,mode:s})=>{const i={[h.VENUE]:me,[h.OFFER]:K,[h.OFFER_COLLECTIVE]:K}[s];return l.jsxs("div",{className:L.container,children:[l.jsx("header",{children:l.jsx("h1",{className:L.header,children:"Ajouter une image"})}),l.jsx("div",{className:L.subtitle,children:"Prévisualisation de votre image dans l’application pass Culture"}),l.jsx(i,{imageUrl:t}),l.jsxs("div",{className:L.actions,children:[l.jsx(re,{className:L.button,onClick:r,title:"Retour",type:"button",variant:te.SECONDARY,children:"Retour"}),l.jsx(_t,{className:L.button,disabled:!1,isLoading:!!e,onClick:o})]})]})};try{Ve.displayName="ModalImageUploadConfirm",Ve.__docgenInfo={description:"",displayName:"ModalImageUploadConfirm",props:{imageUrl:{defaultValue:null,description:"",name:"imageUrl",required:!0,type:{name:"string"}},mode:{defaultValue:null,description:"",name:"mode",required:!0,type:{name:"enum",value:[{value:'"offer"'},{value:'"offer_collective"'},{value:'"venue"'}]}},isUploading:{defaultValue:null,description:"",name:"isUploading",required:!0,type:{name:"boolean"}},onGoBack:{defaultValue:null,description:"",name:"onGoBack",required:!0,type:{name:"() => void"}},onUploadImage:{defaultValue:null,description:"",name:"onUploadImage",required:!0,type:{name:"() => void"}}}}}catch{}const $e=({mode:t,onDismiss:e,onImageUpload:r,initialValues:o={}})=>{const[s,i]=m.useState(!1),{imageUrl:a,originalImageUrl:n,credit:d,cropParams:c}=o,[y,g]=m.useState();m.useEffect(()=>{async function O(ve){g(await _s(ve))}const w=n||a;w&&O(w),i(!0)},[]);const[b,be]=m.useState(d||""),[ae,ge]=m.useState(),[k,C]=m.useState(""),[Ee,Xe]=m.useState(!1),{xCropPercent:qe,yCropPercent:Y,heightCropPercent:H,widthCropPercent:ne}=c||{},[B,jt]=m.useState({x:qe&&ne?fe(qe,ne):.5,y:Y&&H?fe(Y,H):.5}),At=()=>{C("")},Nt=O=>{g(O.image||void 0)},xt=()=>{g(void 0)},Ze=(O,w,ve)=>{O===void 0||w===void 0||(r({imageFile:w,imageCroppedDataUrl:ve,cropParams:O,credit:b}),e(),Xe(!1))},et=t!==h.OFFER_COLLECTIVE,kt=(O,w)=>{ge(w),C(O),et||Ze(w,y,O)};return s?l.jsx(Tt,{hasCloseButton:!0,labelledBy:"Ajouter une image",onDismiss:e,children:y?!ae||!k?l.jsx(ke,{credit:b,image:y,initialPosition:B,initialScale:H?Ts(H):1,onEditedImageSave:kt,onReplaceImage:xt,onSetCredit:be,saveInitialPosition:jt,mode:t,submitButtonText:et?"Suivant":"Enregistrer"}):l.jsx(Ve,{isUploading:Ee,onGoBack:At,onUploadImage:()=>Ze(ae,y,k),imageUrl:k,mode:t}):l.jsx(De,{onImageClientUpload:Nt,mode:t})}):null};try{$e.displayName="ModalImageEdit",$e.__docgenInfo={description:"",displayName:"ModalImageEdit",props:{mode:{defaultValue:null,description:"",name:"mode",required:!0,type:{name:"enum",value:[{value:'"offer"'},{value:'"offer_collective"'},{value:'"venue"'}]}},onDismiss:{defaultValue:null,description:"",name:"onDismiss",required:!0,type:{name:"() => void"}},onImageUpload:{defaultValue:null,description:"",name:"onImageUpload",required:!0,type:{name:"(values: OnImageUploadArgs) => void"}},initialValues:{defaultValue:{value:"{}"},description:"",name:"initialValues",required:!1,type:{name:"UploadImageValues"}}}}}catch{}const ye=({mode:t,initialValues:e={},onImageUpload:r,onClickButtonImage:o,children:s})=>{const[i,a]=m.useState(!1),{imageUrl:n,originalImageUrl:d}=e,c=()=>{o&&o(),a(!0)};return l.jsxs(l.Fragment,{children:[n||d?l.jsx(re,{onClick:c,variant:te.TERNARY,alt:"Modifier l’image",icon:Kt,children:s??"Modifier"}):l.jsxs("button",{className:pe(Q["button-image-add"],{[Q["add-image-venue"]]:t===h.VENUE,[Q["add-image-offer"]]:t===h.OFFER||t===h.OFFER_COLLECTIVE}),onClick:c,type:"button",children:[l.jsx(Le,{src:Gt,alt:"",className:Q.icon}),l.jsx("span",{className:Q.label,children:"Ajouter une image"})]}),i&&l.jsx($e,{mode:t,onDismiss:()=>a(!1),onImageUpload:r,initialValues:e})]})};try{ye.displayName="ButtonImageEdit",ye.__docgenInfo={description:"",displayName:"ButtonImageEdit",props:{onImageUpload:{defaultValue:null,description:"",name:"onImageUpload",required:!0,type:{name:"(values: OnImageUploadArgs) => void"}},initialValues:{defaultValue:{value:"{}"},description:"",name:"initialValues",required:!1,type:{name:"UploadImageValues"}},mode:{defaultValue:null,description:"",name:"mode",required:!0,type:{name:"enum",value:[{value:'"offer"'},{value:'"offer_collective"'},{value:'"venue"'}]}},onClickButtonImage:{defaultValue:null,description:"",name:"onClickButtonImage",required:!1,type:{name:"(() => void)"}}}}}catch{}const M={"explanatory-text":"_explanatory-text_102ob_1","image-uploader-image-container":"_image-uploader-image-container_102ob_5","image-uploader-actions-container":"_image-uploader-actions-container_102ob_9","actions-wrapper":"_actions-wrapper_102ob_16","image-preview":"_image-preview_102ob_24","preview-venue":"_preview-venue_102ob_30","preview-offer":"_preview-offer_102ob_34"},He=({className:t,onImageUpload:e,onImageDelete:r,initialValues:o={},mode:s,onClickButtonImageAdd:i,hideActionButtons:a=!1})=>{const{imageUrl:n,originalImageUrl:d,credit:c,cropParams:y}=o;return l.jsx("div",{className:pe(M["image-uploader-image-container"],t),children:n&&d?l.jsxs(l.Fragment,{children:[l.jsx("img",{alt:"Prévisualisation de l’image",className:pe(M["image-preview"],{[M["preview-venue"]]:s===h.VENUE,[M["preview-offer"]]:s===h.OFFER||s===h.OFFER_COLLECTIVE}),src:n}),!a&&l.jsx("div",{className:M["image-uploader-actions-container"],children:l.jsxs("div",{className:M["actions-wrapper"],children:[l.jsx(ye,{mode:s,initialValues:{originalImageUrl:d,imageUrl:n,credit:c,cropParams:y},onImageUpload:e,onClickButtonImage:i}),s!==h.OFFER_COLLECTIVE&&l.jsx(Ae,{imageUrl:n,mode:s}),l.jsx(xe,{onImageDelete:r})]})})]}):l.jsx(ye,{mode:s,onImageUpload:e,onClickButtonImage:i})})},It=He;try{He.displayName="ImageUploader",He.__docgenInfo={description:"",displayName:"ImageUploader",props:{className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},onImageUpload:{defaultValue:null,description:"",name:"onImageUpload",required:!0,type:{name:"(values: OnImageUploadArgs) => void"}},onImageDelete:{defaultValue:null,description:"",name:"onImageDelete",required:!0,type:{name:"() => void"}},initialValues:{defaultValue:{value:"{}"},description:"",name:"initialValues",required:!1,type:{name:"UploadImageValues"}},mode:{defaultValue:null,description:"",name:"mode",required:!0,type:{name:"enum",value:[{value:'"offer"'},{value:'"offer_collective"'},{value:'"venue"'}]}},onClickButtonImageAdd:{defaultValue:null,description:"",name:"onClickButtonImageAdd",required:!1,type:{name:"(() => void)"}},hideActionButtons:{defaultValue:{value:"false"},description:"",name:"hideActionButtons",required:!1,type:{name:"boolean"}}}}}catch{}const lt=""+new URL("sample-image-landscape-eBpjwR3E.jpg",import.meta.url).href,ut=""+new URL("sample-image-portrait-DqK7CIsS.jpg",import.meta.url).href,Yo={title:"components/ImageUploader",component:It},Qe=t=>l.jsx(Pe,{children:l.jsx(It,{...t})}),Pt={initialValues:{originalImageUrl:ut,imageUrl:ut,credit:"John Do",cropParams:{xCropPercent:0,yCropPercent:0,heightCropPercent:1,widthCropPercent:1}},mode:h.OFFER,onImageDelete:()=>{alert("onDelete have been called.")},onImageUpload:()=>{alert("onImageUpload have been called.")}},X=Qe.bind({});X.args={...Pt};const Z=Qe.bind({});Z.args={...Pt,initialValues:{imageUrl:lt,originalImageUrl:lt},mode:h.VENUE};const ee=Qe.bind({});ee.args={mode:h.OFFER};var pt,ht,mt;X.parameters={...X.parameters,docs:{...(pt=X.parameters)==null?void 0:pt.docs,source:{originalSource:`props => <StoreProvider>
    <ImageUploader {...props} />
  </StoreProvider>`,...(mt=(ht=X.parameters)==null?void 0:ht.docs)==null?void 0:mt.source}}};var ft,yt,bt;Z.parameters={...Z.parameters,docs:{...(ft=Z.parameters)==null?void 0:ft.docs,source:{originalSource:`props => <StoreProvider>
    <ImageUploader {...props} />
  </StoreProvider>`,...(bt=(yt=Z.parameters)==null?void 0:yt.docs)==null?void 0:bt.source}}};var gt,Et,qt;ee.parameters={...ee.parameters,docs:{...(gt=ee.parameters)==null?void 0:gt.docs,source:{originalSource:`props => <StoreProvider>
    <ImageUploader {...props} />
  </StoreProvider>`,...(qt=(Et=ee.parameters)==null?void 0:Et.docs)==null?void 0:qt.source}}};const Qo=["WithImageOffer","WithImageVenue","WithoutImage"];export{X as WithImageOffer,Z as WithImageVenue,ee as WithoutImage,Qo as __namedExportsOrder,Yo as default};
