{"version":3,"file":"SelectAutocomplete.stories-d6075189.js","sources":["../../src/utils/searchPatternInOptions.ts","../../src/ui-kit/form/SelectAutoComplete/OptionsList/OptionsList.tsx","../../src/ui-kit/form/SelectAutoComplete/Tags/index.tsx","../../src/ui-kit/form/SelectAutoComplete/Toggle/Toggle.tsx","../../src/ui-kit/form/SelectAutoComplete/SelectAutocomplete.tsx"],"sourcesContent":["import { SelectOption } from 'custom_types/form'\n\nconst normalizeStr = (str: string): string => {\n  return str\n    .trim()\n    .toLowerCase()\n    .normalize('NFD')\n    .replace(/[\\u0300-\\u036f]/g, '')\n}\n\nconst getNormalizedMatches = (\n  pattern: string,\n  option: SelectOption\n): string[] => {\n  return normalizeStr(option.label)\n    .split(' ')\n    .filter(word =>\n      normalizeStr(pattern)\n        .split(' ')\n        .some(patternWord => word.includes(patternWord))\n    )\n}\n\nexport const searchPatternInOptions = (\n  options: SelectOption[],\n  pattern: string\n): SelectOption[] => {\n  if (!pattern?.trim()) {\n    return options\n  }\n\n  //  Filter options containing at least one word matching one word from the pattern\n  const matchingOptions = options.filter(\n    option => getNormalizedMatches(pattern, option).length > 0\n  )\n\n  if (normalizeStr(pattern).split(' ').length > 1) {\n    //  Sort result by number of label words that have matched some of the pattern words\n    matchingOptions.sort((opt1, opt2) =>\n      getNormalizedMatches(pattern, opt1).length >\n      getNormalizedMatches(pattern, opt2).length\n        ? -1\n        : 1\n    )\n  }\n\n  return matchingOptions\n}\n","import cx from 'classnames'\nimport React, { Ref } from 'react'\n\nimport { SelectOption } from 'custom_types/form'\nimport BaseCheckbox from 'ui-kit/form/shared/BaseCheckbox'\nimport baseCheckboxStyles from 'ui-kit/form/shared/BaseCheckbox/BaseCheckbox.module.scss'\n\nimport styles from './OptionsList.module.scss'\n\ninterface OptionsListProps {\n  className?: string\n  fieldName: string\n  selectedValues: string | string[] | null\n  filteredOptions: SelectOption[]\n  setHoveredOptionIndex: (value: number | null) => void\n  listRef: Ref<HTMLUListElement>\n  hoveredOptionIndex: number | null\n  selectOption: (value: string) => void\n  multi: boolean\n}\n\nconst OptionsList = ({\n  className,\n  fieldName,\n  selectedValues,\n  filteredOptions,\n  setHoveredOptionIndex,\n  listRef,\n  hoveredOptionIndex,\n  selectOption,\n  multi,\n}: OptionsListProps): JSX.Element => {\n  return (\n    <div className={cx(styles['menu'], className)} role=\"listbox\">\n      {filteredOptions.length === 0 && (\n        <span\n          className={cx({\n            [styles['menu--no-results']]: filteredOptions.length === 0,\n          })}\n        >\n          Aucun r√©sultat\n        </span>\n      )}\n      <ul\n        data-testid=\"list\"\n        id={`list-${fieldName}`}\n        ref={listRef}\n        role=\"listbox\"\n      >\n        {filteredOptions.map(\n          ({ value, label }: SelectOption, index: number) => {\n            const isSelected = (selectedValues || []).includes(String(value))\n            return (\n              <li\n                aria-selected={isSelected}\n                aria-posinset={index + 1}\n                aria-setsize={filteredOptions.length}\n                className={\n                  hoveredOptionIndex === index ? styles['option-hovered'] : ''\n                }\n                data-value={value}\n                data-selected={isSelected}\n                id={`option-display-${value}`}\n                key={`option-display-${value}`}\n                onMouseEnter={() => setHoveredOptionIndex(index)}\n                role=\"option\"\n                tabIndex={-1}\n              >\n                {multi ? (\n                  <BaseCheckbox\n                    label={label}\n                    checked={isSelected}\n                    onChange={() => {\n                      selectOption(String(value))\n                    }}\n                  />\n                ) : (\n                  <span\n                    onClick={() => {\n                      selectOption(String(value))\n                    }}\n                    className={cx(\n                      baseCheckboxStyles['base-checkbox-label'],\n                      styles['label']\n                    )}\n                  >\n                    {label}\n                  </span>\n                )}\n              </li>\n            )\n          }\n        )}\n      </ul>\n    </div>\n  )\n}\n\nexport default OptionsList\n","import React from 'react'\n\nimport Tag from 'ui-kit/Tag'\n\nimport styles from './Tags.module.scss'\n\ninterface TagsProps {\n  disabled: boolean\n  fieldName: string\n  optionsLabelById: Record<string, string>\n  selectedOptions: string[]\n  removeOption: (value: string) => void\n}\n\nconst Tags = ({\n  disabled,\n  fieldName,\n  optionsLabelById,\n  selectedOptions,\n  removeOption,\n}: TagsProps): JSX.Element => {\n  return (\n    <div className={styles['multi-select-autocomplete-tags']}>\n      {selectedOptions.map((value: string) => (\n        <Tag\n          key={`tag-${fieldName}-${value}`}\n          label={optionsLabelById[value]}\n          closeable={{\n            closeLabel: 'Supprimer ' + optionsLabelById[value],\n            onClose: () => {\n              removeOption(value)\n            },\n            disabled,\n          }}\n        />\n      ))}\n    </div>\n  )\n}\n\nexport default Tags\n","import React from 'react'\n\nimport strokeDownIcon from 'icons/stroke-down.svg'\nimport { SvgIcon } from 'ui-kit/SvgIcon/SvgIcon'\n\nimport styles from './Toggle.module.scss'\n\ninterface ToggleProps {\n  disabled: boolean\n  isOpen: boolean\n  toggleField: () => void\n}\n\nconst Toggle = ({\n  disabled,\n  isOpen,\n  toggleField,\n}: ToggleProps): JSX.Element => {\n  return (\n    <button\n      onClick={toggleField}\n      className={styles['dropdown-indicator']}\n      type=\"button\"\n      disabled={disabled}\n    >\n      <SvgIcon\n        src={strokeDownIcon}\n        alt={`${isOpen ? 'Masquer' : 'Afficher'} les options`}\n        width=\"20\"\n      />\n    </button>\n  )\n}\n\nexport default Toggle\n","import cx from 'classnames'\nimport { useField, useFormikContext } from 'formik'\nimport React, { KeyboardEventHandler, useEffect, useRef, useState } from 'react'\n\nimport { SelectOption } from 'custom_types/form'\nimport { getLabelString } from 'utils/getLabelString'\n\nimport { BaseInput } from '../shared'\nimport FieldLayout from '../shared/FieldLayout'\nimport { FieldLayoutBaseProps } from '../shared/FieldLayout/FieldLayout'\n\nimport OptionsList from './OptionsList'\nimport styles from './SelectAutocomplete.module.scss'\nimport Tags from './Tags'\nimport Toggle from './Toggle'\n\nexport type SelectAutocompleteProps = FieldLayoutBaseProps & {\n  disabled?: boolean\n  hideArrow?: boolean\n  hideTags?: boolean\n  isOptional?: boolean\n  maxHeight?: number\n  multi?: boolean\n  options: SelectOption[]\n  placeholder?: string\n  pluralLabel?: string\n  resetOnOpen?: boolean\n  onSearch?: (pattern: string) => void\n  searchInOptions?: (options: SelectOption[], pattern: string) => SelectOption[]\n}\n\nconst SelectAutocomplete = ({\n  className,\n  disabled = false,\n  name,\n  hideArrow,\n  hideFooter = false,\n  hideTags = false,\n  inline,\n  isOptional = false,\n  label,\n  multi = false,\n  options,\n  placeholder,\n  pluralLabel,\n  smallLabel = false,\n  resetOnOpen = true,\n  description,\n  onSearch = () => {},\n  searchInOptions = options => options,\n}: SelectAutocompleteProps): JSX.Element => {\n  const { setFieldTouched, setFieldValue } = useFormikContext<any>()\n\n  const [field, meta] = useField<string | string[]>(name)\n  const [searchField, searchMeta] = useField(`search-${name}`)\n\n  const [hoveredOptionIndex, setHoveredOptionIndex] = useState<number | null>(\n    null\n  )\n  const [optionsLabelById, setOptionsLabelById] = useState<\n    Record<string, string>\n  >({})\n  const containerRef = useRef<HTMLDivElement>(null)\n  const listRef = useRef<HTMLUListElement>(null)\n  const [isOpen, setIsOpen] = useState(false)\n  const [filteredOptions, setFilteredOptions] = useState(options)\n\n  useEffect(() => {\n    if (isOpen && resetOnOpen && searchField.value !== '') {\n      setFieldValue(`search-${name}`, '', false)\n    }\n  }, [isOpen])\n\n  /* hashtable for the options */\n  useEffect(() => {\n    setOptionsLabelById(\n      options.reduce<Record<string, string>>((optionsById, option) => {\n        optionsById[option.value] = option.label\n        return optionsById\n      }, {})\n    )\n  }, [options])\n\n  /* istanbul ignore next */\n  useEffect(() => {\n    const handleClickOutside = (e: MouseEvent): void => {\n      if (!containerRef.current?.contains(e.target as Node)) {\n        setIsOpen(false)\n      }\n    }\n    if (containerRef.current) {\n      document.addEventListener('mousedown', handleClickOutside)\n    }\n    return () => {\n      document.removeEventListener('mousedown', handleClickOutside)\n    }\n  }, [containerRef])\n\n  useEffect(() => {\n    if (onSearch) {\n      onSearch(searchField.value.trim())\n    }\n\n    setHoveredOptionIndex(null)\n  }, [searchField.value])\n\n  useEffect(() => {\n    setFilteredOptions(searchInOptions(options, searchField.value))\n  }, [searchField.value, options])\n\n  /* istanbul ignore next: DEBT TO FIX */\n  const handleKeyDown: KeyboardEventHandler<HTMLDivElement> = event => {\n    /* istanbul ignore next */\n    switch (event.key) {\n      case 'ArrowUp':\n        if (hoveredOptionIndex !== null) {\n          if (hoveredOptionIndex <= 0) {\n            setHoveredOptionIndex(null)\n          } else {\n            setHoveredOptionIndex(hoveredOptionIndex - 1)\n          }\n        }\n        if (!isOpen) {\n          setIsOpen(true)\n        }\n        listRef.current?.focus()\n        break\n      case 'ArrowDown':\n        if (hoveredOptionIndex === null) {\n          setHoveredOptionIndex(0)\n        } else if (hoveredOptionIndex >= filteredOptions.length - 1) {\n          setHoveredOptionIndex(filteredOptions.length - 1)\n        } else {\n          setHoveredOptionIndex(hoveredOptionIndex + 1)\n        }\n        if (!isOpen) {\n          setIsOpen(true)\n        }\n        listRef.current?.focus()\n        break\n      case 'Space':\n        openField()\n        listRef.current?.focus()\n        break\n      case 'Enter':\n        if (isOpen && hoveredOptionIndex !== null) {\n          event.preventDefault()\n          selectOption(String(filteredOptions[hoveredOptionIndex].value))\n        }\n        break\n      case 'Escape':\n        setHoveredOptionIndex(null)\n        setIsOpen(false)\n        break\n      case 'Tab':\n        setHoveredOptionIndex(null)\n        setIsOpen(false)\n        break\n      default:\n        //\n        break\n    }\n  }\n\n  const selectOption = (value: string) => {\n    let updatedSelection\n    if (multi) {\n      if (field.value.includes(value) && Array.isArray(field.value)) {\n        updatedSelection = field.value.filter(li => li !== value)\n      } else {\n        updatedSelection = [...field.value, value]\n      }\n    } else {\n      updatedSelection = value\n      setIsOpen(false)\n      setHoveredOptionIndex(null)\n      setFieldValue(`search-${name}`, optionsLabelById[updatedSelection], false)\n    }\n    setFieldValue(name, updatedSelection)\n  }\n\n  const openField = () => {\n    /* istanbul ignore next */\n    if (!isOpen) {\n      setIsOpen(true)\n    }\n    setFieldTouched(name, true)\n  }\n\n  const toggleField = () => {\n    if (isOpen) {\n      setIsOpen(false)\n      setFieldValue(`search-${name}`, '', false)\n    } else {\n      setIsOpen(true)\n    }\n    setFieldTouched(name, true)\n  }\n\n  const placeholderDisplay = Array.isArray(field.value)\n    ? placeholder ??\n      (field.value.length > 1 && pluralLabel ? pluralLabel : label)\n    : placeholder ?? optionsLabelById[field.value]\n\n  return (\n    <FieldLayout\n      className={className}\n      error={meta.error}\n      hideFooter={!hideTags && hideFooter}\n      isOptional={isOptional}\n      label={label}\n      name={`search-${name}`}\n      showError={meta.touched && !!meta.error}\n      smallLabel={smallLabel}\n      inline={inline}\n      description={description}\n    >\n      <div\n        className={cx(styles['multi-select-autocomplete-container'], className)}\n        onKeyDown={handleKeyDown}\n        ref={containerRef}\n      >\n        <BaseInput\n          {...(hoveredOptionIndex !== null && {\n            'aria-activedescendant': `option-display-${filteredOptions[hoveredOptionIndex]?.value}`,\n          })}\n          onFocus={openField}\n          placeholder={getLabelString(placeholderDisplay)}\n          style={{\n            paddingLeft: multi && field.value.length > 0 ? '2.2rem' : '1rem',\n          }}\n          className={styles['multi-select-autocomplete-placeholder-input']}\n          hasError={searchMeta.touched && !!meta.error}\n          type=\"text\"\n          disabled={disabled}\n          {...searchField}\n          aria-autocomplete=\"list\"\n          aria-controls={`list-${name}`}\n          aria-describedby={`help-${name}`}\n          aria-expanded={isOpen}\n          aria-haspopup=\"listbox\"\n          role=\"combobox\"\n        />\n        <div\n          aria-live=\"polite\"\n          aria-relevant=\"text\"\n          className={styles['visually-hidden']}\n          id={`help-${name}`}\n        >\n          {multi && `${field.value.length} options s√©lectionn√©es`}\n          {!multi &&\n            !Array.isArray(field.value) &&\n            field.value !== '' &&\n            `Option s√©lectionn√©e : ${optionsLabelById[field.value]}`}\n          {isOpen\n            ? `${filteredOptions.length} options ${\n                searchField.value === ''\n                  ? 'disponibles'\n                  : 'correspondant au texte saisi'\n              }`\n            : 'saisissez du texte pour afficher et filtrer les options'}\n        </div>\n        <select\n          hidden\n          {...(multi && { multiple: true })}\n          {...field}\n          value={field.value || ''}\n          data-testid=\"select\"\n        >\n          {options?.map(({ label, value }) => (\n            <option key={`option-${value}`} value={value}>\n              {label}\n            </option>\n          ))}\n        </select>\n        <div className={styles['field-overlay']}>\n          {!hideArrow && (\n            <Toggle\n              disabled={disabled}\n              isOpen={isOpen}\n              toggleField={toggleField}\n            />\n          )}\n          {multi && field.value.length > 0 && (\n            <div onClick={toggleField} className={styles['pellet']}>\n              {field.value.length}\n            </div>\n          )}\n          {isOpen && (\n            <OptionsList\n              className={className}\n              fieldName={name}\n              selectedValues={field.value}\n              filteredOptions={filteredOptions}\n              setHoveredOptionIndex={setHoveredOptionIndex}\n              listRef={listRef}\n              hoveredOptionIndex={hoveredOptionIndex}\n              selectOption={selectOption}\n              multi={multi}\n            />\n          )}\n        </div>\n      </div>\n      {Array.isArray(field.value) && !hideTags && field.value.length > 0 && (\n        <Tags\n          disabled={disabled}\n          fieldName={name}\n          optionsLabelById={optionsLabelById}\n          selectedOptions={field.value}\n          removeOption={selectOption}\n        />\n      )}\n    </FieldLayout>\n  )\n}\n\nexport default SelectAutocomplete\n"],"names":["normalizeStr","str","getNormalizedMatches","pattern","option","word","patternWord","searchPatternInOptions","options","matchingOptions","opt1","opt2","OptionsList","className","fieldName","selectedValues","filteredOptions","setHoveredOptionIndex","listRef","hoveredOptionIndex","selectOption","multi","jsxs","cx","styles","jsx","value","label","index","isSelected","BaseCheckbox","baseCheckboxStyles","Tags","disabled","optionsLabelById","selectedOptions","removeOption","Tag","Toggle","isOpen","toggleField","SvgIcon","strokeDownIcon","SelectAutocomplete","name","hideArrow","hideFooter","hideTags","inline","isOptional","placeholder","pluralLabel","smallLabel","resetOnOpen","description","onSearch","searchInOptions","options2","setFieldTouched","setFieldValue","useFormikContext","field","meta","useField","searchField","searchMeta","useState","setOptionsLabelById","containerRef","useRef","setIsOpen","setFilteredOptions","useEffect","optionsById","handleClickOutside","e","_a","handleKeyDown","event","_b","openField","_c","updatedSelection","li","placeholderDisplay","FieldLayout","BaseInput","getLabelString","label2","SelectAutocomplete$1"],"mappings":"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"}