import{j as e}from"./jsx-runtime-CfatFE5O.js";import{u as M,F as R}from"./formik.esm-DyanDbCL.js";import{r as h}from"./index-ClcD9ViR.js";import{B as T}from"./BaseInput-CgeMAOOV.js";import{F as k}from"./FieldError-DblMbt5C.js";import{c as q}from"./index-DeARc5FM.js";import{f as D}from"./full-right-Dd3YsyCq.js";import{S as H}from"./SvgIcon-CUWb-Ez8.js";import{p as G,a as W}from"./parseAndValidateFrenchPhoneNumber-Erjmsd8U.js";import"./_commonjsHelpers-Cpj98o6Y.js";import"./stroke-error-DSZD431a.js";const f={"select-input-wrapper":"_select-input-wrapper_1purt_1","select-input":"_select-input_1purt_1","select-input-icon":"_select-input-icon_1purt_17","select-input-icon-disabled":"_select-input-icon-disabled_1purt_96","select-input-placeholder":"_select-input-placeholder_1purt_99"},C=({disabled:t,options:o,className:s,value:i,onChange:p})=>e.jsxs("div",{className:q(f["select-input-wrapper"],s),children:[e.jsx(H,{src:D,alt:"",className:q(f["select-input-icon"],{[f["select-input-icon-disabled"]]:t}),width:"16"}),e.jsx("select",{className:f["select-input"],id:"countryCode",disabled:t,value:i,onChange:p,autoComplete:"tel-country-code",children:o.map(u=>e.jsx("option",{value:u.value,label:u.label,children:u.label},u.value))})]});try{C.displayName="CountryCodeSelect",C.__docgenInfo={description:"",displayName:"CountryCodeSelect",props:{disabled:{defaultValue:null,description:"",name:"disabled",required:!0,type:{name:"boolean"}},options:{defaultValue:null,description:"",name:"options",required:!0,type:{name:"PhoneCodeSelectOption[]"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},value:{defaultValue:null,description:"",name:"value",required:!0,type:{name:"string"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!0,type:{name:"(event: ChangeEvent<HTMLSelectElement>) => void"}}}}}catch{}const v=[{label:"+33",value:"FR"},{label:"+262",value:"RE"},{label:"+508",value:"PM"},{label:"+590",value:"GP"},{label:"+594",value:"GF"},{label:"+596",value:"MQ"},{label:"+687",value:"NC"}],U={FR:"6 12 34 56 78",RE:"692 12 34 56",PM:"55 12 34",GP:"690 00 01 02",GF:"694 00 01 02",MQ:"696 00 01 02",NC:"75 12 34"},l={"select-input-wrapper":"_select-input-wrapper_1umh7_1","select-input":"_select-input_1umh7_1","select-input-icon":"_select-input-icon_1umh7_17","select-input-icon-disabled":"_select-input-icon-disabled_1umh7_96","select-input-placeholder":"_select-input-placeholder_1umh7_99","phone-number":"_phone-number_1umh7_106","phone-number-input":"_phone-number-input_1umh7_110","phone-number-input-wrapper":"_phone-number-input-wrapper_1umh7_116","phone-number-input-legend":"_phone-number-input-legend_1umh7_120","phone-number-input-footer":"_phone-number-input-footer_1umh7_125","phone-number-input-error":"_phone-number-input-error_1umh7_131","country-code-select":"_country-code-select_1umh7_138","visually-hidden":"_visually-hidden_1umh7_144","phone-format":"_phone-format_1umh7_156","phone-number-inpus":"_phone-number-inpus_1umh7_164"},E={inputValue:"",countryCode:"FR"},Q=t=>{var s;if(!t)return E;const o=G(t);if(o.number){const i=(s=v.find(p=>p.label===`+${o.countryCallingCode}`))==null?void 0:s.value;return{inputValue:o.nationalNumber,countryCode:i}}return E},V=({name:t,label:o,disabled:s,isOptional:i=!1,maxLength:p=25})=>{const[u,d,r]=M({name:t}),x=h.useId(),[m,P]=h.useState(v[0].value),[y,g]=h.useState(""),N=async(n,a)=>{const c=W(n,a);return c&&await r.setValue(c.number,!1),g(n),i&&n===""?(await r.setValue(""),r.setError(void 0),n):!c||!c.isValid()?(i&&await r.setValue(n),r.setError("Veuillez renseigner un numéro de téléphone valide, exemple : 612345678"),n):(r.setError(void 0),c.nationalNumber)},S=async n=>{const a=n.target.value;await N(a,m)},O=async n=>{const a=n.target.value;P(a),y&&await N(y,a)},B=async n=>{d.touched||await r.setTouched(!0,!1);const a=await N(n.target.value,m);g(a)};return h.useEffect(()=>{try{const{inputValue:n,countryCode:a}=Q(u.value);P(a),g(n)}catch(n){r.setError(n)}},[u.value]),e.jsxs("fieldset",{className:l["phone-number-input-wrapper"],children:[e.jsxs("legend",{className:l["phone-number-input-legend"],children:[o," ",!i&&"*"]}),e.jsxs("p",{className:l["phone-format"],id:x,children:["Par exemple : ",U[m]]}),e.jsxs("div",{className:l["phone-number-inpus"],children:[e.jsx("label",{htmlFor:"countryCode",className:l["visually-hidden"],children:"Indicatif téléphonique"}),e.jsx(C,{disabled:!!s,options:v,className:l["country-code-select"],value:m,onChange:O}),e.jsx("label",{htmlFor:t,className:l["visually-hidden"],children:"Numéro de téléphone"}),e.jsx(T,{disabled:s,hasError:d.touched&&!!d.error,type:"text",name:t,value:y,onChange:S,className:l["phone-number-input"],onBlur:B,autoComplete:"tel-national",maxLength:p,"aria-describedby":x}),d.error&&d.touched&&e.jsx("div",{className:l["phone-number-input-footer"],children:e.jsx("div",{className:l["phone-number-input-error"],children:e.jsx(k,{name:t,children:d.error})})})]})]})};try{V.displayName="PhoneNumberInput",V.__docgenInfo={description:`The PhoneNumberInput component allows users to input and validate a phone number.
It integrates with Formik for form state management and supports country code selection.

---
**Important: Avoid using placeholders to indicate phone number format.**
Instead, use labels or helper text to ensure accessibility and clarity for all users.
---`,displayName:"PhoneNumberInput",props:{label:{defaultValue:null,description:"",name:"label",required:!0,type:{name:"string | Element"}},name:{defaultValue:null,description:"",name:"name",required:!0,type:{name:"string"}},description:{defaultValue:null,description:"",name:"description",required:!1,type:{name:"string"}},maxLength:{defaultValue:{value:"25"},description:"Maximum length for the phone number input.",name:"maxLength",required:!1,type:{name:"number"}},isLabelHidden:{defaultValue:null,description:`A flag to hide the label.
To be used with caution, as it can affect accessibility.
Do not use it if the label is mandatory, placeholder is not
a substitute for a label.`,name:"isLabelHidden",required:!1,type:{name:"boolean"}},hasLabelLineBreak:{defaultValue:null,description:"",name:"hasLabelLineBreak",required:!1,type:{name:"boolean"}},isOptional:{defaultValue:{value:"false"},description:`A flag to indicate that the field is optional.
It will display an asterisk next to the label.`,name:"isOptional",required:!1,type:{name:"boolean"}},hideAsterisk:{defaultValue:null,description:`Can be false only when it's the only field in a form and it's mandatory,
or when all fields are mandatory and the form indicates that all fields are mandatory`,name:"hideAsterisk",required:!1,type:{name:"boolean"}},className:{defaultValue:null,description:`A custom class for the field layout,
where label, description, input, and footer are displayed.`,name:"className",required:!1,type:{name:"string"}},classNameLabel:{defaultValue:null,description:"",name:"classNameLabel",required:!1,type:{name:"string"}},classNameFooter:{defaultValue:null,description:`A custom class for the footer,
where errors and character count are displayed.`,name:"classNameFooter",required:!1,type:{name:"string"}},classNameInput:{defaultValue:null,description:"",name:"classNameInput",required:!1,type:{name:"string"}},filterVariant:{defaultValue:null,description:"",name:"filterVariant",required:!1,type:{name:"boolean"}},smallLabel:{defaultValue:null,description:"A flag to display a smaller label.",name:"smallLabel",required:!1,type:{name:"boolean"}},inline:{defaultValue:null,description:"",name:"inline",required:!1,type:{name:"boolean"}},clearButtonProps:{defaultValue:null,description:"",name:"clearButtonProps",required:!1,type:{name:'(ButtonHTMLAttributes<HTMLButtonElement> & { tooltip: string; display?: "clear" | "close"; })'}},ErrorDetails:{defaultValue:null,description:"",name:"ErrorDetails",required:!1,type:{name:"ReactNode"}},disabled:{defaultValue:null,description:"Whether the phone number input is disabled.",name:"disabled",required:!1,type:{name:"boolean"}}}}}catch{}const le={title:"ui-kit/forms/PhoneNumberInput",component:V,decorators:[t=>e.jsx(R,{initialValues:{phone:""},onSubmit:()=>{},children:e.jsx(t,{})})]},b={args:{name:"phone",label:"Custom label for my required field"}},_={args:{name:"phone",label:"Phone number input optional",isOptional:!0}};var w,I,j;b.parameters={...b.parameters,docs:{...(w=b.parameters)==null?void 0:w.docs,source:{originalSource:`{
  args: {
    name: 'phone',
    label: 'Custom label for my required field'
  }
}`,...(j=(I=b.parameters)==null?void 0:I.docs)==null?void 0:j.source}}};var L,F,A;_.parameters={..._.parameters,docs:{...(L=_.parameters)==null?void 0:L.docs,source:{originalSource:`{
  args: {
    name: 'phone',
    label: 'Phone number input optional',
    isOptional: true
  }
}`,...(A=(F=_.parameters)==null?void 0:F.docs)==null?void 0:A.source}}};const re=["Default","WithOptional"];export{b as Default,_ as WithOptional,re as __namedExportsOrder,le as default};
