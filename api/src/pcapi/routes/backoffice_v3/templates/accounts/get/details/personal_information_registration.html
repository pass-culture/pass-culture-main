{% import "components/public_accounts/registration_steps.html" as macro with context %}
{% set builded_steps = [] %}
{% for step in tunnel.steps %}
  {% set _ = builded_steps.append(macro.build_step('step-' + step.step_id|string, step.description, step.subscription_item_status, step.icon, step.status)) %}
{% endfor %}
<h3>Revue(s) manuelle(s)</h3>
{% for review in user.beneficiaryFraudReviews %}

<table class="table" style="border-style: solid; border-width:1px;">
    <tr>
        <th scope="row">Auteur</th>
        <td>{{ review.author.full_name }}</td>
    </tr>

    <tr>
        <th scope="row">Etat</th>
        <td>{{ review.review.value }}</td>
    </tr>
    <tr>
        <th scope="row">Date de création</th>
        <td>{{ review.dateReviewed.strftime('le %d/%m/%Y à %H:%M:%S') }}</td>
    </tr>
    <tr>
        <th scope="row">Explication</th>
        <td>{{ review.reason | safe }}</td>
    </tr>
    <tr>
        <th scope="row">Éligibilité</th>
        <td>{{ review.eligibilityType }}</td>
    </tr>
</table>
{% endfor %}
{% call macro.build_registration_steps(tunnel, builded_steps) %}
  <div class="col-6 form-check form-switch m-3 form-switch-show-all-steps">
    {% set switch_boolean_field_id = random_hash() %}
    <input class="form-check-input"
           type="checkbox"
           role="switch"
           name="show_all_steps"
           id="{{ switch_boolean_field_id }}" />
    <label role="button"
           class="form-check-label pc-switch-boolean-field-label pt-1"
           for="{{ switch_boolean_field_id }}">Voir tout</label>
  </div>
  {% for step in tunnel.steps %}
    {% call macro.build_step_content(step) %}
      {{ macro.build_idcheck_histories(step.id_check_histories) }}
    {% endcall %}
  {% endfor %}
  <div class="row all-id-check-history-container d-none">
    <div class="col-md-12 well text-center">{{ macro.build_idcheck_histories(id_check_histories_desc) }}</div>
  </div>
{% endcall %}
