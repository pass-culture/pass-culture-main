<div class="form-floating {{ field.name }}-container">
    <select
        multiple
        class="form-select pc-select-autocomplete"
        id="{{ field.name }}"
        name="{{ field.name }}"
        size="2"
        style="border-radius: 1rem!important;"></select>
    <label class="pc-select-label" for="{{ field.name }}" id="{{ field.name }}-label"> {{ field.label }}</label>
</div>

{% block scripts %}
    <script>
    PcUtils.addLoadEvent(() => {
      new PcTomSelectMultipleFieldAutocomplete({
        autoCompleteUrl: '{{ field.autocomplete_url }}',
        tomSelectSelector: '#{{ field.name }}',
        tomSelectOptions: {
          {% if field.choices %}
            options: [
              {% for choice_value, choice_label in field.choices %}
                {id: '{{ choice_value }}', text: '{{ choice_label }}'},
              {% endfor %}
            ],
            items: [{% for choice_value, _ in field.choices %}'{{ choice_value }}',{% endfor %}],
          {% endif %}
        }
      })
      new PcSelectMultipleField({
        $container: document.querySelector('.{{ field.name }}-container'),
      })
    })
    </script>
{% endblock %}
