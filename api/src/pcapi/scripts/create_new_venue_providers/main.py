"""
Job console documentation here: https://www.notion.so/passcultureapp/Documentation-Job-Console-769beeacd5a146de9c97b6f8ee544276
Assumed path to the script (copy-paste in github actions):

https://github.com/pass-culture/pass-culture-main/blob/tcoudray-pass/PC-36741-create-venue-providers/api/src/pcapi/scripts/create_new_venue_providers/main.py

"""

import argparse
import logging

from pcapi.app import app
from pcapi.core.providers import models as providers_models
from pcapi.models import db


logger = logging.getLogger(__name__)

VENUE_ID_PROVIDER_ID_PAIRS = [
    (29505, 2141),
    (29507, 2141),
    (29508, 2141),
    (23486, 2141),
    (29500, 2141),
    (29504, 2141),
    (19874, 2141),
    (19873, 2141),
    (19875, 2141),
    (115626, 2141),
    (15436, 2141),
    (33724, 2141),
    (141330, 2141),
    (51695, 2141),
    (9, 2141),
    (46515, 2141),
    (22813, 2141),
    (12107, 2141),
    (29901, 2141),
    (16943, 2141),
    (15477, 2141),
    (30304, 2141),
    (37364, 2141),
    (19023, 2141),
    (33072, 2141),
    (52132, 2141),
    (15606, 2141),
    (9503, 2141),
    (52128, 2141),
    (24701, 2141),
    (2276, 2141),
    (27, 2141),
    (2630, 2141),
    (50175, 2141),
    (28777, 2141),
    (35433, 2141),
    (42540, 2141),
    (43627, 2141),
    (27529, 2141),
    (103763, 2141),
    (44177, 2141),
    (43669, 2141),
    (42537, 2141),
    (43677, 2141),
    (44178, 2141),
    (44174, 2141),
    (27527, 2141),
    (42529, 2141),
    (42530, 2141),
    (42536, 2141),
    (42542, 2141),
    (42544, 2141),
    (42545, 2141),
    (43633, 2141),
    (43636, 2141),
    (43641, 2141),
    (43646, 2141),
    (43648, 2141),
    (43657, 2141),
    (43663, 2141),
    (43674, 2141),
    (88235, 2141),
    (44606, 2141),
    (23209, 2141),
    (23210, 2141),
    (23202, 2141),
    (30465, 2141),
    (23208, 2141),
    (107268, 2141),
    (108974, 2141),
    (97155, 2141),
    (148683, 2141),
    (150191, 2141),
    (23181, 2141),
    (23186, 2141),
    (145771, 2141),
    (29125, 2141),
    (28699, 2141),
    (29120, 2141),
    (29123, 2141),
    (41581, 2141),
    (19134, 2141),
    (2816, 2141),
    (16367, 2141),
    (17801, 2141),
    (22965, 2141),
    (2614, 2141),
    (2613, 2141),
    (36781, 2141),
    (29303, 2141),
    (25683, 2141),
    (27976, 2141),
    (22763, 2141),
    (6574, 2141),
    (10289, 2141),
    (2912, 2141),
    (31052, 2141),
    (2039, 2141),
    (33785, 2141),
    (46845, 2141),
    (15933, 2141),
    (20783, 2141),
    (19590, 2141),
    (62496, 2141),
    (22678, 2141),
    (15278, 2141),
    (33904, 2141),
    (13610, 2141),
    (24536, 2141),
    (138628, 2141),
    (16992, 2141),
    (33488, 2141),
    (24302, 2141),
    (28529, 2141),
    (14346, 2141),
    (6005, 2141),
    (24453, 2141),
    (36063, 2141),
    (28437, 2141),
    (50619, 2141),
    (50606, 2141),
    (15109, 2141),
    (50596, 2141),
    (50597, 2141),
    (50598, 2141),
    (50599, 2141),
    (50600, 2141),
    (50601, 2141),
    (50602, 2141),
    (50603, 2141),
    (50604, 2141),
    (50605, 2141),
    (50607, 2141),
    (50608, 2141),
    (50609, 2141),
    (50610, 2141),
    (50611, 2141),
    (50612, 2141),
    (50613, 2141),
    (50614, 2141),
    (50615, 2141),
    (50616, 2141),
    (50617, 2141),
    (50618, 2141),
    (50620, 2141),
    (50621, 2141),
    (50622, 2141),
    (50623, 2141),
    (22470, 2141),
    (15470, 2141),
    (59480, 2141),
    (74084, 2141),
    (17420, 2141),
    (38810, 2141),
    (46008, 2141),
    (28118, 2141),
    (9233, 2141),
    (9232, 2141),
    (35444, 2141),
    (4984, 2141),
    (33790, 2141),
    (4522, 2141),
    (5015, 2141),
    (4705, 2141),
    (20450, 2141),
    (17272, 2141),
    (27078, 2141),
    (12505, 2141),
    (19245, 2141),
    (74325, 2141),
    (33985, 2141),
    (22294, 2141),
    (17817, 2141),
    (60817, 2141),
    (34123, 2141),
    (51180, 2141),
    (24705, 2141),
    (43923, 2141),
    (31409, 2141),
    (44306, 2141),
    (44305, 2141),
    (51566, 2141),
    (33902, 2141),
    (26954, 2141),
    (23238, 2141),
    (21494, 2141),
    (26235, 2141),
    (26806, 2141),
    (135054, 2141),
    (134708, 2141),
    (75235, 2141),
    (30521, 2141),
    (19659, 2141),
    (52553, 2141),
    (58115, 2141),
    (88097, 2141),
    (89055, 2141),
    (6021, 2141),
    (50233, 2139),
    (43191, 2139),
    (73855, 2139),
    (27489, 2139),
    (104162, 2139),
    (22320, 2139),
    (60214, 2139),
    (45244, 2139),
    (30580, 2139),
    (42447, 2139),
    (90617, 2139),
    (19860, 2139),
    (15556, 2139),
    (48940, 2139),
    (28015, 2139),
    (29036, 2139),
    (21204, 2139),
    (17582, 2139),
    (52725, 2139),
    (29697, 2139),
    (2079, 2139),
    (17425, 2139),
    (63296, 2139),
    (75675, 2139),
    (10488, 2139),
    (16417, 2139),
    (9026, 2139),
    (27000, 2139),
    (26399, 2139),
    (16032, 2139),
    (59733, 2139),
    (9053, 2139),
    (91193, 2139),
    (17800, 2139),
    (15942, 2139),
    (74509, 2139),
    (20776, 2139),
    (17393, 2139),
    (8490, 2139),
    (27004, 2139),
    (50930, 2139),
    (42345, 2139),
    (42997, 2139),
    (43878, 2139),
    (17234, 2139),
    (79275, 2139),
    (21767, 2139),
    (65849, 2139),
    (23181, 2139),
    (17653, 2139),
    (11979, 2139),
    (21647, 2139),
    (17603, 2139),
    (19617, 2139),
    (30020, 2139),
    (63698, 2139),
    (59220, 2139),
    (58131, 2139),
    (59935, 2139),
    (37790, 2139),
    (100912, 2139),
    (9058, 2139),
    (21013, 2139),
    (15289, 2139),
    (19746, 2139),
    (9042, 2139),
    (56723, 2139),
    (145771, 2139),
    (32633, 2139),
    (26831, 2139),
    (11002, 2139),
    (41491, 2139),
    (22104, 2139),
    (123864, 2139),
    (49936, 2139),
    (10778, 2139),
    (19774, 2139),
    (55798, 2139),
    (17041, 2139),
    (9147, 2139),
    (13177, 2139),
    (97292, 2139),
    (13990, 2139),
    (49335, 2139),
    (22089, 2139),
    (82675, 2139),
    (14196, 2139),
    (102786, 2139),
    (26404, 2139),
    (16455, 2139),
    (12142, 2139),
    (4674, 2139),
    (24756, 2139),
    (17447, 2139),
    (4818, 2139),
    (74985, 2139),
    (31255, 2139),
    (18415, 2139),
    (30256, 2139),
    (39090, 2139),
    (64051, 2139),
    (14307, 2139),
    (13029, 2139),
    (43733, 2139),
    (20436, 2139),
    (29442, 2139),
    (147012, 2139),
    (30007, 2139),
    (28821, 2139),
    (35166, 2139),
    (26223, 2139),
    (71880, 2139),
    (8717, 2139),
    (16345, 2139),
    (19436, 2139),
    (53764, 2139),
    (140261, 2139),
    (24861, 2139),
    (19453, 2139),
    (24856, 2139),
    (2396, 2139),
    (20351, 2139),
    (94509, 2139),
    (6150, 2139),
    (13412, 2139),
    (17693, 2139),
    (9212, 2139),
    (21470, 2139),
    (17247, 2139),
    (36102, 2139),
    (48570, 2139),
    (18561, 2139),
    (112983, 2139),
    (1383, 2139),
    (21010, 2139),
    (68810, 2139),
    (32043, 2139),
    (11450, 2139),
    (41457, 2139),
    (126542, 2139),
    (27366, 2139),
    (78577, 2139),
    (2013, 2139),
    (9460, 2139),
    (23208, 2139),
    (16301, 2139),
    (42339, 2139),
    (30964, 2139),
    (19405, 2139),
    (6279, 2139),
    (66779, 2139),
    (85121, 2139),
    (68449, 2139),
    (15322, 2139),
    (30206, 2139),
    (20158, 2139),
    (16604, 2139),
    (21664, 2139),
    (5270, 2139),
    (32870, 2139),
    (21994, 2139),
    (12436, 2139),
    (21720, 2139),
    (40235, 2139),
    (57328, 2139),
    (38225, 2139),
    (4158, 2139),
    (64655, 2139),
    (20040, 2139),
    (16334, 2139),
    (3165, 2139),
    (25520, 2139),
    (49101, 2139),
    (21931, 2139),
    (79305, 2139),
    (65991, 2139),
    (127499, 2139),
    (33749, 2139),
    (57897, 2139),
    (47923, 2139),
    (1686, 2139),
    (13609, 2139),
    (5373, 2139),
    (142377, 2139),
    (33600, 2139),
    (31098, 2139),
    (127995, 2139),
    (12699, 2139),
    (13773, 2139),
    (60167, 2139),
    (16834, 2139),
    (76211, 2139),
    (95127, 2139),
    (19861, 2139),
    (24906, 2139),
    (16548, 2139),
    (19526, 2139),
    (20527, 2139),
    (52843, 2139),
    (50740, 2139),
    (84876, 2139),
    (77688, 2139),
    (211, 2139),
    (26273, 2139),
    (21773, 2139),
    (72854, 2139),
    (21665, 2139),
    (15377, 2139),
    (54420, 2139),
    (87453, 2139),
    (39110, 2139),
    (8282, 2139),
    (15912, 2139),
    (2423, 2139),
    (16929, 2139),
    (27737, 2139),
    (15527, 2139),
    (105139, 2139),
    (16799, 2139),
    (109301, 2139),
    (24835, 2139),
    (24836, 2139),
    (27550, 2139),
    (50238, 2139),
    (149834, 2139),
    (55810, 2139),
    (41701, 2139),
    (54516, 2139),
    (20377, 2139),
    (20728, 2139),
    (16908, 2139),
    (26393, 2139),
    (90634, 2139),
    (141901, 2139),
    (8281, 2139),
    (1381, 2139),
    (85845, 2139),
    (69479, 2139),
    (50829, 2139),
    (74286, 2139),
    (19991, 2139),
    (18126, 2139),
    (18493, 2139),
    (13416, 2139),
    (17882, 2139),
    (28995, 2139),
    (8732, 2139),
    (38199, 2139),
    (9050, 2139),
    (6009, 2139),
    (16411, 2139),
    (29336, 2139),
    (18497, 2139),
    (13204, 2139),
    (9224, 2139),
    (72933, 2139),
    (24874, 2139),
    (18628, 2139),
    (29790, 2139),
    (81121, 2139),
    (42613, 2139),
    (41351, 2139),
    (133748, 2139),
    (105713, 2139),
    (9045, 2139),
    (28501, 2139),
    (103400, 2139),
    (103841, 2139),
    (37863, 2139),
    (72318, 2139),
    (69933, 2139),
    (40623, 2139),
    (16655, 2139),
    (41387, 2139),
    (35476, 2139),
    (142297, 2139),
    (27750, 2139),
    (150063, 2139),
    (149520, 2139),
    (59410, 2139),
    (64097, 2139),
    (45050, 2139),
    (8044, 2139),
    (29456, 2139),
    (19441, 2139),
    (59242, 2139),
    (13384, 2139),
    (19595, 2139),
    (16405, 2139),
    (25550, 2139),
    (26718, 2139),
    (69484, 2139),
    (24854, 2139),
    (16676, 2139),
    (10717, 2139),
    (35756, 2139),
    (78793, 2139),
    (4230, 2139),
    (16562, 2139),
    (17662, 2139),
    (16406, 2139),
    (15544, 2139),
    (22205, 2139),
    (36930, 2139),
    (24971, 2139),
    (46350, 2139),
    (30905, 2139),
    (66651, 2139),
    (13400, 2139),
    (16404, 2139),
    (18387, 2139),
    (58202, 2139),
    (26435, 2139),
    (4795, 2139),
    (91253, 2139),
    (72248, 2139),
    (17389, 2139),
    (2784, 2139),
    (19732, 2139),
    (83228, 2139),
    (124720, 2139),
    (18510, 2139),
    (49291, 2139),
    (26685, 2139),
    (52774, 2139),
    (62325, 2139),
    (24838, 2139),
    (15714, 2139),
    (76245, 2139),
    (13897, 2139),
    (16570, 2139),
    (16788, 2139),
    (16093, 2139),
    (22383, 2139),
    (9046, 2139),
    (121530, 2139),
    (4393, 2139),
    (30173, 2139),
    (35443, 2139),
    (13375, 2139),
    (52887, 2139),
    (135952, 2139),
    (58143, 2139),
    (73325, 2139),
    (31355, 2139),
    (27240, 2139),
    (101244, 2139),
    (28447, 2139),
    (28493, 2139),
    (17707, 2139),
    (39085, 2139),
    (99344, 2139),
    (9048, 2139),
    (13401, 2139),
    (19157, 2139),
    (24832, 2139),
    (14076, 2139),
    (17081, 2139),
    (5570, 2139),
    (1539, 2139),
    (21704, 2139),
    (16801, 2139),
    (17275, 2139),
    (93029, 2139),
    (56585, 2139),
    (53623, 2139),
    (15383, 2139),
    (16729, 2139),
    (5829, 2139),
    (17423, 2139),
    (13396, 2139),
    (23120, 2139),
    (124823, 2139),
    (1155, 2139),
    (24495, 2139),
    (21373, 2139),
    (139222, 2139),
    (2866, 2139),
    (62756, 2139),
    (103082, 2139),
    (8979, 2139),
    (36342, 2139),
    (20534, 2139),
    (49104, 2139),
    (27519, 2139),
    (53768, 2139),
    (19108, 2139),
    (34932, 2139),
    (27002, 2139),
    (16836, 2139),
    (108955, 2139),
    (22833, 2139),
    (31979, 2139),
    (19434, 2139),
    (15405, 2139),
    (19261, 2139),
    (73378, 2139),
    (12950, 2139),
    (97155, 2139),
    (9052, 2139),
    (61140, 2139),
    (15651, 2139),
    (57877, 2139),
    (13467, 2139),
    (115109, 2139),
    (19203, 2139),
    (15398, 2139),
    (16200, 2139),
    (20765, 2139),
    (59631, 2139),
    (63750, 2139),
    (28527, 2139),
    (16832, 2139),
    (3345, 2139),
    (115767, 2139),
    (15518, 2139),
    (20883, 2139),
    (28440, 2139),
    (30576, 2139),
    (22937, 2139),
    (75993, 2139),
    (15252, 2139),
    (32884, 2139),
    (15070, 2139),
    (17083, 2139),
    (3202, 2139),
    (62973, 2139),
    (21975, 2139),
    (19666, 2139),
    (923, 2139),
    (51583, 2139),
    (21079, 2139),
    (109420, 2139),
    (35181, 2139),
    (8736, 2139),
    (22233, 2139),
    (21147, 2139),
    (13414, 2139),
    (104958, 2139),
    (22915, 2139),
    (74553, 2139),
    (75823, 2139),
    (16911, 2139),
    (42236, 2139),
    (105835, 2139),
    (56743, 2139),
    (17566, 2139),
    (57909, 2139),
    (63874, 2139),
    (23291, 2139),
    (18792, 2139),
    (15567, 2139),
    (68375, 2139),
    (18234, 2139),
    (9251, 2139),
    (47502, 2139),
    (18320, 2139),
    (27005, 2139),
    (17586, 2139),
    (16336, 2139),
    (45152, 2139),
    (62326, 2139),
    (150138, 2139),
    (19862, 2139),
    (18372, 2139),
    (24603, 2139),
    (105010, 2139),
    (29647, 2139),
    (3783, 2139),
    (147434, 2139),
    (45601, 2139),
    (28598, 2139),
    (64154, 2139),
    (258, 2139),
    (46815, 2139),
    (15112, 2139),
    (29234, 2139),
    (28603, 2139),
    (9143, 2139),
    (22347, 2139),
    (43407, 2139),
    (8981, 2139),
    (9060, 2139),
    (60177, 2139),
    (15382, 2139),
    (25972, 2139),
    (27543, 2139),
    (28981, 2139),
    (13409, 2139),
    (58200, 2139),
    (10033, 2139),
    (16849, 2139),
    (19729, 2139),
    (15265, 2139),
    (13407, 2139),
    (21026, 2139),
    (16203, 2139),
    (23675, 2139),
    (130608, 2139),
    (8735, 2139),
    (18370, 2139),
    (23557, 2139),
    (13418, 2139),
    (63495, 2139),
    (23116, 2139),
    (74084, 2139),
    (17114, 2139),
    (12970, 2139),
    (21895, 2139),
    (52203, 2139),
    (15431, 2139),
    (19653, 2139),
    (29430, 2139),
    (15510, 2139),
    (20192, 2139),
    (74033, 2139),
    (39366, 2139),
    (30489, 2139),
    (20466, 2139),
    (18547, 2139),
    (57719, 2139),
    (38106, 2139),
    (18398, 2139),
    (8737, 2139),
    (83954, 2139),
]


def main() -> None:
    for pair in VENUE_ID_PROVIDER_ID_PAIRS:
        venue_id, provider_id = pair
        venue_provider = (
            db.session.query(providers_models.VenueProvider)
            .filter(
                providers_models.VenueProvider.providerId == provider_id,
                providers_models.VenueProvider.venueId == venue_id,
            )
            .one_or_none()
        )

        if not venue_provider:
            venue_provider = providers_models.VenueProvider(providerId=provider_id, venueId=venue_id)
            db.session.add(venue_provider)


if __name__ == "__main__":
    app.app_context().push()

    parser = argparse.ArgumentParser()
    parser.add_argument("--not-dry", action="store_true")
    args = parser.parse_args()

    main()

    if args.not_dry:
        logger.info("Finished")
        db.session.commit()
    else:
        logger.info("Finished dry run, rollback")
        db.session.rollback()
