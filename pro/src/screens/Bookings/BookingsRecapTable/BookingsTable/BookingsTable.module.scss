@use "styles/mixins/_rem.scss" as rem;
@use "styles/mixins/_fonts.scss" as fonts;
@use "styles/variables/_size.scss" as size;
@use "styles/mixins/_a11y.scss" as a11y;

// <div>
.table-wrapper {
  display: flex;
  flex-direction: column;
}

// <table>
.table {
  margin-bottom: rem.torem(10px);
}

// <thead>
.table-header {
  @include fonts.caption;
  @include a11y.visually-hidden;

  color: var(--color-black);
}

// <th>
.table-header-cell {
  @include fonts.caption;

  color: var(--color-black);
  padding: rem.torem(8px);
  white-space: nowrap;
}

// <tbody>
.table-body {
  border-bottom: rem.torem(1px) solid var(--color-grey-medium);

  // In mobile-view, it takes labels from "data-label" in order to construct Ã  left-column with that content
  td[data-label] {
    display: contents; // ignores <td> with [data-label], so their children can be used as grid items

    // ::before is the left column
    &::before {
      @include fonts.bold;

      grid-column: 1;
      font-style: italic;
      content: attr(data-label) " : ";
      margin: rem.torem(8px) rem.torem(8px) rem.torem(8px);
    }

    // any other container element (generally a <div> or a <span>) is the right column
    > div,
    > span {
      grid-column: 2;
      margin: rem.torem(8px);
    }

    // this item is a flex element: we don't want to distort it, so we'll vertically align its children instead
    > button {
      align-items: center;
      margin-left: rem.torem(8px);
      margin-right: auto;
    }
  }
}

// <tr>
.table-row {
  display: grid;
  grid-template-columns: auto 1fr;
  border-top: rem.torem(1px) solid var(--color-grey-medium);
  padding: rem.torem(16px) 0;

  &:first-child {
    margin-top: rem.torem(16px);
  }
}

// <td>
.table-cell {
  @include fonts.body;

  padding: rem.torem(8px);
}

.column-booking-id {
  min-width: rem.torem(60px);
  white-space: initial;
  word-break: break-word;
}

.column-offer-name {
  word-break: break-word;

  .offer-details-wrapper {
    display: flex;
    justify-content: flex-start;
    align-items: flex-start;

    svg {
      width: rem.torem(32px);
      height: rem.torem(32px);
      position: relative;
      top: rem.torem(-6px);
      margin-left: rem.torem(8px);
    }
  }
}

.column-collective-offer-name {
  word-break: break-word;
}

.column-beneficiary {
  word-break: break-word;
}

.column-institution {
  word-break: break-word;
}

.column-booking-token {
  word-break: break-word;
}

@media (min-width: size.$tablet) {
  // <thead>
  .table-header {
    @include a11y.visually-hidden-reset;
  }

  // <tbody>
  .table-body {
    td[data-label] {
      display: table-cell;

      &::before {
        display: none;
      }

      > div,
      > span {
        margin-left: 0;
      }
    }
  }

  // <tr>
  .table-row {
    display: table-row;
  }

  .column-offer-name {
    .offer-details-wrapper {
      justify-content: space-between;
      align-items: center;
    }
  }

  .details-content {
    padding: rem.torem(24px) rem.torem(16px) 0 rem.torem(16px);
  }
}

// <td>
.details-content {
  padding: 0;
  overflow: hidden;
}

.loader {
  padding: rem.torem(24px) rem.torem(16px);
  margin: auto;
}
